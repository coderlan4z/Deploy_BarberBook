function OA(t,n){for(var e=0;e<n.length;e++){const r=n[e];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Dg(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var e=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),e}var Xb={exports:{}},ef={},Yb={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=Symbol.for("react.element"),_A=Symbol.for("react.portal"),zA=Symbol.for("react.fragment"),FA=Symbol.for("react.strict_mode"),MA=Symbol.for("react.profiler"),LA=Symbol.for("react.provider"),PA=Symbol.for("react.context"),BA=Symbol.for("react.forward_ref"),VA=Symbol.for("react.suspense"),WA=Symbol.for("react.memo"),$A=Symbol.for("react.lazy"),n1=Symbol.iterator;function UA(t){return t===null||typeof t!="object"?null:(t=n1&&t[n1]||t["@@iterator"],typeof t=="function"?t:null)}var Qb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zb=Object.assign,Jb={};function zs(t,n,e){this.props=t,this.context=n,this.refs=Jb,this.updater=e||Qb}zs.prototype.isReactComponent={};zs.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ew(){}ew.prototype=zs.prototype;function Og(t,n,e){this.props=t,this.context=n,this.refs=Jb,this.updater=e||Qb}var _g=Og.prototype=new ew;_g.constructor=Og;Zb(_g,zs.prototype);_g.isPureReactComponent=!0;var r1=Array.isArray,tw=Object.prototype.hasOwnProperty,zg={current:null},nw={key:!0,ref:!0,__self:!0,__source:!0};function rw(t,n,e){var r,i={},o=null,a=null;if(n!=null)for(r in n.ref!==void 0&&(a=n.ref),n.key!==void 0&&(o=""+n.key),n)tw.call(n,r)&&!nw.hasOwnProperty(r)&&(i[r]=n[r]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Cl,type:t,key:o,ref:a,props:i,_owner:zg.current}}function jA(t,n){return{$$typeof:Cl,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function Fg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cl}function HA(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(e){return n[e]})}var i1=/\/+/g;function Ih(t,n){return typeof t=="object"&&t!==null&&t.key!=null?HA(""+t.key):n.toString(36)}function _c(t,n,e,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Cl:case _A:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ih(a,0):r,r1(i)?(e="",t!=null&&(e=t.replace(i1,"$&/")+"/"),_c(i,n,e,"",function(l){return l})):i!=null&&(Fg(i)&&(i=jA(i,e+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(i1,"$&/")+"/")+t)),n.push(i)),1;if(a=0,r=r===""?".":r+":",r1(t))for(var s=0;s<t.length;s++){o=t[s];var u=r+Ih(o,s);a+=_c(o,n,e,u,i)}else if(u=UA(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=r+Ih(o,s++),a+=_c(o,n,e,u,i);else if(o==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return a}function ec(t,n,e){if(t==null)return t;var r=[],i=0;return _c(t,r,"","",function(o){return n.call(e,o,i++)}),r}function GA(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(e){(t._status===0||t._status===-1)&&(t._status=1,t._result=e)},function(e){(t._status===0||t._status===-1)&&(t._status=2,t._result=e)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},zc={transition:null},qA={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:zc,ReactCurrentOwner:zg};Me.Children={map:ec,forEach:function(t,n,e){ec(t,function(){n.apply(this,arguments)},e)},count:function(t){var n=0;return ec(t,function(){n++}),n},toArray:function(t){return ec(t,function(n){return n})||[]},only:function(t){if(!Fg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=zs;Me.Fragment=zA;Me.Profiler=MA;Me.PureComponent=Og;Me.StrictMode=FA;Me.Suspense=VA;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;Me.cloneElement=function(t,n,e){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zb({},t.props),i=t.key,o=t.ref,a=t._owner;if(n!=null){if(n.ref!==void 0&&(o=n.ref,a=zg.current),n.key!==void 0&&(i=""+n.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in n)tw.call(n,u)&&!nw.hasOwnProperty(u)&&(r[u]=n[u]===void 0&&s!==void 0?s[u]:n[u])}var u=arguments.length-2;if(u===1)r.children=e;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Cl,type:t.type,key:i,ref:o,props:r,_owner:a}};Me.createContext=function(t){return t={$$typeof:PA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LA,_context:t},t.Consumer=t};Me.createElement=rw;Me.createFactory=function(t){var n=rw.bind(null,t);return n.type=t,n};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:BA,render:t}};Me.isValidElement=Fg;Me.lazy=function(t){return{$$typeof:$A,_payload:{_status:-1,_result:t},_init:GA}};Me.memo=function(t,n){return{$$typeof:WA,type:t,compare:n===void 0?null:n}};Me.startTransition=function(t){var n=zc.transition;zc.transition={};try{t()}finally{zc.transition=n}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(t,n){return bn.current.useCallback(t,n)};Me.useContext=function(t){return bn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};Me.useEffect=function(t,n){return bn.current.useEffect(t,n)};Me.useId=function(){return bn.current.useId()};Me.useImperativeHandle=function(t,n,e){return bn.current.useImperativeHandle(t,n,e)};Me.useInsertionEffect=function(t,n){return bn.current.useInsertionEffect(t,n)};Me.useLayoutEffect=function(t,n){return bn.current.useLayoutEffect(t,n)};Me.useMemo=function(t,n){return bn.current.useMemo(t,n)};Me.useReducer=function(t,n,e){return bn.current.useReducer(t,n,e)};Me.useRef=function(t){return bn.current.useRef(t)};Me.useState=function(t){return bn.current.useState(t)};Me.useSyncExternalStore=function(t,n,e){return bn.current.useSyncExternalStore(t,n,e)};Me.useTransition=function(){return bn.current.useTransition()};Me.version="18.2.0";Yb.exports=Me;var ie=Yb.exports;const bi=Kb(ie),KA=OA({__proto__:null,default:bi},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA=ie,YA=Symbol.for("react.element"),QA=Symbol.for("react.fragment"),ZA=Object.prototype.hasOwnProperty,JA=XA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eR={key:!0,ref:!0,__self:!0,__source:!0};function iw(t,n,e){var r,i={},o=null,a=null;e!==void 0&&(o=""+e),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(a=n.ref);for(r in n)ZA.call(n,r)&&!eR.hasOwnProperty(r)&&(i[r]=n[r]);if(t&&t.defaultProps)for(r in n=t.defaultProps,n)i[r]===void 0&&(i[r]=n[r]);return{$$typeof:YA,type:t,key:o,ref:a,props:i,_owner:JA.current}}ef.Fragment=QA;ef.jsx=iw;ef.jsxs=iw;Xb.exports=ef;var yt=Xb.exports,Ld={},ow={exports:{}},tr={},aw={exports:{}},sw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(O,V){var $=O.length;O.push(V);e:for(;0<$;){var K=$-1>>>1,Q=O[K];if(0<i(Q,V))O[K]=V,O[$]=Q,$=K;else break e}}function e(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var V=O[0],$=O.pop();if($!==V){O[0]=$;e:for(var K=0,Q=O.length,ee=Q>>>1;K<ee;){var ue=2*(K+1)-1,le=O[ue],te=ue+1,de=O[te];if(0>i(le,$))te<Q&&0>i(de,le)?(O[K]=de,O[te]=$,K=te):(O[K]=le,O[ue]=$,K=ue);else if(te<Q&&0>i(de,$))O[K]=de,O[te]=$,K=te;else break e}}return V}function i(O,V){var $=O.sortIndex-V.sortIndex;return $!==0?$:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,p=null,f=3,h=!1,d=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var V=e(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=O)r(l),V.sortIndex=V.expirationTime,n(u,V);else break;V=e(l)}}function b(O){if(m=!1,x(O),!d)if(e(u)!==null)d=!0,L(w);else{var V=e(l);V!==null&&U(b,V.startTime-O)}}function w(O,V){d=!1,m&&(m=!1,g(k),k=-1),h=!0;var $=f;try{for(x(V),p=e(u);p!==null&&(!(p.expirationTime>V)||O&&!T());){var K=p.callback;if(typeof K=="function"){p.callback=null,f=p.priorityLevel;var Q=K(p.expirationTime<=V);V=t.unstable_now(),typeof Q=="function"?p.callback=Q:p===e(u)&&r(u),x(V)}else r(u);p=e(u)}if(p!==null)var ee=!0;else{var ue=e(l);ue!==null&&U(b,ue.startTime-V),ee=!1}return ee}finally{p=null,f=$,h=!1}}var S=!1,C=null,k=-1,E=5,N=-1;function T(){return!(t.unstable_now()-N<E)}function A(){if(C!==null){var O=t.unstable_now();N=O;var V=!0;try{V=C(!0,O)}finally{V?_():(S=!1,C=null)}}else S=!1}var _;if(typeof y=="function")_=function(){y(A)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,W=M.port2;M.port1.onmessage=A,_=function(){W.postMessage(null)}}else _=function(){v(A,0)};function L(O){C=O,S||(S=!0,_())}function U(O,V){k=v(function(){O(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){d||h||(d=!0,L(w))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return e(u)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var $=f;f=V;try{return O()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var $=f;f=O;try{return V()}finally{f=$}},t.unstable_scheduleCallback=function(O,V,$){var K=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?K+$:K):$=K,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=$+Q,O={id:c++,callback:V,priorityLevel:O,startTime:$,expirationTime:Q,sortIndex:-1},$>K?(O.sortIndex=$,n(l,O),e(u)===null&&O===e(l)&&(m?(g(k),k=-1):m=!0,U(b,$-K))):(O.sortIndex=Q,n(u,O),d||h||(d=!0,L(w))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var V=f;return function(){var $=f;f=V;try{return O.apply(this,arguments)}finally{f=$}}}})(sw);aw.exports=sw;var tR=aw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=ie,Xn=tR;function J(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,e=1;e<arguments.length;e++)n+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lw=new Set,Vu={};function ha(t,n){ss(t,n),ss(t+"Capture",n)}function ss(t,n){for(Vu[t]=n,t=0;t<n.length;t++)lw.add(n[t])}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pd=Object.prototype.hasOwnProperty,nR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o1={},a1={};function rR(t){return Pd.call(a1,t)?!0:Pd.call(o1,t)?!1:nR.test(t)?a1[t]=!0:(o1[t]=!0,!1)}function iR(t,n,e,r){if(e!==null&&e.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:e!==null?!e.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oR(t,n,e,r){if(n===null||typeof n>"u"||iR(t,n,e,r))return!0;if(r)return!1;if(e!==null)switch(e.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function wn(t,n,e,r,i,o,a){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=t,this.type=n,this.sanitizeURL=o,this.removeEmptyString=a}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];en[n]=new wn(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mg=/[\-:]([a-z])/g;function Lg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(Mg,Lg);en[n]=new wn(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(Mg,Lg);en[n]=new wn(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(Mg,Lg);en[n]=new wn(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,n,e,r){var i=en.hasOwnProperty(n)?en[n]:null;(i!==null?i.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(oR(n,e,i,r)&&(e=null),r||i===null?rR(n)&&(e===null?t.removeAttribute(n):t.setAttribute(n,""+e)):i.mustUseProperty?t[i.propertyName]=e===null?i.type===3?!1:"":e:(n=i.attributeName,r=i.attributeNamespace,e===null?t.removeAttribute(n):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,r?t.setAttributeNS(r,n,e):t.setAttribute(n,e))))}var Ai=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),La=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),Bg=Symbol.for("react.strict_mode"),Bd=Symbol.for("react.profiler"),cw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),Vg=Symbol.for("react.forward_ref"),Vd=Symbol.for("react.suspense"),Wd=Symbol.for("react.suspense_list"),Wg=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),fw=Symbol.for("react.offscreen"),s1=Symbol.iterator;function Js(t){return t===null||typeof t!="object"?null:(t=s1&&t[s1]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,Ah;function du(t){if(Ah===void 0)try{throw Error()}catch(e){var n=e.stack.trim().match(/\n( *(at )?)/);Ah=n&&n[1]||""}return`
`+Ah+t}var Rh=!1;function Th(t,n){if(!t||Rh)return"";Rh=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(l){var r=l}Reflect.construct(t,[],n)}else{try{n.call()}catch(l){r=l}t.call(n.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{Rh=!1,Error.prepareStackTrace=e}return(t=t?t.displayName||t.name:"")?du(t):""}function aR(t){switch(t.tag){case 5:return du(t.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return t=Th(t.type,!1),t;case 11:return t=Th(t.type.render,!1),t;case 1:return t=Th(t.type,!0),t;default:return""}}function $d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case La:return"Portal";case Bd:return"Profiler";case Bg:return"StrictMode";case Vd:return"Suspense";case Wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pw:return(t.displayName||"Context")+".Consumer";case cw:return(t._context.displayName||"Context")+".Provider";case Vg:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wg:return n=t.displayName||null,n!==null?n:$d(t.type)||"Memo";case Bi:n=t._payload,t=t._init;try{return $d(t(n))}catch{}}return null}function sR(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $d(n);case 8:return n===Bg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hw(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function uR(t){var n=hw(t)?"checked":"value",e=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),r=""+t[n];if(!t.hasOwnProperty(n)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,o=e.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,n,{enumerable:e.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function nc(t){t._valueTracker||(t._valueTracker=uR(t))}function dw(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var e=n.getValue(),r="";return t&&(r=hw(t)?t.checked?"true":"false":t.value),t=r,t!==e?(n.setValue(t),!0):!1}function ap(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ud(t,n){var e=n.checked;return ht({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??t._wrapperState.initialChecked})}function u1(t,n){var e=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;e=lo(n.value!=null?n.value:e),t._wrapperState={initialChecked:r,initialValue:e,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function mw(t,n){n=n.checked,n!=null&&Pg(t,"checked",n,!1)}function jd(t,n){mw(t,n);var e=lo(n.value),r=n.type;if(e!=null)r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+e):t.value!==""+e&&(t.value=""+e);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Hd(t,n.type,e):n.hasOwnProperty("defaultValue")&&Hd(t,n.type,lo(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function l1(t,n,e){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,e||n===t.value||(t.value=n),t.defaultValue=n}e=t.name,e!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,e!==""&&(t.name=e)}function Hd(t,n,e){(n!=="number"||ap(t.ownerDocument)!==t)&&(e==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+e&&(t.defaultValue=""+e))}var mu=Array.isArray;function Qa(t,n,e,r){if(t=t.options,n){n={};for(var i=0;i<e.length;i++)n["$"+e[i]]=!0;for(e=0;e<t.length;e++)i=n.hasOwnProperty("$"+t[e].value),t[e].selected!==i&&(t[e].selected=i),i&&r&&(t[e].defaultSelected=!0)}else{for(e=""+lo(e),n=null,i=0;i<t.length;i++){if(t[i].value===e){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}n!==null||t[i].disabled||(n=t[i])}n!==null&&(n.selected=!0)}}function Gd(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(J(91));return ht({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function c1(t,n){var e=n.value;if(e==null){if(e=n.children,n=n.defaultValue,e!=null){if(n!=null)throw Error(J(92));if(mu(e)){if(1<e.length)throw Error(J(93));e=e[0]}n=e}n==null&&(n=""),e=n}t._wrapperState={initialValue:lo(e)}}function gw(t,n){var e=lo(n.value),r=lo(n.defaultValue);e!=null&&(e=""+e,e!==t.value&&(t.value=e),n.defaultValue==null&&t.defaultValue!==e&&(t.defaultValue=e)),r!=null&&(t.defaultValue=""+r)}function p1(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function vw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qd(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?vw(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,yw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,e,r,i){MSApp.execUnsafeLocalFunction(function(){return t(n,e,r,i)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Wu(t,n){if(n){var e=t.firstChild;if(e&&e===t.lastChild&&e.nodeType===3){e.nodeValue=n;return}}t.textContent=n}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lR=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(t){lR.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Eu[n]=Eu[t]})});function xw(t,n,e){return n==null||typeof n=="boolean"||n===""?"":e||typeof n!="number"||n===0||Eu.hasOwnProperty(t)&&Eu[t]?(""+n).trim():n+"px"}function bw(t,n){t=t.style;for(var e in n)if(n.hasOwnProperty(e)){var r=e.indexOf("--")===0,i=xw(e,n[e],r);e==="float"&&(e="cssFloat"),r?t.setProperty(e,i):t[e]=i}}var cR=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kd(t,n){if(n){if(cR[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(J(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(J(61))}if(n.style!=null&&typeof n.style!="object")throw Error(J(62))}}function Xd(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=null;function $g(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qd=null,Za=null,Ja=null;function f1(t){if(t=El(t)){if(typeof Qd!="function")throw Error(J(280));var n=t.stateNode;n&&(n=af(n),Qd(t.stateNode,t.type,n))}}function ww(t){Za?Ja?Ja.push(t):Ja=[t]:Za=t}function Cw(){if(Za){var t=Za,n=Ja;if(Ja=Za=null,f1(t),n)for(t=0;t<n.length;t++)f1(n[t])}}function Sw(t,n){return t(n)}function kw(){}var Dh=!1;function Ew(t,n,e){if(Dh)return t(n,e);Dh=!0;try{return Sw(t,n,e)}finally{Dh=!1,(Za!==null||Ja!==null)&&(kw(),Cw())}}function $u(t,n){var e=t.stateNode;if(e===null)return null;var r=af(e);if(r===null)return null;e=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(e&&typeof e!="function")throw Error(J(231,n,typeof e));return e}var Zd=!1;if(wi)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Zd=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Zd=!1}function pR(t,n,e,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{n.apply(e,l)}catch(c){this.onError(c)}}var Nu=!1,sp=null,up=!1,Jd=null,fR={onError:function(t){Nu=!0,sp=t}};function hR(t,n,e,r,i,o,a,s,u){Nu=!1,sp=null,pR.apply(fR,arguments)}function dR(t,n,e,r,i,o,a,s,u){if(hR.apply(this,arguments),Nu){if(Nu){var l=sp;Nu=!1,sp=null}else throw Error(J(198));up||(up=!0,Jd=l)}}function da(t){var n=t,e=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(e=n.return),t=n.return;while(t)}return n.tag===3?e:null}function Nw(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h1(t){if(da(t)!==t)throw Error(J(188))}function mR(t){var n=t.alternate;if(!n){if(n=da(t),n===null)throw Error(J(188));return n!==t?null:t}for(var e=t,r=n;;){var i=e.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){e=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===e)return h1(i),t;if(o===r)return h1(i),n;o=o.sibling}throw Error(J(188))}if(e.return!==r.return)e=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===e){a=!0,e=i,r=o;break}if(s===r){a=!0,r=i,e=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===e){a=!0,e=o,r=i;break}if(s===r){a=!0,r=o,e=i;break}s=s.sibling}if(!a)throw Error(J(189))}}if(e.alternate!==r)throw Error(J(190))}if(e.tag!==3)throw Error(J(188));return e.stateNode.current===e?t:n}function Iw(t){return t=mR(t),t!==null?Aw(t):null}function Aw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Aw(t);if(n!==null)return n;t=t.sibling}return null}var Rw=Xn.unstable_scheduleCallback,d1=Xn.unstable_cancelCallback,gR=Xn.unstable_shouldYield,vR=Xn.unstable_requestPaint,bt=Xn.unstable_now,yR=Xn.unstable_getCurrentPriorityLevel,Ug=Xn.unstable_ImmediatePriority,Tw=Xn.unstable_UserBlockingPriority,lp=Xn.unstable_NormalPriority,xR=Xn.unstable_LowPriority,Dw=Xn.unstable_IdlePriority,tf=null,Hr=null;function bR(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(tf,t,void 0,(t.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:SR,wR=Math.log,CR=Math.LN2;function SR(t){return t>>>=0,t===0?32:31-(wR(t)/CR|0)|0}var ic=64,oc=4194304;function gu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cp(t,n){var e=t.pendingLanes;if(e===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=e&268435455;if(a!==0){var s=a&~i;s!==0?r=gu(s):(o&=a,o!==0&&(r=gu(o)))}else a=e&~i,a!==0?r=gu(a):o!==0&&(r=gu(o));if(r===0)return 0;if(n!==0&&n!==r&&!(n&i)&&(i=r&-r,o=n&-n,i>=o||i===16&&(o&4194240)!==0))return n;if(r&4&&(r|=e&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=r;0<n;)e=31-Er(n),i=1<<e,r|=t[e],n&=~i;return r}function kR(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ER(t,n){for(var e=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Er(o),s=1<<a,u=i[a];u===-1?(!(s&e)||s&r)&&(i[a]=kR(s,n)):u<=n&&(t.expiredLanes|=s),o&=~s}}function em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ow(){var t=ic;return ic<<=1,!(ic&4194240)&&(ic=64),t}function Oh(t){for(var n=[],e=0;31>e;e++)n.push(t);return n}function Sl(t,n,e){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Er(n),t[n]=e}function NR(t,n){var e=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<e;){var i=31-Er(e),o=1<<i;n[i]=0,r[i]=-1,t[i]=-1,e&=~o}}function jg(t,n){var e=t.entangledLanes|=n;for(t=t.entanglements;e;){var r=31-Er(e),i=1<<r;i&n|t[r]&n&&(t[r]|=n),e&=~i}}var qe=0;function _w(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zw,Hg,Fw,Mw,Lw,tm=!1,ac=[],Qi=null,Zi=null,Ji=null,Uu=new Map,ju=new Map,$i=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m1(t,n){switch(t){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Uu.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(n.pointerId)}}function tu(t,n,e,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:n,domEventName:e,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},n!==null&&(n=El(n),n!==null&&Hg(n)),t):(t.eventSystemFlags|=r,n=t.targetContainers,i!==null&&n.indexOf(i)===-1&&n.push(i),t)}function AR(t,n,e,r,i){switch(n){case"focusin":return Qi=tu(Qi,t,n,e,r,i),!0;case"dragenter":return Zi=tu(Zi,t,n,e,r,i),!0;case"mouseover":return Ji=tu(Ji,t,n,e,r,i),!0;case"pointerover":var o=i.pointerId;return Uu.set(o,tu(Uu.get(o)||null,t,n,e,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ju.set(o,tu(ju.get(o)||null,t,n,e,r,i)),!0}return!1}function Pw(t){var n=Mo(t.target);if(n!==null){var e=da(n);if(e!==null){if(n=e.tag,n===13){if(n=Nw(e),n!==null){t.blockedOn=n,Lw(t.priority,function(){Fw(e)});return}}else if(n===3&&e.stateNode.current.memoizedState.isDehydrated){t.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var e=nm(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(e===null){e=t.nativeEvent;var r=new e.constructor(e.type,e);Yd=r,e.target.dispatchEvent(r),Yd=null}else return n=El(e),n!==null&&Hg(n),t.blockedOn=e,!1;n.shift()}return!0}function g1(t,n,e){Fc(t)&&e.delete(n)}function RR(){tm=!1,Qi!==null&&Fc(Qi)&&(Qi=null),Zi!==null&&Fc(Zi)&&(Zi=null),Ji!==null&&Fc(Ji)&&(Ji=null),Uu.forEach(g1),ju.forEach(g1)}function nu(t,n){t.blockedOn===n&&(t.blockedOn=null,tm||(tm=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,RR)))}function Hu(t){function n(i){return nu(i,t)}if(0<ac.length){nu(ac[0],t);for(var e=1;e<ac.length;e++){var r=ac[e];r.blockedOn===t&&(r.blockedOn=null)}}for(Qi!==null&&nu(Qi,t),Zi!==null&&nu(Zi,t),Ji!==null&&nu(Ji,t),Uu.forEach(n),ju.forEach(n),e=0;e<$i.length;e++)r=$i[e],r.blockedOn===t&&(r.blockedOn=null);for(;0<$i.length&&(e=$i[0],e.blockedOn===null);)Pw(e),e.blockedOn===null&&$i.shift()}var es=Ai.ReactCurrentBatchConfig,pp=!0;function TR(t,n,e,r){var i=qe,o=es.transition;es.transition=null;try{qe=1,Gg(t,n,e,r)}finally{qe=i,es.transition=o}}function DR(t,n,e,r){var i=qe,o=es.transition;es.transition=null;try{qe=4,Gg(t,n,e,r)}finally{qe=i,es.transition=o}}function Gg(t,n,e,r){if(pp){var i=nm(t,n,e,r);if(i===null)$h(t,n,r,fp,e),m1(t,r);else if(AR(i,t,n,e,r))r.stopPropagation();else if(m1(t,r),n&4&&-1<IR.indexOf(t)){for(;i!==null;){var o=El(i);if(o!==null&&zw(o),o=nm(t,n,e,r),o===null&&$h(t,n,r,fp,e),o===i)break;i=o}i!==null&&r.stopPropagation()}else $h(t,n,r,null,e)}}var fp=null;function nm(t,n,e,r){if(fp=null,t=$g(r),t=Mo(t),t!==null)if(n=da(t),n===null)t=null;else if(e=n.tag,e===13){if(t=Nw(n),t!==null)return t;t=null}else if(e===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return fp=t,null}function Bw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yR()){case Ug:return 1;case Tw:return 4;case lp:case xR:return 16;case Dw:return 536870912;default:return 16}default:return 16}}var Hi=null,qg=null,Mc=null;function Vw(){if(Mc)return Mc;var t,n=qg,e=n.length,r,i="value"in Hi?Hi.value:Hi.textContent,o=i.length;for(t=0;t<e&&n[t]===i[t];t++);var a=e-t;for(r=1;r<=a&&n[e-r]===i[o-r];r++);return Mc=i.slice(t,1<r?1-r:void 0)}function Lc(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function v1(){return!1}function nr(t){function n(e,r,i,o,a){this._reactName=e,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sc:v1,this.isPropagationStopped=v1,this}return ht(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),n}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kg=nr(Fs),kl=ht({},Fs,{view:0,detail:0}),OR=nr(kl),_h,zh,ru,nf=ht({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ru&&(ru&&t.type==="mousemove"?(_h=t.screenX-ru.screenX,zh=t.screenY-ru.screenY):zh=_h=0,ru=t),_h)},movementY:function(t){return"movementY"in t?t.movementY:zh}}),y1=nr(nf),_R=ht({},nf,{dataTransfer:0}),zR=nr(_R),FR=ht({},kl,{relatedTarget:0}),Fh=nr(FR),MR=ht({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),LR=nr(MR),PR=ht({},Fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BR=nr(PR),VR=ht({},Fs,{data:0}),x1=nr(VR),WR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$R={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jR(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=UR[t])?!!n[t]:!1}function Xg(){return jR}var HR=ht({},kl,{key:function(t){if(t.key){var n=WR[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$R[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xg,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GR=nr(HR),qR=ht({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b1=nr(qR),KR=ht({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xg}),XR=nr(KR),YR=ht({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),QR=nr(YR),ZR=ht({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JR=nr(ZR),eT=[9,13,27,32],Yg=wi&&"CompositionEvent"in window,Iu=null;wi&&"documentMode"in document&&(Iu=document.documentMode);var tT=wi&&"TextEvent"in window&&!Iu,Ww=wi&&(!Yg||Iu&&8<Iu&&11>=Iu),w1=" ",C1=!1;function $w(t,n){switch(t){case"keyup":return eT.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ba=!1;function nT(t,n){switch(t){case"compositionend":return Uw(n);case"keypress":return n.which!==32?null:(C1=!0,w1);case"textInput":return t=n.data,t===w1&&C1?null:t;default:return null}}function rT(t,n){if(Ba)return t==="compositionend"||!Yg&&$w(t,n)?(t=Vw(),Mc=qg=Hi=null,Ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ww&&n.locale!=="ko"?null:n.data;default:return null}}var iT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S1(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!iT[t.type]:n==="textarea"}function jw(t,n,e,r){ww(r),n=hp(n,"onChange"),0<n.length&&(e=new Kg("onChange","change",null,e,r),t.push({event:e,listeners:n}))}var Au=null,Gu=null;function oT(t){t2(t,0)}function rf(t){var n=$a(t);if(dw(n))return t}function aT(t,n){if(t==="change")return n}var Hw=!1;if(wi){var Mh;if(wi){var Lh="oninput"in document;if(!Lh){var k1=document.createElement("div");k1.setAttribute("oninput","return;"),Lh=typeof k1.oninput=="function"}Mh=Lh}else Mh=!1;Hw=Mh&&(!document.documentMode||9<document.documentMode)}function E1(){Au&&(Au.detachEvent("onpropertychange",Gw),Gu=Au=null)}function Gw(t){if(t.propertyName==="value"&&rf(Gu)){var n=[];jw(n,Gu,t,$g(t)),Ew(oT,n)}}function sT(t,n,e){t==="focusin"?(E1(),Au=n,Gu=e,Au.attachEvent("onpropertychange",Gw)):t==="focusout"&&E1()}function uT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rf(Gu)}function lT(t,n){if(t==="click")return rf(n)}function cT(t,n){if(t==="input"||t==="change")return rf(n)}function pT(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Rr=typeof Object.is=="function"?Object.is:pT;function qu(t,n){if(Rr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;for(r=0;r<e.length;r++){var i=e[r];if(!Pd.call(n,i)||!Rr(t[i],n[i]))return!1}return!0}function N1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function I1(t,n){var e=N1(t);t=0;for(var r;e;){if(e.nodeType===3){if(r=t+e.textContent.length,t<=n&&r>=n)return{node:e,offset:n-t};t=r}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=N1(e)}}function qw(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?qw(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Kw(){for(var t=window,n=ap();n instanceof t.HTMLIFrameElement;){try{var e=typeof n.contentWindow.location.href=="string"}catch{e=!1}if(e)t=n.contentWindow;else break;n=ap(t.document)}return n}function Qg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function fT(t){var n=Kw(),e=t.focusedElem,r=t.selectionRange;if(n!==e&&e&&e.ownerDocument&&qw(e.ownerDocument.documentElement,e)){if(r!==null&&Qg(e)){if(n=r.start,t=r.end,t===void 0&&(t=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(t,e.value.length);else if(t=(n=e.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var i=e.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=I1(e,o);var a=I1(e,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(n=n.createRange(),n.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(n),t.extend(a.node,a.offset)):(n.setEnd(a.node,a.offset),t.addRange(n)))}}for(n=[],t=e;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<n.length;e++)t=n[e],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hT=wi&&"documentMode"in document&&11>=document.documentMode,Va=null,rm=null,Ru=null,im=!1;function A1(t,n,e){var r=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;im||Va==null||Va!==ap(r)||(r=Va,"selectionStart"in r&&Qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ru&&qu(Ru,r)||(Ru=r,r=hp(rm,"onSelect"),0<r.length&&(n=new Kg("onSelect","select",null,n,e),t.push({event:n,listeners:r}),n.target=Va)))}function uc(t,n){var e={};return e[t.toLowerCase()]=n.toLowerCase(),e["Webkit"+t]="webkit"+n,e["Moz"+t]="moz"+n,e}var Wa={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Ph={},Xw={};wi&&(Xw=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function of(t){if(Ph[t])return Ph[t];if(!Wa[t])return t;var n=Wa[t],e;for(e in n)if(n.hasOwnProperty(e)&&e in Xw)return Ph[t]=n[e];return t}var Yw=of("animationend"),Qw=of("animationiteration"),Zw=of("animationstart"),Jw=of("transitionend"),e2=new Map,R1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(t,n){e2.set(t,n),ha(n,[t])}for(var Bh=0;Bh<R1.length;Bh++){var Vh=R1[Bh],dT=Vh.toLowerCase(),mT=Vh[0].toUpperCase()+Vh.slice(1);vo(dT,"on"+mT)}vo(Yw,"onAnimationEnd");vo(Qw,"onAnimationIteration");vo(Zw,"onAnimationStart");vo("dblclick","onDoubleClick");vo("focusin","onFocus");vo("focusout","onBlur");vo(Jw,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gT=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function T1(t,n,e){var r=t.type||"unknown-event";t.currentTarget=e,dR(r,n,void 0,t),t.currentTarget=null}function t2(t,n){n=(n&4)!==0;for(var e=0;e<t.length;e++){var r=t[e],i=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;T1(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;T1(i,s,l),o=u}}}if(up)throw t=Jd,up=!1,Jd=null,t}function rt(t,n){var e=n[lm];e===void 0&&(e=n[lm]=new Set);var r=t+"__bubble";e.has(r)||(n2(n,t,2,!1),e.add(r))}function Wh(t,n,e){var r=0;n&&(r|=4),n2(e,t,r,n)}var lc="_reactListening"+Math.random().toString(36).slice(2);function Ku(t){if(!t[lc]){t[lc]=!0,lw.forEach(function(e){e!=="selectionchange"&&(gT.has(e)||Wh(e,!1,t),Wh(e,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[lc]||(n[lc]=!0,Wh("selectionchange",!1,n))}}function n2(t,n,e,r){switch(Bw(n)){case 1:var i=TR;break;case 4:i=DR;break;default:i=Gg}e=i.bind(null,n,e,t),i=void 0,!Zd||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(n,e,{capture:!0,passive:i}):t.addEventListener(n,e,!0):i!==void 0?t.addEventListener(n,e,{passive:i}):t.addEventListener(n,e,!1)}function $h(t,n,e,r,i){var o=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Mo(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}Ew(function(){var l=o,c=$g(e),p=[];e:{var f=e2.get(t);if(f!==void 0){var h=Kg,d=t;switch(t){case"keypress":if(Lc(e)===0)break e;case"keydown":case"keyup":h=GR;break;case"focusin":d="focus",h=Fh;break;case"focusout":d="blur",h=Fh;break;case"beforeblur":case"afterblur":h=Fh;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=zR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=XR;break;case Yw:case Qw:case Zw:h=LR;break;case Jw:h=QR;break;case"scroll":h=OR;break;case"wheel":h=JR;break;case"copy":case"cut":case"paste":h=BR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=b1}var m=(n&4)!==0,v=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var y=l,x;y!==null;){x=y;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=$u(y,g),b!=null&&m.push(Xu(y,b,x)))),v)break;y=y.return}0<m.length&&(f=new h(f,d,null,e,c),p.push({event:f,listeners:m}))}}if(!(n&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&e!==Yd&&(d=e.relatedTarget||e.fromElement)&&(Mo(d)||d[Ci]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(d=e.relatedTarget||e.toElement,h=l,d=d?Mo(d):null,d!==null&&(v=da(d),d!==v||d.tag!==5&&d.tag!==6)&&(d=null)):(h=null,d=l),h!==d)){if(m=y1,b="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=b1,b="onPointerLeave",g="onPointerEnter",y="pointer"),v=h==null?f:$a(h),x=d==null?f:$a(d),f=new m(b,y+"leave",h,e,c),f.target=v,f.relatedTarget=x,b=null,Mo(c)===l&&(m=new m(g,y+"enter",d,e,c),m.target=x,m.relatedTarget=v,b=m),v=b,h&&d)t:{for(m=h,g=d,y=0,x=m;x;x=Aa(x))y++;for(x=0,b=g;b;b=Aa(b))x++;for(;0<y-x;)m=Aa(m),y--;for(;0<x-y;)g=Aa(g),x--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=Aa(m),g=Aa(g)}m=null}else m=null;h!==null&&D1(p,f,h,m,!1),d!==null&&v!==null&&D1(p,v,d,m,!0)}}e:{if(f=l?$a(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=aT;else if(S1(f))if(Hw)w=cT;else{w=uT;var S=sT}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=lT);if(w&&(w=w(t,l))){jw(p,w,e,c);break e}S&&S(t,f,l),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Hd(f,"number",f.value)}switch(S=l?$a(l):window,t){case"focusin":(S1(S)||S.contentEditable==="true")&&(Va=S,rm=l,Ru=null);break;case"focusout":Ru=rm=Va=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,A1(p,e,c);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":A1(p,e,c)}var C;if(Yg)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ba?$w(t,e)&&(k="onCompositionEnd"):t==="keydown"&&e.keyCode===229&&(k="onCompositionStart");k&&(Ww&&e.locale!=="ko"&&(Ba||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ba&&(C=Vw()):(Hi=c,qg="value"in Hi?Hi.value:Hi.textContent,Ba=!0)),S=hp(l,k),0<S.length&&(k=new x1(k,t,null,e,c),p.push({event:k,listeners:S}),C?k.data=C:(C=Uw(e),C!==null&&(k.data=C)))),(C=tT?nT(t,e):rT(t,e))&&(l=hp(l,"onBeforeInput"),0<l.length&&(c=new x1("onBeforeInput","beforeinput",null,e,c),p.push({event:c,listeners:l}),c.data=C))}t2(p,n)})}function Xu(t,n,e){return{instance:t,listener:n,currentTarget:e}}function hp(t,n){for(var e=n+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=$u(t,e),o!=null&&r.unshift(Xu(t,o,i)),o=$u(t,n),o!=null&&r.push(Xu(t,o,i))),t=t.return}return r}function Aa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function D1(t,n,e,r,i){for(var o=n._reactName,a=[];e!==null&&e!==r;){var s=e,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=$u(e,o),u!=null&&a.unshift(Xu(e,u,s))):i||(u=$u(e,o),u!=null&&a.push(Xu(e,u,s)))),e=e.return}a.length!==0&&t.push({event:n,listeners:a})}var vT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function O1(t){return(typeof t=="string"?t:""+t).replace(vT,`
`).replace(yT,"")}function cc(t,n,e){if(n=O1(n),O1(t)!==n&&e)throw Error(J(425))}function dp(){}var om=null,am=null;function sm(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var um=typeof setTimeout=="function"?setTimeout:void 0,xT=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,bT=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(t){return _1.resolve(null).then(t).catch(wT)}:um;function wT(t){setTimeout(function(){throw t})}function Uh(t,n){var e=n,r=0;do{var i=e.nextSibling;if(t.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(r===0){t.removeChild(i),Hu(n);return}r--}else e!=="$"&&e!=="$?"&&e!=="$!"||r++;e=i}while(e);Hu(n)}function eo(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function z1(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var e=t.data;if(e==="$"||e==="$!"||e==="$?"){if(n===0)return t;n--}else e==="/$"&&n++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),$r="__reactFiber$"+Ms,Yu="__reactProps$"+Ms,Ci="__reactContainer$"+Ms,lm="__reactEvents$"+Ms,CT="__reactListeners$"+Ms,ST="__reactHandles$"+Ms;function Mo(t){var n=t[$r];if(n)return n;for(var e=t.parentNode;e;){if(n=e[Ci]||e[$r]){if(e=n.alternate,n.child!==null||e!==null&&e.child!==null)for(t=z1(t);t!==null;){if(e=t[$r])return e;t=z1(t)}return n}t=e,e=t.parentNode}return null}function El(t){return t=t[$r]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $a(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function af(t){return t[Yu]||null}var cm=[],Ua=-1;function yo(t){return{current:t}}function ot(t){0>Ua||(t.current=cm[Ua],cm[Ua]=null,Ua--)}function et(t,n){Ua++,cm[Ua]=t.current,t.current=n}var co={},sn=yo(co),Dn=yo(!1),ta=co;function us(t,n){var e=t.type.contextTypes;if(!e)return co;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in e)i[o]=n[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),i}function On(t){return t=t.childContextTypes,t!=null}function mp(){ot(Dn),ot(sn)}function F1(t,n,e){if(sn.current!==co)throw Error(J(168));et(sn,n),et(Dn,e)}function r2(t,n,e){var r=t.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return e;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(J(108,sR(t)||"Unknown",i));return ht({},e,r)}function gp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||co,ta=sn.current,et(sn,t),et(Dn,Dn.current),!0}function M1(t,n,e){var r=t.stateNode;if(!r)throw Error(J(169));e?(t=r2(t,n,ta),r.__reactInternalMemoizedMergedChildContext=t,ot(Dn),ot(sn),et(sn,t)):ot(Dn),et(Dn,e)}var li=null,sf=!1,jh=!1;function i2(t){li===null?li=[t]:li.push(t)}function kT(t){sf=!0,i2(t)}function xo(){if(!jh&&li!==null){jh=!0;var t=0,n=qe;try{var e=li;for(qe=1;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}li=null,sf=!1}catch(i){throw li!==null&&(li=li.slice(t+1)),Rw(Ug,xo),i}finally{qe=n,jh=!1}}return null}var ja=[],Ha=0,vp=null,yp=0,sr=[],ur=0,na=null,hi=1,di="";function Ao(t,n){ja[Ha++]=yp,ja[Ha++]=vp,vp=t,yp=n}function o2(t,n,e){sr[ur++]=hi,sr[ur++]=di,sr[ur++]=na,na=t;var r=hi;t=di;var i=32-Er(r)-1;r&=~(1<<i),e+=1;var o=32-Er(n)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,hi=1<<32-Er(n)+i|e<<i|r,di=o+t}else hi=1<<o|e<<i|r,di=t}function Zg(t){t.return!==null&&(Ao(t,1),o2(t,1,0))}function Jg(t){for(;t===vp;)vp=ja[--Ha],ja[Ha]=null,yp=ja[--Ha],ja[Ha]=null;for(;t===na;)na=sr[--ur],sr[ur]=null,di=sr[--ur],sr[ur]=null,hi=sr[--ur],sr[ur]=null}var Kn=null,Hn=null,ut=!1,br=null;function a2(t,n){var e=cr(5,null,null,0);e.elementType="DELETED",e.stateNode=n,e.return=t,n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)}function L1(t,n){switch(t.tag){case 5:var e=t.type;return n=n.nodeType!==1||e.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Kn=t,Hn=eo(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Kn=t,Hn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(e=na!==null?{id:hi,overflow:di}:null,t.memoizedState={dehydrated:n,treeContext:e,retryLane:1073741824},e=cr(18,null,null,0),e.stateNode=n,e.return=t,t.child=e,Kn=t,Hn=null,!0):!1;default:return!1}}function pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fm(t){if(ut){var n=Hn;if(n){var e=n;if(!L1(t,n)){if(pm(t))throw Error(J(418));n=eo(e.nextSibling);var r=Kn;n&&L1(t,n)?a2(r,e):(t.flags=t.flags&-4097|2,ut=!1,Kn=t)}}else{if(pm(t))throw Error(J(418));t.flags=t.flags&-4097|2,ut=!1,Kn=t}}}function P1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kn=t}function pc(t){if(t!==Kn)return!1;if(!ut)return P1(t),ut=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!sm(t.type,t.memoizedProps)),n&&(n=Hn)){if(pm(t))throw s2(),Error(J(418));for(;n;)a2(t,n),n=eo(n.nextSibling)}if(P1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var e=t.data;if(e==="/$"){if(n===0){Hn=eo(t.nextSibling);break e}n--}else e!=="$"&&e!=="$!"&&e!=="$?"||n++}t=t.nextSibling}Hn=null}}else Hn=Kn?eo(t.stateNode.nextSibling):null;return!0}function s2(){for(var t=Hn;t;)t=eo(t.nextSibling)}function ls(){Hn=Kn=null,ut=!1}function ev(t){br===null?br=[t]:br.push(t)}var ET=Ai.ReactCurrentBatchConfig;function yr(t,n){if(t&&t.defaultProps){n=ht({},n),t=t.defaultProps;for(var e in t)n[e]===void 0&&(n[e]=t[e]);return n}return n}var xp=yo(null),bp=null,Ga=null,tv=null;function nv(){tv=Ga=bp=null}function rv(t){var n=xp.current;ot(xp),t._currentValue=n}function hm(t,n,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),t===e)break;t=t.return}}function ts(t,n){bp=t,tv=Ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(Rn=!0),t.firstContext=null)}function fr(t){var n=t._currentValue;if(tv!==t)if(t={context:t,memoizedValue:n,next:null},Ga===null){if(bp===null)throw Error(J(308));Ga=t,bp.dependencies={lanes:0,firstContext:t}}else Ga=Ga.next=t;return n}var Lo=null;function iv(t){Lo===null?Lo=[t]:Lo.push(t)}function u2(t,n,e,r){var i=n.interleaved;return i===null?(e.next=e,iv(n)):(e.next=i.next,i.next=e),n.interleaved=e,Si(t,r)}function Si(t,n){t.lanes|=n;var e=t.alternate;for(e!==null&&(e.lanes|=n),e=t,t=t.return;t!==null;)t.childLanes|=n,e=t.alternate,e!==null&&(e.childLanes|=n),e=t,t=t.return;return e.tag===3?e.stateNode:null}var Vi=!1;function ov(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l2(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mi(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function to(t,n,e){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?n.next=n:(n.next=i.next,i.next=n),r.pending=n,Si(t,e)}return i=r.interleaved,i===null?(n.next=n,iv(r)):(n.next=i.next,i.next=n),r.interleaved=n,Si(t,e)}function Pc(t,n,e){if(n=n.updateQueue,n!==null&&(n=n.shared,(e&4194240)!==0)){var r=n.lanes;r&=t.pendingLanes,e|=r,n.lanes=e,jg(t,e)}}function B1(t,n){var e=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,e===r)){var i=null,o=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};o===null?i=o=a:o=o.next=a,e=e.next}while(e!==null);o===null?i=o=n:o=o.next=n}else i=o=n;e={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=e;return}t=e.lastBaseUpdate,t===null?e.firstBaseUpdate=n:t.next=n,e.lastBaseUpdate=n}function wp(t,n,e,r){var i=t.updateQueue;Vi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;a=0,c=l=u=null,s=o;do{var f=s.lane,h=s.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var d=t,m=s;switch(f=n,h=e,m.tag){case 1:if(d=m.payload,typeof d=="function"){p=d.call(h,p,f);break e}p=d;break e;case 3:d.flags=d.flags&-65537|128;case 0:if(d=m.payload,f=typeof d=="function"?d.call(h,p,f):d,f==null)break e;p=ht({},p,f);break e;case 2:Vi=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=h,u=p):c=c.next=h,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(u=p),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,n=i.shared.interleaved,n!==null){i=n;do a|=i.lane,i=i.next;while(i!==n)}else o===null&&(i.shared.lanes=0);ia|=a,t.lanes=a,t.memoizedState=p}}function V1(t,n,e){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var r=t[n],i=r.callback;if(i!==null){if(r.callback=null,r=e,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var c2=new uw.Component().refs;function dm(t,n,e,r){n=t.memoizedState,e=e(r,n),e=e==null?n:ht({},n,e),t.memoizedState=e,t.lanes===0&&(t.updateQueue.baseState=e)}var uf={isMounted:function(t){return(t=t._reactInternals)?da(t)===t:!1},enqueueSetState:function(t,n,e){t=t._reactInternals;var r=gn(),i=ro(t),o=mi(r,i);o.payload=n,e!=null&&(o.callback=e),n=to(t,o,i),n!==null&&(Nr(n,t,i,r),Pc(n,t,i))},enqueueReplaceState:function(t,n,e){t=t._reactInternals;var r=gn(),i=ro(t),o=mi(r,i);o.tag=1,o.payload=n,e!=null&&(o.callback=e),n=to(t,o,i),n!==null&&(Nr(n,t,i,r),Pc(n,t,i))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var e=gn(),r=ro(t),i=mi(e,r);i.tag=2,n!=null&&(i.callback=n),n=to(t,i,r),n!==null&&(Nr(n,t,r,e),Pc(n,t,r))}};function W1(t,n,e,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):n.prototype&&n.prototype.isPureReactComponent?!qu(e,r)||!qu(i,o):!0}function p2(t,n,e){var r=!1,i=co,o=n.contextType;return typeof o=="object"&&o!==null?o=fr(o):(i=On(n)?ta:sn.current,r=n.contextTypes,o=(r=r!=null)?us(t,i):co),n=new n(e,o),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=uf,t.stateNode=n,n._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),n}function $1(t,n,e,r){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(e,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(e,r),n.state!==t&&uf.enqueueReplaceState(n,n.state,null)}function mm(t,n,e,r){var i=t.stateNode;i.props=e,i.state=t.memoizedState,i.refs=c2,ov(t);var o=n.contextType;typeof o=="object"&&o!==null?i.context=fr(o):(o=On(n)?ta:sn.current,i.context=us(t,o)),i.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(dm(t,n,o,e),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(n=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),n!==i.state&&uf.enqueueReplaceState(i,i.state,null),wp(t,e,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function iu(t,n,e){if(t=e.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(J(309));var r=e.stateNode}if(!r)throw Error(J(147,t));var i=r,o=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===o?n.ref:(n=function(a){var s=i.refs;s===c2&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},n._stringRef=o,n)}if(typeof t!="string")throw Error(J(284));if(!e._owner)throw Error(J(290,t))}return t}function fc(t,n){throw t=Object.prototype.toString.call(n),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function U1(t){var n=t._init;return n(t._payload)}function f2(t){function n(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function e(g,y){if(!t)return null;for(;y!==null;)n(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=io(g,y),g.index=0,g.sibling=null,g}function o(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,y,x,b){return y===null||y.tag!==6?(y=Qh(x,g.mode,b),y.return=g,y):(y=i(y,x),y.return=g,y)}function u(g,y,x,b){var w=x.type;return w===Pa?c(g,y,x.props.children,b,x.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bi&&U1(w)===y.type)?(b=i(y,x.props),b.ref=iu(g,y,x),b.return=g,b):(b=jc(x.type,x.key,x.props,null,g.mode,b),b.ref=iu(g,y,x),b.return=g,b)}function l(g,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Zh(x,g.mode,b),y.return=g,y):(y=i(y,x.children||[]),y.return=g,y)}function c(g,y,x,b,w){return y===null||y.tag!==7?(y=Go(x,g.mode,b,w),y.return=g,y):(y=i(y,x),y.return=g,y)}function p(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qh(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case tc:return x=jc(y.type,y.key,y.props,null,g.mode,x),x.ref=iu(g,null,y),x.return=g,x;case La:return y=Zh(y,g.mode,x),y.return=g,y;case Bi:var b=y._init;return p(g,b(y._payload),x)}if(mu(y)||Js(y))return y=Go(y,g.mode,x,null),y.return=g,y;fc(g,y)}return null}function f(g,y,x,b){var w=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:s(g,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:return x.key===w?u(g,y,x,b):null;case La:return x.key===w?l(g,y,x,b):null;case Bi:return w=x._init,f(g,y,w(x._payload),b)}if(mu(x)||Js(x))return w!==null?null:c(g,y,x,b,null);fc(g,x)}return null}function h(g,y,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,s(y,g,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tc:return g=g.get(b.key===null?x:b.key)||null,u(y,g,b,w);case La:return g=g.get(b.key===null?x:b.key)||null,l(y,g,b,w);case Bi:var S=b._init;return h(g,y,x,S(b._payload),w)}if(mu(b)||Js(b))return g=g.get(x)||null,c(y,g,b,w,null);fc(y,b)}return null}function d(g,y,x,b){for(var w=null,S=null,C=y,k=y=0,E=null;C!==null&&k<x.length;k++){C.index>k?(E=C,C=null):E=C.sibling;var N=f(g,C,x[k],b);if(N===null){C===null&&(C=E);break}t&&C&&N.alternate===null&&n(g,C),y=o(N,y,k),S===null?w=N:S.sibling=N,S=N,C=E}if(k===x.length)return e(g,C),ut&&Ao(g,k),w;if(C===null){for(;k<x.length;k++)C=p(g,x[k],b),C!==null&&(y=o(C,y,k),S===null?w=C:S.sibling=C,S=C);return ut&&Ao(g,k),w}for(C=r(g,C);k<x.length;k++)E=h(C,g,k,x[k],b),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?k:E.key),y=o(E,y,k),S===null?w=E:S.sibling=E,S=E);return t&&C.forEach(function(T){return n(g,T)}),ut&&Ao(g,k),w}function m(g,y,x,b){var w=Js(x);if(typeof w!="function")throw Error(J(150));if(x=w.call(x),x==null)throw Error(J(151));for(var S=w=null,C=y,k=y=0,E=null,N=x.next();C!==null&&!N.done;k++,N=x.next()){C.index>k?(E=C,C=null):E=C.sibling;var T=f(g,C,N.value,b);if(T===null){C===null&&(C=E);break}t&&C&&T.alternate===null&&n(g,C),y=o(T,y,k),S===null?w=T:S.sibling=T,S=T,C=E}if(N.done)return e(g,C),ut&&Ao(g,k),w;if(C===null){for(;!N.done;k++,N=x.next())N=p(g,N.value,b),N!==null&&(y=o(N,y,k),S===null?w=N:S.sibling=N,S=N);return ut&&Ao(g,k),w}for(C=r(g,C);!N.done;k++,N=x.next())N=h(C,g,k,N.value,b),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?k:N.key),y=o(N,y,k),S===null?w=N:S.sibling=N,S=N);return t&&C.forEach(function(A){return n(g,A)}),ut&&Ao(g,k),w}function v(g,y,x,b){if(typeof x=="object"&&x!==null&&x.type===Pa&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:e:{for(var w=x.key,S=y;S!==null;){if(S.key===w){if(w=x.type,w===Pa){if(S.tag===7){e(g,S.sibling),y=i(S,x.props.children),y.return=g,g=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bi&&U1(w)===S.type){e(g,S.sibling),y=i(S,x.props),y.ref=iu(g,S,x),y.return=g,g=y;break e}e(g,S);break}else n(g,S);S=S.sibling}x.type===Pa?(y=Go(x.props.children,g.mode,b,x.key),y.return=g,g=y):(b=jc(x.type,x.key,x.props,null,g.mode,b),b.ref=iu(g,y,x),b.return=g,g=b)}return a(g);case La:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){e(g,y.sibling),y=i(y,x.children||[]),y.return=g,g=y;break e}else{e(g,y);break}else n(g,y);y=y.sibling}y=Zh(x,g.mode,b),y.return=g,g=y}return a(g);case Bi:return S=x._init,v(g,y,S(x._payload),b)}if(mu(x))return d(g,y,x,b);if(Js(x))return m(g,y,x,b);fc(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(e(g,y.sibling),y=i(y,x),y.return=g,g=y):(e(g,y),y=Qh(x,g.mode,b),y.return=g,g=y),a(g)):e(g,y)}return v}var cs=f2(!0),h2=f2(!1),Nl={},Gr=yo(Nl),Qu=yo(Nl),Zu=yo(Nl);function Po(t){if(t===Nl)throw Error(J(174));return t}function av(t,n){switch(et(Zu,n),et(Qu,t),et(Gr,Nl),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:qd(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=qd(n,t)}ot(Gr),et(Gr,n)}function ps(){ot(Gr),ot(Qu),ot(Zu)}function d2(t){Po(Zu.current);var n=Po(Gr.current),e=qd(n,t.type);n!==e&&(et(Qu,t),et(Gr,e))}function sv(t){Qu.current===t&&(ot(Gr),ot(Qu))}var ct=yo(0);function Cp(t){for(var n=t;n!==null;){if(n.tag===13){var e=n.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Hh=[];function uv(){for(var t=0;t<Hh.length;t++)Hh[t]._workInProgressVersionPrimary=null;Hh.length=0}var Bc=Ai.ReactCurrentDispatcher,Gh=Ai.ReactCurrentBatchConfig,ra=0,pt=null,zt=null,Wt=null,Sp=!1,Tu=!1,Ju=0,NT=0;function nn(){throw Error(J(321))}function lv(t,n){if(n===null)return!1;for(var e=0;e<n.length&&e<t.length;e++)if(!Rr(t[e],n[e]))return!1;return!0}function cv(t,n,e,r,i,o){if(ra=o,pt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Bc.current=t===null||t.memoizedState===null?TT:DT,t=e(r,i),Tu){o=0;do{if(Tu=!1,Ju=0,25<=o)throw Error(J(301));o+=1,Wt=zt=null,n.updateQueue=null,Bc.current=OT,t=e(r,i)}while(Tu)}if(Bc.current=kp,n=zt!==null&&zt.next!==null,ra=0,Wt=zt=pt=null,Sp=!1,n)throw Error(J(300));return t}function pv(){var t=Ju!==0;return Ju=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?pt.memoizedState=Wt=t:Wt=Wt.next=t,Wt}function hr(){if(zt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var n=Wt===null?pt.memoizedState:Wt.next;if(n!==null)Wt=n,zt=t;else{if(t===null)throw Error(J(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Wt===null?pt.memoizedState=Wt=t:Wt=Wt.next=t}return Wt}function el(t,n){return typeof n=="function"?n(t):n}function qh(t){var n=hr(),e=n.queue;if(e===null)throw Error(J(311));e.lastRenderedReducer=t;var r=zt,i=r.baseQueue,o=e.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,e.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((ra&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var p={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=p,a=r):u=u.next=p,pt.lanes|=c,ia|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,Rr(r,n.memoizedState)||(Rn=!0),n.memoizedState=r,n.baseState=a,n.baseQueue=u,e.lastRenderedState=r}if(t=e.interleaved,t!==null){i=t;do o=i.lane,pt.lanes|=o,ia|=o,i=i.next;while(i!==t)}else i===null&&(e.lanes=0);return[n.memoizedState,e.dispatch]}function Kh(t){var n=hr(),e=n.queue;if(e===null)throw Error(J(311));e.lastRenderedReducer=t;var r=e.dispatch,i=e.pending,o=n.memoizedState;if(i!==null){e.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Rr(o,n.memoizedState)||(Rn=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),e.lastRenderedState=o}return[o,r]}function m2(){}function g2(t,n){var e=pt,r=hr(),i=n(),o=!Rr(r.memoizedState,i);if(o&&(r.memoizedState=i,Rn=!0),r=r.queue,fv(x2.bind(null,e,r,t),[t]),r.getSnapshot!==n||o||Wt!==null&&Wt.memoizedState.tag&1){if(e.flags|=2048,tl(9,y2.bind(null,e,r,i,n),void 0,null),jt===null)throw Error(J(349));ra&30||v2(e,n,i)}return i}function v2(t,n,e){t.flags|=16384,t={getSnapshot:n,value:e},n=pt.updateQueue,n===null?(n={lastEffect:null,stores:null},pt.updateQueue=n,n.stores=[t]):(e=n.stores,e===null?n.stores=[t]:e.push(t))}function y2(t,n,e,r){n.value=e,n.getSnapshot=r,b2(n)&&w2(t)}function x2(t,n,e){return e(function(){b2(n)&&w2(t)})}function b2(t){var n=t.getSnapshot;t=t.value;try{var e=n();return!Rr(t,e)}catch{return!0}}function w2(t){var n=Si(t,1);n!==null&&Nr(n,t,1,-1)}function j1(t){var n=Br();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},n.queue=t,t=t.dispatch=RT.bind(null,pt,t),[n.memoizedState,t]}function tl(t,n,e,r){return t={tag:t,create:n,destroy:e,deps:r,next:null},n=pt.updateQueue,n===null?(n={lastEffect:null,stores:null},pt.updateQueue=n,n.lastEffect=t.next=t):(e=n.lastEffect,e===null?n.lastEffect=t.next=t:(r=e.next,e.next=t,t.next=r,n.lastEffect=t)),t}function C2(){return hr().memoizedState}function Vc(t,n,e,r){var i=Br();pt.flags|=t,i.memoizedState=tl(1|n,e,void 0,r===void 0?null:r)}function lf(t,n,e,r){var i=hr();r=r===void 0?null:r;var o=void 0;if(zt!==null){var a=zt.memoizedState;if(o=a.destroy,r!==null&&lv(r,a.deps)){i.memoizedState=tl(n,e,o,r);return}}pt.flags|=t,i.memoizedState=tl(1|n,e,o,r)}function H1(t,n){return Vc(8390656,8,t,n)}function fv(t,n){return lf(2048,8,t,n)}function S2(t,n){return lf(4,2,t,n)}function k2(t,n){return lf(4,4,t,n)}function E2(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function N2(t,n,e){return e=e!=null?e.concat([t]):null,lf(4,4,E2.bind(null,n,t),e)}function hv(){}function I2(t,n){var e=hr();n=n===void 0?null:n;var r=e.memoizedState;return r!==null&&n!==null&&lv(n,r[1])?r[0]:(e.memoizedState=[t,n],t)}function A2(t,n){var e=hr();n=n===void 0?null:n;var r=e.memoizedState;return r!==null&&n!==null&&lv(n,r[1])?r[0]:(t=t(),e.memoizedState=[t,n],t)}function R2(t,n,e){return ra&21?(Rr(e,n)||(e=Ow(),pt.lanes|=e,ia|=e,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=e)}function IT(t,n){var e=qe;qe=e!==0&&4>e?e:4,t(!0);var r=Gh.transition;Gh.transition={};try{t(!1),n()}finally{qe=e,Gh.transition=r}}function T2(){return hr().memoizedState}function AT(t,n,e){var r=ro(t);if(e={lane:r,action:e,hasEagerState:!1,eagerState:null,next:null},D2(t))O2(n,e);else if(e=u2(t,n,e,r),e!==null){var i=gn();Nr(e,t,r,i),_2(e,n,r)}}function RT(t,n,e){var r=ro(t),i={lane:r,action:e,hasEagerState:!1,eagerState:null,next:null};if(D2(t))O2(n,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var a=n.lastRenderedState,s=o(a,e);if(i.hasEagerState=!0,i.eagerState=s,Rr(s,a)){var u=n.interleaved;u===null?(i.next=i,iv(n)):(i.next=u.next,u.next=i),n.interleaved=i;return}}catch{}finally{}e=u2(t,n,i,r),e!==null&&(i=gn(),Nr(e,t,r,i),_2(e,n,r))}}function D2(t){var n=t.alternate;return t===pt||n!==null&&n===pt}function O2(t,n){Tu=Sp=!0;var e=t.pending;e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n}function _2(t,n,e){if(e&4194240){var r=n.lanes;r&=t.pendingLanes,e|=r,n.lanes=e,jg(t,e)}}var kp={readContext:fr,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},TT={readContext:fr,useCallback:function(t,n){return Br().memoizedState=[t,n===void 0?null:n],t},useContext:fr,useEffect:H1,useImperativeHandle:function(t,n,e){return e=e!=null?e.concat([t]):null,Vc(4194308,4,E2.bind(null,n,t),e)},useLayoutEffect:function(t,n){return Vc(4194308,4,t,n)},useInsertionEffect:function(t,n){return Vc(4,2,t,n)},useMemo:function(t,n){var e=Br();return n=n===void 0?null:n,t=t(),e.memoizedState=[t,n],t},useReducer:function(t,n,e){var r=Br();return n=e!==void 0?e(n):n,r.memoizedState=r.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},r.queue=t,t=t.dispatch=AT.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var n=Br();return t={current:t},n.memoizedState=t},useState:j1,useDebugValue:hv,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=j1(!1),n=t[0];return t=IT.bind(null,t[1]),Br().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,e){var r=pt,i=Br();if(ut){if(e===void 0)throw Error(J(407));e=e()}else{if(e=n(),jt===null)throw Error(J(349));ra&30||v2(r,n,e)}i.memoizedState=e;var o={value:e,getSnapshot:n};return i.queue=o,H1(x2.bind(null,r,o,t),[t]),r.flags|=2048,tl(9,y2.bind(null,r,o,e,n),void 0,null),e},useId:function(){var t=Br(),n=jt.identifierPrefix;if(ut){var e=di,r=hi;e=(r&~(1<<32-Er(r)-1)).toString(32)+e,n=":"+n+"R"+e,e=Ju++,0<e&&(n+="H"+e.toString(32)),n+=":"}else e=NT++,n=":"+n+"r"+e.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},DT={readContext:fr,useCallback:I2,useContext:fr,useEffect:fv,useImperativeHandle:N2,useInsertionEffect:S2,useLayoutEffect:k2,useMemo:A2,useReducer:qh,useRef:C2,useState:function(){return qh(el)},useDebugValue:hv,useDeferredValue:function(t){var n=hr();return R2(n,zt.memoizedState,t)},useTransition:function(){var t=qh(el)[0],n=hr().memoizedState;return[t,n]},useMutableSource:m2,useSyncExternalStore:g2,useId:T2,unstable_isNewReconciler:!1},OT={readContext:fr,useCallback:I2,useContext:fr,useEffect:fv,useImperativeHandle:N2,useInsertionEffect:S2,useLayoutEffect:k2,useMemo:A2,useReducer:Kh,useRef:C2,useState:function(){return Kh(el)},useDebugValue:hv,useDeferredValue:function(t){var n=hr();return zt===null?n.memoizedState=t:R2(n,zt.memoizedState,t)},useTransition:function(){var t=Kh(el)[0],n=hr().memoizedState;return[t,n]},useMutableSource:m2,useSyncExternalStore:g2,useId:T2,unstable_isNewReconciler:!1};function fs(t,n){try{var e="",r=n;do e+=aR(r),r=r.return;while(r);var i=e}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:n,stack:i,digest:null}}function Xh(t,n,e){return{value:t,source:null,stack:e??null,digest:n??null}}function gm(t,n){try{console.error(n.value)}catch(e){setTimeout(function(){throw e})}}var _T=typeof WeakMap=="function"?WeakMap:Map;function z2(t,n,e){e=mi(-1,e),e.tag=3,e.payload={element:null};var r=n.value;return e.callback=function(){Np||(Np=!0,Nm=r),gm(t,n)},e}function F2(t,n,e){e=mi(-1,e),e.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=n.value;e.payload=function(){return r(i)},e.callback=function(){gm(t,n)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){gm(t,n),typeof r!="function"&&(no===null?no=new Set([this]):no.add(this));var a=n.stack;this.componentDidCatch(n.value,{componentStack:a!==null?a:""})}),e}function G1(t,n,e){var r=t.pingCache;if(r===null){r=t.pingCache=new _T;var i=new Set;r.set(n,i)}else i=r.get(n),i===void 0&&(i=new Set,r.set(n,i));i.has(e)||(i.add(e),t=qT.bind(null,t,n,e),n.then(t,t))}function q1(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function K1(t,n,e,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===n?t.flags|=65536:(t.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(n=mi(-1,1),n.tag=2,to(e,n,1))),e.lanes|=1),t)}var zT=Ai.ReactCurrentOwner,Rn=!1;function hn(t,n,e,r){n.child=t===null?h2(n,null,e,r):cs(n,t.child,e,r)}function X1(t,n,e,r,i){e=e.render;var o=n.ref;return ts(n,i),r=cv(t,n,e,r,o,i),e=pv(),t!==null&&!Rn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i,ki(t,n,i)):(ut&&e&&Zg(n),n.flags|=1,hn(t,n,r,i),n.child)}function Y1(t,n,e,r,i){if(t===null){var o=e.type;return typeof o=="function"&&!wv(o)&&o.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(n.tag=15,n.type=o,M2(t,n,o,r,i)):(t=jc(e.type,null,r,n,n.mode,i),t.ref=n.ref,t.return=n,n.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(e=e.compare,e=e!==null?e:qu,e(a,r)&&t.ref===n.ref)return ki(t,n,i)}return n.flags|=1,t=io(o,r),t.ref=n.ref,t.return=n,n.child=t}function M2(t,n,e,r,i){if(t!==null){var o=t.memoizedProps;if(qu(o,r)&&t.ref===n.ref)if(Rn=!1,n.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Rn=!0);else return n.lanes=t.lanes,ki(t,n,i)}return vm(t,n,e,r,i)}function L2(t,n,e){var r=n.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Ka,Wn),Wn|=e;else{if(!(e&1073741824))return t=o!==null?o.baseLanes|e:e,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,et(Ka,Wn),Wn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:e,et(Ka,Wn),Wn|=r}else o!==null?(r=o.baseLanes|e,n.memoizedState=null):r=e,et(Ka,Wn),Wn|=r;return hn(t,n,i,e),n.child}function P2(t,n){var e=n.ref;(t===null&&e!==null||t!==null&&t.ref!==e)&&(n.flags|=512,n.flags|=2097152)}function vm(t,n,e,r,i){var o=On(e)?ta:sn.current;return o=us(n,o),ts(n,i),e=cv(t,n,e,r,o,i),r=pv(),t!==null&&!Rn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i,ki(t,n,i)):(ut&&r&&Zg(n),n.flags|=1,hn(t,n,e,i),n.child)}function Q1(t,n,e,r,i){if(On(e)){var o=!0;gp(n)}else o=!1;if(ts(n,i),n.stateNode===null)Wc(t,n),p2(n,e,r),mm(n,e,r,i),r=!0;else if(t===null){var a=n.stateNode,s=n.memoizedProps;a.props=s;var u=a.context,l=e.contextType;typeof l=="object"&&l!==null?l=fr(l):(l=On(e)?ta:sn.current,l=us(n,l));var c=e.getDerivedStateFromProps,p=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&$1(n,a,r,l),Vi=!1;var f=n.memoizedState;a.state=f,wp(n,r,a,i),u=n.memoizedState,s!==r||f!==u||Dn.current||Vi?(typeof c=="function"&&(dm(n,e,c,r),u=n.memoizedState),(s=Vi||W1(n,e,s,r,f,u,l))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(n.flags|=4194308)):(typeof a.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{a=n.stateNode,l2(t,n),s=n.memoizedProps,l=n.type===n.elementType?s:yr(n.type,s),a.props=l,p=n.pendingProps,f=a.context,u=e.contextType,typeof u=="object"&&u!==null?u=fr(u):(u=On(e)?ta:sn.current,u=us(n,u));var h=e.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||f!==u)&&$1(n,a,r,u),Vi=!1,f=n.memoizedState,a.state=f,wp(n,r,a,i);var d=n.memoizedState;s!==p||f!==d||Dn.current||Vi?(typeof h=="function"&&(dm(n,e,h,r),d=n.memoizedState),(l=Vi||W1(n,e,l,r,f,d,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,d,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,d,u)),typeof a.componentDidUpdate=="function"&&(n.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=d),a.props=r,a.state=d,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=1024),r=!1)}return ym(t,n,e,r,o,i)}function ym(t,n,e,r,i,o){P2(t,n);var a=(n.flags&128)!==0;if(!r&&!a)return i&&M1(n,e,!1),ki(t,n,o);r=n.stateNode,zT.current=n;var s=a&&typeof e.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,t!==null&&a?(n.child=cs(n,t.child,null,o),n.child=cs(n,null,s,o)):hn(t,n,s,o),n.memoizedState=r.state,i&&M1(n,e,!0),n.child}function B2(t){var n=t.stateNode;n.pendingContext?F1(t,n.pendingContext,n.pendingContext!==n.context):n.context&&F1(t,n.context,!1),av(t,n.containerInfo)}function Z1(t,n,e,r,i){return ls(),ev(i),n.flags|=256,hn(t,n,e,r),n.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function V2(t,n,e){var r=n.pendingProps,i=ct.current,o=!1,a=(n.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),et(ct,i&1),t===null)return fm(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(a=r.children,t=r.fallback,o?(r=n.mode,o=n.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ff(a,r,0,null),t=Go(t,r,e,null),o.return=n,t.return=n,o.sibling=t,n.child=o,n.child.memoizedState=bm(e),n.memoizedState=xm,t):dv(n,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return FT(t,n,a,r,s,i,e);if(o){o=r.fallback,a=n.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&n.child!==i?(r=n.child,r.childLanes=0,r.pendingProps=u,n.deletions=null):(r=io(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=io(s,o):(o=Go(o,a,e,null),o.flags|=2),o.return=n,r.return=n,r.sibling=o,n.child=r,r=o,o=n.child,a=t.child.memoizedState,a=a===null?bm(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~e,n.memoizedState=xm,r}return o=t.child,t=o.sibling,r=io(o,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=e),r.return=n,r.sibling=null,t!==null&&(e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)),n.child=r,n.memoizedState=null,r}function dv(t,n){return n=ff({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function hc(t,n,e,r){return r!==null&&ev(r),cs(n,t.child,null,e),t=dv(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function FT(t,n,e,r,i,o,a){if(e)return n.flags&256?(n.flags&=-257,r=Xh(Error(J(422))),hc(t,n,a,r)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(o=r.fallback,i=n.mode,r=ff({mode:"visible",children:r.children},i,0,null),o=Go(o,i,a,null),o.flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,n.mode&1&&cs(n,t.child,null,a),n.child.memoizedState=bm(a),n.memoizedState=xm,o);if(!(n.mode&1))return hc(t,n,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(J(419)),r=Xh(o,r,void 0),hc(t,n,a,r)}if(s=(a&t.childLanes)!==0,Rn||s){if(r=jt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Si(t,i),Nr(r,t,i,-1))}return bv(),r=Xh(Error(J(421))),hc(t,n,a,r)}return i.data==="$?"?(n.flags|=128,n.child=t.child,n=KT.bind(null,t),i._reactRetry=n,null):(t=o.treeContext,Hn=eo(i.nextSibling),Kn=n,ut=!0,br=null,t!==null&&(sr[ur++]=hi,sr[ur++]=di,sr[ur++]=na,hi=t.id,di=t.overflow,na=n),n=dv(n,r.children),n.flags|=4096,n)}function J1(t,n,e){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n),hm(t.return,n,e)}function Yh(t,n,e,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:e,tailMode:i}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=e,o.tailMode=i)}function W2(t,n,e){var r=n.pendingProps,i=r.revealOrder,o=r.tail;if(hn(t,n,r.children,e),r=ct.current,r&2)r=r&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J1(t,e,n);else if(t.tag===19)J1(t,e,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(ct,r),!(n.mode&1))n.memoizedState=null;else switch(i){case"forwards":for(e=n.child,i=null;e!==null;)t=e.alternate,t!==null&&Cp(t)===null&&(i=e),e=e.sibling;e=i,e===null?(i=n.child,n.child=null):(i=e.sibling,e.sibling=null),Yh(n,!1,i,e,o);break;case"backwards":for(e=null,i=n.child,n.child=null;i!==null;){if(t=i.alternate,t!==null&&Cp(t)===null){n.child=i;break}t=i.sibling,i.sibling=e,e=i,i=t}Yh(n,!0,e,null,o);break;case"together":Yh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wc(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function ki(t,n,e){if(t!==null&&(n.dependencies=t.dependencies),ia|=n.lanes,!(e&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(J(153));if(n.child!==null){for(t=n.child,e=io(t,t.pendingProps),n.child=e,e.return=n;t.sibling!==null;)t=t.sibling,e=e.sibling=io(t,t.pendingProps),e.return=n;e.sibling=null}return n.child}function MT(t,n,e){switch(n.tag){case 3:B2(n),ls();break;case 5:d2(n);break;case 1:On(n.type)&&gp(n);break;case 4:av(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,i=n.memoizedProps.value;et(xp,r._currentValue),r._currentValue=i;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(et(ct,ct.current&1),n.flags|=128,null):e&n.child.childLanes?V2(t,n,e):(et(ct,ct.current&1),t=ki(t,n,e),t!==null?t.sibling:null);et(ct,ct.current&1);break;case 19:if(r=(e&n.childLanes)!==0,t.flags&128){if(r)return W2(t,n,e);n.flags|=128}if(i=n.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),et(ct,ct.current),r)break;return null;case 22:case 23:return n.lanes=0,L2(t,n,e)}return ki(t,n,e)}var $2,wm,U2,j2;$2=function(t,n){for(var e=n.child;e!==null;){if(e.tag===5||e.tag===6)t.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};wm=function(){};U2=function(t,n,e,r){var i=t.memoizedProps;if(i!==r){t=n.stateNode,Po(Gr.current);var o=null;switch(e){case"input":i=Ud(t,i),r=Ud(t,r),o=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),o=[];break;case"textarea":i=Gd(t,i),r=Gd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dp)}Kd(e,r);var a;e=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Vu.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(e||(e={}),e[a]=u[a])}else e||(o||(o=[]),o.push(l,e)),e=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Vu.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&rt("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}e&&(o=o||[]).push("style",e);var l=o;(n.updateQueue=l)&&(n.flags|=4)}};j2=function(t,n,e,r){e!==r&&(n.flags|=4)};function ou(t,n){if(!ut)switch(t.tailMode){case"hidden":n=t.tail;for(var e=null;n!==null;)n.alternate!==null&&(e=n),n=n.sibling;e===null?t.tail=null:e.sibling=null;break;case"collapsed":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rn(t){var n=t.alternate!==null&&t.alternate.child===t.child,e=0,r=0;if(n)for(var i=t.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=e,n}function LT(t,n,e){var r=n.pendingProps;switch(Jg(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(n),null;case 1:return On(n.type)&&mp(),rn(n),null;case 3:return r=n.stateNode,ps(),ot(Dn),ot(sn),uv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pc(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,br!==null&&(Rm(br),br=null))),wm(t,n),rn(n),null;case 5:sv(n);var i=Po(Zu.current);if(e=n.type,t!==null&&n.stateNode!=null)U2(t,n,e,r,i),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(J(166));return rn(n),null}if(t=Po(Gr.current),pc(n)){r=n.stateNode,e=n.type;var o=n.memoizedProps;switch(r[$r]=n,r[Yu]=o,t=(n.mode&1)!==0,e){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<vu.length;i++)rt(vu[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":u1(r,o),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},rt("invalid",r);break;case"textarea":c1(r,o),rt("invalid",r)}Kd(e,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&cc(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&cc(r.textContent,s,t),i=["children",""+s]):Vu.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&rt("scroll",r)}switch(e){case"input":nc(r),l1(r,o,!0);break;case"textarea":nc(r),p1(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=dp)}r=i,n.updateQueue=r,r!==null&&(n.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vw(e)),t==="http://www.w3.org/1999/xhtml"?e==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(e,{is:r.is}):(t=a.createElement(e),e==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,e),t[$r]=n,t[Yu]=r,$2(t,n,!1,!1),n.stateNode=t;e:{switch(a=Xd(e,r),e){case"dialog":rt("cancel",t),rt("close",t),i=r;break;case"iframe":case"object":case"embed":rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<vu.length;i++)rt(vu[i],t);i=r;break;case"source":rt("error",t),i=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),i=r;break;case"details":rt("toggle",t),i=r;break;case"input":u1(t,r),i=Ud(t,r),rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),rt("invalid",t);break;case"textarea":c1(t,r),i=Gd(t,r),rt("invalid",t);break;default:i=r}Kd(e,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?bw(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&yw(t,u)):o==="children"?typeof u=="string"?(e!=="textarea"||u!=="")&&Wu(t,u):typeof u=="number"&&Wu(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vu.hasOwnProperty(o)?u!=null&&o==="onScroll"&&rt("scroll",t):u!=null&&Pg(t,o,u,a))}switch(e){case"input":nc(t),l1(t,r,!1);break;case"textarea":nc(t),p1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lo(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Qa(t,!!r.multiple,o,!1):r.defaultValue!=null&&Qa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dp)}switch(e){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return rn(n),null;case 6:if(t&&n.stateNode!=null)j2(t,n,t.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(J(166));if(e=Po(Zu.current),Po(Gr.current),pc(n)){if(r=n.stateNode,e=n.memoizedProps,r[$r]=n,(o=r.nodeValue!==e)&&(t=Kn,t!==null))switch(t.tag){case 3:cc(r.nodeValue,e,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cc(r.nodeValue,e,(t.mode&1)!==0)}o&&(n.flags|=4)}else r=(e.nodeType===9?e:e.ownerDocument).createTextNode(r),r[$r]=n,n.stateNode=r}return rn(n),null;case 13:if(ot(ct),r=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Hn!==null&&n.mode&1&&!(n.flags&128))s2(),ls(),n.flags|=98560,o=!1;else if(o=pc(n),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=n.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[$r]=n}else ls(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;rn(n),o=!1}else br!==null&&(Rm(br),br=null),o=!0;if(!o)return n.flags&65536?n:null}return n.flags&128?(n.lanes=e,n):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(t===null||ct.current&1?Ft===0&&(Ft=3):bv())),n.updateQueue!==null&&(n.flags|=4),rn(n),null);case 4:return ps(),wm(t,n),t===null&&Ku(n.stateNode.containerInfo),rn(n),null;case 10:return rv(n.type._context),rn(n),null;case 17:return On(n.type)&&mp(),rn(n),null;case 19:if(ot(ct),o=n.memoizedState,o===null)return rn(n),null;if(r=(n.flags&128)!==0,a=o.rendering,a===null)if(r)ou(o,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(a=Cp(t),a!==null){for(n.flags|=128,ou(o,!1),r=a.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=e,e=n.child;e!==null;)o=e,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e=e.sibling;return et(ct,ct.current&1|2),n.child}t=t.sibling}o.tail!==null&&bt()>hs&&(n.flags|=128,r=!0,ou(o,!1),n.lanes=4194304)}else{if(!r)if(t=Cp(a),t!==null){if(n.flags|=128,r=!0,e=t.updateQueue,e!==null&&(n.updateQueue=e,n.flags|=4),ou(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ut)return rn(n),null}else 2*bt()-o.renderingStartTime>hs&&e!==1073741824&&(n.flags|=128,r=!0,ou(o,!1),n.lanes=4194304);o.isBackwards?(a.sibling=n.child,n.child=a):(e=o.last,e!==null?e.sibling=a:n.child=a,o.last=a)}return o.tail!==null?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=bt(),n.sibling=null,e=ct.current,et(ct,r?e&1|2:e&1),n):(rn(n),null);case 22:case 23:return xv(),r=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?Wn&1073741824&&(rn(n),n.subtreeFlags&6&&(n.flags|=8192)):rn(n),null;case 24:return null;case 25:return null}throw Error(J(156,n.tag))}function PT(t,n){switch(Jg(n),n.tag){case 1:return On(n.type)&&mp(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ps(),ot(Dn),ot(sn),uv(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return sv(n),null;case 13:if(ot(ct),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(J(340));ls()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ot(ct),null;case 4:return ps(),null;case 10:return rv(n.type._context),null;case 22:case 23:return xv(),null;case 24:return null;default:return null}}var dc=!1,on=!1,BT=typeof WeakSet=="function"?WeakSet:Set,oe=null;function qa(t,n){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){mt(t,n,r)}else e.current=null}function Cm(t,n,e){try{e()}catch(r){mt(t,n,r)}}var ex=!1;function VT(t,n){if(om=pp,t=Kw(),Qg(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else e:{e=(e=t.ownerDocument)&&e.defaultView||window;var r=e.getSelection&&e.getSelection();if(r&&r.rangeCount!==0){e=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{e.nodeType,o.nodeType}catch{e=null;break e}var a=0,s=-1,u=-1,l=0,c=0,p=t,f=null;t:for(;;){for(var h;p!==e||i!==0&&p.nodeType!==3||(s=a+i),p!==o||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)f=p,p=h;for(;;){if(p===t)break t;if(f===e&&++l===i&&(s=a),f===o&&++c===r&&(u=a),(h=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=h}e=s===-1||u===-1?null:{start:s,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;for(am={focusedElem:t,selectionRange:e},pp=!1,oe=n;oe!==null;)if(n=oe,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,oe=t;else for(;oe!==null;){n=oe;try{var d=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var m=d.memoizedProps,v=d.memoizedState,g=n.stateNode,y=g.getSnapshotBeforeUpdate(n.elementType===n.type?m:yr(n.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=n.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(b){mt(n,n.return,b)}if(t=n.sibling,t!==null){t.return=n.return,oe=t;break}oe=n.return}return d=ex,ex=!1,d}function Du(t,n,e){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Cm(n,e,o)}i=i.next}while(i!==r)}}function cf(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var e=n=n.next;do{if((e.tag&t)===t){var r=e.create;e.destroy=r()}e=e.next}while(e!==n)}}function Sm(t){var n=t.ref;if(n!==null){var e=t.stateNode;switch(t.tag){case 5:t=e;break;default:t=e}typeof n=="function"?n(t):n.current=t}}function H2(t){var n=t.alternate;n!==null&&(t.alternate=null,H2(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[$r],delete n[Yu],delete n[lm],delete n[CT],delete n[ST])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G2(t){return t.tag===5||t.tag===3||t.tag===4}function tx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function km(t,n,e){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?e.nodeType===8?e.parentNode.insertBefore(t,n):e.insertBefore(t,n):(e.nodeType===8?(n=e.parentNode,n.insertBefore(t,e)):(n=e,n.appendChild(t)),e=e._reactRootContainer,e!=null||n.onclick!==null||(n.onclick=dp));else if(r!==4&&(t=t.child,t!==null))for(km(t,n,e),t=t.sibling;t!==null;)km(t,n,e),t=t.sibling}function Em(t,n,e){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?e.insertBefore(t,n):e.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Em(t,n,e),t=t.sibling;t!==null;)Em(t,n,e),t=t.sibling}var Xt=null,xr=!1;function zi(t,n,e){for(e=e.child;e!==null;)q2(t,n,e),e=e.sibling}function q2(t,n,e){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(tf,e)}catch{}switch(e.tag){case 5:on||qa(e,n);case 6:var r=Xt,i=xr;Xt=null,zi(t,n,e),Xt=r,xr=i,Xt!==null&&(xr?(t=Xt,e=e.stateNode,t.nodeType===8?t.parentNode.removeChild(e):t.removeChild(e)):Xt.removeChild(e.stateNode));break;case 18:Xt!==null&&(xr?(t=Xt,e=e.stateNode,t.nodeType===8?Uh(t.parentNode,e):t.nodeType===1&&Uh(t,e),Hu(t)):Uh(Xt,e.stateNode));break;case 4:r=Xt,i=xr,Xt=e.stateNode.containerInfo,xr=!0,zi(t,n,e),Xt=r,xr=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=e.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Cm(e,n,a),i=i.next}while(i!==r)}zi(t,n,e);break;case 1:if(!on&&(qa(e,n),r=e.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(s){mt(e,n,s)}zi(t,n,e);break;case 21:zi(t,n,e);break;case 22:e.mode&1?(on=(r=on)||e.memoizedState!==null,zi(t,n,e),on=r):zi(t,n,e);break;default:zi(t,n,e)}}function nx(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var e=t.stateNode;e===null&&(e=t.stateNode=new BT),n.forEach(function(r){var i=XT.bind(null,t,r);e.has(r)||(e.add(r),r.then(i,i))})}}function vr(t,n){var e=n.deletions;if(e!==null)for(var r=0;r<e.length;r++){var i=e[r];try{var o=t,a=n,s=a;e:for(;s!==null;){switch(s.tag){case 5:Xt=s.stateNode,xr=!1;break e;case 3:Xt=s.stateNode.containerInfo,xr=!0;break e;case 4:Xt=s.stateNode.containerInfo,xr=!0;break e}s=s.return}if(Xt===null)throw Error(J(160));q2(o,a,i),Xt=null,xr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){mt(i,n,l)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)K2(n,t),n=n.sibling}function K2(t,n){var e=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vr(n,t),Pr(t),r&4){try{Du(3,t,t.return),cf(3,t)}catch(m){mt(t,t.return,m)}try{Du(5,t,t.return)}catch(m){mt(t,t.return,m)}}break;case 1:vr(n,t),Pr(t),r&512&&e!==null&&qa(e,e.return);break;case 5:if(vr(n,t),Pr(t),r&512&&e!==null&&qa(e,e.return),t.flags&32){var i=t.stateNode;try{Wu(i,"")}catch(m){mt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=e!==null?e.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&mw(i,o),Xd(s,a);var l=Xd(s,o);for(a=0;a<u.length;a+=2){var c=u[a],p=u[a+1];c==="style"?bw(i,p):c==="dangerouslySetInnerHTML"?yw(i,p):c==="children"?Wu(i,p):Pg(i,c,p,l)}switch(s){case"input":jd(i,o);break;case"textarea":gw(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Qa(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Qa(i,!!o.multiple,o.defaultValue,!0):Qa(i,!!o.multiple,o.multiple?[]:"",!1))}i[Yu]=o}catch(m){mt(t,t.return,m)}}break;case 6:if(vr(n,t),Pr(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){mt(t,t.return,m)}}break;case 3:if(vr(n,t),Pr(t),r&4&&e!==null&&e.memoizedState.isDehydrated)try{Hu(n.containerInfo)}catch(m){mt(t,t.return,m)}break;case 4:vr(n,t),Pr(t);break;case 13:vr(n,t),Pr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(vv=bt())),r&4&&nx(t);break;case 22:if(c=e!==null&&e.memoizedState!==null,t.mode&1?(on=(l=on)||c,vr(n,t),on=l):vr(n,t),Pr(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(oe=t,c=t.child;c!==null;){for(p=oe=c;oe!==null;){switch(f=oe,h=f.child,f.tag){case 0:case 11:case 14:case 15:Du(4,f,f.return);break;case 1:qa(f,f.return);var d=f.stateNode;if(typeof d.componentWillUnmount=="function"){r=f,e=f.return;try{n=r,d.props=n.memoizedProps,d.state=n.memoizedState,d.componentWillUnmount()}catch(m){mt(r,e,m)}}break;case 5:qa(f,f.return);break;case 22:if(f.memoizedState!==null){ix(p);continue}}h!==null?(h.return=f,oe=h):ix(p)}c=c.sibling}e:for(c=null,p=t;;){if(p.tag===5){if(c===null){c=p;try{i=p.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=xw("display",a))}catch(m){mt(t,t.return,m)}}}else if(p.tag===6){if(c===null)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(m){mt(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vr(n,t),Pr(t),r&4&&nx(t);break;case 21:break;default:vr(n,t),Pr(t)}}function Pr(t){var n=t.flags;if(n&2){try{e:{for(var e=t.return;e!==null;){if(G2(e)){var r=e;break e}e=e.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wu(i,""),r.flags&=-33);var o=tx(t);Em(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=tx(t);km(t,s,a);break;default:throw Error(J(161))}}catch(u){mt(t,t.return,u)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function WT(t,n,e){oe=t,X2(t)}function X2(t,n,e){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||dc;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||on;s=dc;var l=on;if(dc=a,(on=u)&&!l)for(oe=i;oe!==null;)a=oe,u=a.child,a.tag===22&&a.memoizedState!==null?ox(i):u!==null?(u.return=a,oe=u):ox(i);for(;o!==null;)oe=o,X2(o),o=o.sibling;oe=i,dc=s,on=l}rx(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,oe=o):rx(t)}}function rx(t){for(;oe!==null;){var n=oe;if(n.flags&8772){var e=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:on||cf(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!on)if(e===null)r.componentDidMount();else{var i=n.elementType===n.type?e.memoizedProps:yr(n.type,e.memoizedProps);r.componentDidUpdate(i,e.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;o!==null&&V1(n,o,r);break;case 3:var a=n.updateQueue;if(a!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}V1(n,a,e)}break;case 5:var s=n.stateNode;if(e===null&&n.flags&4){e=s;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&e.focus();break;case"img":u.src&&(e.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var l=n.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var p=c.dehydrated;p!==null&&Hu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}on||n.flags&512&&Sm(n)}catch(f){mt(n,n.return,f)}}if(n===t){oe=null;break}if(e=n.sibling,e!==null){e.return=n.return,oe=e;break}oe=n.return}}function ix(t){for(;oe!==null;){var n=oe;if(n===t){oe=null;break}var e=n.sibling;if(e!==null){e.return=n.return,oe=e;break}oe=n.return}}function ox(t){for(;oe!==null;){var n=oe;try{switch(n.tag){case 0:case 11:case 15:var e=n.return;try{cf(4,n)}catch(u){mt(n,e,u)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var i=n.return;try{r.componentDidMount()}catch(u){mt(n,i,u)}}var o=n.return;try{Sm(n)}catch(u){mt(n,o,u)}break;case 5:var a=n.return;try{Sm(n)}catch(u){mt(n,a,u)}}}catch(u){mt(n,n.return,u)}if(n===t){oe=null;break}var s=n.sibling;if(s!==null){s.return=n.return,oe=s;break}oe=n.return}}var $T=Math.ceil,Ep=Ai.ReactCurrentDispatcher,mv=Ai.ReactCurrentOwner,pr=Ai.ReactCurrentBatchConfig,Ve=0,jt=null,Nt=null,Jt=0,Wn=0,Ka=yo(0),Ft=0,nl=null,ia=0,pf=0,gv=0,Ou=null,Nn=null,vv=0,hs=1/0,ai=null,Np=!1,Nm=null,no=null,mc=!1,Gi=null,Ip=0,_u=0,Im=null,$c=-1,Uc=0;function gn(){return Ve&6?bt():$c!==-1?$c:$c=bt()}function ro(t){return t.mode&1?Ve&2&&Jt!==0?Jt&-Jt:ET.transition!==null?(Uc===0&&(Uc=Ow()),Uc):(t=qe,t!==0||(t=window.event,t=t===void 0?16:Bw(t.type)),t):1}function Nr(t,n,e,r){if(50<_u)throw _u=0,Im=null,Error(J(185));Sl(t,e,r),(!(Ve&2)||t!==jt)&&(t===jt&&(!(Ve&2)&&(pf|=e),Ft===4&&Ui(t,Jt)),_n(t,r),e===1&&Ve===0&&!(n.mode&1)&&(hs=bt()+500,sf&&xo()))}function _n(t,n){var e=t.callbackNode;ER(t,n);var r=cp(t,t===jt?Jt:0);if(r===0)e!==null&&d1(e),t.callbackNode=null,t.callbackPriority=0;else if(n=r&-r,t.callbackPriority!==n){if(e!=null&&d1(e),n===1)t.tag===0?kT(ax.bind(null,t)):i2(ax.bind(null,t)),bT(function(){!(Ve&6)&&xo()}),e=null;else{switch(_w(r)){case 1:e=Ug;break;case 4:e=Tw;break;case 16:e=lp;break;case 536870912:e=Dw;break;default:e=lp}e=rC(e,Y2.bind(null,t))}t.callbackPriority=n,t.callbackNode=e}}function Y2(t,n){if($c=-1,Uc=0,Ve&6)throw Error(J(327));var e=t.callbackNode;if(ns()&&t.callbackNode!==e)return null;var r=cp(t,t===jt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||n)n=Ap(t,r);else{n=r;var i=Ve;Ve|=2;var o=Z2();(jt!==t||Jt!==n)&&(ai=null,hs=bt()+500,Ho(t,n));do try{HT();break}catch(s){Q2(t,s)}while(!0);nv(),Ep.current=o,Ve=i,Nt!==null?n=0:(jt=null,Jt=0,n=Ft)}if(n!==0){if(n===2&&(i=em(t),i!==0&&(r=i,n=Am(t,i))),n===1)throw e=nl,Ho(t,0),Ui(t,r),_n(t,bt()),e;if(n===6)Ui(t,r);else{if(i=t.current.alternate,!(r&30)&&!UT(i)&&(n=Ap(t,r),n===2&&(o=em(t),o!==0&&(r=o,n=Am(t,o))),n===1))throw e=nl,Ho(t,0),Ui(t,r),_n(t,bt()),e;switch(t.finishedWork=i,t.finishedLanes=r,n){case 0:case 1:throw Error(J(345));case 2:Ro(t,Nn,ai);break;case 3:if(Ui(t,r),(r&130023424)===r&&(n=vv+500-bt(),10<n)){if(cp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=um(Ro.bind(null,t,Nn,ai),n);break}Ro(t,Nn,ai);break;case 4:if(Ui(t,r),(r&4194240)===r)break;for(n=t.eventTimes,i=-1;0<r;){var a=31-Er(r);o=1<<a,a=n[a],a>i&&(i=a),r&=~o}if(r=i,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$T(r/1960))-r,10<r){t.timeoutHandle=um(Ro.bind(null,t,Nn,ai),r);break}Ro(t,Nn,ai);break;case 5:Ro(t,Nn,ai);break;default:throw Error(J(329))}}}return _n(t,bt()),t.callbackNode===e?Y2.bind(null,t):null}function Am(t,n){var e=Ou;return t.current.memoizedState.isDehydrated&&(Ho(t,n).flags|=256),t=Ap(t,n),t!==2&&(n=Nn,Nn=e,n!==null&&Rm(n)),t}function Rm(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function UT(t){for(var n=t;;){if(n.flags&16384){var e=n.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var r=0;r<e.length;r++){var i=e[r],o=i.getSnapshot;i=i.value;try{if(!Rr(o(),i))return!1}catch{return!1}}}if(e=n.child,n.subtreeFlags&16384&&e!==null)e.return=n,n=e;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ui(t,n){for(n&=~gv,n&=~pf,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var e=31-Er(n),r=1<<e;t[e]=-1,n&=~r}}function ax(t){if(Ve&6)throw Error(J(327));ns();var n=cp(t,0);if(!(n&1))return _n(t,bt()),null;var e=Ap(t,n);if(t.tag!==0&&e===2){var r=em(t);r!==0&&(n=r,e=Am(t,r))}if(e===1)throw e=nl,Ho(t,0),Ui(t,n),_n(t,bt()),e;if(e===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ro(t,Nn,ai),_n(t,bt()),null}function yv(t,n){var e=Ve;Ve|=1;try{return t(n)}finally{Ve=e,Ve===0&&(hs=bt()+500,sf&&xo())}}function oa(t){Gi!==null&&Gi.tag===0&&!(Ve&6)&&ns();var n=Ve;Ve|=1;var e=pr.transition,r=qe;try{if(pr.transition=null,qe=1,t)return t()}finally{qe=r,pr.transition=e,Ve=n,!(Ve&6)&&xo()}}function xv(){Wn=Ka.current,ot(Ka)}function Ho(t,n){t.finishedWork=null,t.finishedLanes=0;var e=t.timeoutHandle;if(e!==-1&&(t.timeoutHandle=-1,xT(e)),Nt!==null)for(e=Nt.return;e!==null;){var r=e;switch(Jg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mp();break;case 3:ps(),ot(Dn),ot(sn),uv();break;case 5:sv(r);break;case 4:ps();break;case 13:ot(ct);break;case 19:ot(ct);break;case 10:rv(r.type._context);break;case 22:case 23:xv()}e=e.return}if(jt=t,Nt=t=io(t.current,null),Jt=Wn=n,Ft=0,nl=null,gv=pf=ia=0,Nn=Ou=null,Lo!==null){for(n=0;n<Lo.length;n++)if(e=Lo[n],r=e.interleaved,r!==null){e.interleaved=null;var i=r.next,o=e.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}e.pending=r}Lo=null}return t}function Q2(t,n){do{var e=Nt;try{if(nv(),Bc.current=kp,Sp){for(var r=pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sp=!1}if(ra=0,Wt=zt=pt=null,Tu=!1,Ju=0,mv.current=null,e===null||e.return===null){Ft=1,nl=n,Nt=null;break}e:{var o=t,a=e.return,s=e,u=n;if(n=Jt,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,p=c.tag;if(!(c.mode&1)&&(p===0||p===11||p===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=q1(a);if(h!==null){h.flags&=-257,K1(h,a,s,o,n),h.mode&1&&G1(o,l,n),n=h,u=l;var d=n.updateQueue;if(d===null){var m=new Set;m.add(u),n.updateQueue=m}else d.add(u);break e}else{if(!(n&1)){G1(o,l,n),bv();break e}u=Error(J(426))}}else if(ut&&s.mode&1){var v=q1(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),K1(v,a,s,o,n),ev(fs(u,s));break e}}o=u=fs(u,s),Ft!==4&&(Ft=2),Ou===null?Ou=[o]:Ou.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n;var g=z2(o,u,n);B1(o,g);break e;case 1:s=u;var y=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(no===null||!no.has(x)))){o.flags|=65536,n&=-n,o.lanes|=n;var b=F2(o,s,n);B1(o,b);break e}}o=o.return}while(o!==null)}eC(e)}catch(w){n=w,Nt===e&&e!==null&&(Nt=e=e.return);continue}break}while(!0)}function Z2(){var t=Ep.current;return Ep.current=kp,t===null?kp:t}function bv(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),jt===null||!(ia&268435455)&&!(pf&268435455)||Ui(jt,Jt)}function Ap(t,n){var e=Ve;Ve|=2;var r=Z2();(jt!==t||Jt!==n)&&(ai=null,Ho(t,n));do try{jT();break}catch(i){Q2(t,i)}while(!0);if(nv(),Ve=e,Ep.current=r,Nt!==null)throw Error(J(261));return jt=null,Jt=0,Ft}function jT(){for(;Nt!==null;)J2(Nt)}function HT(){for(;Nt!==null&&!gR();)J2(Nt)}function J2(t){var n=nC(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,n===null?eC(t):Nt=n,mv.current=null}function eC(t){var n=t;do{var e=n.alternate;if(t=n.return,n.flags&32768){if(e=PT(e,n),e!==null){e.flags&=32767,Nt=e;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Nt=null;return}}else if(e=LT(e,n,Wn),e!==null){Nt=e;return}if(n=n.sibling,n!==null){Nt=n;return}Nt=n=t}while(n!==null);Ft===0&&(Ft=5)}function Ro(t,n,e){var r=qe,i=pr.transition;try{pr.transition=null,qe=1,GT(t,n,e,r)}finally{pr.transition=i,qe=r}return null}function GT(t,n,e,r){do ns();while(Gi!==null);if(Ve&6)throw Error(J(327));e=t.finishedWork;var i=t.finishedLanes;if(e===null)return null;if(t.finishedWork=null,t.finishedLanes=0,e===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=e.lanes|e.childLanes;if(NR(t,o),t===jt&&(Nt=jt=null,Jt=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||mc||(mc=!0,rC(lp,function(){return ns(),null})),o=(e.flags&15990)!==0,e.subtreeFlags&15990||o){o=pr.transition,pr.transition=null;var a=qe;qe=1;var s=Ve;Ve|=4,mv.current=null,VT(t,e),K2(e,t),fT(am),pp=!!om,am=om=null,t.current=e,WT(e),vR(),Ve=s,qe=a,pr.transition=o}else t.current=e;if(mc&&(mc=!1,Gi=t,Ip=i),o=t.pendingLanes,o===0&&(no=null),bR(e.stateNode),_n(t,bt()),n!==null)for(r=t.onRecoverableError,e=0;e<n.length;e++)i=n[e],r(i.value,{componentStack:i.stack,digest:i.digest});if(Np)throw Np=!1,t=Nm,Nm=null,t;return Ip&1&&t.tag!==0&&ns(),o=t.pendingLanes,o&1?t===Im?_u++:(_u=0,Im=t):_u=0,xo(),null}function ns(){if(Gi!==null){var t=_w(Ip),n=pr.transition,e=qe;try{if(pr.transition=null,qe=16>t?16:t,Gi===null)var r=!1;else{if(t=Gi,Gi=null,Ip=0,Ve&6)throw Error(J(331));var i=Ve;for(Ve|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(oe=l;oe!==null;){var c=oe;switch(c.tag){case 0:case 11:case 15:Du(8,c,o)}var p=c.child;if(p!==null)p.return=c,oe=p;else for(;oe!==null;){c=oe;var f=c.sibling,h=c.return;if(H2(c),c===l){oe=null;break}if(f!==null){f.return=h,oe=f;break}oe=h}}}var d=o.alternate;if(d!==null){var m=d.child;if(m!==null){d.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Du(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,oe=g;break e}oe=o.return}}var y=t.current;for(oe=y;oe!==null;){a=oe;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,oe=x;else e:for(a=y;oe!==null;){if(s=oe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:cf(9,s)}}catch(w){mt(s,s.return,w)}if(s===a){oe=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,oe=b;break e}oe=s.return}}if(Ve=i,xo(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(tf,t)}catch{}r=!0}return r}finally{qe=e,pr.transition=n}}return!1}function sx(t,n,e){n=fs(e,n),n=z2(t,n,1),t=to(t,n,1),n=gn(),t!==null&&(Sl(t,1,n),_n(t,n))}function mt(t,n,e){if(t.tag===3)sx(t,t,e);else for(;n!==null;){if(n.tag===3){sx(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(no===null||!no.has(r))){t=fs(e,t),t=F2(n,t,1),n=to(n,t,1),t=gn(),n!==null&&(Sl(n,1,t),_n(n,t));break}}n=n.return}}function qT(t,n,e){var r=t.pingCache;r!==null&&r.delete(n),n=gn(),t.pingedLanes|=t.suspendedLanes&e,jt===t&&(Jt&e)===e&&(Ft===4||Ft===3&&(Jt&130023424)===Jt&&500>bt()-vv?Ho(t,0):gv|=e),_n(t,n)}function tC(t,n){n===0&&(t.mode&1?(n=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):n=1);var e=gn();t=Si(t,n),t!==null&&(Sl(t,n,e),_n(t,e))}function KT(t){var n=t.memoizedState,e=0;n!==null&&(e=n.retryLane),tC(t,e)}function XT(t,n){var e=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(e=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(n),tC(t,e)}var nC;nC=function(t,n,e){if(t!==null)if(t.memoizedProps!==n.pendingProps||Dn.current)Rn=!0;else{if(!(t.lanes&e)&&!(n.flags&128))return Rn=!1,MT(t,n,e);Rn=!!(t.flags&131072)}else Rn=!1,ut&&n.flags&1048576&&o2(n,yp,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Wc(t,n),t=n.pendingProps;var i=us(n,sn.current);ts(n,e),i=cv(null,n,r,t,i,e);var o=pv();return n.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,On(r)?(o=!0,gp(n)):o=!1,n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ov(n),i.updater=uf,n.stateNode=i,i._reactInternals=n,mm(n,r,t,e),n=ym(null,n,r,!0,o,e)):(n.tag=0,ut&&o&&Zg(n),hn(null,n,i,e),n=n.child),n;case 16:r=n.elementType;e:{switch(Wc(t,n),t=n.pendingProps,i=r._init,r=i(r._payload),n.type=r,i=n.tag=QT(r),t=yr(r,t),i){case 0:n=vm(null,n,r,t,e);break e;case 1:n=Q1(null,n,r,t,e);break e;case 11:n=X1(null,n,r,t,e);break e;case 14:n=Y1(null,n,r,yr(r.type,t),e);break e}throw Error(J(306,r,""))}return n;case 0:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:yr(r,i),vm(t,n,r,i,e);case 1:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:yr(r,i),Q1(t,n,r,i,e);case 3:e:{if(B2(n),t===null)throw Error(J(387));r=n.pendingProps,o=n.memoizedState,i=o.element,l2(t,n),wp(n,r,null,e);var a=n.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){i=fs(Error(J(423)),n),n=Z1(t,n,r,e,i);break e}else if(r!==i){i=fs(Error(J(424)),n),n=Z1(t,n,r,e,i);break e}else for(Hn=eo(n.stateNode.containerInfo.firstChild),Kn=n,ut=!0,br=null,e=h2(n,null,r,e),n.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(ls(),r===i){n=ki(t,n,e);break e}hn(t,n,r,e)}n=n.child}return n;case 5:return d2(n),t===null&&fm(n),r=n.type,i=n.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,sm(r,i)?a=null:o!==null&&sm(r,o)&&(n.flags|=32),P2(t,n),hn(t,n,a,e),n.child;case 6:return t===null&&fm(n),null;case 13:return V2(t,n,e);case 4:return av(n,n.stateNode.containerInfo),r=n.pendingProps,t===null?n.child=cs(n,null,r,e):hn(t,n,r,e),n.child;case 11:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:yr(r,i),X1(t,n,r,i,e);case 7:return hn(t,n,n.pendingProps,e),n.child;case 8:return hn(t,n,n.pendingProps.children,e),n.child;case 12:return hn(t,n,n.pendingProps.children,e),n.child;case 10:e:{if(r=n.type._context,i=n.pendingProps,o=n.memoizedProps,a=i.value,et(xp,r._currentValue),r._currentValue=a,o!==null)if(Rr(o.value,a)){if(o.children===i.children&&!Dn.current){n=ki(t,n,e);break e}}else for(o=n.child,o!==null&&(o.return=n);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=mi(-1,e&-e),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=e,u=o.alternate,u!==null&&(u.lanes|=e),hm(o.return,e,n),s.lanes|=e;break}u=u.next}}else if(o.tag===10)a=o.type===n.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=e,s=a.alternate,s!==null&&(s.lanes|=e),hm(a,e,n),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===n){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}hn(t,n,i.children,e),n=n.child}return n;case 9:return i=n.type,r=n.pendingProps.children,ts(n,e),i=fr(i),r=r(i),n.flags|=1,hn(t,n,r,e),n.child;case 14:return r=n.type,i=yr(r,n.pendingProps),i=yr(r.type,i),Y1(t,n,r,i,e);case 15:return M2(t,n,n.type,n.pendingProps,e);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:yr(r,i),Wc(t,n),n.tag=1,On(r)?(t=!0,gp(n)):t=!1,ts(n,e),p2(n,r,i),mm(n,r,i,e),ym(null,n,r,!0,t,e);case 19:return W2(t,n,e);case 22:return L2(t,n,e)}throw Error(J(156,n.tag))};function rC(t,n){return Rw(t,n)}function YT(t,n,e,r){this.tag=t,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,n,e,r){return new YT(t,n,e,r)}function wv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QT(t){if(typeof t=="function")return wv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vg)return 11;if(t===Wg)return 14}return 2}function io(t,n){var e=t.alternate;return e===null?(e=cr(t.tag,n,t.key,t.mode),e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.alternate=t,t.alternate=e):(e.pendingProps=n,e.type=t.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=t.flags&14680064,e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,n=t.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e}function jc(t,n,e,r,i,o){var a=2;if(r=t,typeof t=="function")wv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Pa:return Go(e.children,i,o,n);case Bg:a=8,i|=8;break;case Bd:return t=cr(12,e,n,i|2),t.elementType=Bd,t.lanes=o,t;case Vd:return t=cr(13,e,n,i),t.elementType=Vd,t.lanes=o,t;case Wd:return t=cr(19,e,n,i),t.elementType=Wd,t.lanes=o,t;case fw:return ff(e,i,o,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cw:a=10;break e;case pw:a=9;break e;case Vg:a=11;break e;case Wg:a=14;break e;case Bi:a=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return n=cr(a,e,n,i),n.elementType=t,n.type=r,n.lanes=o,n}function Go(t,n,e,r){return t=cr(7,t,r,n),t.lanes=e,t}function ff(t,n,e,r){return t=cr(22,t,r,n),t.elementType=fw,t.lanes=e,t.stateNode={isHidden:!1},t}function Qh(t,n,e){return t=cr(6,t,null,n),t.lanes=e,t}function Zh(t,n,e){return n=cr(4,t.children!==null?t.children:[],t.key,n),n.lanes=e,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function ZT(t,n,e,r,i){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cv(t,n,e,r,i,o,a,s,u){return t=new ZT(t,n,e,s,u),n===1?(n=1,o===!0&&(n|=8)):n=0,o=cr(3,null,null,n),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ov(o),t}function JT(t,n,e){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:La,key:r==null?null:""+r,children:t,containerInfo:n,implementation:e}}function iC(t){if(!t)return co;t=t._reactInternals;e:{if(da(t)!==t||t.tag!==1)throw Error(J(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(On(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(J(171))}if(t.tag===1){var e=t.type;if(On(e))return r2(t,e,n)}return n}function oC(t,n,e,r,i,o,a,s,u){return t=Cv(e,r,!0,t,i,o,a,s,u),t.context=iC(null),e=t.current,r=gn(),i=ro(e),o=mi(r,i),o.callback=n??null,to(e,o,i),t.current.lanes=i,Sl(t,i,r),_n(t,r),t}function hf(t,n,e,r){var i=n.current,o=gn(),a=ro(i);return e=iC(e),n.context===null?n.context=e:n.pendingContext=e,n=mi(o,a),n.payload={element:t},r=r===void 0?null:r,r!==null&&(n.callback=r),t=to(i,n,a),t!==null&&(Nr(t,i,a,o),Pc(t,i,a)),a}function Rp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ux(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var e=t.retryLane;t.retryLane=e!==0&&e<n?e:n}}function Sv(t,n){ux(t,n),(t=t.alternate)&&ux(t,n)}function eD(){return null}var aC=typeof reportError=="function"?reportError:function(t){console.error(t)};function kv(t){this._internalRoot=t}df.prototype.render=kv.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(J(409));hf(t,n,null,null)};df.prototype.unmount=kv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;oa(function(){hf(null,t,null,null)}),n[Ci]=null}};function df(t){this._internalRoot=t}df.prototype.unstable_scheduleHydration=function(t){if(t){var n=Mw();t={blockedOn:null,target:t,priority:n};for(var e=0;e<$i.length&&n!==0&&n<$i[e].priority;e++);$i.splice(e,0,t),e===0&&Pw(t)}};function Ev(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lx(){}function tD(t,n,e,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Rp(a);o.call(l)}}var a=oC(n,r,t,0,null,!1,!1,"",lx);return t._reactRootContainer=a,t[Ci]=a.current,Ku(t.nodeType===8?t.parentNode:t),oa(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Rp(u);s.call(l)}}var u=Cv(t,0,!1,null,null,!1,!1,"",lx);return t._reactRootContainer=u,t[Ci]=u.current,Ku(t.nodeType===8?t.parentNode:t),oa(function(){hf(n,u,e,r)}),u}function gf(t,n,e,r,i){var o=e._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=Rp(a);s.call(u)}}hf(n,a,t,i)}else a=tD(e,n,t,i,r);return Rp(a)}zw=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var e=gu(n.pendingLanes);e!==0&&(jg(n,e|1),_n(n,bt()),!(Ve&6)&&(hs=bt()+500,xo()))}break;case 13:oa(function(){var r=Si(t,1);if(r!==null){var i=gn();Nr(r,t,1,i)}}),Sv(t,1)}};Hg=function(t){if(t.tag===13){var n=Si(t,134217728);if(n!==null){var e=gn();Nr(n,t,134217728,e)}Sv(t,134217728)}};Fw=function(t){if(t.tag===13){var n=ro(t),e=Si(t,n);if(e!==null){var r=gn();Nr(e,t,n,r)}Sv(t,n)}};Mw=function(){return qe};Lw=function(t,n){var e=qe;try{return qe=t,n()}finally{qe=e}};Qd=function(t,n,e){switch(n){case"input":if(jd(t,e),n=e.name,e.type==="radio"&&n!=null){for(e=t;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<e.length;n++){var r=e[n];if(r!==t&&r.form===t.form){var i=af(r);if(!i)throw Error(J(90));dw(r),jd(r,i)}}}break;case"textarea":gw(t,e);break;case"select":n=e.value,n!=null&&Qa(t,!!e.multiple,n,!1)}};Sw=yv;kw=oa;var nD={usingClientEntryPoint:!1,Events:[El,$a,af,ww,Cw,yv]},au={findFiberByHostInstance:Mo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rD={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Iw(t),t===null?null:t.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||eD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{tf=gc.inject(rD),Hr=gc}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nD;tr.createPortal=function(t,n){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ev(n))throw Error(J(200));return JT(t,n,null,e)};tr.createRoot=function(t,n){if(!Ev(t))throw Error(J(299));var e=!1,r="",i=aC;return n!=null&&(n.unstable_strictMode===!0&&(e=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),n=Cv(t,1,!1,null,null,e,!1,r,i),t[Ci]=n.current,Ku(t.nodeType===8?t.parentNode:t),new kv(n)};tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Iw(n),t=t===null?null:t.stateNode,t};tr.flushSync=function(t){return oa(t)};tr.hydrate=function(t,n,e){if(!mf(n))throw Error(J(200));return gf(null,t,n,!0,e)};tr.hydrateRoot=function(t,n,e){if(!Ev(t))throw Error(J(405));var r=e!=null&&e.hydratedSources||null,i=!1,o="",a=aC;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),n=oC(n,null,t,1,e??null,i,!1,o,a),t[Ci]=n.current,Ku(t),r)for(t=0;t<r.length;t++)e=r[t],i=e._getVersion,i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i);return new df(n)};tr.render=function(t,n,e){if(!mf(n))throw Error(J(200));return gf(null,t,n,!1,e)};tr.unmountComponentAtNode=function(t){if(!mf(t))throw Error(J(40));return t._reactRootContainer?(oa(function(){gf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};tr.unstable_batchedUpdates=yv;tr.unstable_renderSubtreeIntoContainer=function(t,n,e,r){if(!mf(e))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return gf(t,n,e,!1,r)};tr.version="18.2.0-next-9e3b772b8-20220608";function sC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sC)}catch(t){console.error(t)}}sC(),ow.exports=tr;var uC=ow.exports,cx=uC;Ld.createRoot=cx.createRoot,Ld.hydrateRoot=cx.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},rl.apply(this,arguments)}var qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qi||(qi={}));const px="popstate";function iD(t){t===void 0&&(t={});function n(r,i){let{pathname:o,search:a,hash:s}=r.location;return Tm("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(r,i){return typeof i=="string"?i:lC(i)}return aD(n,e,null,t)}function Mt(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function Nv(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function oD(){return Math.random().toString(36).substr(2,8)}function fx(t,n){return{usr:t.state,key:t.key,idx:n}}function Tm(t,n,e,r){return e===void 0&&(e=null),rl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?Ls(n):n,{state:e,key:n&&n.key||r||oD()})}function lC(t){let{pathname:n="/",search:e="",hash:r=""}=t;return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Ls(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substr(e),t=t.substr(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substr(r),t=t.substr(0,r)),t&&(n.pathname=t)}return n}function aD(t,n,e,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=qi.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(rl({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function p(){s=qi.Pop;let v=c(),g=v==null?null:v-l;l=v,u&&u({action:s,location:m.location,delta:g})}function f(v,g){s=qi.Push;let y=Tm(m.location,v,g);e&&e(y,v),l=c()+1;let x=fx(y,l),b=m.createHref(y);try{a.pushState(x,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(b)}o&&u&&u({action:s,location:m.location,delta:1})}function h(v,g){s=qi.Replace;let y=Tm(m.location,v,g);e&&e(y,v),l=c();let x=fx(y,l),b=m.createHref(y);a.replaceState(x,"",b),o&&u&&u({action:s,location:m.location,delta:0})}function d(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:lC(v);return Mt(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return s},get location(){return t(i,a)},listen(v){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(px,p),u=v,()=>{i.removeEventListener(px,p),u=null}},createHref(v){return n(i,v)},createURL:d,encodeLocation(v){let g=d(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(v){return a.go(v)}};return m}var hx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hx||(hx={}));function sD(t,n,e){e===void 0&&(e="/");let r=typeof n=="string"?Ls(n):n,i=fC(r.pathname||"/",e);if(i==null)return null;let o=cC(t);uD(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=vD(o[s],bD(i));return a}function cC(t,n,e,r){n===void 0&&(n=[]),e===void 0&&(e=[]),r===void 0&&(r="");let i=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Mt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=qo([r,u.relativePath]),c=e.concat(u);o.children&&o.children.length>0&&(Mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),cC(o.children,n,c,l)),!(o.path==null&&!o.index)&&n.push({path:l,score:mD(l,o.index),routesMeta:c})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let u of pC(o.path))i(o,a,u)}),n}function pC(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,i=e.endsWith("?"),o=e.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=pC(r.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function uD(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:gD(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}const lD=/^:[\w-]+$/,cD=3,pD=2,fD=1,hD=10,dD=-2,dx=t=>t==="*";function mD(t,n){let e=t.split("/"),r=e.length;return e.some(dx)&&(r+=dD),n&&(r+=pD),e.filter(i=>!dx(i)).reduce((i,o)=>i+(lD.test(o)?cD:o===""?fD:hD),r)}function gD(t,n){return t.length===n.length&&t.slice(0,-1).every((r,i)=>r===n[i])?t[t.length-1]-n[n.length-1]:0}function vD(t,n){let{routesMeta:e}=t,r={},i="/",o=[];for(let a=0;a<e.length;++a){let s=e[a],u=a===e.length-1,l=i==="/"?n:n.slice(i.length)||"/",c=yD({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let p=s.route;o.push({params:r,pathname:qo([i,c.pathname]),pathnameBase:ID(qo([i,c.pathnameBase])),route:p}),c.pathnameBase!=="/"&&(i=qo([i,c.pathnameBase]))}return o}function yD(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=xD(t.path,t.caseSensitive,t.end),i=n.match(e);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,p)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=s[p]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const d=s[p];return h&&!d?l[f]=void 0:l[f]=wD(d||"",f),l},{}),pathname:o,pathnameBase:a,pattern:t}}function xD(t,n,e){n===void 0&&(n=!1),e===void 0&&(e=!0),Nv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),r]}function bD(t){try{return decodeURI(t)}catch(n){return Nv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function wD(t,n){try{return decodeURIComponent(t)}catch(e){return Nv(!1,'The value for the URL param "'+n+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+e+").")),t}}function fC(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}function CD(t,n){n===void 0&&(n="/");let{pathname:e,search:r="",hash:i=""}=typeof t=="string"?Ls(t):t;return{pathname:e?e.startsWith("/")?e:SD(e,n):n,search:AD(r),hash:RD(i)}}function SD(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function Jh(t,n,e,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kD(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function ED(t,n){let e=kD(t);return n?e.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):e.map(r=>r.pathnameBase)}function ND(t,n,e,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ls(t):(i=rl({},t),Mt(!i.pathname||!i.pathname.includes("?"),Jh("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),Jh("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),Jh("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=e;else{let p=n.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),p-=1;i.pathname=f.join("/")}s=p>=0?n[p]:"/"}let u=CD(i,s),l=a&&a!=="/"&&a.endsWith("/"),c=(o||a===".")&&e.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const qo=t=>t.join("/").replace(/\/\/+/g,"/"),ID=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function TD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hC=["post","put","patch","delete"];new Set(hC);const DD=["get",...hC];new Set(DD);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},il.apply(this,arguments)}const Iv=ie.createContext(null),OD=ie.createContext(null),vf=ie.createContext(null),yf=ie.createContext(null),Ps=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),dC=ie.createContext(null);function xf(){return ie.useContext(yf)!=null}function mC(){return xf()||Mt(!1),ie.useContext(yf).location}function gC(t){ie.useContext(vf).static||ie.useLayoutEffect(t)}function _D(){let{isDataRoute:t}=ie.useContext(Ps);return t?GD():zD()}function zD(){xf()||Mt(!1);let t=ie.useContext(Iv),{basename:n,future:e,navigator:r}=ie.useContext(vf),{matches:i}=ie.useContext(Ps),{pathname:o}=mC(),a=JSON.stringify(ED(i,e.v7_relativeSplatPath)),s=ie.useRef(!1);return gC(()=>{s.current=!0}),ie.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let p=ND(l,JSON.parse(a),o,c.relative==="path");t==null&&n!=="/"&&(p.pathname=p.pathname==="/"?n:qo([n,p.pathname])),(c.replace?r.replace:r.push)(p,c.state,c)},[n,r,a,o,t])}function FD(t,n){return MD(t,n)}function MD(t,n,e,r){xf()||Mt(!1);let{navigator:i}=ie.useContext(vf),{matches:o}=ie.useContext(Ps),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=mC(),c;if(n){var p;let v=typeof n=="string"?Ls(n):n;u==="/"||(p=v.pathname)!=null&&p.startsWith(u)||Mt(!1),c=v}else c=l;let f=c.pathname||"/",h=u==="/"?f:f.slice(u.length)||"/",d=sD(t,{pathname:h}),m=WD(d&&d.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:qo([u,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:qo([u,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,e,r);return n&&m?ie.createElement(yf.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:qi.Pop}},m):m}function LD(){let t=HD(),n=TD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},n),e?ie.createElement("pre",{style:i},e):null,null)}const PD=ie.createElement(LD,null);class BD extends ie.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ie.createElement(Ps.Provider,{value:this.props.routeContext},ie.createElement(dC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VD(t){let{routeContext:n,match:e,children:r}=t,i=ie.useContext(Iv);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(Ps.Provider,{value:n},r)}function WD(t,n,e,r){var i;if(n===void 0&&(n=[]),e===void 0&&(e=null),r===void 0&&(r=null),t==null){var o;if((o=e)!=null&&o.errors)t=e.matches;else return null}let a=t,s=(i=e)==null?void 0:i.errors;if(s!=null){let c=a.findIndex(p=>p.route.id&&(s==null?void 0:s[p.route.id]));c>=0||Mt(!1),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,l=-1;if(e&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let p=a[c];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(l=c),p.route.id){let{loaderData:f,errors:h}=e,d=p.route.loader&&f[p.route.id]===void 0&&(!h||h[p.route.id]===void 0);if(p.route.lazy||d){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,p,f)=>{let h,d=!1,m=null,v=null;e&&(h=s&&p.route.id?s[p.route.id]:void 0,m=p.route.errorElement||PD,u&&(l<0&&f===0?(qD("route-fallback",!1),d=!0,v=null):l===f&&(d=!0,v=p.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,f+1)),y=()=>{let x;return h?x=m:d?x=v:p.route.Component?x=ie.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=c,ie.createElement(VD,{match:p,routeContext:{outlet:c,matches:g,isDataRoute:e!=null},children:x})};return e&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?ie.createElement(BD,{location:e.location,revalidation:e.revalidation,component:m,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var vC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vC||{}),Tp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tp||{});function $D(t){let n=ie.useContext(Iv);return n||Mt(!1),n}function UD(t){let n=ie.useContext(OD);return n||Mt(!1),n}function jD(t){let n=ie.useContext(Ps);return n||Mt(!1),n}function yC(t){let n=jD(),e=n.matches[n.matches.length-1];return e.route.id||Mt(!1),e.route.id}function HD(){var t;let n=ie.useContext(dC),e=UD(Tp.UseRouteError),r=yC(Tp.UseRouteError);return n!==void 0?n:(t=e.errors)==null?void 0:t[r]}function GD(){let{router:t}=$D(vC.UseNavigateStable),n=yC(Tp.UseNavigateStable),e=ie.useRef(!1);return gC(()=>{e.current=!0}),ie.useCallback(function(i,o){o===void 0&&(o={}),e.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,il({fromRouteId:n},o)))},[t,n])}const mx={};function qD(t,n,e){!n&&!mx[t]&&(mx[t]=!0)}function Dm(t){Mt(!1)}function KD(t){let{basename:n="/",children:e=null,location:r,navigationType:i=qi.Pop,navigator:o,static:a=!1,future:s}=t;xf()&&Mt(!1);let u=n.replace(/^\/*/,"/"),l=ie.useMemo(()=>({basename:u,navigator:o,static:a,future:il({v7_relativeSplatPath:!1},s)}),[u,s,o,a]);typeof r=="string"&&(r=Ls(r));let{pathname:c="/",search:p="",hash:f="",state:h=null,key:d="default"}=r,m=ie.useMemo(()=>{let v=fC(c,u);return v==null?null:{location:{pathname:v,search:p,hash:f,state:h,key:d},navigationType:i}},[u,c,p,f,h,d,i]);return m==null?null:ie.createElement(vf.Provider,{value:l},ie.createElement(yf.Provider,{children:e,value:m}))}function XD(t){let{children:n,location:e}=t;return FD(Om(n),e)}new Promise(()=>{});function Om(t,n){n===void 0&&(n=[]);let e=[];return ie.Children.forEach(t,(r,i)=>{if(!ie.isValidElement(r))return;let o=[...n,i];if(r.type===ie.Fragment){e.push.apply(e,Om(r.props.children,o));return}r.type!==Dm&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Om(r.props.children,o)),e.push(a)}),e}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const YD="startTransition",gx=KA[YD];function QD(t){let{basename:n,children:e,future:r,window:i}=t,o=ie.useRef();o.current==null&&(o.current=iD({window:i,v5Compat:!0}));let a=o.current,[s,u]=ie.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},c=ie.useCallback(p=>{l&&gx?gx(()=>u(p)):u(p)},[u,l]);return ie.useLayoutEffect(()=>a.listen(c),[a,c]),ie.createElement(KD,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:a,future:r})}var vx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vx||(vx={}));var yx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yx||(yx={}));const ZD="/assets/logo-ybJl_oJq.svg";var Tn=function(){return Tn=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Tn.apply(this,arguments)};function Dp(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,o;r<i;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return t.concat(o||Array.prototype.slice.call(n))}var it="-ms-",zu="-moz-",je="-webkit-",xC="comm",bf="rule",Av="decl",JD="@import",bC="@keyframes",eO="@layer",wC=Math.abs,Rv=String.fromCharCode,_m=Object.assign;function tO(t,n){return $t(t,0)^45?(((n<<2^$t(t,0))<<2^$t(t,1))<<2^$t(t,2))<<2^$t(t,3):0}function CC(t){return t.trim()}function si(t,n){return(t=n.exec(t))?t[0]:t}function Re(t,n,e){return t.replace(n,e)}function Hc(t,n,e){return t.indexOf(n,e)}function $t(t,n){return t.charCodeAt(n)|0}function ds(t,n,e){return t.slice(n,e)}function Vr(t){return t.length}function SC(t){return t.length}function yu(t,n){return n.push(t),t}function nO(t,n){return t.map(n).join("")}function xx(t,n){return t.filter(function(e){return!si(e,n)})}var wf=1,ms=1,kC=0,dr=0,Et=0,Bs="";function Cf(t,n,e,r,i,o,a,s){return{value:t,root:n,parent:e,type:r,props:i,children:o,line:wf,column:ms,length:a,return:"",siblings:s}}function Li(t,n){return _m(Cf("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},n)}function Ra(t){for(;t.root;)t=Li(t.root,{children:[t]});yu(t,t.siblings)}function rO(){return Et}function iO(){return Et=dr>0?$t(Bs,--dr):0,ms--,Et===10&&(ms=1,wf--),Et}function Ir(){return Et=dr<kC?$t(Bs,dr++):0,ms++,Et===10&&(ms=1,wf++),Et}function Ko(){return $t(Bs,dr)}function Gc(){return dr}function Sf(t,n){return ds(Bs,t,n)}function zm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function oO(t){return wf=ms=1,kC=Vr(Bs=t),dr=0,[]}function aO(t){return Bs="",t}function ed(t){return CC(Sf(dr-1,Fm(t===91?t+2:t===40?t+1:t)))}function sO(t){for(;(Et=Ko())&&Et<33;)Ir();return zm(t)>2||zm(Et)>3?"":" "}function uO(t,n){for(;--n&&Ir()&&!(Et<48||Et>102||Et>57&&Et<65||Et>70&&Et<97););return Sf(t,Gc()+(n<6&&Ko()==32&&Ir()==32))}function Fm(t){for(;Ir();)switch(Et){case t:return dr;case 34:case 39:t!==34&&t!==39&&Fm(Et);break;case 40:t===41&&Fm(t);break;case 92:Ir();break}return dr}function lO(t,n){for(;Ir()&&t+Et!==57;)if(t+Et===84&&Ko()===47)break;return"/*"+Sf(n,dr-1)+"*"+Rv(t===47?t:Ir())}function cO(t){for(;!zm(Ko());)Ir();return Sf(t,dr)}function pO(t){return aO(qc("",null,null,null,[""],t=oO(t),0,[0],t))}function qc(t,n,e,r,i,o,a,s,u){for(var l=0,c=0,p=a,f=0,h=0,d=0,m=1,v=1,g=1,y=0,x="",b=i,w=o,S=r,C=x;v;)switch(d=y,y=Ir()){case 40:if(d!=108&&$t(C,p-1)==58){Hc(C+=Re(ed(y),"&","&\f"),"&\f",wC(l?s[l-1]:0))!=-1&&(g=-1);break}case 34:case 39:case 91:C+=ed(y);break;case 9:case 10:case 13:case 32:C+=sO(d);break;case 92:C+=uO(Gc()-1,7);continue;case 47:switch(Ko()){case 42:case 47:yu(fO(lO(Ir(),Gc()),n,e,u),u);break;default:C+="/"}break;case 123*m:s[l++]=Vr(C)*g;case 125*m:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+c:g==-1&&(C=Re(C,/\f/g,"")),h>0&&Vr(C)-p&&yu(h>32?wx(C+";",r,e,p-1,u):wx(Re(C," ","")+";",r,e,p-2,u),u);break;case 59:C+=";";default:if(yu(S=bx(C,n,e,l,c,i,s,x,b=[],w=[],p,o),o),y===123)if(c===0)qc(C,n,S,S,b,o,p,s,w);else switch(f===99&&$t(C,3)===110?100:f){case 100:case 108:case 109:case 115:qc(t,S,S,r&&yu(bx(t,S,S,0,0,i,s,x,i,b=[],p,w),w),i,w,p,s,r?b:w);break;default:qc(C,S,S,S,[""],w,0,s,w)}}l=c=h=0,m=g=1,x=C="",p=a;break;case 58:p=1+Vr(C),h=d;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&iO()==125)continue}switch(C+=Rv(y),y*m){case 38:g=c>0?1:(C+="\f",-1);break;case 44:s[l++]=(Vr(C)-1)*g,g=1;break;case 64:Ko()===45&&(C+=ed(Ir())),f=Ko(),c=p=Vr(x=C+=cO(Gc())),y++;break;case 45:d===45&&Vr(C)==2&&(m=0)}}return o}function bx(t,n,e,r,i,o,a,s,u,l,c,p){for(var f=i-1,h=i===0?o:[""],d=SC(h),m=0,v=0,g=0;m<r;++m)for(var y=0,x=ds(t,f+1,f=wC(v=a[m])),b=t;y<d;++y)(b=CC(v>0?h[y]+" "+x:Re(x,/&\f/g,h[y])))&&(u[g++]=b);return Cf(t,n,e,i===0?bf:s,u,l,c,p)}function fO(t,n,e,r){return Cf(t,n,e,xC,Rv(rO()),ds(t,2,-2),0,r)}function wx(t,n,e,r,i){return Cf(t,n,e,Av,ds(t,0,r),ds(t,r+1,-1),r,i)}function EC(t,n,e){switch(tO(t,n)){case 5103:return je+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return je+t+t;case 4789:return zu+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return je+t+zu+t+it+t+t;case 5936:switch($t(t,n+11)){case 114:return je+t+it+Re(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return je+t+it+Re(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return je+t+it+Re(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return je+t+it+t+t;case 6165:return je+t+it+"flex-"+t+t;case 5187:return je+t+Re(t,/(\w+).+(:[^]+)/,je+"box-$1$2"+it+"flex-$1$2")+t;case 5443:return je+t+it+"flex-item-"+Re(t,/flex-|-self/g,"")+(si(t,/flex-|baseline/)?"":it+"grid-row-"+Re(t,/flex-|-self/g,""))+t;case 4675:return je+t+it+"flex-line-pack"+Re(t,/align-content|flex-|-self/g,"")+t;case 5548:return je+t+it+Re(t,"shrink","negative")+t;case 5292:return je+t+it+Re(t,"basis","preferred-size")+t;case 6060:return je+"box-"+Re(t,"-grow","")+je+t+it+Re(t,"grow","positive")+t;case 4554:return je+Re(t,/([^-])(transform)/g,"$1"+je+"$2")+t;case 6187:return Re(Re(Re(t,/(zoom-|grab)/,je+"$1"),/(image-set)/,je+"$1"),t,"")+t;case 5495:case 3959:return Re(t,/(image-set\([^]*)/,je+"$1$`$1");case 4968:return Re(Re(t,/(.+:)(flex-)?(.*)/,je+"box-pack:$3"+it+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+je+t+t;case 4200:if(!si(t,/flex-|baseline/))return it+"grid-column-align"+ds(t,n)+t;break;case 2592:case 3360:return it+Re(t,"template-","")+t;case 4384:case 3616:return e&&e.some(function(r,i){return n=i,si(r.props,/grid-\w+-end/)})?~Hc(t+(e=e[n].value),"span",0)?t:it+Re(t,"-start","")+t+it+"grid-row-span:"+(~Hc(e,"span",0)?si(e,/\d+/):+si(e,/\d+/)-+si(t,/\d+/))+";":it+Re(t,"-start","")+t;case 4896:case 4128:return e&&e.some(function(r){return si(r.props,/grid-\w+-start/)})?t:it+Re(Re(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Re(t,/(.+)-inline(.+)/,je+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vr(t)-1-n>6)switch($t(t,n+1)){case 109:if($t(t,n+4)!==45)break;case 102:return Re(t,/(.+:)(.+)-([^]+)/,"$1"+je+"$2-$3$1"+zu+($t(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~Hc(t,"stretch",0)?EC(Re(t,"stretch","fill-available"),n,e)+t:t}break;case 5152:case 5920:return Re(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,o,a,s,u,l){return it+i+":"+o+l+(a?it+i+"-span:"+(s?u:+u-+o)+l:"")+t});case 4949:if($t(t,n+6)===121)return Re(t,":",":"+je)+t;break;case 6444:switch($t(t,$t(t,14)===45?18:11)){case 120:return Re(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+je+($t(t,14)===45?"inline-":"")+"box$3$1"+je+"$2$3$1"+it+"$2box$3")+t;case 100:return Re(t,":",":"+it)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Re(t,"scroll-","scroll-snap-")+t}return t}function Op(t,n){for(var e="",r=0;r<t.length;r++)e+=n(t[r],r,t,n)||"";return e}function hO(t,n,e,r){switch(t.type){case eO:if(t.children.length)break;case JD:case Av:return t.return=t.return||t.value;case xC:return"";case bC:return t.return=t.value+"{"+Op(t.children,r)+"}";case bf:if(!Vr(t.value=t.props.join(",")))return""}return Vr(e=Op(t.children,r))?t.return=t.value+"{"+e+"}":""}function dO(t){var n=SC(t);return function(e,r,i,o){for(var a="",s=0;s<n;s++)a+=t[s](e,r,i,o)||"";return a}}function mO(t){return function(n){n.root||(n=n.return)&&t(n)}}function gO(t,n,e,r){if(t.length>-1&&!t.return)switch(t.type){case Av:t.return=EC(t.value,t.length,e);return;case bC:return Op([Li(t,{value:Re(t.value,"@","@"+je)})],r);case bf:if(t.length)return nO(e=t.props,function(i){switch(si(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ra(Li(t,{props:[Re(i,/:(read-\w+)/,":"+zu+"$1")]})),Ra(Li(t,{props:[i]})),_m(t,{props:xx(e,r)});break;case"::placeholder":Ra(Li(t,{props:[Re(i,/:(plac\w+)/,":"+je+"input-$1")]})),Ra(Li(t,{props:[Re(i,/:(plac\w+)/,":"+zu+"$1")]})),Ra(Li(t,{props:[Re(i,/:(plac\w+)/,it+"input-$1")]})),Ra(Li(t,{props:[i]})),_m(t,{props:xx(e,r)});break}return""})}}var vO={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Vn={},gs=typeof process<"u"&&Vn!==void 0&&(Vn.REACT_APP_SC_ATTR||Vn.SC_ATTR)||"data-styled",NC="active",IC="data-styled-version",kf="6.1.8",Tv=`/*!sc*/
`,Dv=typeof window<"u"&&"HTMLElement"in window,yO=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Vn!==void 0&&Vn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Vn.REACT_APP_SC_DISABLE_SPEEDY!==""?Vn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Vn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Vn!==void 0&&Vn.SC_DISABLE_SPEEDY!==void 0&&Vn.SC_DISABLE_SPEEDY!==""&&Vn.SC_DISABLE_SPEEDY!=="false"&&Vn.SC_DISABLE_SPEEDY),Ef=Object.freeze([]),vs=Object.freeze({});function xO(t,n,e){return e===void 0&&(e=vs),t.theme!==e.theme&&t.theme||n||e.theme}var AC=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),bO=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,wO=/(^-|-$)/g;function Cx(t){return t.replace(bO,"-").replace(wO,"")}var CO=/(a)(d)/gi,vc=52,Sx=function(t){return String.fromCharCode(t+(t>25?39:97))};function Mm(t){var n,e="";for(n=Math.abs(t);n>vc;n=n/vc|0)e=Sx(n%vc)+e;return(Sx(n%vc)+e).replace(CO,"$1-$2")}var td,RC=5381,Xa=function(t,n){for(var e=n.length;e;)t=33*t^n.charCodeAt(--e);return t},TC=function(t){return Xa(RC,t)};function SO(t){return Mm(TC(t)>>>0)}function kO(t){return t.displayName||t.name||"Component"}function nd(t){return typeof t=="string"&&!0}var DC=typeof Symbol=="function"&&Symbol.for,OC=DC?Symbol.for("react.memo"):60115,EO=DC?Symbol.for("react.forward_ref"):60112,NO={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},IO={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_C={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},AO=((td={})[EO]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},td[OC]=_C,td);function kx(t){return("type"in(n=t)&&n.type.$$typeof)===OC?_C:"$$typeof"in t?AO[t.$$typeof]:NO;var n}var RO=Object.defineProperty,TO=Object.getOwnPropertyNames,Ex=Object.getOwnPropertySymbols,DO=Object.getOwnPropertyDescriptor,OO=Object.getPrototypeOf,Nx=Object.prototype;function zC(t,n,e){if(typeof n!="string"){if(Nx){var r=OO(n);r&&r!==Nx&&zC(t,r,e)}var i=TO(n);Ex&&(i=i.concat(Ex(n)));for(var o=kx(t),a=kx(n),s=0;s<i.length;++s){var u=i[s];if(!(u in IO||e&&e[u]||a&&u in a||o&&u in o)){var l=DO(n,u);try{RO(t,u,l)}catch{}}}}return t}function ys(t){return typeof t=="function"}function Ov(t){return typeof t=="object"&&"styledComponentId"in t}function Bo(t,n){return t&&n?"".concat(t," ").concat(n):t||n||""}function Ix(t,n){if(t.length===0)return"";for(var e=t[0],r=1;r<t.length;r++)e+=n?n+t[r]:t[r];return e}function ol(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Lm(t,n,e){if(e===void 0&&(e=!1),!e&&!ol(t)&&!Array.isArray(t))return n;if(Array.isArray(n))for(var r=0;r<n.length;r++)t[r]=Lm(t[r],n[r]);else if(ol(n))for(var r in n)t[r]=Lm(t[r],n[r]);return t}function _v(t,n){Object.defineProperty(t,"toString",{value:n})}function Il(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var _O=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return t.prototype.indexOfGroup=function(n){for(var e=0,r=0;r<n;r++)e+=this.groupSizes[r];return e},t.prototype.insertRules=function(n,e){if(n>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,o=i;n>=o;)if((o<<=1)<0)throw Il(16,"".concat(n));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var a=i;a<o;a++)this.groupSizes[a]=0}for(var s=this.indexOfGroup(n+1),u=(a=0,e.length);a<u;a++)this.tag.insertRule(s,e[a])&&(this.groupSizes[n]++,s++)},t.prototype.clearGroup=function(n){if(n<this.length){var e=this.groupSizes[n],r=this.indexOfGroup(n),i=r+e;this.groupSizes[n]=0;for(var o=r;o<i;o++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(n){var e="";if(n>=this.length||this.groupSizes[n]===0)return e;for(var r=this.groupSizes[n],i=this.indexOfGroup(n),o=i+r,a=i;a<o;a++)e+="".concat(this.tag.getRule(a)).concat(Tv);return e},t}(),Kc=new Map,_p=new Map,Xc=1,yc=function(t){if(Kc.has(t))return Kc.get(t);for(;_p.has(Xc);)Xc++;var n=Xc++;return Kc.set(t,n),_p.set(n,t),n},zO=function(t,n){Xc=n+1,Kc.set(t,n),_p.set(n,t)},FO="style[".concat(gs,"][").concat(IC,'="').concat(kf,'"]'),MO=new RegExp("^".concat(gs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),LO=function(t,n,e){for(var r,i=e.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&t.registerName(n,r)},PO=function(t,n){for(var e,r=((e=n.textContent)!==null&&e!==void 0?e:"").split(Tv),i=[],o=0,a=r.length;o<a;o++){var s=r[o].trim();if(s){var u=s.match(MO);if(u){var l=0|parseInt(u[1],10),c=u[2];l!==0&&(zO(c,l),LO(t,c,u[3]),t.getTag().insertRules(l,i)),i.length=0}else i.push(s)}}};function BO(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var FC=function(t){var n=document.head,e=t||n,r=document.createElement("style"),i=function(s){var u=Array.from(s.querySelectorAll("style[".concat(gs,"]")));return u[u.length-1]}(e),o=i!==void 0?i.nextSibling:null;r.setAttribute(gs,NC),r.setAttribute(IC,kf);var a=BO();return a&&r.setAttribute("nonce",a),e.insertBefore(r,o),r},VO=function(){function t(n){this.element=FC(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var r=document.styleSheets,i=0,o=r.length;i<o;i++){var a=r[i];if(a.ownerNode===e)return a}throw Il(17)}(this.element),this.length=0}return t.prototype.insertRule=function(n,e){try{return this.sheet.insertRule(e,n),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},t.prototype.getRule=function(n){var e=this.sheet.cssRules[n];return e&&e.cssText?e.cssText:""},t}(),WO=function(){function t(n){this.element=FC(n),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(n,e){if(n<=this.length&&n>=0){var r=document.createTextNode(e);return this.element.insertBefore(r,this.nodes[n]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},t.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),$O=function(){function t(n){this.rules=[],this.length=0}return t.prototype.insertRule=function(n,e){return n<=this.length&&(this.rules.splice(n,0,e),this.length++,!0)},t.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},t.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),Ax=Dv,UO={isServer:!Dv,useCSSOMInjection:!yO},MC=function(){function t(n,e,r){n===void 0&&(n=vs),e===void 0&&(e={});var i=this;this.options=Tn(Tn({},UO),n),this.gs=e,this.names=new Map(r),this.server=!!n.isServer,!this.server&&Dv&&Ax&&(Ax=!1,function(o){for(var a=document.querySelectorAll(FO),s=0,u=a.length;s<u;s++){var l=a[s];l&&l.getAttribute(gs)!==NC&&(PO(o,l),l.parentNode&&l.parentNode.removeChild(l))}}(this)),_v(this,function(){return function(o){for(var a=o.getTag(),s=a.length,u="",l=function(p){var f=function(g){return _p.get(g)}(p);if(f===void 0)return"continue";var h=o.names.get(f),d=a.getGroup(p);if(h===void 0||d.length===0)return"continue";var m="".concat(gs,".g").concat(p,'[id="').concat(f,'"]'),v="";h!==void 0&&h.forEach(function(g){g.length>0&&(v+="".concat(g,","))}),u+="".concat(d).concat(m,'{content:"').concat(v,'"}').concat(Tv)},c=0;c<s;c++)l(c);return u}(i)})}return t.registerId=function(n){return yc(n)},t.prototype.reconstructWithOptions=function(n,e){return e===void 0&&(e=!0),new t(Tn(Tn({},this.options),n),this.gs,e&&this.names||void 0)},t.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(n=function(e){var r=e.useCSSOMInjection,i=e.target;return e.isServer?new $O(i):r?new VO(i):new WO(i)}(this.options),new _O(n)));var n},t.prototype.hasNameForId=function(n,e){return this.names.has(n)&&this.names.get(n).has(e)},t.prototype.registerName=function(n,e){if(yc(n),this.names.has(n))this.names.get(n).add(e);else{var r=new Set;r.add(e),this.names.set(n,r)}},t.prototype.insertRules=function(n,e,r){this.registerName(n,e),this.getTag().insertRules(yc(n),r)},t.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},t.prototype.clearRules=function(n){this.getTag().clearGroup(yc(n)),this.clearNames(n)},t.prototype.clearTag=function(){this.tag=void 0},t}(),jO=/&/g,HO=/^\s*\/\/.*$/gm;function LC(t,n){return t.map(function(e){return e.type==="rule"&&(e.value="".concat(n," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(n," ")),e.props=e.props.map(function(r){return"".concat(n," ").concat(r)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=LC(e.children,n)),e})}function GO(t){var n,e,r,i=t===void 0?vs:t,o=i.options,a=o===void 0?vs:o,s=i.plugins,u=s===void 0?Ef:s,l=function(f,h,d){return d.startsWith(e)&&d.endsWith(e)&&d.replaceAll(e,"").length>0?".".concat(n):f},c=u.slice();c.push(function(f){f.type===bf&&f.value.includes("&")&&(f.props[0]=f.props[0].replace(jO,e).replace(r,l))}),a.prefix&&c.push(gO),c.push(hO);var p=function(f,h,d,m){h===void 0&&(h=""),d===void 0&&(d=""),m===void 0&&(m="&"),n=m,e=h,r=new RegExp("\\".concat(e,"\\b"),"g");var v=f.replace(HO,""),g=pO(d||h?"".concat(d," ").concat(h," { ").concat(v," }"):v);a.namespace&&(g=LC(g,a.namespace));var y=[];return Op(g,dO(c.concat(mO(function(x){return y.push(x)})))),y};return p.hash=u.length?u.reduce(function(f,h){return h.name||Il(15),Xa(f,h.name)},RC).toString():"",p}var qO=new MC,Pm=GO(),PC=bi.createContext({shouldForwardProp:void 0,styleSheet:qO,stylis:Pm});PC.Consumer;bi.createContext(void 0);function Rx(){return ie.useContext(PC)}var KO=function(){function t(n,e){var r=this;this.inject=function(i,o){o===void 0&&(o=Pm);var a=r.name+o.hash;i.hasNameForId(r.id,a)||i.insertRules(r.id,a,o(r.rules,a,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=e,_v(this,function(){throw Il(12,String(r.name))})}return t.prototype.getName=function(n){return n===void 0&&(n=Pm),this.name+n.hash},t}(),XO=function(t){return t>="A"&&t<="Z"};function Tx(t){for(var n="",e=0;e<t.length;e++){var r=t[e];if(e===1&&r==="-"&&t[0]==="-")return t;XO(r)?n+="-"+r.toLowerCase():n+=r}return n.startsWith("ms-")?"-"+n:n}var BC=function(t){return t==null||t===!1||t===""},VC=function(t){var n,e,r=[];for(var i in t){var o=t[i];t.hasOwnProperty(i)&&!BC(o)&&(Array.isArray(o)&&o.isCss||ys(o)?r.push("".concat(Tx(i),":"),o,";"):ol(o)?r.push.apply(r,Dp(Dp(["".concat(i," {")],VC(o),!1),["}"],!1)):r.push("".concat(Tx(i),": ").concat((n=i,(e=o)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||n in vO||n.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return r};function Xo(t,n,e,r){if(BC(t))return[];if(Ov(t))return[".".concat(t.styledComponentId)];if(ys(t)){if(!ys(o=t)||o.prototype&&o.prototype.isReactComponent||!n)return[t];var i=t(n);return Xo(i,n,e,r)}var o;return t instanceof KO?e?(t.inject(e,r),[t.getName(r)]):[t]:ol(t)?VC(t):Array.isArray(t)?Array.prototype.concat.apply(Ef,t.map(function(a){return Xo(a,n,e,r)})):[t.toString()]}function YO(t){for(var n=0;n<t.length;n+=1){var e=t[n];if(ys(e)&&!Ov(e))return!1}return!0}var QO=TC(kf),ZO=function(){function t(n,e,r){this.rules=n,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&YO(n),this.componentId=e,this.baseHash=Xa(QO,e),this.baseStyle=r,MC.registerId(e)}return t.prototype.generateAndInjectStyles=function(n,e,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,e,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))i=Bo(i,this.staticRulesId);else{var o=Ix(Xo(this.rules,n,e,r)),a=Mm(Xa(this.baseHash,o)>>>0);if(!e.hasNameForId(this.componentId,a)){var s=r(o,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,s)}i=Bo(i,a),this.staticRulesId=a}else{for(var u=Xa(this.baseHash,r.hash),l="",c=0;c<this.rules.length;c++){var p=this.rules[c];if(typeof p=="string")l+=p;else if(p){var f=Ix(Xo(p,n,e,r));u=Xa(u,f+c),l+=f}}if(l){var h=Mm(u>>>0);e.hasNameForId(this.componentId,h)||e.insertRules(this.componentId,h,r(l,".".concat(h),void 0,this.componentId)),i=Bo(i,h)}}return i},t}(),WC=bi.createContext(void 0);WC.Consumer;var rd={};function JO(t,n,e){var r=Ov(t),i=t,o=!nd(t),a=n.attrs,s=a===void 0?Ef:a,u=n.componentId,l=u===void 0?function(b,w){var S=typeof b!="string"?"sc":Cx(b);rd[S]=(rd[S]||0)+1;var C="".concat(S,"-").concat(SO(kf+S+rd[S]));return w?"".concat(w,"-").concat(C):C}(n.displayName,n.parentComponentId):u,c=n.displayName,p=c===void 0?function(b){return nd(b)?"styled.".concat(b):"Styled(".concat(kO(b),")")}(t):c,f=n.displayName&&n.componentId?"".concat(Cx(n.displayName),"-").concat(n.componentId):n.componentId||l,h=r&&i.attrs?i.attrs.concat(s).filter(Boolean):s,d=n.shouldForwardProp;if(r&&i.shouldForwardProp){var m=i.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;d=function(b,w){return m(b,w)&&v(b,w)}}else d=m}var g=new ZO(e,f,r?i.componentStyle:void 0);function y(b,w){return function(S,C,k){var E=S.attrs,N=S.componentStyle,T=S.defaultProps,A=S.foldedComponentIds,_=S.styledComponentId,M=S.target,W=bi.useContext(WC),L=Rx(),U=S.shouldForwardProp||L.shouldForwardProp,O=xO(C,W,T)||vs,V=function(le,te,de){for(var ge,ve=Tn(Tn({},te),{className:void 0,theme:de}),$e=0;$e<le.length;$e+=1){var he=ys(ge=le[$e])?ge(ve):ge;for(var Ce in he)ve[Ce]=Ce==="className"?Bo(ve[Ce],he[Ce]):Ce==="style"?Tn(Tn({},ve[Ce]),he[Ce]):he[Ce]}return te.className&&(ve.className=Bo(ve.className,te.className)),ve}(E,C,O),$=V.as||M,K={};for(var Q in V)V[Q]===void 0||Q[0]==="$"||Q==="as"||Q==="theme"&&V.theme===O||(Q==="forwardedAs"?K.as=V.forwardedAs:U&&!U(Q,$)||(K[Q]=V[Q]));var ee=function(le,te){var de=Rx(),ge=le.generateAndInjectStyles(te,de.styleSheet,de.stylis);return ge}(N,V),ue=Bo(A,_);return ee&&(ue+=" "+ee),V.className&&(ue+=" "+V.className),K[nd($)&&!AC.has($)?"class":"className"]=ue,K.ref=k,ie.createElement($,K)}(x,b,w)}y.displayName=p;var x=bi.forwardRef(y);return x.attrs=h,x.componentStyle=g,x.displayName=p,x.shouldForwardProp=d,x.foldedComponentIds=r?Bo(i.foldedComponentIds,i.styledComponentId):"",x.styledComponentId=f,x.target=r?i.target:t,Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(b){this._foldedDefaultProps=r?function(w){for(var S=[],C=1;C<arguments.length;C++)S[C-1]=arguments[C];for(var k=0,E=S;k<E.length;k++)Lm(w,E[k],!0);return w}({},i.defaultProps,b):b}}),_v(x,function(){return".".concat(x.styledComponentId)}),o&&zC(x,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),x}function Dx(t,n){for(var e=[t[0]],r=0,i=n.length;r<i;r+=1)e.push(n[r],t[r+1]);return e}var Ox=function(t){return Object.assign(t,{isCss:!0})};function e_(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];if(ys(t)||ol(t))return Ox(Xo(Dx(Ef,Dp([t],n,!0))));var r=t;return n.length===0&&r.length===1&&typeof r[0]=="string"?Xo(r):Ox(Xo(Dx(r,n)))}function Bm(t,n,e){if(e===void 0&&(e=vs),!n)throw Il(1,n);var r=function(i){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return t(n,e,e_.apply(void 0,Dp([i],o,!1)))};return r.attrs=function(i){return Bm(t,n,Tn(Tn({},e),{attrs:Array.prototype.concat(e.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return Bm(t,n,Tn(Tn({},e),i))},r}var $C=function(t){return Bm(JO,t)},P=$C;AC.forEach(function(t){P[t]=$C(t)});const t_=P.div`
  background-color: white;
  max-width: 425px;
  min-width: 320px;
  margin: 0 auto;
`;P.img`
  width: 100%;
  height: auto;
  object-fit: cover;
  object-position: center;
  max-width:425px;
  max-height: 220px;
`;P.div`
  max-width: 425px;
  min-width: 320px;
  min-height: 100svh;
  background-color: var(--primary);
  display: flex;
  flex-direction: column;
  position: relative;
`;P.div`
  position: absolute;
  top: 0;
  left: 50%;
  transform: translate(-50%, -50%);
`;P.img`
  width: 170px;
  height: 170px;
  border-radius: 50%;
  object-fit: cover;
  background-color: var(--secondary);
  filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));
`;P.h1`
  font-size: 28px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  margin: 120px 0 0 0;
  text-align: center;
  color: var(--black);
`;P.h2`
  font-size: 12px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
`;P.h3`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 30px 0 20px 0;
`;P.button`
  margin: 20px auto 5px;
  text-align: center;
  color: var(--white);
  background-color: var(--secondary);
  width: 213px;
  height: 45px;
  border: none;
  border-radius: 20px;
  font-size: 16px;
  font-weight: 700;
  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
  &:active{
    background-color: var(--light-secondary);
    color: var(--black);
    transform: scale(0.95);
  }
`;P.div`
`;P.div`
    display: grid;
    grid-template-columns: 4fr 2fr;
    align-items: center;
    max-width: 100%;
    padding: 0 10px;
    height: 70px;
    border-radius: 5px;
    background: var(--white);
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.20);
    border: 1px solid var(--light-black);
    margin: 0 20px 20px;
    box-sizing: border-box;
    cursor: pointer;
    &:active {
    background: var(--light-gray);
    transform: scale(0.95);
  };
`;P.div`
  flex-grow: 1;
  padding: 0 10px;
  font-size: 16px; 
  font-weight: 700;
  color: var(--black);
`;P.div`
    font-size: 16px;
    font-weight: 700;
    width: 100%;
    max-width: 75.5px;
    justify-self: end;
    justify-content: end;
    color: var(--black);
    padding: 0 10px;
    border-left: 2px solid var(--light-black);
    height: 53px;
    display: flex;
    align-items: center;
`;P.div`
  width: 169px;
  height: 123px;
  border-radius: 5px;
  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
  margin: 0 auto 14px;
`;P.img`
  width: 100%;
  height: 100%;
  border-radius: 5px;
  object-fit: cover;
  &:active{
    opacity: 0.5;
  }
`;P.div`
  color: var(--black);
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 400;
  line-height: normal;
  text-align: center;
  padding: 0 10px;
`;P.div`
  color: var(--black);
  font-family: "Readex Pro";
  font-size: 18px;
  font-style: normal;
  font-weight: 600;
  line-height: normal;
  text-align:center;
  margin: 6px 0;
`;P.div`
  margin: 0 auto 30px;
`;P.div`
  display: flex;
  align-items: center;
  flex-direction: row;
  text-align: center;
  margin: 0 auto 1rem;
  color: var(--black);
  justify-content: start;
  gap: 0.5rem;
`;P.div`
  position: fixed;
  bottom: 0;
  box-sizing: border-box;
  background-color: var(--secondary);
  height: 72px;
  width: 425px;
  max-width: 100%;
  z-index: 999;
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  align-items: center;
`;P.button`
  background-color: transparent;
  border: none;
  color: var(--white);
  &:active{
    color: var(--primary);
    transform: scale(0.95);
  }
`;P.div`
  padding: 10px;
  background-color: var(--white);
  border-radius: 5px;
  position: relative;
  top: -20px;
  border: 1px solid var(--light-black);
  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.20);
  &:active{ 
    background-color: var(--light-gray);
    transform: scale(0.95);
  }
`;P.div`
  width: 100svw;
  height: 100svh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.button`
   width: 35px;
   height: 35px;
   font-size: 18px;
   border: none;
   font-weight: 700;
   border-radius: 50%;
   color: var(--secondary);
   background-color: var(--primary);
   display: flex;
   align-items: center;
   justify-content: center;
   &:active{
      color: var(--primary);
      background-color: var(--light-secondary);
      transform: scale(0.95);
   }
   filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding:100px 0;
  background-color:var(--white);
`;P.div`
    display: grid;
    grid-template-columns: 4fr 2fr;
    align-items: center;
    max-width: 100%;
    padding: 0 10px;
    height: 70px;
    border-radius: 5px;
    background: var(--white);
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.20);
    border: 1px solid var(--light-black);
    margin: 0 20px 20px;
    box-sizing: border-box;
`;P.div`
  flex-grow: 1;
  padding: 0 10px;
  font-size: 16px; 
  font-weight: 700;
  color: var(--black);
`;P.div`
    font-size: 16px;
    font-weight: 700;
    width: 100%;
    max-width: 75.5px;
    justify-self: end;
    justify-content: end;
    color: var(--black);
    padding: 0 10px;
    border-left: 2px solid var(--light-black);
    height: 53px;
    display: flex;
    align-items: center;
`;P.div`
  width: 100%;
  height:60px;
  max-width:425px;
  background-color: var(--secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  bottom:0;
  position: fixed;
`;const n_=P.button`
  width: 100px;
  height: 30px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--light-primary);
  margin: 0 20px;;
  &:active{
    color: var(--white);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P(n_)`
  background-color: var(--primary);
`;P.div`
  width: 100vw;
  height: 100vh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  };
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 0;
  background-color: var(--white);
`;P.div`
  display: grid;
  grid-template-columns: 4fr 2fr;
  align-items: center;
  max-width: 100%;
  padding: 0 10px;
  height: 70px;
  border-radius: 5px;
  background: var(--white);
  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.20);
  border: 1px solid var(--light-black);
  margin: 0 20px 20px;
  box-sizing: border-box;
  cursor: pointer;
  &:active {
    background: var(--light-gray);
    transform: scale(0.95);
  }
`;P.div`
  flex-grow: 1;
  padding: 0 10px;
  font-size: 16px; 
  font-weight: 700;
  color: var(--black);
`;P.div`
  font-size: 16px;
  font-weight: 700;
  width: 100%;
  max-width: 75.5px;
  justify-self: end;
  justify-content: end;
  color: var(--black);
  padding: 0 10px;
  border-left: 2px solid var(--light-black);
  height: 53px;
  display: flex;
  align-items: center;
`;P.div`
  width: 100%;
  height: 60px;
  max-width: 425px;
  background-color: var(--secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  bottom: 0;
  position: fixed;
`;const r_=P.button`
  width: 100px;
  height: 30px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--light-primary);
  margin: 0 20px;
  &:active {
    color: var(--white);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P(r_)`
  background-color: var(--primary);
`;P.div`
  width: 100vw;
  height: 100vh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.h2`
  font-size: 18px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.p`
  font-size: 18px;
  font-style: normal;
  font-weight: 500;
  line-height: 1.5;
  color: var(--secondary-light-black);
  padding: 10px;
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 20px 100px;
  color: var(--black);
  text-decoration: none;
  text-align: center;
  justify-content: center;
  display: flex;
`;P.div`
  width: 100%;
  height: 60px;
  max-width: 425px;
  background-color: var(--secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  bottom: 0;
  position: fixed;
`;P.button`
  width: 100px;
  height: 30px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--light-primary);
  margin: 0 20px;
  &:active {
    color: var(--white);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
`;P.button`
  margin: 5px;
  padding: 5px 10px;
  font-size: 14px;
  border: none;
  border-radius: 5px;
  background-color: var(--light-green);
  color: var(--black);
`;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
`;P.div`
  height: 5px;
  background-color: var(--light-gray);
  border-radius: 1px;
  width: 100%;
`;P.div`
  height: 5px;
  background-color: var(--light-green);
  border-radius: 1px;
  width: ${t=>t.availablePercentage}%;
`;P.div`
  width: 350px;
  max-width: 100%;
  display: flex;
  justify-content: space-between;
  padding: 20px;
  box-sizing: border-box;
  background-color: var(--white);
  align-items: center;
  border-radius: 5px;
`;P.div`
  width: 350px;
  max-width: 100%;
  background-color: var(--white);
  font-family: Arial, Helvetica, sans-serif;
  line-height: 1.125em;
  margin: 0 auto 20px;
`;P.div`
  width: 100svw;
  height: 100svh;
  max-width: 425px;
  display: flex;
  flex-direction: column;
  color: var(--primary);
  justify-content: center;
  align-items: center;
  background-color: transparent;
  z-index: 999;
`;var UC={exports:{}};function i_(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var id=i_(ie),o_=uC;function a_(t,n){for(var e=Object.getOwnPropertyNames(n),r=0;r<e.length;r++){var i=e[r],o=Object.getOwnPropertyDescriptor(n,i);o&&o.configurable&&t[i]===void 0&&Object.defineProperty(t,i,o)}return t}function Vm(){return(Vm=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function s_(t,n){t.prototype=Object.create(n.prototype),a_(t.prototype.constructor=t,n)}function u_(t,n){if(t==null)return{};var e,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],0<=n.indexOf(e)||(i[e]=t[e]);return i}function Ta(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var l_=function(t,n,e,r,i,o,a,s){if(!t){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[e,r,i,o,a,s],c=0;(u=new Error(n.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},_x=l_;function zx(t,n,e){if("selectionStart"in t&&"selectionEnd"in t)t.selectionStart=n,t.selectionEnd=e;else{var r=t.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",e-n),r.select()}}function c_(t){var n=0,e=0;if("selectionStart"in t&&"selectionEnd"in t)n=t.selectionStart,e=t.selectionEnd;else{var r=document.selection.createRange();r.parentElement()===t&&(n=-r.moveStart("character",-t.value.length),e=-r.moveEnd("character",-t.value.length))}return{start:n,end:e,length:e-n}}var p_={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},f_="_";function Fx(t,n,e){var r="",i="",o=null,a=[];if(n===void 0&&(n=f_),e==null&&(e=p_),!t||typeof t!="string")return{maskChar:n,formatChars:e,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var s=!1;return t.split("").forEach(function(u){s=!s&&u==="\\"||(s||!e[u]?(a.push(r.length),r.length===a.length-1&&(i+=u)):o=r.length+1,r+=u,!1)}),{maskChar:n,formatChars:e,prefix:i,mask:r,lastEditablePosition:o,permanents:a}}function Yn(t,n){return t.permanents.indexOf(n)!==-1}function Nf(t,n,e){var r=t.mask,i=t.formatChars;if(!e)return!1;if(Yn(t,n))return r[n]===e;var o=i[r[n]];return new RegExp(o).test(e)}function Mx(t,n){return n.split("").every(function(e,r){return Yn(t,r)||!Nf(t,r,e)})}function xu(t,n){var e=t.maskChar,r=t.prefix;if(!e){for(;n.length>r.length&&Yn(t,n.length-1);)n=n.slice(0,n.length-1);return n.length}for(var i=r.length,o=n.length;o>=r.length;o--){var a=n[o];if(!Yn(t,o)&&Nf(t,o,a)){i=o+1;break}}return i}function jC(t,n){return xu(t,n)===t.mask.length}function pi(t,n){var e=t.maskChar,r=t.mask,i=t.prefix;if(!e){for((n=Wm(t,"",n,0)).length<i.length&&(n=i);n.length<r.length&&Yn(t,n.length);)n+=r[n.length];return n}if(n)return Wm(t,pi(t,""),n,0);for(var o=0;o<r.length;o++)Yn(t,o)?n+=r[o]:n+=e;return n}function h_(t,n,e,r){var i=e+r,o=t.maskChar,a=t.mask,s=t.prefix,u=n.split("");if(o)return u.map(function(c,p){return p<e||i<=p?c:Yn(t,p)?a[p]:o}).join("");for(var l=i;l<u.length;l++)Yn(t,l)&&(u[l]="");return e=Math.max(s.length,e),u.splice(e,i-e),n=u.join(""),pi(t,n)}function Wm(t,n,e,r){var i=t.mask,o=t.maskChar,a=t.prefix,s=e.split(""),u=jC(t,n);return!o&&r>n.length&&(n+=i.slice(n.length,r)),s.every(function(l){for(;h=l,Yn(t,f=r)&&h!==i[f];){if(r>=n.length&&(n+=i[r]),c=l,p=r,o&&Yn(t,p)&&c===o)return!0;if(++r>=i.length)return!1}var c,p,f,h;return!Nf(t,r,l)&&l!==o||(r<n.length?n=o||u||r<a.length?n.slice(0,r)+l+n.slice(r+1):(n=n.slice(0,r)+l+n.slice(r),pi(t,n)):o||(n+=l),++r<i.length)}),n}function d_(t,n,e,r){var i=t.mask,o=t.maskChar,a=e.split(""),s=r;return a.every(function(u){for(;c=u,Yn(t,l=r)&&c!==i[l];)if(++r>=i.length)return!1;var l,c;return(Nf(t,r,u)||u===o)&&r++,r<i.length}),r-s}function m_(t,n){for(var e=n;0<=e;--e)if(!Yn(t,e))return e;return null}function Fu(t,n){for(var e=t.mask,r=n;r<e.length;++r)if(!Yn(t,r))return r;return null}function od(t){return t||t===0?t+"":""}function g_(t,n,e,r,i){var o=t.mask,a=t.prefix,s=t.lastEditablePosition,u=n,l="",c=0,p=0,f=Math.min(i.start,e.start);return e.end>i.start?p=(c=d_(t,r,l=u.slice(i.start,e.end),f))?i.length:0:u.length<r.length&&(p=r.length-u.length),u=r,p&&(p===1&&!i.length&&(f=i.start===e.start?Fu(t,e.start):m_(t,e.start)),u=h_(t,u,f,p)),u=Wm(t,u,l,f),(f+=c)>=o.length?f=o.length:f<a.length&&!c?f=a.length:f>=a.length&&f<s&&c&&(f=Fu(t,f)),l||(l=null),{value:u=pi(t,u),enteredString:l,selection:{start:f,end:f}}}function v_(){var t=new RegExp("windows","i"),n=new RegExp("phone","i"),e=navigator.userAgent;return t.test(e)&&n.test(e)}function Sn(t){return typeof t=="function"}function y_(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}function HC(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function Lx(t){return(HC()?y_():function(){return setTimeout(t,1e3/60)})(t)}function ad(t){(HC()||clearTimeout)(t)}var x_=function(t){function n(r){var i=t.call(this,r)||this;i.focused=!1,i.mounted=!1,i.previousSelection=null,i.selectionDeferId=null,i.saveSelectionLoopDeferId=null,i.saveSelectionLoop=function(){i.previousSelection=i.getSelection(),i.saveSelectionLoopDeferId=Lx(i.saveSelectionLoop)},i.runSaveSelectionLoop=function(){i.saveSelectionLoopDeferId===null&&i.saveSelectionLoop()},i.stopSaveSelectionLoop=function(){i.saveSelectionLoopDeferId!==null&&(ad(i.saveSelectionLoopDeferId),i.saveSelectionLoopDeferId=null,i.previousSelection=null)},i.getInputDOMNode=function(){if(!i.mounted)return null;var d=o_.findDOMNode(Ta(Ta(i))),m=typeof window<"u"&&d instanceof window.Element;if(d&&!m)return null;if(d.nodeName!=="INPUT"&&(d=d.querySelector("input")),!d)throw new Error("react-input-mask: inputComponent doesn't contain input node");return d},i.getInputValue=function(){var d=i.getInputDOMNode();return d?d.value:null},i.setInputValue=function(d){var m=i.getInputDOMNode();m&&(i.value=d,m.value=d)},i.setCursorToEnd=function(){var d=xu(i.maskOptions,i.value),m=Fu(i.maskOptions,d);m!==null&&i.setCursorPosition(m)},i.setSelection=function(d,m,v){v===void 0&&(v={});var g=i.getInputDOMNode(),y=i.isFocused();g&&y&&(v.deferred||zx(g,d,m),i.selectionDeferId!==null&&ad(i.selectionDeferId),i.selectionDeferId=Lx(function(){i.selectionDeferId=null,zx(g,d,m)}),i.previousSelection={start:d,end:m,length:Math.abs(m-d)})},i.getSelection=function(){return c_(i.getInputDOMNode())},i.getCursorPosition=function(){return i.getSelection().start},i.setCursorPosition=function(d){i.setSelection(d,d)},i.isFocused=function(){return i.focused},i.getBeforeMaskedValueChangeConfig=function(){var d=i.maskOptions,m=d.mask,v=d.maskChar,g=d.permanents,y=d.formatChars;return{mask:m,maskChar:v,permanents:g,alwaysShowMask:!!i.props.alwaysShowMask,formatChars:y}},i.isInputAutofilled=function(d,m,v,g){var y=i.getInputDOMNode();try{if(y.matches(":-webkit-autofill"))return!0}catch{}return!i.focused||g.end<v.length&&m.end===d.length},i.onChange=function(d){var m=Ta(Ta(i)).beforePasteState,v=Ta(Ta(i)).previousSelection,g=i.props.beforeMaskedValueChange,y=i.getInputValue(),x=i.value,b=i.getSelection();i.isInputAutofilled(y,b,x,v)&&(x=pi(i.maskOptions,""),v={start:0,end:0,length:0}),m&&(v=m.selection,x=m.value,b={start:v.start+y.length,end:v.start+y.length,length:0},y=x.slice(0,v.start)+y+x.slice(v.end),i.beforePasteState=null);var w=g_(i.maskOptions,y,b,x,v),S=w.enteredString,C=w.selection,k=w.value;if(Sn(g)){var E=g({value:k,selection:C},{value:x,selection:v},S,i.getBeforeMaskedValueChangeConfig());k=E.value,C=E.selection}i.setInputValue(k),Sn(i.props.onChange)&&i.props.onChange(d),i.isWindowsPhoneBrowser?i.setSelection(C.start,C.end,{deferred:!0}):i.setSelection(C.start,C.end)},i.onFocus=function(d){var m=i.props.beforeMaskedValueChange,v=i.maskOptions,g=v.mask,y=v.prefix;if(i.focused=!0,i.mounted=!0,g){if(i.value)xu(i.maskOptions,i.value)<i.maskOptions.mask.length&&i.setCursorToEnd();else{var x=pi(i.maskOptions,y),b=pi(i.maskOptions,x),w=xu(i.maskOptions,b),S=Fu(i.maskOptions,w),C={start:S,end:S};if(Sn(m)){var k=m({value:b,selection:C},{value:i.value,selection:null},null,i.getBeforeMaskedValueChangeConfig());b=k.value,C=k.selection}var E=b!==i.getInputValue();E&&i.setInputValue(b),E&&Sn(i.props.onChange)&&i.props.onChange(d),i.setSelection(C.start,C.end)}i.runSaveSelectionLoop()}Sn(i.props.onFocus)&&i.props.onFocus(d)},i.onBlur=function(d){var m=i.props.beforeMaskedValueChange,v=i.maskOptions.mask;if(i.stopSaveSelectionLoop(),i.focused=!1,v&&!i.props.alwaysShowMask&&Mx(i.maskOptions,i.value)){var g="";Sn(m)&&(g=m({value:g,selection:null},{value:i.value,selection:i.previousSelection},null,i.getBeforeMaskedValueChangeConfig()).value);var y=g!==i.getInputValue();y&&i.setInputValue(g),y&&Sn(i.props.onChange)&&i.props.onChange(d)}Sn(i.props.onBlur)&&i.props.onBlur(d)},i.onMouseDown=function(d){if(!i.focused&&document.addEventListener){i.mouseDownX=d.clientX,i.mouseDownY=d.clientY,i.mouseDownTime=new Date().getTime();var m=function v(g){if(document.removeEventListener("mouseup",v),i.focused){var y=Math.abs(g.clientX-i.mouseDownX),x=Math.abs(g.clientY-i.mouseDownY),b=Math.max(y,x),w=new Date().getTime()-i.mouseDownTime;(b<=10&&w<=200||b<=5&&w<=300)&&i.setCursorToEnd()}};document.addEventListener("mouseup",m)}Sn(i.props.onMouseDown)&&i.props.onMouseDown(d)},i.onPaste=function(d){Sn(i.props.onPaste)&&i.props.onPaste(d),d.defaultPrevented||(i.beforePasteState={value:i.getInputValue(),selection:i.getSelection()},i.setInputValue(""))},i.handleRef=function(d){i.props.children==null&&Sn(i.props.inputRef)&&i.props.inputRef(d)};var o=r.mask,a=r.maskChar,s=r.formatChars,u=r.alwaysShowMask,l=r.beforeMaskedValueChange,c=r.defaultValue,p=r.value;i.maskOptions=Fx(o,a,s),c==null&&(c=""),p==null&&(p=c);var f=od(p);if(i.maskOptions.mask&&(u||f)&&(f=pi(i.maskOptions,f),Sn(l))){var h=r.value;r.value==null&&(h=c),f=l({value:f,selection:null},{value:h=od(h),selection:null},null,i.getBeforeMaskedValueChangeConfig()).value}return i.value=f,i}s_(n,t);var e=n.prototype;return e.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=v_(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},e.componentDidUpdate=function(){var r=this.previousSelection,i=this.props,o=i.beforeMaskedValueChange,a=i.alwaysShowMask,s=i.mask,u=i.maskChar,l=i.formatChars,c=this.maskOptions,p=a||this.isFocused(),f=this.props.value!=null,h=f?od(this.props.value):this.value,d=r?r.start:null;if(this.maskOptions=Fx(s,u,l),this.maskOptions.mask){!c.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==c.mask;if(c.mask||f||(h=this.getInputValue()),(m||this.maskOptions.mask&&(h||p))&&(h=pi(this.maskOptions,h)),m){var v=xu(this.maskOptions,h);(d===null||v<d)&&(d=jC(this.maskOptions,h)?v:Fu(this.maskOptions,v))}!this.maskOptions.mask||!Mx(this.maskOptions,h)||p||f&&this.props.value||(h="");var g={start:d,end:d};if(Sn(o)){var y=o({value:h,selection:g},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());h=y.value,g=y.selection}this.value=h;var x=this.getInputValue()!==this.value;x?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var b=!1;g.start!=null&&g.end!=null&&(b=!r||r.start!==g.start||r.end!==g.end),(b||x)&&this.setSelection(g.start,g.end)}else c.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},e.componentWillUnmount=function(){this.mounted=!1,this.selectionDeferId!==null&&ad(this.selectionDeferId),this.stopSaveSelectionLoop()},e.render=function(){var r,i=this.props,o=(i.mask,i.alwaysShowMask,i.maskChar,i.formatChars,i.inputRef,i.beforeMaskedValueChange,i.children),a=u_(i,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(o){Sn(o)||_x(!1);var s=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],u=Vm({},a);s.forEach(function(c){return delete u[c]}),r=o(u),s.filter(function(c){return r.props[c]!=null&&r.props[c]!==a[c]}).length&&_x(!1)}else r=id.createElement("input",Vm({ref:this.handleRef},a));var l={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(a.disabled||a.readOnly||(l.onChange=this.onChange,l.onPaste=this.onPaste,l.onMouseDown=this.onMouseDown),a.value!=null&&(l.value=this.value)),r=id.cloneElement(r,l)},n}(id.Component),b_=x_;UC.exports=b_;var w_=UC.exports;const C_=Kb(w_);P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.p`
  font-size: 18px;
  font-style: normal;
  font-weight: 500;
  line-height: 1.5;
  color: var(--secondary-light-black);
  padding: 10px;
  margin: 0;  
`;P.button`
   width: 35px;
   height: 35px;
   font-size: 18px;
   border: none;
   font-weight: 700;
   border-radius: 50%;
   color: var(--secondary);
   background-color: var(--primary);
   display: flex;
   align-items: center;
   justify-content: center;
   &:active{
      color: var(--primary);
      background-color: var(--light-secondary);
      transform: scale(0.95);
   };
   filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 20px 100px;
  color: var(--black);
  text-decoration: none;
  text-align: center;
  justify-content: center;
  display: flex;
  flex-direction: column;
`;P.div`
  align-items: center;
  max-width: 100%;
  border-radius: 5px;
  background: var(--white);
  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.20);
  padding: 20px;
  box-sizing: border-box;
`;P.div`
  width: 100%;
  height: 60px;
  max-width: 425px;
  background-color: var(--secondary);
  display: flex;
  justify-content: center;
  align-items: center;
  bottom: 0;
  position: fixed;
  flex-direction: column;
`;const S_=P.button`
  width: 100%;
  height: 40px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--light-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active{
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P(S_)`
  background-color: var(--primary);
`;const GC=P(C_)`
  width: 100%;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 16px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: .5px solid var(--light-gray);
  border-radius: 4px;
  color: var(--secondary-light-black);
  background-color: var(--secondary-light-gray);
  padding:10px;
  margin-bottom: 10px;
  box-sizing: border-box;
`;P(GC)``;P(GC)``;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
  padding:20px;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif; line-height: 1.125em; 
  width: 100%;
  max-width:350px;
`;P.div`
  color: var(--white);
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 400;
  line-height: normal;
  text-align: center;
  margin: 2px 0;
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top:0;
  z-index: 999;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;const k_=P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P(k_)`
  margin: 10px 0;
`;P.p`
  font-size: 18px;
  font-style: normal;
  font-weight: 500;
  line-height: 1.5;
  color: var(--secondary-light-black);
  padding: 10px;
  margin: 0;  
`;P.button`
   width: 35px;
   height: 35px;
   font-size: 18px;
   border: none;
   font-weight: 700;
   border-radius: 50%;
   color: var(--secondary);
   background-color: var(--primary);
   display: flex;
   align-items: center;
   justify-content: center;
   &:active{
      color: var(--primary);
      background-color: var(--light-secondary);
      transform: scale(0.95);
   }
   filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  margin: 100px 20px 100px;
  color: var(--black);
  text-decoration: none;
  justify-content: center;
  display: flex;
  flex-direction: column;
`;P.div`
  width: 169px;
  height: 169px;
  border-radius: 50%;
  background-color: var(--light-gray);      
  display: flex;
  margin: 20px auto;
  z-index: 1;
`;P.img`
  width: 169px;
  height: 169px;
  border-radius: 50%;
  object-fit: cover;
  background-color: #8AC7DE;
  filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));
`;P.button`
  width: 100%;      
  height: 50px;
  font-size: 18px;
  font-weight: 700;
  border: none;
  color: var(--black);
  background-color: var(--white);
  border-bottom: 1px solid var(--light-gray);
  box-sizing: border-box;
  &:active {
    border-left: 5px solid var(--primary); 
    border-right: 5px solid transparent;
    background-color: var(--secondary-light-gray);
    transform: scale(0.95);
  }
`;P.button`
  width: 100%;
  height: 40px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  box-sizing: border-box;
  justify-content: center;
  &:active{
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
`;P.div`
  width: 100%;
  padding: 1rem;
  box-sizing: border-box;
  max-width: 425px;
  background-color: var(--secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  bottom: 0;
  position: fixed;
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
  padding: 20px;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 1.125em;
  width: 100%;
  max-width: 350px;
  overflow-y: auto;
`;P.div`
  max-height: 300px;
  text-align: left;
`;P.div`
  display: flex;
  justify-content: space-between;
  padding: 10px;
  border-bottom: 1px solid var(--light-gray);
`;P.span`
  color: var(--black);
  flex: 1;
`;P.span`
  cursor: pointer;
`;P.div`
  width: 100svw;
  height: 100svh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  };
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  margin: 100px 20px 100px;
  color: var(--black);
  text-decoration: none;
  text-align: center;
  justify-content: center;
  display: flex;
  flex-direction: column;
`;P.div`
  width: 100%;
  height: 60px;
  max-width: 425px;
  background-color: var(--secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  bottom: 0;
  position: fixed;
`;P.button`
  width: 100px;
  height: 30px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--light-primary);
  margin: 0 20px;
  &:active {
    color: var(--white);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
`;const E_=P.button`
  margin: 5px;
  padding: 5px 10px;
  font-size: 14px;
  border: none;
  border-radius: 5px;
  background-color: ${t=>t.available?"var(--light-green)":"var(--primary)"};
  color: ${t=>t.available?"var(--black)":"var(--white)"};
`;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
`;P.div`
  height: 5px;
  background-color: var(--light-gray);
  border-radius: 1px;
  width: 100%;
`;P.div`
  height: 5px;
  background-color: var(--light-green);
  border-radius: 1px;
  width: ${t=>t.availablePercentage}%;
  max-width:100%;
`;P.div`
  width: 350px;
  max-width: 100%;
  display: flex;
  justify-content: space-between;
  padding: 20px;
  box-sizing: border-box;
  background-color: var(--white);
  align-items: center;
  border-radius: 5px;
`;P.div`
  width: 350px;
  max-width: 100%;
  background-color: var(--white);
  font-family: Arial, Helvetica, sans-serif;
  line-height: 1.125em;
  margin: 0 auto 20px;
`;P.div`
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`;P.div`
  box-sizing: border-box;
  display: grid;
  grid-template-columns: 1fr 2fr;
  width: 100%;
  max-width: 425px;
  height: fit-content;
  justify-content: space-between;
`;P.div`
      display: flex;
      box-sizing: border-box;
      text-align: center;
`;P.input`
  width: 100%;
  height: 40px;
  font-size: 16px;
  margin: 10px 0;
  padding: 5px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  text-align: center;
`;P.p`
  font-size: 14px;
  text-align: start;
  margin: 2px;
`;P.input`
  min-width: 80%;
  height: 40px;
  font-size: 16px;
  margin: 10px 0;
  padding: 5px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
`;P.input`
  min-width: 80%;
  height: 40px;
  font-size: 16px;
  margin: 10px 0;
  padding: 5px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
`;P(E_)`
      background-color: var(--secondary);
      color: var(--white);
      padding: 10px 20px;
      font-size: 16px;
      font-weight: 700;
`;P.div`
      display: flex;
      justify-content: space-between;
      flex-direction: column;
      align-items: end;
`;var N_={},zv={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qC=function(t,n){return(qC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function _r(t,n){function e(){this.constructor=t}qC(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function ce(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function pe(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(p){c=[6,p],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var KC=function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},t.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,i=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return function(u,l,c){u[decodeURIComponent(l)]=decodeURIComponent(c||"")}(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],u=a[1];n.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function G(){return Fv}var Fv=null,xs=new Map;function XC(t,n){var e=Mv(t,n);return xs.get(e)}function $m(t){for(var n=xs.entries(),e=[];;){var r=n.next(),i=r.done,o=r.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===t&&e.push(s)}return e}function Um(t){var n=t.kernelName,e=t.backendName,r=Mv(n,e);if(xs.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");xs.set(r,t)}function I_(t,n){var e=Mv(t,n);if(!xs.has(e))throw new Error("The kernel '"+t+"' for backend '"+n+"' is not registered");xs.delete(e)}function Mv(t,n){return n+"_"+t}function Px(t){for(var n=t.length,e=0,r=0;n>0;)r=Math.random()*n|0,e=t[--n],t[n]=t[r],t[r]=e}function zp(t,n,e){return Math.max(t,Math.min(n,e))}function Lv(t){return t%2==0?t:t+1}function YC(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function D(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function Pe(t,n,e){e===void 0&&(e=""),D(Ht(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function ma(t){D(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Ei(t,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(t)||Qt(t)&&!e)for(var r=0;r<t.length;++r)Ei(t[r],n,e);else n.push(t);return n}function fe(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Ht(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function ft(t){return t%1==0}function QC(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function Fp(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Yo(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function jm(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,i){var o=0,a=function(){if(t())r();else{var s=n(++o);e!=null&&o>=e?i():setTimeout(a,s)}};a()})}function ZC(t,n){for(var e=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function qt(t,n){var e=n.length;return D((t=t==null?n.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),D(t.every(function(r){return ft(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function ji(t,n){for(var e=[],r=[],i=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||i?null:qt(n,t).sort(),a=0,s=0;s<t.length;++s){if(o!=null){if(o[a]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(o[a]==null||o[a]>s)&&t[s]===1&&(e.push(t[s]),r.push(s)),o[a]<=s&&a++}t[s]!==1&&(e.push(t[s]),r.push(s))}return{newShape:e,keptDims:r}}function al(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function sl(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function JC(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function eS(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function tS(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function Qt(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function Pv(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function nS(t){if(t==null)return 0;var n=0;return t.forEach(function(e){return n+=e.length}),n}function Ki(t){return typeof t=="string"||t instanceof String}function rS(t){return typeof t=="boolean"}function iS(t){return typeof t=="number"}function Vs(t){return Array.isArray(t)?Vs(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":iS(t)?"float32":Ki(t)?"string":rS(t)?"bool":"float32"}function po(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Mp(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function bo(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function Bv(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ei(t)),e&&JC(t,n),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+n)}function Hm(t,n){if(t.length===0)return n[0];var e=t.reduce(function(r,i){return r*i});if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,a){var s=new Array;if(o.length===1)for(var u=o[0],l=0;l<u;l++)s[l]=a[i+l];else{u=o[0];var c=o.slice(1),p=c.reduce(function(f,h){return f*h});for(l=0;l<u;l++)s[l]=r(i+l*p,c,a)}return s}(0,t,n)}function Vv(t,n){for(var e=Ws(t,n),r=0;r<e.length;r++)e[r]=1;return e}function Ws(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function wr(){return G().platform.now()}function Wv(t){t.forEach(function(n){D(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function oS(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",G().platform.encode(t,n)}function ul(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",G().platform.decode(t,n)}var me=Object.freeze({shuffle:Px,clamp:zp,nearestLargerEven:Lv,sum:YC,randUniform:function(t,n){var e=Math.random();return n*e+(1-e)*t},distSquared:function(t,n){for(var e=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(n[r]);e+=i*i}return e},assert:D,assertShapesMatch:Pe,assertNonNull:ma,flatten:Ei,sizeFromShape:fe,isScalarShape:function(t){return t.length===0},arraysEqual:Ht,isInt:ft,tanh:QC,sizeToSquarishShape:Fp,createShuffledIndices:function(t){for(var n=new Uint32Array(t),e=0;e<t;++e)n[e]=e;return Px(n),n},rightPad:Yo,repeatedTry:jm,inferFromImplicitShape:ZC,parseAxisParam:qt,squeezeShape:ji,getTypedArrayFromDType:al,getArrayFromDType:sl,checkConversionForErrors:JC,isValidDtype:eS,hasEncodingLoss:tS,isTypedArray:Qt,bytesPerElement:Pv,bytesFromStringArray:nS,isString:Ki,isBoolean:rS,isNumber:iS,inferDtype:Vs,isFunction:po,nearestDivisor:Mp,computeStrides:bo,toTypedArray:Bv,toNestedArray:Hm,makeOnesTypedArray:Vv,makeZerosTypedArray:Ws,now:wr,assertNonNegativeIntegerDimensions:Wv,fetch:function(t,n){return G().platform.fetch(t,n)},encodeString:oS,decodeString:ul}),A_=function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new R_)}return t.prototype.profileKernel=function(n,e,r){var i,o=this,a=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,p){if(c!=="float32")return!1;for(var f=0;f<l.length;f++){var h=l[f];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+p+"'"),!0}})(u,s.dtype,n),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),o.logger.logKernelProfile(n,s,u,l.kernelMs,e,c)})})}),i},t}(),R_=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,i,o,a){var s=Yo(i+"ms",9),u=Yo(n,25),l=e.rank,c=e.size,p=Yo(e.shape.toString(),14),f="";for(var h in o){var d=o[h].shape,m=d.length;f+=h+": "+m+"D "+(m>0?d:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+p+"	%c"+c+"	%c"+f+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),Bx=20,su=3,sd=7;function T_(t,n,e,r){var i=bo(n),o=function(l,c,p,f){var h=fe(c),d=f[f.length-1],m=new Array(d).fill(0),v=c.length,g=p==="complex64"?lu(l):l;if(v>1)for(var y=0;y<h/d;y++)for(var x=y*d,b=0;b<d;b++)m[b]=Math.max(m[b],uu(g[x+b],0,p).length);return m}(t,n,e,i),a=n.length,s=function l(c,p,f,h,d,m){m===void 0&&(m=!0);var v=f==="complex64"?2:1,g=p[0],y=p.length;if(y===0){if(f==="complex64"){var x=lu(c);return[uu(x[0],0,f)]}return f==="bool"?[aS(c[0])]:[c[0].toString()]}if(y===1){if(g>Bx){var b=su*v,w=Array.from(c.slice(0,b)),S=Array.from(c.slice(g-su*v,g));return f==="complex64"&&(w=lu(w),S=lu(S)),["["+w.map(function(U,O){return uu(U,d[O],f)}).join(", ")+", ..., "+S.map(function(U,O){return uu(U,d[g-su+O],f)}).join(", ")+"]"]}var C=f==="complex64"?lu(c):Array.from(c);return["["+C.map(function(U,O){return uu(U,d[O],f)}).join(", ")+"]"]}var k=p.slice(1),E=h.slice(1),N=h[0]*v,T=[];if(g>Bx){for(var A=0;A<su;A++){var _=A*N,M=_+N;T.push.apply(T,l(c.slice(_,M),k,f,E,d,!1))}T.push("...");for(var A=g-su;A<g;A++){var _=A*N,M=_+N;T.push.apply(T,l(c.slice(_,M),k,f,E,d,A===g-1))}}else for(var A=0;A<g;A++){var _=A*N,M=_+N;T.push.apply(T,l(c.slice(_,M),k,f,E,d,A===g-1))}var W=y===2?",":"";T[0]="["+T[0]+W;for(var A=1;A<T.length-1;A++)T[A]=" "+T[A]+W;for(var L=`,
`,A=2;A<y;A++)L+=`
`;return T[T.length-1]=" "+T[T.length-1]+"]"+(m?"":L),T}(t,n,e,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+e),u.push("  rank: "+a),u.push("  shape: ["+n+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function uu(t,n,e){return Yo(Array.isArray(t)?parseFloat(t[0].toFixed(sd))+" + "+parseFloat(t[1].toFixed(sd))+"j":Ki(t)?"'"+t+"'":e==="bool"?aS(t):parseFloat(t.toFixed(sd)).toString(),n)}function aS(t){return t===0?"false":"true"}function lu(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var bs=function(){function t(n,e,r){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=fe(n),r!=null){var o=r.length;D(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||sl(e,this.size),this.strides=bo(n)}return t.prototype.set=function(n){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),D(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,i=0,o=n;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=n[n.length-1],l=0;l<n.length-1;++l)u+=this.strides[l]*n[l];return this.values[u]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Ur().makeTensor(this.values,this.shape,this.dtype)},t}(),Ur=null,q=null,sS=null,Ge=function(){function t(n,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=fe(n),this.strides=bo(n),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),D(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,i){return this.throwIfDisposed(),this.reshape([n,e,r,i])},t.prototype.as5D=function(n,e,r,i,o){return this.throwIfDisposed(),this.reshape([n,e,r,i,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),q.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return ce(this,void 0,void 0,function(){var n;return pe(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,q.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return q.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return ce(this,void 0,void 0,function(){var n;return pe(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,Hm(this.shape,n)]}})})},t.prototype.arraySync=function(){return Hm(this.shape,this.dataSync())},t.prototype.data=function(){return ce(this,void 0,void 0,function(){var n,e;return pe(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=Ur().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map(function(i){return ul(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var n=Ur().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return ul(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return ce(this,void 0,void 0,function(){var n;return pe(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,Ur().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Ur().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),q.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),q.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),q.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),q.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),q.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),q.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),q.oneHot(this,n,e,r)},t.prototype.toString=function(n){return n===void 0&&(n=!1),T_(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),q.tile(this,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),q.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),q.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),q.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),q.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),q.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),q.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),q.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),q.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),q.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),q.unstack(this,n)},t.prototype.pad=function(n,e){return e===void 0&&(e=0),q.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,i,o){return r===void 0&&(r=.001),sS("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,r)},t.prototype.batchNorm=function(n,e,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),q.batchNorm(this,n,e,r,i,o)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),q.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),q.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),q.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),q.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),q.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),q.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),q.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),q.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),q.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),q.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),q.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),q.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),q.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),q.div(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),q.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),q.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),q.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),q.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),q.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),q.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),q.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),q.modStrict(this,n)},t.prototype.squaredDifference=function(n){return this.throwIfDisposed(),q.squaredDifference(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),q.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),q.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),q.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),q.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),q.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),q.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),q.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),q.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),q.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),q.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),q.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),q.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),q.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),q.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),q.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),q.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),q.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),q.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),q.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),q.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),q.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),q.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),q.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),q.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),q.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),q.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),q.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),q.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),q.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),q.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),q.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),q.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),q.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),q.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),q.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),q.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),q.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),q.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),q.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),q.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),q.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),q.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),q.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),q.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),q.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),q.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),q.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),q.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),q.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),q.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),q.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),q.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),q.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),q.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),q.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),q.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),q.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),q.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),q.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),q.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),q.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),q.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),q.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),q.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),q.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),q.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),q.conv1d(this,n,e,r,i,o,a)},t.prototype.conv2d=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),q.conv2d(this,n,e,r,i,o,a)},t.prototype.conv2dTranspose=function(n,e,r,i,o){return this.throwIfDisposed(),q.conv2dTranspose(this,n,e,r,i,o)},t.prototype.depthwiseConv2D=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),q.depthwiseConv2d(this,n,e,r,i,o,a)},t.prototype.separableConv2d=function(n,e,r,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),q.separableConv2d(this,n,e,r,i,o,a)},t.prototype.avgPool=function(n,e,r,i){return this.throwIfDisposed(),q.avgPool(this,n,e,r,i)},t.prototype.maxPool=function(n,e,r,i){return this.throwIfDisposed(),q.maxPool(this,n,e,r,i)},t.prototype.localResponseNormalization=function(n,e,r,i){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5),q.localResponseNormalization(this,n,e,r,i)},t.prototype.pool=function(n,e,r,i,o){return this.throwIfDisposed(),q.pool(this,n,e,r,i,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),Ur().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),q.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),q.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),q.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),q.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,u){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),q.stridedSlice(this,n,e,r,i,o,a,s,u)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),q.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),q.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),q.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),q.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),q.spectral.irfft(this)},t}();Object.defineProperty(Ge,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var Gm,qm,Km,Xm,Ym,ll=function(t){function n(e,r,i,o){var a=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=r,a.name=i,a}return _r(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Ht(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ur().disposeTensor(this),this.dataId=e.dataId,Ur().incRef(this,null)},n.prototype.dispose=function(){Ur().disposeVariable(this),this.isDisposedInternal=!0},n}(Ge);Object.defineProperty(ll,Symbol.hasInstance,{value:function(t){return t instanceof Ge&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(Gm||(Gm={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(qm||(qm={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(Km||(Km={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Xm||(Xm={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Ym||(Ym={}));var D_={float32:Xm,int32:qm,bool:Km,complex64:Ym};function kt(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return D_[t][n]}function ud(t){return kt(t,"int32")}function vt(t,n){if(t.dtype===n.dtype)return[t,n];var e=kt(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function uS(t,n){D(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function $v(t){var n=[];return function e(r,i,o){if(r!=null){if(r instanceof Ge)return void i.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];o.has(l)||(o.add(l),e(l,i,o))}}}}(t,n,new Set),n}var ld,qr=Object.freeze({makeTypesMatch:vt,assertTypesMatch:uS,isTensorInList:function(t,n){for(var e=0;e<n.length;e++)if(n[e].id===t.id)return!0;return!1},getTensorsInContainer:$v}),Vx=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t}(),O_=function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Vx}return t.prototype.ready=function(){return ce(this,void 0,void 0,function(){var n,e,r;return pe(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,i.label=1;case 1:return e<n.length?(r=n[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return ce(this,void 0,void 0,function(){var e,r,i;return pe(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new A_(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var n=this;$m(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},t.prototype.disposeRegisteredKernels=function(n){var e=this;$m(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[n])})},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<e.pendingBackendInitId)&&(e.registry[n]=s,e.pendingBackendInit=null,!0)}).catch(function(s){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],i=this.initializeBackend(r),o=i.success,a=i.asyncInit;if(a||o)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,i=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var i=r();return e(),i}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},t.prototype.runKernel=function(n,e,r,i,o){return this.runKernelFunc(null,e,null,n,r,i,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-e-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,i,o,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c,p=[],f=this.isTapeOn(),h=this.state.activeScope!=null?this.state.activeScope.name:"",d=function(x){f&&(p=x.map(function(b){return l.keep(l.clone(b))}))},m=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,y=XC(i,this.backendName);return c=y!=null?function(){var x=l.backend.numDataIds();g=y.kernelFunc({inputs:e,attrs:o,backend:l.backend});var b=Array.isArray(g)?g:[g];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(h,x,b);var w=b.map(function(C){var k=C.dataId,E=C.shape,N=C.dtype;return l.makeTensorFromDataId(k,E,N)}),S=w.filter(function(C,k){return s[k]});return d(a.slice().concat(S)),w}:function(){var x=l.backend.numDataIds();g=l.tidy(function(){return n(l.backend,d)});var b=Array.isArray(g)?g:[g];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(h,x,b),b},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(h,e,function(){return c()}):c()}),f&&this.addTapeNode(h,e,u,r,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:h,bytesAdded:this.state.numBytes-m,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(x){return e[x].shape}),outputShapes:u.map(function(x){return x.shape})}),Array.isArray(g)?u:u[0]},t.prototype.makeTensor=function(n,e,r,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=n;r==="string"&&Ki(n[0])&&(o=n.map(function(c){return oS(c)}));var a=i.write(o,e,r),s=new Ge(e,r,a,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(a),l=nS(o);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(n,e,r,i){var o=new Ge(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,i),o},t.prototype.makeVariable=function(n,e,r,i){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.asType(i));var o=new ll(n,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*Pv(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof ll||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},t.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return ce(this,void 0,void 0,function(){var e,r;return pe(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r,i,o){var a=this,s={id:this.state.nextTapeNodeId++,name:n,inputs:e,outputs:r,saved:o};i!=null&&(s.gradient=function(u){return u=u.map(function(l,c){if(l==null){var p=r[c],f=Ws(p.size,p.dtype);return a.makeTensor(f,p.shape,p.dtype)}return l}),i(u.length>1?u:u[0],o)}),this.state.activeTape.push(s)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=$v(n),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||e.track(u)})},t.prototype.gradients=function(n,e,r,i){var o=this;if(i===void 0&&(i=!1),D(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});D(a instanceof Ge,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var p={},f={},h=0;h<l.length;h++)p[l[h].id]=!0;for(h=0;h<u.length;h++){var d=(S=u[h]).inputs;for(var m in d){for(var v=d[m],g=!1,y=0;y<l.length;y++)if(p[v.id]){S.outputs.forEach(function(N){return p[N.id]=!0}),g=!0,f[S.id]=!0;break}if(g)break}}var x={};x[c.id]=!0;var b={};for(h=u.length-1;h>=0;h--)for(d=(S=u[h]).inputs,y=0;y<S.outputs.length;y++)if(x[S.outputs[y].id]){for(var m in d)x[d[m].id]=!0,b[S.id]=!0;break}var w=[];for(h=0;h<u.length;h++){var S;if(f[(S=u[h]).id]&&b[S.id]){var C={};for(var m in S.inputs){var k=S.inputs[m];p[k.id]&&(C[m]=k)}var E=Object.assign({},S);E.inputs=C,E.outputs=S.outputs,w.push(E)}}return w}(this.state.activeTape,e,a);if(!i&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r??(u=a.shape,l=Vv(fe(u),"float32"),z.makeTensor(l,u,"float32")),function(f,h,d){for(var m=function(g){var y=h[g],x=[];if(y.outputs.forEach(function(C){var k=f[C.id];k!=null?x.push(k):x.push(null)}),y.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+y.name+".");var b=y.gradient(x),w=function(C){if(!(C in b))throw new Error("Cannot backprop through input "+C+". Available gradients found: "+Object.keys(b)+".");var k=d(function(){return b[C]()});if(k.dtype!=="float32")throw new Error("Error in gradient for op "+y.name+". The gradient of input "+C+" must have 'float32' dtype, but has '"+k.dtype+"'");var E=y.inputs[C];if(!Ht(k.shape,E.shape))throw new Error("Error in gradient for op "+y.name+". The gradient of input '"+C+"' has shape '"+k.shape+"', which does not match the shape of the input '"+E.shape+"'");if(f[E.id]==null)f[E.id]=k;else{var N=f[E.id];f[E.id]=N.add(k),N.dispose()}};for(var S in y.inputs)w(S)},v=h.length-1;v>=0;v--)m(v)}(c,s,function(f){return o.tidy(f)});var p=e.map(function(f){return c[f.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(f){for(var h in f.saved)f.saved[h].dispose()}),o.state.activeTape=null),{value:a,grads:p}})},t.prototype.customGrad=function(n){var e=this;return D(po(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];D(i.every(function(s){return s instanceof Ge}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,u){a[u]=s}),e.runKernelFunc(function(s,u){return D((r=n.apply(void 0,i.concat([u]))).value instanceof Ge,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),D(po(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];D(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),D(c.every(function(f){return f instanceof Ge}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return c.forEach(function(f,h){p[h]=function(){return f}}),p})}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.fromPixels=function(n,e){return this.backend.fromPixels(n,e)},t.prototype.time=function(n){return ce(this,void 0,void 0,function(){var e,r;return pe(this,function(i){switch(i.label){case 0:return e=wr(),[4,this.backend.time(n)];case 1:return(r=i.sent()).wallMs=wr()-e,[2,r]}})})},t.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Vx,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),z=function(){var t=function(){if(ld==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}ld=e}return ld}();if(t._tfengine==null){var n=new KC(t);t._tfengine=new O_(n)}return function(e){Fv=e}(t._tfengine.ENV),Ur=function(){return t._tfengine},t._tfengine}();function lS(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ni=G();ni.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ni.registerFlag("IS_BROWSER",function(){return lS()}),ni.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),ni.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ni.registerFlag("PROD",function(){return!1}),ni.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ni.getBool("DEBUG")}),ni.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ni.registerFlag("IS_TEST",function(){return!1});var cl,jn,$n,To={},cd={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function cS(t,n){To[t]=n}function Zr(t){t in To||(To[t]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=pS(e);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete To[e]},!1),e===1?r.getContext("webgl",cd)||r.getContext("experimental-webgl",cd):r.getContext("webgl2",cd)}(t));var n=To[t];return n.isContextLost()?(delete To[t],Zr(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),To[t])}function pS(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function If(t,n){return[n,t]}function Mu(t){var n=fe(t);return Fp(Math.ceil(n/4))}function Al(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function Uv(t,n){var e,r,i,o,a,s,u,l,c,p=t;return G().getNumber("WEBGL_VERSION")===2?(e=p.R32F,r=p.R16F,i=p.RGBA16F,o=p.RGBA32F,a=p.RED,s=4,u=1,l=p.HALF_FLOAT,c=p.FLOAT):(e=t.RGBA,r=t.RGBA,i=t.RGBA,o=p.RGBA,a=t.RGBA,s=4,u=4,l=n!=null?n.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function ae(t,n,e){var r=e();return n&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+hS(i,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(cl||(cl={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(jn||(jn={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}($n||($n={}));var __=596e-10,z_=65504;function fS(t){return!!(G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||__<Math.abs(t)&&Math.abs(t)<z_)}function hS(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function Yc(t,n,e){return Ri(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function dS(t,n,e){var r=Ri(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ae(t,n,function(){return t.shaderSource(r,e)}),ae(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function mS(t,n,e){var r=Ri(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ae(t,n,function(){return t.shaderSource(r,e)}),ae(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,o){var a=F_.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(v,g){return Yo((g+1).toString(),l)+v}),p=0,f=0;f<c.length;f++)p=Math.max(c[f].length,p);var h=c.slice(0,s-1),d=c.slice(s-1,s),m=c.slice(s);console.log(h.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Yo(d[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Qc,Zc,F_=/ERROR: [0-9]+:([0-9]+):/g;function gS(t,n){return Ri(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function vS(t,n,e){if(ae(t,n,function(){return t.linkProgram(e)}),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Jc(t,n,e){if(ae(t,n,function(){return t.validateProgram(e)}),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function yS(t,n,e){var r=Ri(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ae(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ae(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function xS(t,n,e){var r=Ri(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ae(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ae(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function bS(t,n){return Ri(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function wS(t,n){var e=G().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function CS(t,n){return Ri(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Qm(t,n,e,r,i,o,a,s){var u=t.getAttribLocation(e,r);return u!==-1&&(ae(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),ae(t,n,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,a,s)}),ae(t,n,function(){return t.enableVertexAttribArray(u)}),!0)}function SS(t,n,e,r){AS(t,r),ae(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function kS(t,n,e,r){return Ri(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function ES(t,n,e){return t.getUniformLocation(n,e)}function NS(t,n,e,r,i,o){ae(t,n,function(){return SS(t,n,r,o)}),ae(t,n,function(){return t.uniform1i(i,o)})}function ep(t,n,e,r){ae(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ae(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function Zm(t,n,e){ae(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),ae(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function bu(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+IS(t,n))}function IS(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function Ri(t,n,e,r){var i=ae(t,n,function(){return e()});if(i==null)throw new Error(r);return i}function AS(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function pl(t,n){return n===void 0&&(n=2),fe(t.slice(0,t.length-n))}function fl(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function tp(t){var n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[pl(t)].concat(fl(t))),n}function RS(t,n){var e;n===void 0&&(n=!1);var r=G().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?Lv(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=ji(t);t=i.newShape}var o=fe(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var a=pl(t),s=2,u=2;return t.length&&(s=(e=fl(t))[0],u=e[1]),Fp(o=a*(s/2)*(u/2)).map(function(l){return 2*l})}return Fp(o)}function xc(t){return t%2==0}function wu(t,n){if(Ht(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||xc(e)&&xc(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&xc(t[0])&&xc(n[0])}function TS(t){if(Qc==null){var n=Zr(t);Qc=n.getParameter(n.MAX_TEXTURE_SIZE)}return Qc}function DS(t){if(Zc==null){var n=Zr(t);Zc=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Zc)}function OS(t){if(t===0)return 0;var n=Zr(t);return Cr(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Cr(n,"EXT_disjoint_timer_query")?1:0}function Cr(t,n){return t.getExtension(n)!=null}function Jm(t){try{if(Zr(t)!=null)return!0}catch{return!1}return!1}function _S(t){if(t===0)return!1;var n=Zr(t);if(t===1){if(!Cr(n,"OES_texture_float"))return!1}else if(!Cr(n,"EXT_color_buffer_float"))return!1;return eg(n)}function zS(t){if(t===0)return!1;var n=Zr(t);if(t!==1){if(Cr(n,"EXT_color_buffer_float"))return eg(n);if(Cr(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=Uv(r,i),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(n,e)}return!1}return!!Cr(n,"OES_texture_float")&&!!Cr(n,"WEBGL_color_buffer_float")&&eg(n)}function eg(t){var n=Uv(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i}function FS(t){return t===2&&Zr(t).fenceSync!=null}var M_=Object.freeze({callAndCheck:ae,canBeRepresented:fS,getWebGLErrorMessage:hS,getExtensionOrThrow:Yc,createVertexShader:dS,createFragmentShader:mS,createProgram:gS,linkProgram:vS,validateProgram:Jc,createStaticVertexBuffer:yS,createStaticIndexBuffer:xS,getNumChannels:function(){return G().getNumber("WEBGL_VERSION")===2?1:4},createTexture:bS,validateTextureSize:wS,createFramebuffer:CS,bindVertexBufferToProgramAttribute:Qm,bindTextureUnit:SS,unbindTextureUnit:function(t,n,e){AS(t,e),ae(t,n,function(){return t.activeTexture(t.TEXTURE0+e)}),ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:kS,getProgramUniformLocation:ES,bindTextureToProgramUniformSampler:NS,bindCanvasToFramebuffer:function(t,n){ae(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),ae(t,n,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),ae(t,n,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:ep,unbindColorTextureFromFramebuffer:Zm,validateFramebuffer:bu,getFramebufferErrorMessage:IS,getBatchDim:pl,getRowsCols:fl,getShapeAs3D:tp,getTextureShapeFromLogicalShape:RS,isReshapeFree:wu,getWebGLMaxTextureSize:TS,resetMaxTextureSize:function(){Qc=null},resetMaxTexturesInShader:function(){Zc=null},getMaxTexturesInShader:DS,getWebGLDisjointQueryTimerVersion:OS,hasExtension:Cr,isWebGLVersionEnabled:Jm,isCapableOfRenderingToFloatTexture:_S,isDownloadFloatTextureEnabled:zS,isWebGLFenceEnabled:FS}),xe=G();function L_(){G().set("PROD",!0)}function P_(){G().set("DEBUG",!0)}function B_(){G().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Af(t){G().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function V_(){z.disposeVariables()}function W_(){return z}function Lp(){return z.memory()}function $_(t){return z.profile(t)}function j(t,n){return z.tidy(t,n)}function Te(t){$v(t).forEach(function(n){return n.dispose()})}function Kr(t){return z.keep(t)}function U_(t){return z.time(t)}function j_(t){return z.setBackend(t)}function H_(){return z.ready()}function G_(){return z.backendName}function q_(t){z.removeBackend(t)}function K_(t){return z.findBackend(t)}function X_(t){return z.findBackendFactory(t)}function Y_(t,n,e){return e===void 0&&(e=1),z.registerBackend(t,n,e)}function MS(){return z.backend}function Q_(t,n){G().setPlatform(t,n)}function tg(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];G().getBool("IS_TEST")||console.warn.apply(console,t)}function Xr(t,n){var e=t;if(Qt(t))return n==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||Qt(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&G().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!Qt(o))return void D(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});D(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),D(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var u=a.slice(1),l=0;l<o.length;++l)i(o[l],u,s.concat(l))}(t,r,[]),r}function Wx(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function R(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof Ge)return Wx(r,t.dtype,n,e),t;var i=Vs(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Wx(r,i,n,e),t==null||!Qt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=Xr(t,i);Qt(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?Bv(t,i,G().getBool("DEBUG")):Ei(t,[],!0);return z.makeTensor(s,a,i)}function hl(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return R(i,n+"["+o+"]",e)},r)}function jv(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function LS(t,n,e){for(var r=t.length+n.length,i=[],o=0,a=0,s=0;s<r;s++)e.indexOf(s)===-1?i.push(t[o++]):i.push(n[a++]);return i}function Yt(t,n){for(var e=[],r=t.length,i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);return[e,n.map(function(o){return t[o]})]}function Qn(t,n){return LS(t,n.map(function(e){return 1}),n)}function En(t,n,e){D(jv(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function zr(t,n){if(jv(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(function(i){return e.push(i)}),e}function Rf(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function Fr(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function PS(t,n){var e=t[0].length;t.forEach(function(i,o){D(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),D(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(i,o){for(var a=0;a<e;a++)D(a===n||i[a]===r[a],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function aa(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function F(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];z.startScope(e);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),z.endScope(s),s}catch(u){throw z.endScope(null),u}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}xe.registerFlag("HAS_WEBGL",function(){return xe.getNumber("WEBGL_VERSION")>0}),xe.registerFlag("WEBGL_VERSION",function(){return Jm(2)?2:Jm(1)?1:0}),xe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return xe.get("WEBGL_VERSION")===2}),xe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),xe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),xe.registerFlag("WEBGL_PACK",function(){return xe.getBool("HAS_WEBGL")}),xe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_PACK_CLIP",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),xe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_PACK_REDUCE",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_CONV_IM2COL",function(){return xe.getBool("WEBGL_PACK")}),xe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return TS(xe.getNumber("WEBGL_VERSION"))}),xe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return DS(xe.getNumber("WEBGL_VERSION"))}),xe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=xe.getNumber("WEBGL_VERSION");return t===0?0:OS(t)}),xe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return xe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),xe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return _S(xe.getNumber("WEBGL_VERSION"))}),xe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!xe.getBool("WEBGL_FORCE_F16_TEXTURES")&&xe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),xe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return zS(xe.getNumber("WEBGL_VERSION"))}),xe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return FS(xe.getNumber("WEBGL_VERSION"))}),xe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return xe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),sS=Af;var _t=F({complex_:function(t,n){var e=R(t,"real","complex"),r=R(n,"imag","complex");return Pe(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),z.runKernelFunc(function(i){return i.complex(e,r)},{$real:e,$imag:r})}}),In=F({real_:function(t){var n=R(t,"input","real");return z.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),lr=F({imag_:function(t){var n=R(t,"input","imag");return z.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function xt(t,n,e){return wo(t,n,Xr(t,e),e)}function wo(t,n,e,r){if(r==null&&(r=Vs(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Qt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){Wv(n);var i=fe(n),o=fe(e);D(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<e.length;++a){var s=e[a],u=a!==e.length-1||s!==fe(n.slice(a));D(e[a]===n[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return Qt(t)||Array.isArray(t)||(t=[t]),n=n||e,t=r!=="string"?Bv(t,r,G().getBool("DEBUG")):Ei(t,[],!0),z.makeTensor(t,n,r)}function se(t,n){if((Qt(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Qt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return wo(t,[],[],n)}function zn(t,n){ma(t);var e=Xr(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return wo(t,null,e,n)}function gi(t,n,e){if(ma(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Xr(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return wo(t,n,r,e)}function Hv(t,n,e){if(ma(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Xr(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return wo(t,n,r,e)}function Wi(t,n,e){if(ma(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Xr(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return wo(t,n,r,e)}function BS(t,n,e){if(ma(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Xr(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return wo(t,n,r,e)}function VS(t,n,e){if(ma(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Xr(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return wo(t,n=n||r,r,e)}function Gv(t,n,e,r){return n===void 0&&(n=!0),z.makeVariable(t,n,e,r)}function Jr(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=Jr(t,"float32"),r=He(t,"float32");return _t(e,r)}var i=Vv(fe(t),n);return z.makeTensor(i,t,n)}function He(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=He(t,"float32"),r=He(t,"float32");return _t(e,r)}var i=Ws(fe(t),n);return z.makeTensor(i,t,n)}function $s(t,n,e){return z.runKernelFunc(function(r){return r.fill(t,n,e)},{})}function qv(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return z.runKernelFunc(function(r){return r.linspace(t,n,e)},{})}function Tf(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return He([0],r);var i=Ws(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return zn(i,r)}var Zn=F({onesLike_:function(t){var n=R(t,"x","onesLike");if(n.dtype==="complex64"){var e=Zn(In(n)),r=Fe(lr(n));return _t(e,r)}return z.runKernelFunc(function(i){return i.onesLike(n)},{$x:n},function(i,o){return{$x:function(){return Fe(i)}}})}}),Fe=F({zerosLike_:function(t){var n=R(t,"x","zerosLike");return z.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,r){return{$x:function(){return Fe(e)}}})}}),un=F({concat_:function(t,n){n===void 0&&(n=0),D(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=hl(t,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),n=qt(n,e[0].shape)[0];var r=aa(e.map(function(a){return a.shape}),n);if(fe(r)===0)return xt([],r);if((e=e.filter(function(a){return a.size>0})).length===1)return e[0];var i=e.map(function(a){return a.shape});PS(i,n);var o=e;return z.runKernelFunc(function(a){return a.concat(e,n)},o,function(a){var s=i.map(function(u){return u[n]});return vi(a,s,n).map(function(u){return function(){return u}})})}}),Kv=F({concat1d_:function(t){return un(t,0)}}),Xv=F({concat2d_:function(t,n){return un(t,n)}}),Yv=F({concat3d_:function(t,n){return un(t,n)}}),Qv=F({concat4d_:function(t,n){return un(t,n)}}),vi=F({split_:function(t,n,e){e===void 0&&(e=0);var r,i=R(t,"x","split");return e=qt(e,i.shape)[0],typeof n=="number"?(D(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(i.shape[e]/n)):(D(i.shape[e]===n.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),z.runKernelFunc(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return un(o,e)}}})}});function ga(t,n){return t(n={exports:{}},n.exports),n.exports}var Z_=ga(function(t){(function(n,e,r){function i(s){var u,l=this,c=(u=4022871197,function(p){p=p.toString();for(var f=0;f<p.length;f++){var h=.02519603282416938*(u+=p.charCodeAt(f));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var p=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=0|p)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function o(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new i(s),c=u&&u.state,p=l.next;return p.int32=function(){return 4294967296*l.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(0,t,!1)}),J_=ga(function(t){(function(n,e,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(0,t,!1)}),e3=ga(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^p^p<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(0,t,!1)}),t3=ga(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var l,c,p=u.x,f=u.i;return l=p[f],c=(l^=l>>>7)^l<<24,c^=(l=p[f+1&7])^l>>>10,c^=(l=p[f+3&7])^l>>>3,c^=(l=p[f+4&7])^l<<7,l=p[f+7&7],c^=(l^=l<<13)^l<<9,p[f]=c,u.i=f+1&7,c},function(l,c){var p,f=[];if(c===(0|c))f[0]=c;else for(c=""+c,p=0;p<c.length;++p)f[7&p]=f[7&p]<<15^c.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],l.x=f,l.i=0,p=256;p>0;--p)l.next()}(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},p.int32=l.next,p.quick=p,c&&(c.x&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(0,t,!1)}),n3=ga(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var l,c,p=u.w,f=u.X,h=u.i;return u.w=p=p+1640531527|0,c=f[h+34&127],l=f[h=h+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=f[h]=c^l,u.i=h,c+(p^p>>>16)|0},function(l,c){var p,f,h,d,m,v=[],g=128;for(c===(0|c)?(f=c,c=null):(c+="\0",f=0,g=Math.max(g,c.length)),h=0,d=-32;d<g;++d)c&&(f^=c.charCodeAt((d+32)%c.length)),d===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,d>=0&&(m=m+1640531527|0,h=(p=v[127&d]^=f+m)==0?h+1:0);for(h>=128&&(v[127&(c&&c.length||0)]=-1),h=127,d=512;d>0;--d)f=v[h+34&127],p=v[h=h+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,v[h]=f^p;l.w=m,l.X=v,l.i=h}(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},p.int32=l.next,p.quick=p,c&&(c.X&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(0,t,!1)}),r3=ga(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var p=u.b,f=u.c,h=u.d,d=u.a;return p=p<<25^p>>>7^f,f=f-h|0,h=h<<24^h>>>8^d,d=d-p|0,u.b=p=p<<20^p>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^d,u.a=d-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(0,t,!1)}),Do=ga(function(t){(function(n,e){var r,i=this,o=256,a=6,s="random",u=e.pow(o,a),l=e.pow(2,52),c=2*l,p=o-1;function f(g,y,x){var b=[],w=m(function k(E,N){var T,A=[],_=typeof E;if(N&&_=="object")for(T in E)try{A.push(k(E[T],N-1))}catch{}return A.length?A:_=="string"?E:E+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[g,v(n)]:g??function(){try{var k;return r&&(k=r.randomBytes)?k=k(o):(k=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(k)),v(k)}catch{var E=i.navigator,N=E&&E.plugins;return[+new Date,i,N,i.screen,v(n)]}}(),3),b),S=new h(b),C=function(){for(var k=S.g(a),E=u,N=0;k<l;)k=(k+N)*o,E*=o,N=S.g(1);for(;k>=c;)k/=2,E/=2,N>>>=1;return(k+N)/E};return C.int32=function(){return 0|S.g(4)},C.quick=function(){return S.g(4)/4294967296},C.double=C,m(v(S.S),n),(y.pass||x||function(k,E,N,T){return T&&(T.S&&d(T,S),k.state=function(){return d(S,{})}),N?(e[s]=k,E):k})(C,w,"global"in y?y.global:this==e,y.state)}function h(g){var y,x=g.length,b=this,w=0,S=b.i=b.j=0,C=b.S=[];for(x||(g=[x++]);w<o;)C[w]=w++;for(w=0;w<o;w++)C[w]=C[S=p&S+g[w%x]+(y=C[w])],C[S]=y;(b.g=function(k){for(var E,N=0,T=b.i,A=b.j,_=b.S;k--;)E=_[T=p&T+1],N=N*o+_[p&(_[T]=_[A=p&A+E])+(_[A]=E)];return b.i=T,b.j=A,N})(o)}function d(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function m(g,y){for(var x,b=g+"",w=0;w<b.length;)y[p&w]=p&(x^=19*y[p&w])+b.charCodeAt(w++);return v(y)}function v(g){return String.fromCharCode.apply(0,g)}if(e["seed"+s]=f,m(e.random(),n),t.exports){t.exports=f;try{r=require("crypto")}catch{}}})([],Math)});Do.alea=Z_,Do.xor128=J_,Do.xorwow=e3,Do.xorshift7=t3,Do.xor4096=n3,Do.tychei=r3;var Df=Do.alea,Zv=function(){function t(n,e,r,i,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Df(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}(),i3=function(){function t(n,e,r,i){this.alpha=n,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=Df(o.toString()),this.randn=new Zv(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=1-.331*(n=i*i)*n,r=.5*n+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},t}(),o3=function(){function t(n,e,r,i){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=Df(i)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Se(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",Wv(t),new bs(t,n,e)}function WS(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var Of=F({batchToSpaceND_:function(t,n,e){var r=R(t,"x","batchToSpaceND"),i=n.reduce(function(o,a){return o*a});return D(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),D(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),D(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),z.runKernelFunc(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),_f=F({cast_:function(t,n){var e=R(t,"x","cast");if(!eS(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return z.runKernelFunc(function(i){return i.cast(e,n)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),$S=F({clone_:function(t){var n=R(t,"x","clone",null);return z.runKernelFunc(function(){return z.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),US=F({cumsum_:function(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var i=R(t,"x","cumsum"),o=zr([n|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=Fr(1,i.rank)[0],u=z.runKernelFunc(function(l){return l.cumsum(a,s,e,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(n,e,!r)}}});return o!=null&&(u=u.transpose(o)),u}}),Jv=F({depthToSpace_:function(t,n,e){e===void 0&&(e="NHWC");var r=R(t,"x","depthToSpace"),i=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],a=e==="NHWC"?r.shape[3]:r.shape[1];return D(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),D(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape}),D(a%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+a+" for depthToSpace with input shape "+r.shape}),z.runKernelFunc(function(s){return s.depthToSpace(r,n,e)},{$x:r})}}),Un=F({expandDims_:function(t,n){n===void 0&&(n=0);var e=R(t,"x","expandDims",null);D(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&(D(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),Rl(e,r)}}),zf=F({eye_:function(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var i=Se([t,n],r),o=t<=n?t:n,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(t,n);if(e==null)return s;if(e.length===1)return oo(Un(s,0),[e[0],1,1]);if(e.length===2)return oo(Un(Un(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return oo(Un(Un(Un(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),ey=F({multinomial_:function(t,n,e,r){r===void 0&&(r=!1);var i=R(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);e=e||Math.random();var s=a===1?i.as2D(1,-1):i,u=z.runKernelFunc(function(l){return l.multinomial(s,r,n,e)},{logits2D:s});return a===1?u.as1D():u}}),ws=F({oneHot_:function(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=R(t,"indices","oneHot","int32"),o=i.shape.concat([n]);return i=i.flatten(),z.runKernelFunc(function(a){return a.oneHot(i,n,e,r)},{$indices:i},function(a){return{$indices:function(){return He(i.shape,"float32")}}}).reshape(o)}}),Co=F({pad_:function(t,n,e){e===void 0&&(e=0);var r=R(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=n.map(function(o){return o[0]});return z.runKernelFunc(function(o){return o.pad(r,n,e)},{$x:r},function(o){return{$x:function(){return o.slice(i,r.shape)}}})}}),jS=F({pad1d_:function(t,n,e){return e===void 0&&(e=0),D(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Co(t,[n],e)}}),HS=F({pad2d_:function(t,n,e){return e===void 0&&(e=0),D(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Co(t,n,e)}}),GS=F({pad3d_:function(t,n,e){return e===void 0&&(e=0),D(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Co(t,n,e)}}),qS=F({pad4d_:function(t,n,e){return e===void 0&&(e=0),D(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Co(t,n,e)}}),KS=F({rand_:function(t,n,e){var r=fe(t),i=null;if(e==null||e==="float32")i=new Float32Array(r);else if(e==="int32")i=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=n();return z.makeTensor(i,t,e)}}),ty=F({randomNormal_:function(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new Zv(n,e,r,!1,i),a=Se(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),XS=F({randomGamma_:function(t,n,e,r,i){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new i3(n,e,r,i),a=Se(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),va=F({randomUniform_:function(t,n,e,r,i){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=Se(t,r),a=new o3(n,e,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Rl=F({reshape_:function(t,n){var e=R(t,"x","reshape",null);n=ZC(n,e.size),D(e.size===fe(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return z.runKernelFunc(function(i){return i.reshape(e,n)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",r)}}),Ff=F({spaceToBatchND_:function(t,n,e){var r=R(t,"x","spaceToBatchND");return D(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),D(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),D(r.shape.reduce(function(i,o,a){return a>0&&a<=n.length?i&&(o+e[a-1][0]+e[a-1][1])%n[a-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),z.runKernelFunc(function(i){return i.spaceToBatchND(r,n,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}}),Tl=F({squeeze_:function(t,n){var e=R(t,"x","squeeze");return Rl(e,ji(e.shape,n).newShape)}}),Tr=F({stack_:function(t,n){n===void 0&&(n=0);var e=hl(t,"tensors","stack");if(D(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var r=e[0].rank,i=e[0].shape,o=e[0].dtype;D(n<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){Pe(i,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){D(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=e.map(function(s){return s.expandDims(n)});return un(a,n)}}),oo=F({tile_:function(t,n){var e=R(t,"x","tile",null);return D(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."}),z.runKernelFunc(function(r,i){var o=r.tile(e,n);return i([e]),o},{$x:e},function(r,i){var o=i[0];return{$x:function(){var a=Fe(o);if(o.rank===1)for(var s=0;s<n[0];++s)a=a.add(r.slice([s*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(s=0;s<n[0];++s)for(var u=0;u<n[1];++u)a=a.add(r.slice([s*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(s=0;s<n[0];++s)for(u=0;u<n[1];++u)for(var l=0;l<n[2];++l)a=a.add(r.slice([s*o.shape[0],u*o.shape[1],l*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else{if(o.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+o.rank+" tensors yet.");for(s=0;s<n[0];++s)for(u=0;u<n[1];++u)for(l=0;l<n[2];++l)for(var c=0;c<n[3];++c)a=a.add(r.slice([s*o.shape[0],u*o.shape[1],l*o.shape[2],c*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]))}return a}}})}}),Dl=F({truncatedNormal_:function(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new Zv(n,e,r,!0,i),a=Se(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),sa=F({unstack_:function(t,n){n===void 0&&(n=0),n=n||0;var e=R(t,"x","unstack");return D(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length),z.runKernelFunc(function(r){return r.unstack(e,n)},{$x:e},function(r){return{$x:function(){return Tr(r,n)}}})}}),ny=function(t,n){return ce(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,p;return pe(this,function(f){switch(f.label){case 0:return e=R(t,"x","setdiff1d"),r=R(n,"y","setdiff1d"),D(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),D(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),D(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=f.sent(),[4,r.data()];case 2:for(o=f.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(u=new bs([s],e.dtype),l=new bs([s],"int32"),c=0,p=0;c<i.length;c++)a.has(i[c])||(u.values[p]=i[c],l.values[p]=c,p++);return[2,[u.toTensor(),l.toTensor()]]}})})};function Pp(t,n,e,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(n.slice(0))).push(t[0]/e),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=n.length,a=0;a<o;++a)i=i.concat([t[a+1]/n[a],n[a]]);i=i.concat(t.slice(o+1))}return i}function Bp(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var i=n+1;i<t;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<t;++i)i>=2*n+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function Vp(t,n,e,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/e):i.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?i.push(n[o-1]*t[o]):i.push(t[o]/n[o-1]):i.push(t[o]);return i}function YS(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function QS(t,n,e){for(var r=t.slice(0,1),i=0;i<e;++i)r.push(t[i+1]-n[i][0]-n[i][1]);return r}function ZS(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var a=t.shape,s=e.slice();s.pop();var u=1;for(o=r;o<t.rank;++o)u*=a[o],s.push(a[o]);var l=bo(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var JS=30;function pd(t){return t<=JS?t:Mp(t,Math.floor(Math.sqrt(t)))}function a3(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}(function(r,i,o){var a=i.rank>1?i.shape[i.rank-1]:1,s=i.rank>1?i.rank-1:1,u="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+o.shape+", indices.shape: "+i.shape+", shape: "+r+", sliceDim: "+a+", and batchDim: "+s+".";if(o.rank<s)throw new Error(u+" update.rank < "+s+". ");if(r.length<a+(o.rank-s))throw new Error(u+" Output shape length < "+(a+(o.rank-s)));if(o.rank!==s+r.length-a)throw new Error(u+" update.rank != "+(s+r.length-a));for(var l=0;l<s;++l)if(o.shape[l]!==i.shape[l])throw new Error(u+" updates.shape["+l+"] ("+o.shape[l]+") != indices.shape["+l+"] ("+i.shape[l]+").");for(l=0;l<o.rank-s;++l)if(o.shape[l+s]!==r[l+a])throw new Error(u+" updates.shape["+(l+s)+"] ("+o.shape[l+s]+") != shape["+(l+s)+"] ("+r[l+s]+")")})(e,n,t)}function Wp(t,n,e){for(var r=n.rank>1?n.shape[n.rank-1]:1,i=e.length,o=1,a=r;a<i;++a)o*=e[a];var s=r<1?1:r;return{sliceRank:r,numUpdates:n.size/s,sliceSize:o,strides:bo(e.slice(0,r)).concat([1]),outputSize:fe(e)}}function ek(t,n,e){D(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),D(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){D(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function ng(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function Mf(t,n,e){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((n[i]-t[i])/e[i]);return r}function tk(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=zp(0,o,s-1)}function nk(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=a>0?zp(0,o,s):zp(-1,o,s-1)}function ry(t,n,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(n[i]>0||e[i]!==t[i])return!1;return!0}function iy(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}var s3=Object.freeze({assertParamsValid:ek,maskToAxes:ng,computeOutShape:Mf,startForAxis:tk,stopForAxis:nk,isSliceContinous:ry,computeFlatOffset:iy});function u3(t){return D(po(t),function(){return"The f passed in grad(f) must be a function"}),function(n,e){var r=R(n,"x","tf.grad",null),i=e!=null?R(e,"dy","tf.grad"):null;return z.tidy(function(){var o=z.gradients(function(){return t(r)},[r],i),a=o.value,s=o.grads;return i!=null&&Pe(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Lf(s),s[0]})}}function l3(t){return D(po(t),function(){return"The f passed in grads(f) must be a function"}),function(n,e){D(Array.isArray(n),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=hl(n,"args","tf.grads",null),i=e!=null?R(e,"dy","tf.grads"):null;return z.tidy(function(){var o=z.gradients(function(){return t.apply(void 0,r)},r,i),a=o.value,s=o.grads;return i!=null&&Pe(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Lf(s),s})}}function c3(t){return D(po(t),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(n,e){D(n instanceof Ge,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),D(e==null||e instanceof Ge,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=z.gradients(function(){return t(n)},[n],e),i=r.grads,o=r.value;return Lf(i),{grad:i[0],value:o}}}function p3(t){return D(po(t),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(n,e){D(Array.isArray(n)&&n.every(function(i){return i instanceof Ge}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),D(e==null||e instanceof Ge,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=z.gradients(function(){return t.apply(void 0,n)},n,e);return e!=null&&Pe(r.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Lf(r.grads),r}}function rk(t,n){D(po(t),function(){return"The f passed in variableGrads(f) must be a function"}),D(n==null||Array.isArray(n)&&n.every(function(c){return c instanceof ll}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var r in n=[],z.registeredVariables)n.push(z.registeredVariables[r]);var i=e?n.filter(function(c){return!c.trainable}):null,o=n.length;D((n=n.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=z.gradients(t,n,null,!0),s=a.value,u=a.grads;D(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),D(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return n.forEach(function(c,p){u[p]!=null&&(l[c.name]=u[p])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Us(t){return z.customGrad(t)}function Lf(t){if(t.filter(function(n){return n==null}).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var ya=F({softmax_:function(t,n){n===void 0&&(n=-1);var e=R(t,"logits","softmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return Us(function(r,i){var o=r.logSumExp([n],!0),a=r.toFloat().sub(o).exp();return i([a]),{value:a,gradFunc:function(s,u){var l=u[0],c=s.mul(l);return c.sub(c.sum([n],!0).mul(l))}}})(e)}}),Pf=F({logSoftmax_:function(t,n){n===void 0&&(n=-1);var e=R(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return Us(function(r,i){var o=r.max(n,!0),a=r.sub(o),s=a.toFloat().sub(a.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(n,!0).mul(c))}}})(e)}}),oy=function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),ay=function(){function t(){}return t.prototype.time=function(n){return H()},t.prototype.read=function(n){return H()},t.prototype.readSync=function(n){return H()},t.prototype.numDataIds=function(){return H()},t.prototype.disposeData=function(n){return H()},t.prototype.fromPixels=function(n,e){return H()},t.prototype.write=function(n,e,r){return H()},t.prototype.move=function(n,e,r,i){return H()},t.prototype.memory=function(){return H()},t.prototype.floatPrecision=function(){return H()},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,i){return H()},t.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,H()},t.prototype.slice=function(n,e,r){return H()},t.prototype.stridedSlice=function(n,e,r,i){return H()},t.prototype.unstack=function(n,e){return H()},t.prototype.reverse=function(n,e){return H()},t.prototype.concat=function(n,e){return H()},t.prototype.neg=function(n){return H()},t.prototype.add=function(n,e){return H()},t.prototype.addN=function(n){return H()},t.prototype.subtract=function(n,e){return H()},t.prototype.multiply=function(n,e){return H()},t.prototype.realDivide=function(n,e){return H()},t.prototype.floorDiv=function(n,e){return H()},t.prototype.sum=function(n,e){return H()},t.prototype.prod=function(n,e){return H()},t.prototype.unsortedSegmentSum=function(n,e,r){return H()},t.prototype.argMin=function(n,e){return H()},t.prototype.argMax=function(n,e){return H()},t.prototype.equal=function(n,e){return H()},t.prototype.notEqual=function(n,e){return H()},t.prototype.less=function(n,e){return H()},t.prototype.lessEqual=function(n,e){return H()},t.prototype.greater=function(n,e){return H()},t.prototype.greaterEqual=function(n,e){return H()},t.prototype.logicalNot=function(n){return H()},t.prototype.logicalAnd=function(n,e){return H()},t.prototype.logicalOr=function(n,e){return H()},t.prototype.where=function(n){return H()},t.prototype.select=function(n,e,r){return H()},t.prototype.topk=function(n,e,r){return H()},t.prototype.min=function(n,e){return H()},t.prototype.minimum=function(n,e){return H()},t.prototype.mod=function(n,e){return H()},t.prototype.max=function(n,e){return H()},t.prototype.maximum=function(n,e){return H()},t.prototype.all=function(n,e){return H()},t.prototype.any=function(n,e){return H()},t.prototype.squaredDifference=function(n,e){return H()},t.prototype.ceil=function(n){return H()},t.prototype.floor=function(n){return H()},t.prototype.round=function(n){return H()},t.prototype.sign=function(n){return H()},t.prototype.isNaN=function(n){return H()},t.prototype.isInf=function(n){return H()},t.prototype.isFinite=function(n){return H()},t.prototype.pow=function(n,e){return H()},t.prototype.exp=function(n){return H()},t.prototype.expm1=function(n){return H()},t.prototype.log=function(n){return H()},t.prototype.log1p=function(n){return H()},t.prototype.sqrt=function(n){return H()},t.prototype.rsqrt=function(n){return H()},t.prototype.square=function(n){return H()},t.prototype.reciprocal=function(n){return H()},t.prototype.relu=function(n){return H()},t.prototype.relu6=function(n){return H()},t.prototype.prelu=function(n,e){return H()},t.prototype.elu=function(n){return H()},t.prototype.eluDer=function(n,e){return H()},t.prototype.selu=function(n){return H()},t.prototype.int=function(n){return H()},t.prototype.clip=function(n,e,r){return H()},t.prototype.abs=function(n){return H()},t.prototype.complexAbs=function(n){return H()},t.prototype.sigmoid=function(n){return H()},t.prototype.softplus=function(n){return H()},t.prototype.sin=function(n){return H()},t.prototype.cos=function(n){return H()},t.prototype.tan=function(n){return H()},t.prototype.asin=function(n){return H()},t.prototype.acos=function(n){return H()},t.prototype.atan=function(n){return H()},t.prototype.atan2=function(n,e){return H()},t.prototype.sinh=function(n){return H()},t.prototype.cosh=function(n){return H()},t.prototype.tanh=function(n){return H()},t.prototype.asinh=function(n){return H()},t.prototype.acosh=function(n){return H()},t.prototype.atanh=function(n){return H()},t.prototype.erf=function(n){return H()},t.prototype.step=function(n,e){return H()},t.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,H()},t.prototype.conv2d=function(n,e,r){return H()},t.prototype.conv2dDerInput=function(n,e,r){return H()},t.prototype.conv2dDerFilter=function(n,e,r){return H()},t.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,H()},t.prototype.depthwiseConv2D=function(n,e,r){return H()},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return H()},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return H()},t.prototype.conv3d=function(n,e,r){return H()},t.prototype.conv3dDerInput=function(n,e,r){return H()},t.prototype.conv3dDerFilter=function(n,e,r){return H()},t.prototype.maxPool=function(n,e){return H()},t.prototype.maxPoolBackprop=function(n,e,r,i){return H()},t.prototype.avgPool=function(n,e){return H()},t.prototype.avgPoolBackprop=function(n,e,r){return H()},t.prototype.avgPool3d=function(n,e){return H()},t.prototype.avgPool3dBackprop=function(n,e,r){return H()},t.prototype.maxPool3d=function(n,e){return H()},t.prototype.maxPool3dBackprop=function(n,e,r,i){return H()},t.prototype.reshape=function(n,e){return H()},t.prototype.cast=function(n,e){return H()},t.prototype.tile=function(n,e){return H()},t.prototype.pad=function(n,e,r){return H()},t.prototype.transpose=function(n,e){return H()},t.prototype.gather=function(n,e,r){return H()},t.prototype.gatherND=function(n,e){return H()},t.prototype.scatterND=function(n,e,r){return H()},t.prototype.batchToSpaceND=function(n,e,r){return H()},t.prototype.spaceToBatchND=function(n,e,r){return H()},t.prototype.resizeBilinear=function(n,e,r,i){return H()},t.prototype.resizeBilinearBackprop=function(n,e,r){return H()},t.prototype.resizeNearestNeighbor=function(n,e,r,i){return H()},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return H()},t.prototype.batchNormalization=function(n,e,r,i,o,a){return H()},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){return H()},t.prototype.LRNGrad=function(n,e,r,i,o,a,s){return H()},t.prototype.multinomial=function(n,e,r,i){return H()},t.prototype.oneHot=function(n,e,r,i){return H()},t.prototype.cumsum=function(n,e,r,i){return H()},t.prototype.nonMaxSuppression=function(n,e,r,i,o){return H()},t.prototype.fft=function(n){return H()},t.prototype.ifft=function(n){return H()},t.prototype.complex=function(n,e){return H()},t.prototype.real=function(n){return H()},t.prototype.imag=function(n){return H()},t.prototype.cropAndResize=function(n,e,r,i,o,a){return H()},t.prototype.depthToSpace=function(n,e,r){return H()},t.prototype.split=function(n,e,r){return H()},t.prototype.sparseToDense=function(n,e,r,i){return H()},t.prototype.diag=function(n){return H()},t.prototype.fill=function(n,e,r){throw new Error("Not yet implemented.")},t.prototype.onesLike=function(n){return H()},t.prototype.zerosLike=function(n){return H()},t.prototype.linspace=function(n,e,r){return H()},t.prototype.dispose=function(){return H()},t}();function H(){throw new Error("Not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Vo(t,n){for(var e=t.length,r=[],i=0;i<e;i++){var o=e-1-i,a=t[o]||1;(n[n.length-1-i]||1)>1&&a===1&&r.unshift(o)}return r}function Rt(t,n){for(var e=[],r=0;r<n.length;r++){var i=t[t.length-r-1],o=n.length-r-1,a=n[o];(i==null||i===1&&a>1)&&e.unshift(o)}return e}function ze(t,n){for(var e=[],r=Math.max(t.length,n.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var a=n[n.length-i-1];if(a==null&&(a=1),o===1)e.unshift(a);else if(a===1)e.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function Cs(t,n,e,r,i,o,a){a===void 0&&(a="channelsLast");var s,u=$p(n),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,t[1],t[1]]}return So(t,s,e,r,i,o,!1,a)}function dl(t,n,e,r,i,o,a){a===void 0&&(a="NDHWC");var s,u,l=rg(n),c=l[0],p=l[1],f=l[2];if(a==="NDHWC")u="channelsLast",s=[c,p,f,t[4],t[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,p,f,t[1],t[1]]}return ml(t,s,e,r,i,!1,u,o)}function So(t,n,e,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],p=u[2],f=u[3];if(s==="channelsLast")l=t[0],c=t[1],p=t[2],f=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],f=t[1],c=t[2],p=t[3]}var h,d=n[0],m=n[1],v=n[3],g=$p(e),y=g[0],x=g[1],b=$p(r),w=b[0],S=b[1],C=rs(d,w),k=rs(m,S),E=function(M,W,L,U,O,V,$,K){var Q,ee,ue;if(typeof M=="number"){var le=M===0?"VALID":"NUMBER";Q={top:M,bottom:M,left:M,right:M,type:le};var te=function(_e,ke,Xe,Be,Dt){Be==null&&(Be=sy(_e,ke,Xe));var cn=_e[0],Pt=_e[1],tn=Lu((cn-ke+2*Be)/Xe+1,Dt);D(ft(tn),function(){return"The output # of rows ("+tn+") must be an integer. Change the stride and/or zero pad parameters"});var Bt=Lu((Pt-ke+2*Be)/Xe+1,Dt);return D(ft(Bt),function(){return"The output # of columns ("+Bt+") must be an integer. Change the stride and/or zero pad parameters"}),[tn,Bt]}([W,L],V,U,M,K);ee=te[0],ue=te[1]}else if(M==="same"){ee=Math.ceil(W/U),ue=Math.ceil(L/O);var de=Math.max(0,(ee-1)*U+V-W),ge=Math.max(0,(ue-1)*O+$-L),ve=Math.floor(de/2),$e=de-ve,he=Math.floor(ge/2),Ce=ge-he;Q={top:ve,bottom:$e,left:he,right:Ce,type:"SAME"}}else{if(M!=="valid")throw Error("Unknown padding parameter: "+M);Q={top:0,bottom:0,left:0,right:0,type:"VALID"},ee=Math.ceil((W-V+1)/U),ue=Math.ceil((L-$+1)/O)}return{padInfo:Q,outHeight:ee,outWidth:ue}}(i,c,p,y,x,C,k,o),N=E.padInfo,T=E.outHeight,A=E.outWidth,_=a?v*f:v;return s==="channelsFirst"?h=[l,_,T,A]:s==="channelsLast"&&(h=[l,T,A,_]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:p,inChannels:f,outHeight:T,outWidth:A,outChannels:_,padInfo:N,strideHeight:y,strideWidth:x,filterHeight:d,filterWidth:m,effectiveFilterHeight:C,effectiveFilterWidth:k,dilationHeight:w,dilationWidth:S,inShape:t,outShape:h,filterShape:n}}function ml(t,n,e,r,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],p=u[2],f=u[3],h=u[4];if(a==="channelsLast")l=t[0],c=t[1],p=t[2],f=t[3],h=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],h=t[1],c=t[2],p=t[3],f=t[4]}var d,m=n[0],v=n[1],g=n[2],y=n[4],x=rg(e),b=x[0],w=x[1],S=x[2],C=rg(r),k=C[0],E=C[1],N=C[2],T=rs(m,k),A=rs(v,E),_=rs(g,N),M=function($,K,Q,ee,ue,le,te,de,ge,ve,$e){var he,Ce,_e,ke;if(typeof $=="number"){var Xe=$===0?"VALID":"NUMBER";he={top:$,bottom:$,left:$,right:$,front:$,back:$,type:Xe};var Be=function(Ct,Ln,gr,St,ti,ir){ti==null&&(ti=sy(Ct,Ln,St));var Qs=Ct[0],Ia=Ct[1],Zs=Ct[2],nt=Lu((Qs-Ln+2*ti)/St+1,ir);D(ft(nt),function(){return"The output # of depths ("+nt+") must be an integer. Change the stride and/or zero pad parameters"});var Vt=Lu((Ia-Ln+2*ti)/St+1,ir);D(ft(Vt),function(){return"The output # of rows ("+Vt+") must be an integer. Change the stride and/or zero pad parameters"});var Ot=Lu((Zs-Ln+2*ti)/St+1,ir);return D(ft(Ot),function(){return"The output # of columns ("+Ot+") must be an integer. Change the stride and/or zero pad parameters"}),[nt,Vt,Ot,gr]}([K,Q,ee,1],de,1,ue,$,$e);Ce=Be[0],_e=Be[1],ke=Be[2]}else if($==="same"){Ce=Math.ceil(K/ue),_e=Math.ceil(Q/le),ke=Math.ceil(ee/te);var Dt=(Ce-1)*ue+de-K,cn=(_e-1)*le+ge-Q,Pt=(ke-1)*te+ve-ee,tn=Math.floor(Dt/2),Bt=Dt-tn,pn=Math.floor(cn/2),Ae=cn-pn,fn=Math.floor(Pt/2),Ye=Pt-fn;he={top:pn,bottom:Ae,left:fn,right:Ye,front:tn,back:Bt,type:"SAME"}}else{if($!=="valid")throw Error("Unknown padding parameter: "+$);he={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ce=Math.ceil((K-de+1)/ue),_e=Math.ceil((Q-ge+1)/le),ke=Math.ceil((ee-ve+1)/te)}return{padInfo:he,outDepth:Ce,outHeight:_e,outWidth:ke}}(i,c,p,f,b,w,S,T,A,_,s),W=M.padInfo,L=M.outDepth,U=M.outHeight,O=M.outWidth,V=o?y*h:y;return a==="channelsFirst"?d=[l,V,L,U,O]:a==="channelsLast"&&(d=[l,L,U,O,V]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:p,inWidth:f,inChannels:h,outDepth:L,outHeight:U,outWidth:O,outChannels:V,padInfo:W,strideDepth:b,strideHeight:w,strideWidth:S,filterDepth:m,filterHeight:v,filterWidth:g,effectiveFilterDepth:T,effectiveFilterHeight:A,effectiveFilterWidth:_,dilationDepth:k,dilationHeight:E,dilationWidth:N,inShape:t,outShape:d,filterShape:n}}function sy(t,n,e,r){r===void 0&&(r=1);var i=rs(n,r);return Math.floor((t[0]*(e-1)-e+i)/2)}function $p(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function rg(t){return typeof t=="number"?[t,t,t]:t}function rs(t,n){return n<=1?t:t+(t-1)*(n-1)}function Lu(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function ua(t){var n=$p(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function vn(t,n){return ua(t)||ua(n)}function Bf(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function uy(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=He(t.shape),i=t.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!tS(t.dtype,n))return z.makeTensorFromDataId(t.dataId,t.shape,n);if(t.dtype==="complex64"){var a=e.real(t);return o=a.cast(n),a.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var s=se(0,t.dtype);return o=e.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function Up(t,n){return z.makeTensorFromDataId(t.dataId,n,t.dtype)}function ly(t,n,e){var r=(n-t)/(e-1),i=Ws(e,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return zn(i,"float32")}var f3=Object.freeze({castTensor:uy,reshapeTensor:Up,linspaceImpl:ly,upcastType:kt,axesAreInnerMostDims:jv,combineLocations:LS,computeOutAndReduceShapes:Yt,expandShapeToKeepDim:Qn,assertAxesAreInnerMostDims:En,getAxesPermutation:zr,getUndoAxesPermutation:Rf,getInnerMostAxes:Fr,getBroadcastDims:Vo,getReductionAxes:Rt,assertAndGetBroadcastShape:ze,assertParamsConsistent:PS,computeOutShape:aa,computePool2DInfo:Cs,computePool3DInfo:dl,computeConv2DInfo:So,computeConv3DInfo:ml,computeDefaultPad:sy,tupleValuesAreOne:ua,eitherStridesOrDilationsAreOne:vn,convertConv2DDataFormat:Bf});function ig(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function $x(t,n){return{real:t[2*n],imag:t[2*n+1]}}function h3(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function d3(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function cy(t,n,e,r,i){for(var o=Array.from(n).map(function(h,d){return{score:h,boxIndex:d}}).filter(function(h){return h.score>i}).sort(function(h,d){return d.score-h.score}),a=[],s=0;s<o.length;s++){var u=o[s],l=u.score,c=u.boxIndex;if(l<i)break;for(var p=!1,f=a.length-1;f>=0;--f)if(m3(t,c,a[f])>=r){p=!0;break}if(!p&&(a.push(c),a.length>=e))break}return zn(a,"int32")}function m3(t,n,e){var r=t.subarray(4*n,4*n+4),i=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),p=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=(s-o)*(u-a),d=(p-l)*(f-c);if(h<=0||d<=0)return 0;var m=Math.max(o,l),v=Math.max(a,c),g=Math.min(s,p),y=Math.min(u,f),x=Math.max(g-m,0)*Math.max(y-v,0);return x/(h+d-x)}function ik(t,n,e){var r=new Array(t.rank).fill(0),i=t.shape.slice();return n.map(function(o){i[e]=o;var a=t.slice(r,i);return r[e]+=o,a})}function ok(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var i=Se(e,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=o[s]%t.shape[s];var u=t.locToIndex(a);i.values[r]=t.values[u]}return i.toTensor()}function ak(t,n,e,r,i){for(var o=n[n.length-1],a=[t.length/o,o],s=a[0],u=a[1],l=al(e,s*r),c=al("int32",s*r),p=0;p<s;p++){for(var f=p*u,h=t.subarray(f,f+u),d=[],m=0;m<h.length;m++)d.push({value:h[m],index:m});d.sort(function(b,w){return w.value-b.value});var v=p*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=d[m].value,y[m]=d[m].index}var x=n.slice();return x[x.length-1]=r,[xt(l,x,e),xt(c,x,"int32")]}function py(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var i=Se(t,"int32"),o=Se([e.length,t.length],"int32");for(r=0;r<e.length;r++){var a=i.indexToLoc(e[r]),s=r*t.length;o.values.set(a,s)}return o.toTensor()}var g3=function(){return function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `}}(),v3=function(){return function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `}}(),y3=function(){return function(t,n,e){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=n==="max"?">":"<",u=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}();function sk(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function An(t,n){return n===1?[t]:sk(t,n)}function an(){var t,n,e,r,i,o,a,s,u,l;return G().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Wo(t,n,e){e===void 0&&(e="index");var r=bo(n);return r.map(function(i,o){return"int "+t[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function fy(t){var n=bo(t).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var uk=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function x3(t,n,e,r){var i=[];t.forEach(function(h){var d=fe(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?i.push("uniform float "+h.name+(d>1?"["+d+"]":"")+";"):(i.push("uniform sampler2D "+h.name+";"),i.push("uniform int offset"+h.name+";"))});var o,a,s=i.join(`
`),u=t.map(function(h){return function(d,m,v){v===void 0&&(v=!1);var g="";g+=v?lk(d):_a(d);var y=d.shapeInfo.logicalShape,x=m.logicalShape;return y.length<=x.length&&(g+=v?function(b,w){var S,C=b.name,k=C.charAt(0).toUpperCase()+C.slice(1),E="get"+k+"AtOutCoords",N=b.shapeInfo.logicalShape.length,T=w.logicalShape.length,A=Vo(b.shapeInfo.logicalShape,w.logicalShape),_=tt(T),M=T-N,W=["x","y","z","w","u","v"];S=N===0?"":T<2&&A.length>=1?"coords = 0;":A.map(function(Q){return"coords."+W[Q+M]+" = 0;"}).join(`
`);var L="";L=T<2&&N>0?"coords":b.shapeInfo.logicalShape.map(function(Q,ee){return"coords."+W[ee+M]}).join(", ");var U="return outputValue;",O=fe(b.shapeInfo.logicalShape)===1,V=fe(w.logicalShape)===1;if(N!==1||O||V){if(O&&!V)U=T===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(A.length){var $=N-2,K=N-1;A.indexOf($)>-1&&A.indexOf(K)>-1?U="return vec4(outputValue.x);":A.indexOf($)>-1?U="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":A.indexOf(K)>-1&&(U="return vec4(outputValue.xx, outputValue.zz);")}}else U=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+E+`() {
      `+_+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+k+"("+L+`);
      `+U+`
    }
  `}(d,m):function(b,w){var S=b.name,C=S.charAt(0).toUpperCase()+S.slice(1),k="get"+C+"AtOutCoords",E=w.texShape,N=b.shapeInfo.texShape,T=b.shapeInfo.logicalShape.length,A=w.logicalShape.length;if(!b.shapeInfo.isUniform&&T===A&&b.shapeInfo.flatOffset==null&&Ht(N,E))return`
      float `+k+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var _,M=tt(A),W=Vo(b.shapeInfo.logicalShape,w.logicalShape),L=A-T,U=["x","y","z","w","u","v"];_=T===0?"":A<2&&W.length>=1?"coords = 0;":W.map(function(V){return"coords."+U[V+L]+" = 0;"}).join(`
`);var O="";return O=A<2&&T>0?"coords":b.shapeInfo.logicalShape.map(function(V,$){return"coords."+U[$+L]}).join(", "),`
    float `+k+`() {
      `+M+` coords = getOutputCoords();
      `+_+`
      return get`+C+"("+O+`);
    }
  `}(d,m)),g}(h,n,r)}).join(`
`),l=n.texShape,c=an(),p=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),f=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+b3+`
    `+w3+`
    `+C3+`
  `}(c);return n.isPacked?(o=function(h,d){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,w){var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,d);case 2:return function(b,w){var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(Ht(b,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var C=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec2(r, c);
    }
  `}(h,d);case 3:return m=h,v=d,g=[Math.ceil(v[0]/2),Math.ceil(v[1]/2)],y=Math.ceil(m[2]/2),x=y*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+y+`);
      int c = imod(index, `+y+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,w){for(var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],C=Math.ceil(b[b.length-1]/2),k=C*Math.ceil(b[b.length-2]/2),E=k,N="",T="b, r, c",A=2;A<b.length-1;A++)E*=b[b.length-A-1],N=`
      int b`+A+" = index / "+E+`;
      index -= b`+A+" * "+E+`;
    `+N,T="b"+A+", "+T;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+N+`

      int b = index / `+k+`;
      index -= b * `+k+`;

      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec`+b.length+"("+T+`);
    }
  `}(h,d)}var m,v,g,y,x}(n.logicalShape,l),a=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(o=function(h,d){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,y){return y[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+y[1]+`.0);
      }
    `:y[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+y[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      return resTexRC.x * `+y[1]+` + resTexRC.y;
    }
  `}(0,d);case 2:return function(g,y){return Ht(g,y)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+y[0]+", "+y[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(h,d);case 3:return m=d,v=Wo(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+v+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,y){var x=Wo(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+x+`
      return ivec4(r, c, d, d2);
    }
  `}(h,d);case 5:return function(g,y){var x=Wo(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+y[0]+`,
                             `+y[1]+`));

      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+x+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,d);case 6:return function(g,y){var x=Wo(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+x+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,d);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,v}(n.logicalShape,l),a=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(f+=S3),[f,p,a,s,o,u,e].join(`
`)}function _a(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=e.shapeInfo.texShape,l=u[0],c=u[1],p=No(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Da(e)+`
      }
    `;var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=No(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=e.shapeInfo.texShape;if(a!=null&&Ht(r,a)){var s=a[0],u=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=ji(r),c=l.newShape,p=l.keptDims,f=c;if(f.length<r.length){var h=za(e,f);return`
      `+_a(h)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Fa(["row","col"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Da(e)+`
      }
    `;var d=a[0],m=a[1],v=No(i);return m===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+v+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+d+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:d===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+v+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+v+`;
    vec2 uv = uvFromFlat(`+d+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[1]*r[2],s=r[2],u=ji(r),l=u.newShape,c=u.keptDims,p=l;if(p.length<r.length){var f=za(e,p);return`
        `+_a(f)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Fa(["row","col","depth"],c)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+Da(e)+`
      }
    `;var h=e.shapeInfo.texShape,d=h[0],m=h[1],v=e.shapeInfo.flatOffset;if(m===a&&v==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+d+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&v==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+d+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var g=No(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+d+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=ji(r),c=l.newShape,p=l.keptDims;if(c.length<r.length){var f=za(e,c);return`
      `+_a(f)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Fa(["row","col","depth","depth2"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+Da(e)+`
      }
    `;var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,m=d[0],v=d[1];if(v===u&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===a&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var g=No(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+v+", index + "+g+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=ji(r),p=c.newShape,f=c.keptDims;if(p.length<r.length){var h=za(e,p);return`
      `+_a(h)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Fa(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+Da(e)+`
      }
    `;var d=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],g=m[1];if(g===l&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=No(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+y+`;
      vec2 uv = uvFromFlat(`+v+", "+g+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=ji(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=za(e,s);return`
      `+_a(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Fa(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],p=r[4]*c,f=r[3]*p,h=r[2]*f,d=r[1]*h;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+h+", "+f+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Da(e)+`
      }
    `;var m=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,g=v[0],y=v[1];if(y===d&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+f+", "+p+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===c&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var x=No(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+h+" + depth * "+f+` +
          depth2 * `+p+" + depth3 * "+c+" + depth4 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function lk(t){var n,e,r;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=an(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=an();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],p=an();if(u!=null&&Ht(o,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+p.texture2D+"("+a+`, uv);
      }
    `;var f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+f[0]+", "+f[1]+`, row, col);
      return `+p.texture2D+"("+a+`, uv);
    }
  `}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var c=o.slice(1),p=za(i,c);return`
        `+lk(p)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Fa(["b","row","col"],[1,2])+`);
        }
      `}var f=l[0],h=l[1],d=Math.ceil(o[2]/2),m=d*Math.ceil(o[1]/2),v=an();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+h+", "+m+", "+d+`, b, row, col);
      return `+v.texture2D+"("+a+`, uv);
    }
  `}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],p=c[0],f=c[1],h=Math.ceil(o[a-1]/2),d=h*Math.ceil(o[a-2]/2),m="int b, int row, int col",v="b * "+d+" + (row / 2) * "+h+" + (col / 2)",g=2;g<a-1;g++)m="int b"+g+", "+m,d*=o[a-g-1],v="b"+g+" * "+d+" + "+v;var y=an();return`
    vec4 `+u+"("+m+`) {
      int index = `+v+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+p+`);
      return `+y.texture2D+"("+s+`, uv);
    }
  `}(t)}}var b3=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,w3=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,C3=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,S3=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function No(t){return"offset"+t}function Da(t){var n=t.name,e=fe(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function tt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function za(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function Fa(t,n){return n.map(function(e){return t[e]}).join(", ")}var k3=function(){return function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,D(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=tt(l),p=An("coords",l);if(o===1){var f=tt(s=l+1);a=`
        `+f+" sourceLocR = "+f+"("+p.join()+`, 0);
        ++`+p[l-1]+`;
        `+f+" sourceLocG = "+f+"("+p.join()+`, 0);
        ++`+p[l-2]+`;
        `+f+" sourceLocA = "+f+"("+p.join()+`, 0);
        --`+p[l-1]+`;
        `+f+" sourceLocB = "+f+"("+p.join()+`, 0);
        --`+p[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+p[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+p[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+p[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+p[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),d="."+h[s-1],m=h.map(function(k){return"int "+k}),v=An("sourceLocR",s-1).concat("inIdx.r"),g=An("sourceLocG",s-1).concat("inIdx.g"),y=An("sourceLocB",s-1).concat("inIdx.b"),x=An("sourceLocA",s-1).concat("inIdx.a"),b=e==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+x.join()+")));",S=`vec4(
            getAChannel(`+v.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+x.join()+") : 0.)",C=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+C+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+p[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+p[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+d+", sourceLocG"+d+`,
          sourceLocB`+d+", sourceLocA"+d+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}(),E3=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,p=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}(),N3=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=c-1-t.padInfo.front,d=p-1-t.padInfo.top,m=f-1-t.padInfo.left,v=1/(n*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+d+", "+m+`);
      const float avgMultiplier = float(`+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),I3=function(){return function(t,n,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],ze(t,n),ze(t,e);var a="0.0";r!=null&&(ze(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(ze(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}(),A3=function(){return function(t,n,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ze(t,n),ze(t,e);var a="vec4(0.0)";r!=null&&(ze(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(ze(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `}}(),R3="return areal * breal - aimag * bimag;",T3="return areal * bimag + aimag * breal;",Ux=function(){return function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ze(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}(),fd="return a + b;",hd="return a - b;",jx="return a * b;",ck="return (a < 0.) ? b * a : a;",dt=function(){return function(t,n,e){this.variableNames=["A","B"],this.outputShape=ze(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}(),pk=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,ri=function(){return function(t,n,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ze(n,e);var i=this.outputShape.length,o="";if(r)if(i===0||fe(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+tt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=An("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `}}(),D3=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),O3=function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),_3=function(){return function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}(),z3=function(){return function(t){this.outputShape=[],this.outputShape=aa(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var i=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=n.length,a=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `}}(),F3=function(){return function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=aa(t,n);var e=this.outputShape,r=e.length,i=tt(r),o=An("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(v,g){return"T"+g});var s=new Array(t.length-1);s[0]=t[0][n];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][n];var l=a[n],c=a.slice(-2),p=a.join(),f="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];f+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+bc(a,l,h)+`),
            vec2(`+bc(c,l,h)+`));
        }`}var d=s.length,m=s[s.length-1];f+=`
        return getChannel(
          getT`+d+"("+bc(a,l,m)+`),
          vec2(`+bc(c,l,m)+"));",this.userCode=`
      float getValue(`+a.map(function(v){return"int "+v})+`) {
        `+f+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `}}();function bc(t,n,e){var r=t.indexOf(n);return t.map(function(i,o){return o===r?i+" - "+e:i}).join()}var M3=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),L3=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,s=e-1-t.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),P3=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),B3=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=n-1-t.padInfo.front,u=e-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),V3=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),W3=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,a=e-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Hx=function(){return function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),h=t.inChannels%4,d=t.dataFormat==="channelsLast",m=d?1:2,v=d?2:3,g=d?3:1,y="",x="";e&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,x="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+v+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+d+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+d+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+d+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+d+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+x+`
        setOutput(result);
      }
    `}}(),$3=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(d===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(d===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(d===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Gx=function(){return function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,p=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,d=t.outChannels/t.inChannels,m="",v="";e&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,v="result = activation(result);");var g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+d+`;
        int q = d2 - d1 * `+d+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+v+`
        setOutput(result);
      }
    `}}(),qx=function(){return function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,p=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,d=h,m="int xR; int xC; int xCOffset;",v=0;v<f;v++)for(var g=0;g<h;g++)m+=`
          vec4 xTexelR`+v+"C"+2*g+` = vec4(0.);
          vec4 wR`+v+"C"+g+` = vec4(0.);
          vec4 xR`+v+"C"+g+" = vec4(0.);";for(v=0;v<f;v++)for(var y=0;y<d;y++){if(m+=`
          xR = xRCorner + `+v*c+`;
          xC = xCCorner + `+(g=2*y)*p+`;
        `,l===1){if(g<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+v+"C"+g+" = vec4(previous.zw, xTexelR"+v+"C"+g+`.xy);
                } else {
                  xR`+v+"C"+g+" = vec4(0, 0, xTexelR"+v+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                xR`+v+"C"+g+" = xTexelR"+v+"C"+g+`;
              `,g+1<h)){var x=s%2==0?Lv(p):p;p%2==0&&s%2==1||p%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+x+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+v+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+v+"C"+g+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+v+"C"+(g+1)+` = vec4(
                    xTexelR`+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+x+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+v+"C"+(g+1)+" = xTexelR"+v+"C"+(g+2)+`;
                `}}else g<h&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+v+"C"+(g+2)+` = vec4(0.);
                }

                xR`+v+"C"+g+` = vec4(
                  xTexelR`+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+`.zw);
              `,g+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+v+"C"+(g+1)+" = vec4(xTexelR"+v+"C"+(g+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+v+"C"+(g+2)+` = vec4(0.);
                }

                xR`+v+"C"+g+` = vec4(
                  xTexelR`+v+"C"+g+".xy, xTexelR"+v+"C"+(g+2)+`.xy);
              `,g+1<h&&(m+=`
                  xR`+v+"C"+(g+1)+` = vec4(
                    xTexelR`+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+`.zw);
                `)),m+="}");g<h&&(m+=`
            vec4 wTexelR`+v+"C"+g+" = getW("+v+", "+g+`, d1, q);
            wR`+v+"C"+g+" = vec4(wTexelR"+v+"C"+g+".xz, wTexelR"+v+"C"+g+`.xz);
          `,g+1<h&&(m+=`
              vec4 wTexelR`+v+"C"+(g+1)+" = getW("+v+", "+(g+1)+`, d1, q);
              wR`+v+"C"+(g+1)+` =
                vec4(wTexelR`+v+"C"+(g+1)+".xz, wTexelR"+v+"C"+(g+1)+".xz);"))}for(v=0;v<f;v++)for(g=0;g<h;g++)m+="dotProd += xR"+v+"C"+g+" * wR"+v+"C"+g+";";var b="",w="";e&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,w="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+S+`
        `+w+`
        setOutput(result);
      }
    `}}(),U3=function(){return function(t,n,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],a=t[1],s=t[2],u=t[3],l=n[0],c=e[0],p=e[1];this.outputShape=[l,c,p,u];var f=r==="bilinear"?1:0,h=[a-1+".0",s-1+".0"],d=h[0],m=h[1],v=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+d+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+d],g=v[0],y=v[1],x=v[2],b=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=b[0],S=b[1],C=b[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+y+`;
        float width_scale = `+S+`;

        float in_y = `+x+`;
        if( in_y < 0.0 || in_y > `+d+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+C+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}(),j3=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+tt(r)+` coords = getOutputCoords();
        int end = `+Kx(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+Kx(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `}}();function Kx(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var H3=function(){return function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=cl.DENSE;var n=Mu(t),e=an();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Wo(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `}}(),G3=function(){return function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=cl.DENSE;var n=Mu(t),e=an();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Wo(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `}}(),q3=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),K3=function(){return function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}(),X3=function(){return function(t){this.variableNames=["A"],this.outTexUsage=jn.DOWNLOAD;var n=an();this.outputShape=t,this.userCode=`
      `+uk+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `}}(),Y3=function(){return function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=jn.DOWNLOAD;var n=an();this.outputShape=t,this.userCode=`
      `+uk+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `}}(),Q3=function(){return function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=an(),i=n[0],o=n[1];this.outputShape=t;var a="result";e&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+fy(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `}}(),Z3=function(){return function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=an(),i=n[0],o=n[1];this.outputShape=t;var a="",s="result";e&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+fy(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `}}(),J3="return real * expR - imag * expI;",ez="return real * expI + imag * expR;",Xx=function(){return function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}(),tz=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),nz=function(){return function(t){this.variableNames=["A"];var n=an(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}(),rz=function(){return function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=an(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `}}(),iz=function(){return function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var i=tt(this.rank),o=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],p=0;p<a.length;p++)p===s?c.push("int(getIndices("+l[p]+"))"):c.push(""+l[p]);return c.join()}(t,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `}}(),oz=function(){return function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=tt(n.length),i=tt(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}();function fk(t,n){var e=an();return dS(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function hk(t,n){return yS(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function dk(t,n){return xS(t,n,new Uint16Array([0,1,2,2,1,3]))}function Ol(t,n,e,r,i,o,a){wS(e,r);var s=bS(t,n),u=t.TEXTURE_2D;return ae(t,n,function(){return t.bindTexture(u,s)}),ae(t,n,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ae(t,n,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ae(t,n,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ae(t,n,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ae(t,n,function(){return t.texImage2D(u,0,i,e,r,0,o,a,null)}),ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function mk(t,n,e,r,i){var o=If(e,r);return Ol(t,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function gk(t,n,e,r,i){var o=If(e,r);return Ol(t,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function vk(t,n,e,r,i){var o=If(e,r);return Ol(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function yk(t,n,e,r,i){var o=Al(e,r);return Ol(t,n,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function xk(t,n,e,r,i){var o=Al(e,r);return Ol(t,n,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function bk(t,n,e,r){return ae(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Qm(t,n,e,"clipSpacePos",r,3,20,0)&&Qm(t,n,e,"uv",r,2,20,12)}function wk(t,n,e,r,i,o,a){var s,u,l;ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=a.internalFormatPackedFloat),s.set(o),ae(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Ck(t,n,e,r){ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),r.data instanceof Uint8Array?ae(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ae(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ae(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Sk(t,n,e,r,i){var o=t.createBuffer();ae(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var a=16*e*r;return ae(t,n,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)}),ae(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)}),ae(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function kk(t,n,e){var r=t,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Ek(t,n,e,r,i){var o=If(e,r),a=o[0],s=o[1],u=new Uint8Array(e*r*4);return ae(t,n,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Nk(t,n,e,r,i,o,a,s){var u=t,l=new Float32Array(function(c,p){var f=Al(c,p);return f[0]*f[1]*4}(o,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,n),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function Ik(t,n,e,r){var i=new Float32Array(e*r*4);return ae(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,i)}),i}var az=Object.freeze({createVertexShader:fk,createVertexBuffer:hk,createIndexBuffer:dk,createFloat32MatrixTexture:mk,createFloat16MatrixTexture:gk,createUnsignedBytesMatrixTexture:vk,createPackedMatrixTexture:yk,createFloat16PackedMatrixTexture:xk,bindVertexProgramAttributeStreams:bk,uploadDenseMatrixToTexture:wk,uploadPixelDataToTexture:Ck,createBufferFromOutputTexture:Sk,downloadFloat32MatrixFromBuffer:kk,downloadByteEncodedFloatMatrixFromOutputTexture:Ek,downloadPackedMatrixFromBuffer:Nk,downloadMatrixFromPackedOutputTexture:Ik}),Ak=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=G().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,cS(e,n)):this.gl=Zr(e),G().getNumber("WEBGL_VERSION")===1)this.textureFloatExtension=Yc(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=Yc(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float");else if(Cr(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float");else{if(!Cr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=hk(this.gl,this.debug),this.indexBuffer=dk(this.gl,this.debug),this.framebuffer=CS(this.gl,this.debug),this.textureConfig=Uv(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return G().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ae(e,this.debug,function(){return e.finish()}),ae(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ae(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),ae(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ae(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ae(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),mk(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),gk(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),vk(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),Ck(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,i){this.throwIfDisposed(),wk(this.gl,this.debug,n,e,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),xk(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),yk(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(Zm(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ae(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return Ek(i.gl,i.debug,e,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,i,o,a){return Nk(this.gl,n,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return kk(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var i=Sk(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,i=this;if(G().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=a}else G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return Ik(i.gl,i.debug,e,r)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=mS(e,this.debug,n),i=fk(e,this.debug),o=gS(e,this.debug);return ae(e,this.debug,function(){return e.attachShader(o,i)}),ae(e,this.debug,function(){return e.attachShader(o,r)}),vS(e,this.debug,o),this.debug&&Jc(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=bk(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&ae(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&Jc(this.gl,this.debug,this.program),ae(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?kS(this.gl,this.debug,n,e):ES(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),ae(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),NS(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var i=Al(e,r),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(n,o,a)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Jc(this.gl,this.debug,this.program),bu(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),ae(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),ae(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Yc(this.gl,this.debug,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return ce(this,void 0,void 0,function(){var e=this;return pe(this,function(r){switch(r.label){case 0:return[4,jm(function(){return e.disposed||e.isQueryAvailable(n,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=function(r){for(var i=0;i<r.length;++i){var o=r[i]();if(!o)break}return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||jm(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),ep(this.gl,this.debug,n,this.framebuffer),this.debug&&bu(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(ep(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&bu(this.gl)):Zm(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var i=this.gl;ep(i,this.debug,n,this.framebuffer),this.debug&&bu(i),this.outputTexture=n,ae(i,this.debug,function(){return i.viewport(0,0,e,r)}),ae(i,this.debug,function(){return i.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,i){var o=this;this.throwIfDisposed(),ae(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function Yx(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var i=e.logicalShape,o=n[r],a=o.shape;if(!Ht(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!Ht(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var sz=function(){return function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=e.filterWidth,i=e.inChannels,o=e.strideWidth,a=e.strideHeight,s=e.padInfo,u=e.outWidth,l=e.dilationWidth,c=e.dilationHeight,p=e.dataFormat,f=s.left,h=s.top,d=i*r,m=an(),v=p==="channelsLast",g=v?0:1,y=v?1:2,x="",b=0;b<=1;b++)for(var w=0;w<=1;w++)x+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+d+`);

            if(d0 < `+n[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+f+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+d+".) / "+i+`.));

              if(d1 < `+n[y]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+v+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+x+`

        `+m.output+` = result;
      }
    `}}(),uz=function(){return function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=n,s=t[3]-1;this.outputShape=t;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `}}(),lz=function(){return function(t,n,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}(),cz=function(){return function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=n,s=t[3]-1;this.outputShape=t;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `}}(),pz=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}(),fz=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,p=u-1-t.padInfo.top,f=l-1-t.padInfo.left,h=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+p+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),dd=function(){return function(t,n,e,r,i,o,a){e===void 0&&(e=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=e?t[1]:t[2],u=Math.ceil(s/2),l=e?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",p=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",d="";o&&(h=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,d="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+f[0]+`);
          result += (`+p[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+d+`

        setOutput(result);
      }
    `}}(),hz=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),dz=function(){return function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `}}(),mz=function(){return function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=An("rc",n),r=tt(n),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",p=s-2;p<s;p++)c+=l[p]+" >= "+u[p],p<s-1&&(c+="||");return c}(n,t,e),o=function(s,u,l,c){if(s===1)return"";var p=c.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(n,t[t.length-1],t[t.length-2],e),a=function(s,u){var l=s.length,c=function(p,f){for(var h=[],d=0;d<=1;d++)for(var m=0;m<=1;m++){for(var v=(d===0?"r":"rp1")+", "+(m===0?"c":"cp1"),g=2;g<p;g++)v=f[f.length-1-g]+","+v;h.push(v)}return h}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}}}(),gz=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=tt(r),o=n.map(function(u){return u[0]}).join(","),a=n.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}}(),vz=function(){return function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(v,g){return v[0]+t[g]+v[1]});for(var r=t.length,i=tt(r),o=n.map(function(v){return v[0]}).join(","),a=n.map(function(v,g){return v[0]+t[g]}).join(","),s=An("rc",r),u=An("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",p=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",d=0,m=r===1?2:4;d<m;d++)h+=`
        `+p[d]+`
        if (`+f+`) {
          result[`+d+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+d+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `}}(),md=function(){return function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var f=n==="avg",h="0.0";if(f||(h="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+c+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var d=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(d="avgValue / count");var m=4*Math.floor(r/4),v=r%4,g=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+c+", "+p+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(v===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(v===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(v===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+d+`);
      }
    `}}}(),gd=function(){return function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.front,d=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var v=n==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+a+`);
        const ivec3 pads = ivec3(`+h+", "+d+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),b=r%4,w=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+h+", "+d+", "+m+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+y+`);
        }
      }
    `}}}(),yz=function(){return function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var a="0.0",s="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",s="min"):n==="max"&&(a="-1.0 / 1e-20",s="max");var u=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");var l=4*Math.floor(e/4),c=e%4,p=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";n==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";i%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(c===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(c===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+u+`);
      }
    `}}(),xz=function(){return function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Wo(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+fy(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `}}(),bz=function(){return function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[e&&s>1?i-1:i,e&&u>1?o-1:o],c=[e&&s>1?s-1:s,e&&u>1?u-1:u],p=l[0]/c[0],f=l[1]/c[1],h=1/p,d=1/f,m=2*Math.ceil(h)+2,v=2*Math.ceil(d)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+d+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+v+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),wz=function(){return function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var u=[r&&n>1?o-1:o,r&&e>1?a-1:a],l=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}(),Cz=function(){return function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var u=[r&&n>1?o-1:o,r&&e>1?a-1:a],l=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}(),Sz=function(){return function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[e&&s>1?i-1:i,e&&u>1?o-1:o],c=[e&&s>1?s-1:s,e&&u>1?u-1:u],p=l[0]/c[0],f=l[1]/c[1],h=1/p,d=1/f,m=2*Math.ceil(h)+2,v=2*Math.ceil(d)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+d+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+v+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),kz=function(){return function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var u=[r&&n>1?o-1:o,r&&e>1?a-1:a],l=[r&&n>1?n-1:n,r&&e>1?e-1:e],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}(),Ez=function(){return function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map(function(o,a){return function(s){return n.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=tt(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `}}(),Nz=function(){return function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=An("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],a=tt(e);function s(u){var l=t.map(function(c,p){return function(f,h){return n.indexOf(f)!==-1&&t[f]!==1?t[f]+" - "+h[f]+" - 1":""+h[f]}(p,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[e-1]="("+u[e-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(u){return u[e-2]="("+u[e-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[e-1]="("+u[e-1]+" + 1)",u[e-2]="("+u[e-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `}}(),Qx=function(){return function(t,n,e,r,i,o,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=tt(i.length),u=tt(o.length),l="";e===1?l="i":e===2&&(l="i, j");var c="getIndices("+l+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var f="getUpdates("+p+")",h=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}(),Iz=function(){return function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/e);this.outputShape=[r,a];var s=4*Math.floor(e/4),u=e%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%e>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var p="";i%e>0&&(p=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `}}(),Az=function(){return function(t,n,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<n.length;u++)s.push(""+o[u]),u<t&&a.push(""+o[u]);r=a.join(),i=s.join()}var l=tt(e);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `}}(),Rz=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=tt(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return vd.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(a,s){return"sourceLoc."+vd[s]+" = start["+s+"] + coords."+vd[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),vd=["x","y","z","w","u","v"],Tz=function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=tt(this.rank),r=An("coords",this.rank),i=An("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(c,p){return"start["+p+"]"}).join()+");":n.map(function(c,p){return i[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),Dz=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=tt(e.length),o=tt(e.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=e.map(function(u,l){return s++,e.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `}}(),Oz=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var i,o=Zx(e,r),a=Jx(n,o,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===$n.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===$n.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===$n.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===$n.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===$n.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[a].push(i),i},t.prototype.releaseTexture=function(n,e,r,i){if(this.freeTextures!=null){var o=Jx(e,Zx(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Zx(t,n){if(t===jn.UPLOAD)return $n.PACKED_2X2_FLOAT32;if(t===jn.RENDER||t==null)return function(e){return G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?$n.PACKED_2X2_FLOAT32:$n.UNPACKED_FLOAT32:e?$n.PACKED_2X2_FLOAT16:$n.UNPACKED_FLOAT16}(n);if(t===jn.DOWNLOAD||t===jn.PIXELS)return $n.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Jx(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var _z=function(){return function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var i=tt(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `}}(),zz=function(){return function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var i=tt(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `}}(),Fz=function(){return function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=tt(this.rank),o=sk("rc",this.rank),a=new Array(this.rank);for(r=0;r<n.length;r++)a[n[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+e[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `}}(),hy=1.7580993408473768,dy=1.0507009873554805,Ie=function(){return function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),Mr="if (isnan(x)) return x;",Mz="return x;",eb="return abs(x);",Rk=Mr+`
  return (x < 0.0) ? 0.0 : x;
`,Tk=Mr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Dk="return (x >= 0.0) ? x : (exp(x) - 1.0);",Lz=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+hy+`;
  float scale = `+dy+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,tb="return -x;",nb="return ceil(x);",rb="return floor(x);",ib="return exp(x);",ob="return exp(x) - 1.0;",Pz=Mr+`
  return sin(x);
`,Bz=Mr+`
  return cos(x);
`,Vz=Mr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Wz=Mr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,$z=Mr+`
  return atan(x);
`,Uz=Mr+"return log(x + sqrt(x * x + 1.0));",jz=Mr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Hz=Mr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,wc="return x;",Gz="return x;",Ok=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_k=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zk=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cu=function(){return function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),qz=function(){return function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=An("rc",n),r=tt(n),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(n,e),o=e.slice(-2),a=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `}}(),Cc={};function Sc(t,n){if(n===void 0&&(n=!1),t==="linear")return n?Gz:Mz;if(t==="relu")return n?Ok:Rk;if(t==="elu")return n?zk:Dk;if(t==="relu6")return n?_k:Tk;if(t==="prelu")return n?pk:ck;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Kz=600,Fk=function(t){function n(e){var r,i=t.call(this)||this;if(i.gpgpu=e,i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!G().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=Zr(G().getNumber("WEBGL_VERSION"));i.binaryCache=((r=G().getNumber("WEBGL_VERSION"))in Cc||(Cc[r]={}),Cc[r]),i.gpgpu=new Ak(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new Oz(i.gpgpu),i.numMBBeforeWarning=G().global.screen==null?1024:G().global.screen.height*G().global.screen.width*window.devicePixelRatio*Kz/1024/1024,i.texData=new oy(i,z),i}return _r(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.fromPixels=function(e,r){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var i=typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement,o=e.data instanceof Uint8Array,a=typeof ImageData<"u"&&e instanceof ImageData,s=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,l=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],p=l[1],f=[p,c],h=[p,c,r];if(!(i||o||a||s||u))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);(u||s)&&(this.fromPixels2DContext==null&&(this.fromPixels2DContext=pS(G().getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=c,this.fromPixels2DContext.canvas.height=p,this.fromPixels2DContext.drawImage(e,0,0,c,p),e=this.fromPixels2DContext.canvas);var d,m,v=this.makeTensorInfo(f,"int32");return this.texData.get(v.dataId).usage=jn.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(v.dataId),e),G().getBool("WEBGL_PACK")?(d=new rz(h),m=this.compileAndRun(d,[v])):(d=new nz(h),m=this.compileAndRun(d,[v])),this.disposeData(v.dataId),m},n.prototype.write=function(e,r,i){if(G().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:jn.UPLOAD}),o},n.prototype.move=function(e,r,i,o){if(G().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:jn.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new cu(u,wc):new Ie(u,wc);var p=this.runWebGLProgram(c,[{dataId:e,shape:u,dtype:o}],o),f=this.readSync(p.dataId);return this.disposeData(p.dataId),f}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var h,d,m=this.activeTimers!=null;return m&&(h=wr()),o==="complex64"?d=ig(a.real.dataSync(),a.imag.dataSync()):d=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=wr()-h),this.convertAndCacheOnCPU(e,d)},n.prototype.read=function(e){return ce(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p,f,h,d,m,v,g,y,x,b,w,S,C,k;return pe(this,function(E){switch(E.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(N){return r.push(N)})];if(i=this.texData.get(e),o=i.values,a=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return p=void 0,p=c?new cu(a,wc):new Ie(a,wc),f=this.runWebGLProgram(p,[{dataId:e,shape:a,dtype:u}],u),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&G().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,u!=="complex64"&&G().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),v=this.texData.get(m.dataId),d=(k=this.gpgpu).createBufferFromTexture.apply(k,[v.texture].concat(Mu(a)))),this.pendingRead.set(e,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:E.sent(),E.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return y=E.sent(),x=y[0],b=y[1],g=ig(x,b),[3,5];case 4:d==null?g=this.getValuesFromTexture(e):(w=fe(a),g=this.gpgpu.downloadFloat32MatrixFromBuffer(d,w)),E.label=5;case 5:return m!=null&&this.disposeData(m.dataId),S=this.convertAndCacheOnCPU(e,g),C=this.pendingRead.get(e),this.pendingRead.delete(e),C.forEach(function(N){return N(S)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,S]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var i=e[r];if(!fS(i))throw G().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.isPacked,u=fe(o);if(G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),c=this.texData.get(l.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Mu(o))).subarray(0,u);return this.disposeData(l.dataId),p}var f=G().getBool("WEBGL_PACK")&&s===!0,h=f?tp(o):o,d=f?new Y3(h):new X3(h),m=this.runWebGLProgram(d,[{shape:h,dtype:a,dataId:e}],"float32"),v=this.texData.get(m.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),g},n.prototype.time=function(e){return ce(this,void 0,void 0,function(){var r,i,o,a,s,u,l;return pe(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),a=Ei(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),s=Ei(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),[4,Promise.all(a)];case 1:return u=c.sent(),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:YC(u),getExtraProfileInfo:function(){return u.map(function(p,f){return{name:s[f],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:wr(),endMs:null}},n.prototype.endTimer=function(e){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=wr(),e)},n.prototype.getQueryTime=function(e){return ce(this,void 0,void 0,function(){var r;return pe(this,function(i){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||e,p=this.dataRefCount.get(c);p>1?this.dataRefCount.set(c,p-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,u)));var f=this.texData.get(e);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return G().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=z.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:z.keep(e.clone()),imag:z.keep(r.clone())},i},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(fe(i)===0)return xt([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,a=ry(e.shape,r,i);if(o||!a){var s=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Tz(i):new Rz(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},n.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),a=this.makeOutput(i,e.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=e.dtype;var u=iy(r,e.strides);o.slice&&(u+=o.slice.flatOffset),s.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},n.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var a=Mf(r,i,o);if(a.some(function(u){return u===0}))return xt([],a);var s=new Dz(r,o,a);return this.compileAndRun(s,[e])},n.prototype.reverse=function(e,r){var i=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nz(e.shape,r):new Ez(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var i=e.map(function(h){return In(h)}),o=e.map(function(h){return lr(h)});return _t(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),s=this.concat(e.slice(0,a),r),u=this.concat(e.slice(a),r);return this.concat([s,u],r)}if(G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var l=new F3(e.map(function(h){return h.shape}),r);return this.compileAndRun(l,e)}var c=aa(e.map(function(h){return h.shape}),r),p=e.map(function(h){return h.as2D(-1,fe(h.shape.slice(r)))}),f=new z3(p.map(function(h){return h.shape}));return this.compileAndRun(f,p).reshape(c)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,tb,e.dtype);var r=new Ie(e.shape,tb);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,i,o){var a=i?e.shape[2]:e.shape[1],s=o?r.shape[1]:r.shape[2],u=i?e.shape[1]:e.shape[2],l=e.shape[0];if((a===1||s===1)&&u>1e3){i&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var c=s===1?e:e.as3D(l,u,1),p=s===1?2:1,f=s===1?r.as3D(l,1,u):r;return this.multiply(c,f).sum(p,!0)}var h=kt(e.dtype,r.dtype),d=new dd(e.shape,[l,a,s],i,o);return this.compileAndRun(d,[e,r],h)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,u=e.activation,l=e.preluActivationWeights,c=o?r.shape[2]:r.shape[1],p=a?i.shape[1]:i.shape[2],f=r.shape[0],h=kt(r.dtype,i.dtype),d=s!=null,m=l!=null,v=u?Sc(u,!0):null,g=new dd(r.shape,[f,c,p],o,a,d,v,m),y=[r,i];return s&&y.push(s),l&&y.push(l),this.compileAndRun(g,y,h)},n.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),a=new Ux(R3,e.shape,r.shape),s=new Ux(T3,e.shape,r.shape),u=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),p=this.complex(l,c);return l.dispose(),c.dispose(),p}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,jx,e.dtype);var f=new dt(jx,e.shape,r.shape);return this.compileAndRun(f,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,i,o,a,s){var u=[e,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),G().getBool("WEBGL_PACK_NORMALIZATION")){var p=new A3(e.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(p,u)}var f=new I3(e.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(f,u)},n.prototype.localResponseNormalization4D=function(e,r,i,o,a){var s=G().getBool("WEBGL_PACK_NORMALIZATION")?new cz(e.shape,r,i,o,a):new uz(e.shape,r,i,o,a);return this.compileAndRun(s,[e])},n.prototype.LRNGrad=function(e,r,i,o,a,s,u){var l=new lz(r.shape,o,a,s,u);return this.compileAndRun(l,[r,i,e])},n.prototype.tile=function(e,r){if(e.dtype==="string"){var i=this.readSync(e.dataId).map(function(a){return ul(a)});return ok(Se(e.shape,e.dtype,i),r)}var o=new _z(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,i){var o=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vz(e.shape,r,i):new gz(e.shape,r,i);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var i=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fz(e.shape,r):new zz(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new iz(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,i){D(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,f){return p*f}),a=Pp(e.shape,r,o),s=Bp(a.length,r.length),u=Vp(e.shape,r,o),l=YS(i,r.length),c=QS(u,i,r.length);return e.reshape(a).transpose(s).reshape(u).slice(l,c)},n.prototype.spaceToBatchND=function(e,r,i){D(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,h){return f*h}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<e.shape.length;++s)a.push([0,0]);var u=e.pad(a),l=Pp(u.shape,r,o,!1),c=Bp(l.length,r.length,!1),p=Vp(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(p)},n.prototype.reduce=function(e,r,i){var o=e.shape[0],a=e.shape[1],s=pd(a),u=new yz({windowSize:s,inSize:a,batchSize:o},r),l=this.compileAndRun(u,[e],i);return l.shape[1]===1?l:this.reduce(l,r,i)},n.prototype.argReduce=function(e,r,i){i===void 0&&(i=null);var o=e.shape[0],a=e.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=pd(a),u=new y3({windowSize:s,inSize:a,batchSize:o},r,i==null),l=[e];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(e,r,c)},n.prototype.argReducePacked=function(e,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,a=pd(o[o.length-1]),s=new k3(o,a,r,i==null),u=i==null?[e]:[e,i],l=this.compileAndRun(s,u,"int32");return l.rank===e.rank?this.argReducePacked(e,r,l):l},n.prototype.sum=function(e,r){En("sum",r,e.rank);var i=Yt(e.shape,r),o=i[0],a=fe(i[1]),s=e.as2D(-1,a),u=ud(e.dtype);return this.reduce(s,"sum",u).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=Yt(e.shape,r),o=i[0],a=fe(i[1]),s=e.as2D(-1,a),u=ud(e.dtype);return this.reduce(s,"prod",u).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,i){var o=0,a=zr([o],e.rank),s=e;a!=null&&(s=e.transpose(a),o=Fr(1,e.rank)[0]);var u=function(h,d,m){for(var v=[],g=h.length,y=0;y<g;y++)y!==d?v.push(h[y]):v.push(m);return v}(s.shape,o,i),l=fe([s.shape[o]]),c=s.as2D(-1,l),p=ud(e.dtype),f=this.segOpCompute(c,"unsortedSegmentSum",r,p,i).reshape(u);return a!=null&&(f=f.transpose(Rf(a))),f},n.prototype.segOpCompute=function(e,r,i,o,a){var s=e.shape[0],u=e.shape[1],l=function(f,h){var d,m=!1;for(f<=JS?(d=f,m=!0):d=Mp(f,Math.floor(Math.sqrt(f)));!m;)d>h||d===f?m=!0:d=Mp(f,d+1);return d}(u,a),c=new Iz({windowSize:l,inSize:u,batchSize:s,numSegments:a},r),p=this.compileAndRun(c,[e,i],o);return p.shape[1]===a?p:(i=Tf(0,a).tile([u/l]),this.segOpCompute(p,r,i,o,a))},n.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(En("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!G().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=Yt(e.shape,o),s=a[0],u=fe(a[1]),l=e.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(e,i)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var a=new j3(e.shape,i,o);return this.compileAndRun(a,[e])},n.prototype.equal=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var i=new dt("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new dt("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new dt("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new dt("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new dt("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new dt("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new Ie(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new dt("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new dt("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.select=function(e,r,i){var o=new Az(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],kt(r.dtype,i.dtype))},n.prototype.where=function(e){tg("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return py(e.shape,r)},n.prototype.topk=function(e,r,i){return ak(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){En("min",r,e.rank);var i=Yt(e.shape,r),o=i[0],a=fe(i[1]),s=e.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new dt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.mod=function(e,r){var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new dt(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);En("max",r,e.rank);var i=Yt(e.shape,r),o=i[0],a=fe(i[1]),s=e.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new dt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.all=function(e,r){En("all",r,e.rank);var i=Yt(e.shape,r),o=i[0],a=fe(i[1]),s=e.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},n.prototype.any=function(e,r){En("any",r,e.rank);var i=Yt(e.shape,r),o=i[0],a=fe(i[1]),s=e.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},n.prototype.squaredDifference=function(e,r){var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri("return (a - b) * (a - b);",e.shape,r.shape):new dt("return (a - b) * (a - b);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.realDivide=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new dt(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"float32")},n.prototype.floorDiv=function(e,r){if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new dt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},n.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,fd);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=kt(e.dtype,r.dtype);if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,fd,i);var o=new dt(fd,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.packedUnaryOp=function(e,r,i){var o=new cu(e.shape,r);return this.compileAndRun(o,[e],i)},n.prototype.packedBinaryOp=function(e,r,i,o,a){a===void 0&&(a=!1);var s=new ri(i,e.shape,r.shape,a);return this.compileAndRun(s,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,a=this.texData.get(e.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(f){var h=f[0],d=f[1],m=o.makeComplexComponentTensorInfo(e,h),v=o.makeComplexComponentTensorInfo(r,d),g=new dt(i,e.shape,r.shape);return o.compileAndRun(g,[m,v],kt(h.dtype,d.dtype))}),l=u[0],c=u[1],p=this.complex(l,c);return l.dispose(),c.dispose(),p},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>G().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var a=e.map(function(l){return l.dtype}).reduce(function(l,c){return kt(l,c)}),s=e.map(function(l){return l.shape}),u=G().getBool("WEBGL_PACK")?new v3(e[0].shape,s):new g3(e[0].shape,s);return this.compileAndRun(u,e,a)},n.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,hd);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=kt(e.dtype,r.dtype);if(G().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,hd,e.dtype);var o=new dt(hd,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.pow=function(e,r){var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new dt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=kt(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nb,e.dtype);var r=new Ie(e.shape,nb);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rb,e.dtype);var r=new Ie(e.shape,rb);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new Ie(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new Ie(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new Ie(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new Ie(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new Ie(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ib,e.dtype);var r=new Ie(e.shape,ib);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ob,e.dtype);var r=new Ie(e.shape,ob);return this.compileAndRun(r,[e])},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new Ie(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new Ie(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new Ie(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new Ie(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new Ie(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=G().getBool("WEBGL_PACK")?new cu(e.shape,Ok):new Ie(e.shape,Rk),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=G().getBool("WEBGL_PACK")?new cu(e.shape,_k):new Ie(e.shape,Tk),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(pk,e.shape,r.shape):new dt(ck,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.elu=function(e){if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,zk,e.dtype);var r=new Ie(e.shape,Dk);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new dt("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.selu=function(e){var r=new Ie(e.shape,Lz);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new Ie(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,i){var o,a=(o=G().getBool("WEBGL_PACK_CLIP")?new O3(e.shape):new D3(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,a)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,eb,e.dtype);var r=new Ie(e.shape,eb);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new _3(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},n.prototype.sigmoid=function(e){var r=new Ie(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new Ie(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new Ie(e.shape,Pz);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new Ie(e.shape,Bz);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new Ie(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new Ie(e.shape,Vz);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new Ie(e.shape,Wz);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new Ie(e.shape,$z);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var i=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ri(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new dt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.sinh=function(e){var r=new Ie(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new Ie(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new Ie(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new Ie(e.shape,Uz);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new Ie(e.shape,jz);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new Ie(e.shape,Hz);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new Ie(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var i=new Ie(e.shape,function(o){return o===void 0&&(o=0),Mr+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[e])},n.prototype.conv2dByMatMul=function(e,r,i,o,a,s){var u=e.shape,l=this.texData.get(e.dataId),c=i.inChannels,p=u[0]*u[1]*u[2],f=i.outChannels,h=i.dataFormat==="channelsLast",d=(p===1||f===1)&&c>1e3,m=u[2]%2!=0&&!!l.isPacked;if(d||!G().getBool("WEBGL_LAZILY_UNPACK")||!G().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var v=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],g=this.reshape(e,[1,v,i.inChannels]),y=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:y,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var x=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),b={dataId:e.dataId,shape:[1,x,i.inChannels],dtype:e.dtype},w=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,D(wu(l.shape,b.shape),function(){return"packed reshape "+l.shape+" to "+b.shape+" isn't free"});var S=this.reshape(r,[1,i.inChannels,i.outChannels]),C=this.fusedBatchMatMul({a:b,b:S,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),k=this.texData.get(C.dataId);return D(k.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=w,k.shape=i.outShape,z.makeTensorFromDataId(C.dataId,i.outShape,C.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,i,o,a,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,p=i.outWidth,f=i.outHeight,h=i.dataFormat==="channelsLast",d=u*l*c,m=f*p,v=[d,m],g=e.squeeze([0]),y=r.reshape([1,d,-1]),x=new sz(v,g.shape,i),b=this.compileAndRun(x,[g]).reshape([1,v[0],v[1]]),w=o!=null,S=s!=null,C=a?Sc(a,!0):null,k=new dd(b.shape,[1,m,i.outChannels],!0,!1,w,C,S),E=[b,y];o&&E.push(o),S&&E.push(s);var N=this.compileAndRun(k,E);return h?N.reshape([1,f,p,i.outChannels]):N.reshape([1,i.outChannels,f,p])},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,u=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,a,s,u);if(G().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,a,s,u);var l=a!=null,c=u!=null,p=s?Sc(s,!1):null,f=new Hx(o,l,p,c),h=[r,i];return a&&h.push(a),u&&h.push(u),this.compileAndRun(f,h)},n.prototype.conv2d=function(e,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,i);if(G().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,i);var o=new Hx(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,i){var o=new L3(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,i){var o=new M3(i);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,a=e.convInfo,s=e.bias,u=e.activation,l=e.preluActivationWeights,c=G().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,p=u?Sc(u,c):null,f=[i,o],h=s!=null,d=l!=null;return h&&f.push(s),d&&f.push(l),c?(r=new qx(a,h,p,d),this.compileAndRun(r,f)):(r=new Gx(a,h,p,d),this.compileAndRun(r,f))},n.prototype.depthwiseConv2D=function(e,r,i){var o;return G().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new qx(i),this.compileAndRun(o,[e,r])):(o=new Gx(i),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new W3(i);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new V3(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,i){var o=new $3(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,i){var o=new B3(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,i){var o=new P3(i);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var i=new md(r,"max",!1);return this.compileAndRun(i,[e])},n.prototype.avgPool=function(e,r){var i=new md(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,i,o){var a=new md(o,"max",!0),s=this.compileAndRun(a,[r]),u=new pz(o),l=this.compileAndRun(u,[e,s],r.dtype);return s.dispose(),l},n.prototype.avgPoolBackprop=function(e,r,i){var o=new E3(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return uy(e,r,this)},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==r&&(o[a++]=e.shape[s]);var u=new Array(e.rank).fill(0),l=e.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(e,u,l).reshape(o);return c},n.prototype.avgPool3d=function(e,r){var i=new gd(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,i){var o=new N3(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var i=new gd(r,"max",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,i,o){var a=new gd(o,"max",!0),s=this.compileAndRun(a,[r]),u=new fz(o),l=this.compileAndRun(u,[e,s],r.dtype);return s.dispose(),l},n.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!wu(e.shape,r)&&(i.texture===null||!wu(i.shape,r))){var o=this.packedReshape(e,r);return z.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Up(e,r)},n.prototype.resizeBilinear=function(e,r,i,o){var a=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Cz(e.shape,r,i,o):new wz(e.shape,r,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeBilinearBackprop=function(e,r,i){var o=new bz(e,r,i);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,i,o){var a=new kz(e.shape,r,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new Sz(e,r,i);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,i,o){var a=r?e:ya(e),s=a.shape[0],u=a.shape[1],l=new hz(s,u,i),c=l.getCustomSetupFunc(o);return this.compileAndRun(l,[a],"int32",c)},n.prototype.oneHot=function(e,r,i,o){var a=new dz(e.size,r,i,o);return this.compileAndRun(a,[e])},n.prototype.diag=function(e){var r=new K3(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,i,o,a){return tg("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),cy(e.dataSync(),r.dataSync(),i,o,a)},n.prototype.cropAndResize=function(e,r,i,o,a,s){var u=new U3(e.shape,r.shape,o,a,s);return this.compileAndRun(u,[e,r,i])},n.prototype.depthToSpace=function(e,r,i){D(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],a=i==="NHWC"?e.shape[1]:e.shape[2],s=i==="NHWC"?e.shape[2]:e.shape[3],u=i==="NHWC"?e.shape[3]:e.shape[1],l=a*r,c=s*r,p=u/(r*r),f=new q3(i==="NHWC"?[o,l,c,p]:[o,p,l,c],r,i);return this.compileAndRun(f,[e])},n.prototype.split=function(e,r,i){return ik(e,r,i)},n.prototype.scatterND=function(e,r,i){var o=Wp(0,e,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,p=[c/u,u],f=e.reshape([s,a]),h=r.reshape([s,u]);if(c===0)return Up(xt([]),i);var d=se(0),m=new Qx(s,a,f.rank,h.rank,l,p);return this.compileAndRun(m,[h,f,d]).reshape(i)},n.prototype.sparseToDense=function(e,r,i,o){var a=Wp(0,e,i),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,p=new Qx(u,s,e.rank,r.rank,l,[c,1],!1);return this.compileAndRun(p,[r,e,o]).reshape(i)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new Xx(J3,e.shape,r),a=new Xx(ez,e.shape,r),s=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],u=this.compileAndRun(o,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(e.shape[0],e.shape[1]);return u.dispose(),l.dispose(),c},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],a=ZS(e,r),s=a[0],u=a[1],l=a[2],c=a[3],p=r.reshape([u,o]),f=e.reshape([e.size/l,l]),h=new oz(o,c,[u,l]);return this.compileAndRun(h,[f,p]).reshape(s)},n.prototype.fill=function(e,r,i){if((i=i||Vs(r))==="string"){var o=sl(i,fe(e));return o.fill(r),z.makeTensor(o,e,i,this)}var a=new tz(e,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],i,s)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,r,i){return ly(e,r,i)},n.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return z.makeTensorFromDataId(i,e,r,this)},n.prototype.unpackTensor=function(e){var r=new qz(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new mz(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var i=[pl(e.shape)].concat(fl(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},a=[pl(r)].concat(fl(r)),s=new xz(a,i),u=this.runWebGLProgram(s,[o],e.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},n.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,a=i.shape,s=i.dtype,u=tp(a);return r=o?new G3(u):new H3(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:e}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,i,o,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(e.outputShape,i),l=this.texData.get(u.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===cl.DENSE){var c=Mu(e.outputShape);l.texShape=c.map(function(x){return 2*x})}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),fe(u.shape)===0)return l.values=al(u.dtype,0),u;var p=[],f=r.map(function(x){if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(x.dataId);if(b.texture==null){if(!e.packedInputs&&fe(x.shape)<=G().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=x.shape)}else if(!!b.isPacked!=!!e.packedInputs)x=b.isPacked?s.unpackTensor(x):s.packTensor(x),p.push(x),b=s.texData.get(x.dataId);else if(b.isPacked&&!wu(b.shape,x.shape)){var w=x,S=x.shape;x.shape=b.shape,x=s.packedReshape(x,S),p.push(x),b=s.texData.get(x.dataId),w.shape=S}return s.uploadToGPU(x.dataId),{shape:x.shape,texData:b,isUniform:!1}});this.uploadToGPU(u.dataId);var h,d={shape:u.shape,texData:l,isUniform:!1},m=function(x,b,w){var S="";b.concat(w).forEach(function(E){var N=E.texData!=null&&E.texData.slice!=null&&E.texData.slice.flatOffset>0,T=E.isUniform?"uniform":E.texData.texShape;S+=E.shape+"_"+T+"_"+N});var C=x.userCode,k=x.constructor.name;return k+="_"+S+"_"+C}(e,f,d),v=this.getAndSaveBinary(m,function(){return function(x,b,w,S){var C=b.userCode,k=w.map(function(O,V){var $={logicalShape:O.shape,texShape:O.isUniform?null:O.texData.texShape,isUniform:O.isUniform,isPacked:!O.isUniform&&O.texData.isPacked,flatOffset:null};return O.texData!=null&&O.texData.slice!=null&&O.texData.slice.flatOffset>0&&($.flatOffset=O.texData.slice.flatOffset),{name:b.variableNames[V],shapeInfo:$}}),E=k.map(function(O){return O.shapeInfo}),N={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},T=x3(k,N,C,b.packedInputs),A=x.createProgram(T),_=null,M=x.getUniformLocation(A,"NAN",!1);G().getNumber("WEBGL_VERSION")===1&&(_=x.getUniformLocation(A,"INFINITY",!1));for(var W={},L=0;L<b.variableNames.length;L++){var U=b.variableNames[L];W[U]=x.getUniformLocation(A,U,!1),W["offset"+U]=x.getUniformLocation(A,"offset"+U,!1)}return{program:b,source:T,webGLProgram:A,uniformLocations:W,inShapeInfos:E,outShapeInfo:N,infLoc:_,nanLoc:M}}(s.gpgpu,e,f,d)}),g=this.activeTimers!=null;if(g&&(h=this.startTimer()),function(x,b,w,S,C){Yx(b.inShapeInfos,w),Yx([b.outShapeInfo],[S]);var k=S.texData.texture,E=S.texData.texShape;S.texData.isPacked?x.setOutputPackedMatrixTexture(k,E[0],E[1]):x.setOutputMatrixTexture(k,E[0],E[1]),x.setProgram(b.webGLProgram),G().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&x.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&x.gl.uniform1f(b.nanLoc,NaN),w.forEach(function(N,T){var A=b.program.variableNames[T],_=b.uniformLocations[A],M=b.uniformLocations["offset"+A];if(_!=null)if(N.isUniform)if(fe(N.shape)<2)x.gl.uniform1f(_,N.uniformValues[0]);else{var W=N.uniformValues;W instanceof Float32Array||(W=new Float32Array(W)),x.gl.uniform1fv(_,W)}else N.texData.slice!=null&&M!=null&&x.gl.uniform1i(M,N.texData.slice.flatOffset),x.setInputMatrixTexture(N.texData.texture,_,T)}),C!=null&&C(x,b.webGLProgram),x.executeProgram()}(this.gpgpu,v,f,d,o),p.forEach(function(x){return s.disposeData(x.dataId)}),g&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)})),!G().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var y=this.unpackTensor(u);return this.disposeData(u.dataId),y}return u},n.prototype.compileAndRun=function(e,r,i,o,a){a===void 0&&(a=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(e,r,i,o,a);return z.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=j(function(){if(!G().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=G().getBool("DEBUG");G().set("DEBUG",!1);var i=e.abs(se(1e-8)).dataSync()[0];if(G().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var p,f=this.activeTimers!=null;f&&(p=wr());var h=i.texShape;if(h==null&&(h=RS(o,c),i.texShape=h),s!=null){var d=tp(o),m=void 0,v=h[1],g=h[0],y=s instanceof Uint8Array;c?(v=(r=Al(h[0],h[1]))[0],g=r[1],m=new Z3(d,[g,v],y)):m=new Q3(d,[g,v],y);var x=this.makeTensorInfo([g,v],a);this.texData.get(x.dataId).usage=y?jn.PIXELS:jn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),v,g,s);var b=this.runWebGLProgram(m,[x],a,null,!0),w=this.texData.get(b.dataId);i.texture=w.texture,i.texShape=w.texShape,i.isPacked=w.isPacked,i.usage=w.usage,this.disposeData(x.dataId),this.texData.delete(b.dataId),i.values=null,f&&(this.uploadWaitMs+=wr()-p)}else{var S=this.acquireTexture(h,l,a,c);i.texture=S}}},n.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),r!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,o)),i.values},n.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*Pv(r)},n}(ay);lS()&&z.registerBackend("webgl",function(){return new Fk},2);var my=F({square_:function(t){var n=R(t,"x","square"),e=[n];return z.runKernelFunc(function(r,i){return i([n]),r.square(n)},{x:n},function(r,i){var o=i[0];return{x:function(){return r.mul(o.toFloat().mul(2))}}},"Square",{},e,[])}}),fo=F({abs_:function(t){var n=R(t,"x","abs");return n.dtype==="complex64"?z.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):z.runKernelFunc(function(e,r){var i=e.abs(n);return r([n]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),gy=F({acos_:function(t){var n=R(t,"x","acos");return z.runKernelFunc(function(e,r){var i=e.acos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(se(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),vy=F({acosh_:function(t){var n=R(t,"x","acosh");return z.runKernelFunc(function(e,r){var i=e.acosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),yy=F({asin_:function(t){var n=R(t,"x","asin");return z.runKernelFunc(function(e,r){var i=e.asin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(se(1).sub(i.toFloat().square()).sqrt())}}})}}),xy=F({asinh_:function(t){var n=R(t,"x","asinh");return z.runKernelFunc(function(e,r){var i=e.asinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(se(1).add(i.toFloat().square()).sqrt())}}})}}),by=F({atan_:function(t){var n=R(t,"x","atan");return z.runKernelFunc(function(e,r){var i=e.atan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),wy=F({atanh_:function(t){var n=R(t,"x","atanh");return z.runKernelFunc(function(e,r){var i=e.atanh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(se(1).sub(i.toFloat().square()))}}})}}),Cy=F({ceil_:function(t){var n=R(t,"x","ceil");return z.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),yn=F({clipByValue_:function(t,n,e){var r=R(t,"x","clipByValue");return D(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."}),z.runKernelFunc(function(i,o){var a=i.clip(r,n,e);return o([r]),a},{$x:r},function(i,o){var a=o[0];return{$x:function(){return i.where(a.greaterEqual(n).logicalAnd(a.lessEqual(e)),Fe(i))}}})}}),Sy=F({cos_:function(t){var n=R(t,"x","cos");return z.runKernelFunc(function(e,r){var i=e.cos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sin().neg().mul(e)}}})}}),ky=F({cosh_:function(t){var n=R(t,"x","cosh");return z.runKernelFunc(function(e,r){var i=e.cosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),Ey=F({erf_:function(t){var n=R(t,"x","erf");return D(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),z.runKernelFunc(function(e,r){var i=e.erf(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Ny=F({exp_:function(t){var n=R(t,"x","exp");return z.runKernelFunc(function(e,r){var i=e.exp(n);return r([i]),i},{$x:n},function(e,r){return{$x:function(){return e.mulStrict(r[0])}}})}}),Iy=F({expm1_:function(t){var n=R(t,"x","expm1");return z.runKernelFunc(function(e,r){var i=e.expm1(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}}),Vf=F({floor_:function(t){var n=R(t,"x","floor");return z.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),Ni=F({log_:function(t){var n=R(t,"x","log");return z.runKernelFunc(function(e,r){var i=e.log(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat())}}})}}),Ay=F({log1p_:function(t){var n=R(t,"x","log1p");return z.runKernelFunc(function(e,r){var i=e.log1p(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}}),Mk=F({logSigmoid_:function(t){var n=R(t,"x","logSigmoid");return z.runKernelFunc(function(e,r){var i=e.softplus(n.neg()).neg();return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),xa=F({neg_:function(t){var n=R(t,"x","neg");return z.runKernelFunc(function(e){return e.neg(n)},{$x:n},function(e){return{$x:function(){return e.neg()}}})}}),Ry=F({reciprocal_:function(t){var n=R(t,"x","reciprocal");return z.runKernelFunc(function(e,r){var i=e.reciprocal(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}}),Ty=F({round_:function(t){var n=R(t,"x","round");return z.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),Wf=F({rsqrt_:function(t){var n=R(t,"x","rsqrt");return z.runKernelFunc(function(e,r){var i=e.rsqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.pow(1.5).mul(2)).neg()}}})}}),$f=F({sigmoid_:function(t){var n=R(t,"x","sigmoid");return z.runKernelFunc(function(e,r){var i=e.sigmoid(n);return r([i]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(se(1).sub(i)))}}},"Sigmoid")}}),Dy=F({sign_:function(t){var n=R(t,"x","sign");return z.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),Lk=F({isNaN_:function(t){var n=R(t,"x","isNaN");return z.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),Pk=F({isInf_:function(t){var n=R(t,"x","isInf");return z.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),Bk=F({isFinite_:function(t){var n=R(t,"x","isFinite");return z.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return Fe(e)}}})}}),Oy=F({sin_:function(t){var n=R(t,"x","sin");return z.runKernelFunc(function(e,r){var i=e.sin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cos().mul(e)}}})}}),_y=F({sinh_:function(t){var n=R(t,"x","sinh");return z.runKernelFunc(function(e,r){var i=e.sinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),_l=F({softplus_:function(t){var n=R(t,"x","softplus");return z.runKernelFunc(function(e,r){var i=e.softplus(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),zl=F({sqrt_:function(t){var n=R(t,"x","sqrt");return z.runKernelFunc(function(e,r){var i=e.sqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),Vk=F({step_:function(t,n){n===void 0&&(n=0);var e=R(t,"x","step");return z.runKernelFunc(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return Fe(r)}}})}}),zy=F({tan_:function(t){var n=R(t,"x","tan");return z.runKernelFunc(function(e,r){var i=e.tan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}}),Uf=F({tanh_:function(t){var n=R(t,"x","tanh");return z.runKernelFunc(function(e,r){var i=e.tanh(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return se(1).sub(i.square()).mulStrict(e)}}})}});function Wk(t,n,e,r,i,o){var a,s,u=R(t,"x","batchNorm"),l=R(n,"mean","batchNorm"),c=R(e,"variance","batchNorm");return i!=null&&(a=R(i,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),D(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),D(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),D(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&D(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&D(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Fl(u,l,c,s,a,o)}function $k(t,n,e,r,i,o){var a,s,u=R(t,"x","batchNorm"),l=R(n,"mean","batchNorm"),c=R(e,"variance","batchNorm");return i!=null&&(a=R(i,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),D(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),D(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),D(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&D(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&D(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Fl(u,l,c,s,a,o)}function Uk(t,n,e,r,i,o){var a,s,u=R(t,"x","batchNorm"),l=R(n,"mean","batchNorm"),c=R(e,"variance","batchNorm");return i!=null&&(a=R(i,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),D(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),D(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),D(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&D(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&D(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Fl(u,l,c,s,a,o)}function Fl(t,n,e,r,i,o){o==null&&(o=.001);var a,s,u,l=R(t,"x","batchNorm"),c=R(n,"mean","batchNorm"),p=R(e,"variance","batchNorm");i!=null&&(a=R(i,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),D(c.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),D(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),D(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var f=[l,c,p,a];return z.runKernelFunc(function(h,d){var m=h.batchNormalization(u,kc(c),kc(p),o,kc(a),kc(s));return d([l,c,p,a]),m},{x:l,mean:c,variance:p,scale:a,offset:s},function(h,d){var m=d,v=m[0],g=m[1],y=m[2],x=m[3],b=x??se(1),w=Rt(g.shape,u.shape),S=[];if(g.rank===1){for(var C=0;C<u.shape.length-1;++C)S.push(u.shape[C]);S.push(1)}var k=v.sub(g),E=h.mul(b),N=Wf(y.add(se(o))),T=N.mul(N).mul(N).mul(se(-.5));return{x:function(){return g.rank===1?h.mul(oo(N.as4D(1,1,1,g.shape[0]),S)).mul(b).reshape(v.shape):h.mul(N).mul(b).reshape(v.shape)},mean:function(){var A=N.mul(se(-1)).mul(E);return g.rank===1&&(A=A.sum(w)),A.reshape(g.shape)},variance:function(){var A=T.mul(k).mul(E);return g.rank===1&&(A=A.sum(w)),A.reshape(g.shape)},scale:function(){var A=k.mul(N),_=h.mul(A);return g.rank===1&&(_=_.sum(w)),_.reshape(g.shape)},offset:function(){var A=h;return g.rank===1&&(A=A.sum(w)),A.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:o},f).reshape(l.shape)}function kc(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function jf(){Af("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var jk=F({batchNormalization2d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),jf(),Wk(t,n,e,o,i,r)}}),Hk=F({batchNormalization3d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),jf(),$k(t,n,e,o,i,r)}}),Gk=F({batchNormalization4d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),jf(),Uk(t,n,e,o,i,r)}}),qk=F({batchNormalization_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),jf(),Fl(t,n,e,o,i,r)}}),Fy=F({batchNorm_:Fl}),My=F({batchNorm2d_:Wk}),Ly=F({batchNorm3d_:$k}),Py=F({batchNorm4d_:Uk}),Ti=F({logicalAnd_:function(t,n){var e=R(t,"a","logicalAnd","bool"),r=R(n,"b","logicalAnd","bool");return ze(e.shape,r.shape),z.runKernelFunc(function(i){return i.logicalAnd(e,r)},{$a:e,$b:r})}}),By=F({logicalNot_:function(t){var n=R(t,"x","logicalNot","bool");return z.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),Hf=F({logicalOr_:function(t,n){var e=R(t,"a","logicalOr","bool"),r=R(n,"b","logicalOr","bool");return ze(e.shape,r.shape),z.runKernelFunc(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}}),Kk=F({logicalXor_:function(t,n){var e=R(t,"a","logicalXor","bool"),r=R(n,"b","logicalXor","bool");return ze(e.shape,r.shape),Hf(t,n).logicalAnd(Ti(t,n).logicalNot())}}),Ii=F({where_:function(t,n,e){var r=R(n,"a","where"),i=R(e,"b","where"),o=R(t,"condition","where","bool");return Pe(r.shape,i.shape,"Error in where: "),o.rank===1?D(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Pe(o.shape,i.shape,"Error in where: "),z.runKernelFunc(function(a,s){var u=a.select(o,r,i);return s([o]),u},{$condition:o,$a:r,$b:i},function(a,s){var u=s[0];return{$condition:function(){return Fe(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),Gf=function(t){return ce(this,void 0,void 0,function(){var n,e,r;return pe(this,function(i){switch(i.label){case 0:return[4,(n=R(t,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=py(n.shape,e),t!==n&&n.dispose(),[2,r]}})})},Oe=F({add_:function(t,n){var e,r=R(t,"a","add"),i=R(n,"b","add");e=vt(r,i),r=e[0],i=e[1];var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a){return a.add(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Rt(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Rt(i.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),Vy=F({addN_:function(t){D(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),D(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(i,o){return R(i,"tensors"+o,"addN")}),e=n[0];n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!Ht(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return z.runKernelFunc(function(i){return i.addN(n)},r,function(i){var o={};return n.forEach(function(a,s){o[s]=function(){return i.clone()}}),o})}}),Xk=F({addStrict_:function(t,n){var e=R(t,"a","addStrict"),r=R(n,"b","addStrict");return Pe(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),Wy=F({atan2_:function(t,n){var e,r=R(t,"a","atan2"),i=R(n,"b","atan2");e=vt(r,i),r=e[0],i=e[1];var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a,s){var u=a.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Oe(u.square(),l.square()),p=a.mul(l.div(c)),f=Rt(u.shape,o);return f.length>0&&(p=p.sum(f)),p.reshape(u.shape)},$b:function(){var c=Oe(u.square(),l.square()),p=xa(a.mul(u.div(c))),f=Rt(l.shape,o);return f.length>0&&(p=p.sum(f)),p.reshape(l.shape)}}})}}),ln=F({div_:function(t,n){var e,r=R(t,"a","div"),i=R(n,"b","div");if(e=vt(r,i),r=e[0],i=e[1],r.dtype==="int32"&&i.dtype==="int32")return qf(r,i);var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a,s){var u=a.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),p=Rt(u.shape,o);return p.length>0?c.sum(p).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),p=Rt(l.shape,o);p.length>0&&(c=c.sum(p).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}},"Div")}}),Yk=F({divStrict_:function(t,n){var e=R(t,"a","div"),r=R(n,"b","div");return Pe(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),qf=F({floorDiv_:function(t,n){var e,r=R(t,"a","floorDiv"),i=R(n,"b","floorDiv");e=vt(r,i),r=e[0],i=e[1];var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a,s){var u=a.floorDiv(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=a.div(l.toFloat()),p=Rt(u.shape,o);return p.length>0?c.sum(p).reshape(u.shape):c},$b:function(){var c=a.mul(u.toFloat()),p=Rt(l.shape,o);p.length>0&&(c=c.sum(p).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}})}}),ei=F({maximum_:function(t,n){var e,r=R(t,"a","maximum"),i=R(n,"b","maximum");return e=vt(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),ze(r.shape,i.shape),z.runKernelFunc(function(o,a){var s=o.maximum(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1];return{$a:function(){return o.mul(s.greaterEqual(u).toFloat())},$b:function(){return o.mul(s.less(u).toFloat())}}})}}),Qk=F({maximumStrict_:function(t,n){var e=R(t,"a","maximumStrict"),r=R(n,"b","maximumStrict");return Pe(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),js=F({minimum_:function(t,n){var e,r=R(t,"a","minimum"),i=R(n,"b","minimum");return e=vt(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),ze(r.shape,i.shape),z.runKernelFunc(function(o,a){var s=o.minimum(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1];return{$a:function(){return o.mul(s.lessEqual(u).toFloat())},$b:function(){return o.mul(s.greater(u).toFloat())}}})}}),Zk=F({minimumStrict_:function(t,n){var e=R(t,"a","minimumStrict"),r=R(n,"b","minimumStrict");return Pe(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),$y=F({mod_:function(t,n){var e,r=R(t,"a","mod"),i=R(n,"b","mod");e=vt(r,i),r=e[0],i=e[1];var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a,s){var u=a.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Rt(u.shape,o);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),p=Rt(l.shape,o);return p.length>0?c.sum(p).reshape(l.shape):c}}})}}),Jk=F({modStrict_:function(t,n){var e=R(t,"a","modStrict"),r=R(n,"b","modStrict");return Pe(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),we=F({mul_:function(t,n){var e,r=R(t,"a","mul"),i=R(n,"b","mul");e=vt(r,i),r=e[0],i=e[1];var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a,s){var u=a.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),p=Rt(u.shape,o);return p.length>0?c.sum(p).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),p=Rt(l.shape,o);return p.length>0?c.sum(p).reshape(l.shape):c}}},"Mul")}}),Kf=F({mulStrict_:function(t,n){var e=R(t,"a","mul"),r=R(n,"b","mul");return Pe(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),Ss=F({pow_:function(t,n){var e=R(t,"base","pow"),r=R(n,"exp","pow"),i=ze(e.shape,r.shape);return t=e.cast(kt(e.dtype,r.dtype)),n=r.cast(kt(e.dtype,r.dtype)),z.runKernelFunc(function(o,a){var s=o.pow(e,r);return a([e,r,s]),s},{$base:e,$exp:r},function(o,a){var s=a[0],u=a[1],l=a[2];return{$base:function(){var c=u.toFloat(),p=o.mul(c.mul(s.pow(c.sub(se(1))))),f=Rt(s.shape,i);return f.length>0&&(p=p.sum(f)),p.reshape(s.shape)},$exp:function(){var c=s.greater(0),p=s.log().where(c,Fe(s)),f=o.mul(l.mul(p)),h=Rt(u.shape,i);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)}}})}}),eE=F({powStrict_:function(t,n){return Pe(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),Uy=F({squaredDifference_:function(t,n){var e,r=R(t,"a","squaredDifference"),i=R(n,"b","squaredDifference");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o,a){var s=o.squaredDifference(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1],l=se(2);return{$a:function(){return o.mul(s.sub(u).mul(l))},$b:function(){return o.mul(u.sub(s).mul(l))}}})}}),tE=F({squaredDifferenceStrict_:function(t,n){var e=R(t,"a","squaredDifferenceStrict"),r=R(n,"b","squaredDifferenceStrict");return Pe(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),Gt=F({sub_:function(t,n){var e,r=R(t,"a","sub"),i=R(n,"b","sub");e=vt(r,i),r=e[0],i=e[1];var o=ze(r.shape,i.shape);return z.runKernelFunc(function(a){return a.subtract(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Rt(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Rt(i.shape,o);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),nE=F({subStrict_:function(t,n){var e=R(t,"a","subStrict"),r=R(n,"b","subStrict");return Pe(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),ba=F({equal_:function(t,n){var e,r=R(t,"a","equal"),i=R(n,"b","equal");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),rE=F({equalStrict_:function(t,n){var e=R(t,"a","equalStrict"),r=R(n,"b","equalStrict");return Pe(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),Hs=F({greater_:function(t,n){var e,r=R(t,"a","greater"),i=R(n,"b","greater");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o){return o.greater(r,i)},{$a:r,$b:i})}}),Ml=F({greaterEqual_:function(t,n){var e,r=R(t,"a","greaterEqual"),i=R(n,"b","greaterEqual");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o,a){var s=o.greaterEqual(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1];return{$a:function(){return Fe(s)},$b:function(){return Fe(u)}}})}}),iE=F({greaterEqualStrict_:function(t,n){var e=R(t,"a","greaterEqualStrict"),r=R(n,"b","greaterEqualStrict");return Pe(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),oE=F({greaterStrict_:function(t,n){var e=R(t,"a","greaterStrict"),r=R(n,"b","greaterStrict");return Pe(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),jy=F({less_:function(t,n){var e,r=R(t,"a","less"),i=R(n,"b","less");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o){return o.less(r,i)},{$a:r,$b:i})}}),Hy=F({lessEqual_:function(t,n){var e,r=R(t,"a","lessEqual"),i=R(n,"b","lessEqual");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o){return o.lessEqual(r,i)},{$a:r,$b:i})}}),aE=F({lessEqualStrict_:function(t,n){var e=R(t,"a","lessEqualStrict"),r=R(n,"b","lessEqualStrict");return Pe(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),sE=F({lessStrict_:function(t,n){var e=R(t,"a","lessStrict"),r=R(n,"b","lessStrict");return Pe(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),ks=F({notEqual_:function(t,n){var e,r=R(t,"a","notEqual"),i=R(n,"b","notEqual");return e=vt(r,i),r=e[0],i=e[1],ze(r.shape,i.shape),z.runKernelFunc(function(o){return o.notEqual(r,i)},{$a:r,$b:i})}}),uE=F({notEqualStrict_:function(t,n){var e=R(t,"a","notEqualStrict"),r=R(n,"b","notEqualStrict");return Pe(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function ab(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function sb(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var Gs=F({gather_:function(t,n,e){e===void 0&&(e=0);var r=R(t,"x","gather"),i=R(n,"indices","gather","int32");e=qt(e,r.shape)[0];var o=function(a,s,u){for(var l=a.shape[u],c=[],p=1,f=1,h=0;h<u;h++)c.push(a.shape[h]),p*=a.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=u+1;h<a.rank;h++)c.push(a.shape[h]),f*=a.shape[h];return{batchSize:p,sliceSize:f,dimSize:l,outputShape:c}}(r,i,e);return z.runKernelFunc(function(a,s){var u=a.gather(r,i.flatten(),e);return s([i]),u},{$x:r},function(a,s){var u=s[0];return{$x:function(){var l=r.shape,c=u.size,p=l.slice(0,e),f=p.length,h=l.slice(e,l.length).slice(1),d=h.length,m=ab(0,f),v=ab(f+1,f+1+d),g=sb([p,[c],h]),y=a.reshape(g),x=u.reshape([c]),b=sb([[f],m,v]),w=y.transpose(b),S=Gy(w,x,r.shape[e]),C=Rf(b);return S=S.transpose(C)}}}).reshape(o.outputShape)}}),Gy=F({unsortedSegmentSum_:function(t,n,e){var r=R(t,"x","unsortedSegmentSum"),i=R(n,"segmentIds","unsortedSegmentSum","int32");return D(ft(e),function(){return"numSegments must be of dtype int"}),z.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(r,i,e);return a([i]),s},{$x:r},function(o,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=ei(l,Fe(l)),p=Gs(u,c),f=Ml(l,se(0,"int32")),h=p.rank-f.rank,d=0;d<h;++d)f=Un(f,d+1);f=Ti(f,Jr(p.shape,"bool"));var m=Fe(p);return Ii(f,p,m)}(o,s)}}})}}),lE=function(t,n,e){return ce(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p,f,h,d,m;return pe(this,function(v){switch(v.label){case 0:for(r=R(t,"tensor","boolMask"),i=R(n,"mask","boolMask","bool"),o=e??0,a=i.rank,s=r.shape,D(a>0,function(){return"mask cannot be scalar"}),Pe(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+a;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+a)),p=r.reshape(c),f=i.reshape([-1]),[4,Gf(f)];case 1:return h=v.sent(),d=h.squeeze([1]),m=Gs(p,d,o),t!==r&&r.dispose(),n!==i&&i.dispose(),d.dispose(),p.dispose(),f.dispose(),h.dispose(),[2,m]}})})};function cE(t,n,e,r,i,o,a){o===void 0&&(o="NHWC"),D(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var s=t,u=n,l=!1;n.rank===3&&(l=!0,u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,t[0],t[1],t[2]]),D(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),D(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),D(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var c=o==="NHWC"?s[3]:s[1],p=o==="NHWC"?u.shape[3]:u.shape[1];D(c===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[2]+"."}),D(p===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+e.shape[3]+"."}),a!=null&&D(ft(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var f=Bf(o),h=So(s,e.shape,r,1,i,a,!1,f),d=z.runKernelFunc(function(m,v){var g=m.conv2dDerInput(u,e,h);return v([e,u]),g},{dy4D:u,filter:e},function(m,v){var g=v[0],y=v[1];return{dy4D:function(){return wa(m,g,r,i,o,1,a)},filter:function(){return qy(m,y,g.shape,r,i,o,a)}}});return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function yd(t){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function pE(t,n,e,r,i){D(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,a=n,s=!1;n.rank===4&&(s=!0,a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],l=a.shape[4];D(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),D(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),D(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),D(u===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[3]+"."}),D(l===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+e.shape[4]+"."});var c=ml(o,e.shape,r,1,i),p=z.runKernelFunc(function(f){return f.conv3dDerInput(a,e,c)},{dy5D:a});return s?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var Xf=F({conv1d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=R(t,"x","conv1d"),u=R(n,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),D(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),D(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&D(ft(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),D(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),D(vn(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),D(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=wa(f,p,[1,e],r,"NHWC",[1,o],a);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),wa=F({conv2d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=R(t,"x","conv2d"),u=R(n,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),D(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&D(ft(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var p=i==="NHWC"?l.shape[3]:l.shape[1];D(p===u.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+u.shape[2]+"."}),D(vn(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var f=Bf(i),h=So(l.shape,u.shape,e,o,r,a,!1,f),d=z.runKernelFunc(function(m,v){var g=m.conv2d(l,u,h);return v([u,l]),g},{x:l,$filter:u},function(m,v){var g=v,y=g[0],x=g[1];return D(ua(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return fE(x.shape,m,y,e,r,i)},$filter:function(){return qy(x,m,y.shape,e,r,i)}}});return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Yf=F({conv3d_:function(t,n,e,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=R(t,"x","conv3d"),s=R(n,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),D(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),D(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),D(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),D(function(f,h){return yd(f)||yd(h)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),D(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=ml(u.shape,s.shape,e,o,r),p=z.runKernelFunc(function(f,h){var d=f.conv3d(u,s,c);return h([u,s]),d},{x:u,$filter:s},function(f,h){D(yd(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var d=h[0],m=h[1];return{x:function(){return pE(d.shape,f,m,e,r)},$filter:function(){return function(v,g,y,x,b){var w=v;v.rank===4&&(w=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]));var S=g;S.rank===4&&(S=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),D(w.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."}),D(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),D(y.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+y+"."}),D(w.shape[4]===y[3],function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+y[3]+"."}),D(S.shape[4]===y[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+y[4]+")."});var C=ml(w.shape,y,x,1,b);return z.runKernelFunc(function(k){return k.conv3dDerFilter(w,S,C)},{x5D:w,dy5D:S})}(d,f,m.shape,e,r)}}});return l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),qy=F({conv2dDerFilter_:function(t,n,e,r,i,o,a){o===void 0&&(o="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=n;u.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),D(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),D(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),D(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var l=o==="NHWC"?s.shape[3]:s.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];D(l===e[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+e[2]+"."}),D(c===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+e[3]+")."}),a!=null&&D(ft(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var p=Bf(o),f=So(s.shape,e,r,1,i,a,!1,p);return z.runKernelFunc(function(h){return h.conv2dDerFilter(s,u,f)},{x4D:s,dy4D:u})}}),fE=F({conv2dDerInput_:cE}),qs=F({depthwiseConv2d_:function(t,n,e,r,i,o,a){o===void 0&&(o=[1,1]);var s=R(t,"x","depthwiseConv2d"),u=R(n,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),D(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),D(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),o==null&&(o=[1,1]),D(vn(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),a!=null&&D(ft(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var p=So(l.shape,u.shape,e,o,r,a,!0),f=z.runKernelFunc(function(h,d){var m=h.depthwiseConv2D(l,u,p);return d([l,u]),m},{x:l,$filter:u},function(h,d){D(ua(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var m=d[0],v=d[1];return{x:function(){return hE(m.shape,h,v,p)},$filter:function(){return dE(m,h,v.shape,p)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),hE=F({depthwiseConv2dDerInput_:function(t,n,e,r){var i=n,o=!1;n.rank===3&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=z.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),dE=F({depthwiseConv2dDerFilter_:function(t,n,e,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),z.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),Ky=F({separableConv2d_:function(t,n,e,r,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=R(t,"x","separableConv2d"),u=R(n,"depthwiseFilter","separableConv2d"),l=R(e,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(s.rank===3&&(p=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),D(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),D(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),D(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),D(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var f=u.shape[2],h=u.shape[3];D(l.shape[2]===f*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."});var d=qs(c,u,r,i,a,o),m=wa(d,l,1,"valid",a);return p?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Qf=F({conv2dTranspose_:function(t,n,e,r,i,o){return cE(e,R(t,"x","conv2dTranspose"),R(n,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),mE=F({conv3dTranspose_:function(t,n,e,r,i){return pE(e,R(t,"x","conv3dTranspose"),R(n,"filter","conv3dTranspose"),r,i)}}),Zf=F({matMul_:function(t,n,e,r){var i;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=R(t,"a","matMul"),a=R(n,"b","matMul");i=vt(o,a),o=i[0],a=i[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=e?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],p=o.shape.slice(0,-2),f=a.shape.slice(0,-2),h=fe(p),d=fe(f);D(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),D(Ht(p,f),function(){return"Error in matMul: outer dimensions ("+p+") and ("+f+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),D(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var m=o.shape.slice(0,-2).concat([l,c]),v=e?o.as3D(h,s,l):o.as3D(h,l,s),g=r?a.as3D(d,c,u):a.as3D(d,u,c),y={transposeA:e,transposeB:r};return z.runKernelFunc(function(x,b){var w=x.batchMatMul(v,g,e,r);return b([v,g]),w},{a:v,b:g},function(x,b){var w=b,S=w[0],C=w[1];return e||r?!e&&r?{a:function(){return x.matMul(C,!1,!1)},b:function(){return x.matMul(S,!0,!1)}}:e&&!r?{a:function(){return C.matMul(x,!1,!0)},b:function(){return S.matMul(x,!1,!1)}}:{a:function(){return C.matMul(x,!0,!0)},b:function(){return x.matMul(S,!0,!0)}}:{a:function(){return x.matMul(C,!1,!0)},b:function(){return S.matMul(x,!0,!1)}}},"BatchMatMul",y).reshape(m)}}),gE=F({dot_:function(t,n){var e=R(t,"t1","dot"),r=R(n,"t2","dot");D(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return D(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),vE=F({outerProduct_:function(t,n){var e=R(t,"v1","outerProduct"),r=R(n,"v2","outerProduct");return D(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),Yr=F({reverse_:function(t,n){var e=R(t,"x","reverse");if(e.rank===0)return e.clone();var r=qt(n,e.shape);return z.runKernelFunc(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}}),yE=F({reverse1d_:function(t){var n=R(t,"x","reverse");return D(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),Yr(n,0)}}),xE=F({reverse2d_:function(t,n){var e=R(t,"x","reverse");return D(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Yr(e,n)}}),bE=F({reverse3d_:function(t,n){var e=R(t,"x","reverse");return D(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Yr(e,n)}}),wE=F({reverse4d_:function(t,n){var e=R(t,"x","reverse");return D(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Yr(e,n)}});function CE(t,n,e,r,i,o){var a=R(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),D(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),D(vn(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&D(ft(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Cs(s.shape,n,e,r,i,o),c=z.runKernelFunc(function(p,f){var h=p.maxPool(s,l);return f([s,h]),h},{x:s},function(p,f){var h=f[0],d=f[1];return{x:function(){return function(m,v,g,y,x,b,w,S){var C=R(m,"dy","maxPoolBackprop"),k=R(v,"input","maxPoolBackprop"),E=R(g,"output","maxPoolBackprop");D(k.rank===C.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+C.rank+")"}),b==null&&(b=[1,1]),D(vn(x,b),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+b+"'"}),D(C.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),D(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."}),S!=null&&D(ft(w),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+S+" but got pad "+w+"."});var N=Cs(k.shape,y,x,b,w,S);return z.runKernelFunc(function(T){return T.maxPoolBackprop(C,k,E,N)},{$dy:C,$input:k})}(p,h,d,n,e,r,i)}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function SE(t,n,e,r,i,o){var a=R(t,"x","avgPool","float32");r==null&&(r=[1,1]),D(vn(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&D(ft(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Cs(s.shape,n,e,r,i,o),c=z.runKernelFunc(function(p){return p.avgPool(s,l)},{x:s},function(p){return{x:function(){return function(f,h,d,m,v,g){var y=R(f,"dy","avgPoolBackprop"),x=R(h,"input","avgPoolBackprop");D(x.rank===y.rank,function(){return"Rank of input ("+x.rank+") does not match rank of dy ("+y.rank+")"}),v==null&&(v=[1,1]),D(vn(m,v),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+v+"'"});var b=x,w=y,S=!1;x.rank===3&&(S=!0,b=x.as4D(1,x.shape[0],x.shape[1],x.shape[2]),w=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),D(w.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."}),D(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var C=Cs(b.shape,d,m,v,g),k=z.runKernelFunc(function(E){return E.avgPoolBackprop(w,b,C)},{dy4D:w,input4D:b});return S?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}(p,s,n,e,r,i)}}});return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Jf=F({maxPool_:function(t,n,e,r,i){return CE(t,n,e,1,r,i)}}),eh=F({avgPool_:function(t,n,e,r,i){return SE(t,n,e,1,r,i)}}),kE=F({pool_:function(t,n,e,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var a=R(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(vn(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,c=Cs(s.shape,n,o,i,r),p=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(b,w){var S=b.map(function(E,N){return E+(E-1)*(w[N]-1)}).map(function(E){return E-1}),C=S.map(function(E){return Math.floor(E/2)}),k=S.map(function(E,N){return E-C[N]});return S.map(function(E,N){return[C[N],k[N]]})}([c.filterHeight,c.filterWidth],p):[[0,0],[0,0]];var f=p[0]===1&&p[1]===1,h=function(b,w,S){var C=S.map(function(M){return M[0]}),k=S.map(function(M){return M[1]}),E=b.concat(C,k),N=w.map(function(M,W){return(M-E[W]%M)%M}),T=k.map(function(M,W){return M+N[W]}),A=w.map(function(M,W){return[C[W],T[W]]}),_=w.map(function(M,W){return[0,N[W]]});return[A,_]}([c.inHeight,c.inWidth],p,l),d=h[0],m=h[1],v=f?r:"valid",g=f?s:Ff(s,p,d),y=(e==="avg"?function(){return SE(g,n,o,1,v)}:function(){return CE(g,n,o,1,v)})(),x=f?y:Of(y,p,m);return u?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),th=F({maxPool3d_:function(t,n,e,r,i,o,a){o===void 0&&(o="NDHWC");var s=R(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),D(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),D(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),D(vn(e,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&D(ft(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=dl(u.shape,n,e,a,r,i,o),p=z.runKernelFunc(function(f,h){var d=f.maxPool3d(u,c);return h([u,d]),d},{x:u},function(f,h){var d=h[0],m=h[1];return{x:function(){return function(v,g,y,x,b,w,S,C){var k=R(v,"dy","maxPool3dBackprop"),E=R(g,"input","maxPool3dBackprop"),N=R(y,"output","maxPool3dBackprop"),T=k,A=E,_=N,M=!1;E.rank===4&&(M=!0,T=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),A=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3]),_=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),D(T.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+T.rank+"."}),D(A.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+A.rank+"."}),D(_.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+_.rank+"."}),w==null&&(w=[1,1,1]),D(vn(b,w),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),C!=null&&D(ft(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+S+"."});var W=dl(A.shape,x,b,w,S,C),L=z.runKernelFunc(function(U){return U.maxPool3dBackprop(T,A,_,W)},{dy5D:T,input5D:A});return M?L.as4D(L.shape[1],L.shape[2],L.shape[3],L.shape[4]):L}(f,d,m,n,e,a,r,i)}}});return l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),nh=F({avgPool3d_:function(t,n,e,r,i,o,a){o===void 0&&(o="NDHWC");var s=R(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),D(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),D(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),D(vn(e,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&D(ft(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=dl(u.shape,n,e,a,r,i,o),p=z.runKernelFunc(function(f){return f.avgPool3d(u,c)},{x:u},function(f){return{x:function(){return function(h,d,m,v,g,y,x){var b=R(h,"dy","avgPool3dBackprop"),w=R(d,"input","avgPool3dBackprop"),S=b,C=w,k=!1;w.rank===4&&(k=!0,S=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),C=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),D(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),D(C.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+C.rank+"."}),g==null&&(g=[1,1,1]),D(vn(v,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+g+"'"}),x!=null&&D(ft(y),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+x+" but got pad "+y+"."});var E=dl(C.shape,m,v,g,y,x),N=z.runKernelFunc(function(T){return T.avgPool3dBackprop(S,C,E)},{dy5D:S,input5D:C});return k?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(f,u,n,e,a,r,i)}}});return p=p.cast(u.dtype),l?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Jn=F({slice_:function(t,n,e){var r,i,o=R(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(u){D(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(u,l){return u>=0?u:(D(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),o.shape[l]-r[l])}),ek(o,r,i);var a=o.shape,s={begin:r,size:i};return z.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),Ll=F({slice1d_:function(t,n,e){var r=R(t,"x","slice1d");return D(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Jn(r,[n],[e])}}),rh=F({slice2d_:function(t,n,e){var r=R(t,"x","slice2d");return D(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Jn(r,n,e)}}),Pl=F({slice3d_:function(t,n,e){var r=R(t,"x","slice3d");return D(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Jn(r,n,e)}}),Es=F({slice4d_:function(t,n,e){var r=R(t,"x","slice4d");return D(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Jn(r,n,e)}});function EE(t,n,e,r,i){return n.rank<e.rank&&(n=n.reshape(Qn(n.shape,r))),t.rank<e.rank&&(t=t.reshape(Qn(t.shape,r))),{$x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return i==null?o:o.transpose(i)}}}var ih=F({all_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","all","bool"),i=qt(n,r.shape),o=i,a=zr(o,r.rank);a!=null&&(r=r.transpose(a),o=Fr(o.length,r.rank));var s=z.runKernelFunc(function(l){return l.all(r,o)},{$x:r});if(e){var u=Qn(s.shape,i);return s.reshape(u)}return s}}),gl=F({any_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","any","bool"),i=qt(n,r.shape),o=i,a=zr(o,r.rank);a!=null&&(r=r.transpose(a),o=Fr(o.length,r.rank));var s=z.runKernelFunc(function(l){return l.any(r,o)},{$x:r});if(e){var u=Qn(s.shape,i);return s.reshape(u)}return s}}),vl=F({argMax_:function(t,n){n===void 0&&(n=0);var e=R(t,"x","argMax");n==null&&(n=0);var r=qt(n,e.shape),i=zr(r,e.rank);return i!=null&&(e=e.transpose(i),r=Fr(r.length,e.rank)),z.runKernelFunc(function(o,a){var s=o.argMax(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return Fe(s)}}})}}),Xy=F({argMin_:function(t,n){n===void 0&&(n=0);var e=R(t,"x","argMin");n==null&&(n=0);var r=qt(n,e.shape),i=zr(r,e.rank);return i!=null&&(e=e.transpose(i),r=Fr(r.length,e.rank)),z.runKernelFunc(function(o,a){var s=o.argMin(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return Fe(s)}}})}}),NE=F({logSumExp_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","logSumExp"),i=qt(n,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(e){var u=Qn(s.shape,i);return s.reshape(u)}return s}}),ho=F({max_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","max"),i=r,o=qt(n,r.shape),a=o,s=zr(a,r.rank);s!=null&&(r=r.transpose(s),a=Fr(a.length,r.rank));var u=z.runKernelFunc(function(c,p){var f=c.max(r,a);return p([i,f]),f},{$x:r},function(c,p){return EE(c,p[1],p[0],o,s)});if(e){var l=Qn(u.shape,o);u=u.reshape(l)}return u}}),wt=F({mean_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","mean"),i=qt(n,r.shape),o=fe(Yt(r.shape,i)[1]);return Us(function(a){var s=se(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(u){var l=a.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(Jr(a.shape,"float32")).div(o)}}})(r)}}),oh=F({min_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","min"),i=r,o=qt(n,r.shape),a=o,s=zr(a,r.rank);s!=null&&(r=r.transpose(s),a=Fr(a.length,r.rank));var u=z.runKernelFunc(function(c,p){var f=c.min(r,a);return p([i,f]),f},{$x:r},function(c,p){return EE(c,p[1],p[0],o,s)});if(e){var l=Qn(u.shape,o);u=u.reshape(l)}return u}}),Bl=F({moments_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=qt(n,(t=R(t,"x","moments")).shape),i=t.mean(r,e),o=i.shape;e||(o=Qn(i.shape,r));var a=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,e)}}}),Fn=F({sum_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=qt(n,r.shape);return Us(function(o){var a=zr(i,o.rank),s=i,u=o;a!=null&&(u=o.transpose(a),s=Fr(s.length,o.rank));var l=z.runKernelFunc(function(p){return p.sum(u,s)},{permutedX:u});if(e){var c=Qn(l.shape,i);l=l.reshape(c)}return{value:l,gradFunc:function(p){var f=o.shape.slice();return i.forEach(function(h){f[h]=1}),p.reshape(f).mul(Jr(o.shape,"float32"))}}})(r)}}),ah=F({prod_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=R(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=qt(n,r.shape),o=zr(i,r.rank),a=i,s=r;o!=null&&(s=r.transpose(o),a=Fr(a.length,r.rank));var u=z.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(e){var l=Qn(u.shape,i);u=u.reshape(l)}return u}}),Ks=F({elu_:function(t){var n=R(t,"x","elu");return z.runKernelFunc(function(e,r){var i=e.elu(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return z.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),sh=F({leakyRelu_:function(t,n){n===void 0&&(n=.2);var e=R(t,"x","leakyRelu");return ei(se(n).mul(e),e)}}),uh=F({prelu_:function(t,n){var e=R(t,"x","prelu"),r=R(n,"alpha","prelu");return z.runKernelFunc(function(i,o){var a=i.prelu(e,r);return o([e,r]),a},{x:e,alpha:r},function(i,o){var a=o[0],s=o[1],u=a.greater(0);return{x:function(){return Ii(u,i,i.mul(s))},alpha:function(){var l=Ii(u,Fe(i),i.mul(a)),c=Rt(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),ko=F({relu_:function(t){var n=R(t,"x","relu");return n.dtype==="bool"?n.toInt():z.runKernelFunc(function(e,r){var i=e.relu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mulStrict(i.step().toFloat())}}})}}),Yy=F({relu6_:function(t){var n=R(t,"x","relu6");return n.dtype==="bool"?n.toInt():z.runKernelFunc(function(e,r){var i=e.relu6(n);return r([n]),i},{$x:n},function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{$x:function(){return e.mulStrict(o.toFloat())}}})}}),lh=F({selu_:function(t){var n=R(t,"x","selu");return z.runKernelFunc(function(e,r){var i=e.selu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(se(0)),a=se(hy),s=se(dy),u=e.mul(s),l=e.mul(a).mul(i.toFloat().exp());return Ii(o,u,l)}}})}}),lt=F({transpose_:function(t,n){var e=R(t,"x","transpose");return n==null&&(n=e.shape.map(function(r,i){return i}).reverse()),D(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(r){D(r>=0&&r<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1?e.clone():z.runKernelFunc(function(r){return r.transpose(e,n)},{$x:e},function(r){var i=Rf(n);return{$x:function(){return r.transpose(i)}}})}}),Qy=F({localResponseNormalization_:function(t,n,e,r,i){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=R(t,"x","localResponseNormalization");D(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),D(ft(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=z.runKernelFunc(function(l,c){var p=l.localResponseNormalization4D(a,n,e,r,i);return c([a,p]),p},{x4D:a},function(l,c){var p=c[0],f=c[1];return{x4D:function(){return z.runKernelFunc(function(h){return h.LRNGrad(l,p,f,n,e,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Zy=F({norm_:function(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(se(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=R(t,"x","norm"),n,e),o=i.shape;if(r){var a=qt(e,t.shape);o=Qn(i.shape,a)}return i.reshape(o)}}),IE=F({basicLSTMCell_:function(t,n,e,r,i,o){var a=R(t,"forgetBias","basicLSTMCell"),s=R(n,"lstmKernel","basicLSTMCell"),u=R(e,"lstmBias","basicLSTMCell"),l=R(r,"data","basicLSTMCell"),c=R(i,"c","basicLSTMCell"),p=R(o,"h","basicLSTMCell"),f=l.concat(p,1).matMul(s).add(u),h=f.shape[0],d=f.shape[1]/4,m=[h,d],v=f.slice([0,0],m),g=f.slice([0,d],m),y=f.slice([0,2*d],m),x=f.slice([0,3*d],m),b=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid())),w=b.tanh().mulStrict(x.sigmoid());return[b,w]}}),AE=F({multiRNNCell_:function(t,n,e,r){for(var i=R(n,"data","multiRNNCell"),o=hl(e,"c","multiRNNCell"),a=hl(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,o[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var p=[],f=[];for(l=0;l<u.length;l+=2)p.push(u[l]),f.push(u[l+1]);return[p,f]}}),RE=F({movingAverage_:function(t,n,e,r,i){i===void 0&&(i=!0);var o=R(t,"v","movingAverage"),a=R(n,"x","movingAverage"),s=R(e,"decay","movingAverage");uS(o,a),D(Ht(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=se(1),l=u.sub(s),c=a.sub(o).mul(l);if(i){D(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=R(r,"step","movingAverage");c=c.div(u.sub(Ss(s,p)))}return o.add(c)}}),Jy=F({stridedSlice_:function(t,n,e,r,i,o,a,s,u){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(n.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=R(t,"x","stridedSlice"),c=ng(s),p=l.shape.slice();c.forEach(function(v){n[v]=0,e[v]=1,p.splice(v,0,1)}),l=l.reshape(p);for(var f=0;f<l.rank;f++)n[f]=tk(i,n,r,l.shape,f),e[f]=nk(o,e,r,l.shape,f),r[f]=r[f]||1;var h=ng(u);h.forEach(function(v){e[v]=n[v]+1,r[v]=1});var d=Mf(n,e,r),m=d.filter(function(v,g){return h.indexOf(g)===-1});return r.every(function(v){return v===1})?Jn(l,n,d).reshape(m):z.runKernelFunc(function(v){return v.stridedSlice(l,n,e,r)},{$x:l}).reshape(m)}}),e0=F({topk_:function(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=R(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=z.runKernelFunc(function(a){return a.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}}),t0=F({scatterND_:function(t,n,e){var r=R(t,"indices","scatterND","int32"),i=R(n,"updates","scatterND");return a3(i,r,e),z.runKernelFunc(function(o){return o.scatterND(r,i,e)},{$indices:r,$updates:i})}}),Vl=F({fft_:function(t){D(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return z.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),Ns=F({ifft_:function(t){D(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return z.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),Wl=F({rfft_:function(t,n){D(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e,r=t.shape[t.shape.length-1],i=t.size/r;if(n!=null&&n<r){var o=t.shape.map(function(g){return 0}),a=t.shape.map(function(g){return g});a[t.shape.length-1]=n,e=t.slice(o,a),r=n}else if(n!=null&&n>r){var s=t.shape.map(function(g){return g});s[t.shape.length-1]=n-r,e=t.concat(He(s),t.shape.length-1),r=n}else e=t;var u=e.zerosLike(),l=_t(e,u).as2D(i,r),c=Vl(l),p=Math.floor(r/2)+1,f=In(c),h=lr(c),d=f.split([p,r-p],f.shape.length-1),m=h.split([p,r-p],h.shape.length-1),v=e.shape.slice();return v[e.shape.length-1]=p,_t(d[0],m[0]).reshape(v)}}),ch=F({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),i=Ns(r);return In(i)}var o=[e,2*(n-1)],a=In(t).as2D(e,n),s=lr(t).as2D(e,n),u=a.slice([0,1],[e,n-2]).reverse(1),l=s.slice([0,1],[e,n-2]).reverse(1).mul(se(-1)),c=a.concat(u,1),p=s.concat(l,1);return r=_t(c,p).as2D(o[0],o[1]),i=Ns(r),In(i)}}),TE=Object.freeze({fft:Vl,ifft:Ns,rfft:Wl,irfft:ch}),ph=F({sparseToDense_:function(t,n,e,r){r===void 0&&(r=0);var i=R(t,"sparseIndices","sparseToDense","int32"),o=R(n,"sparseValues","sparseToDense"),a=R(r,"defaultValue","sparseToDense",o.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var p=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(l.length!==f)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+f+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==p))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+p+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,a),z.runKernelFunc(function(s){return s.sparseToDense(i,o,e,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),n0=F({gatherND_:function(t,n){var e=R(n,"indices","gatherND","int32"),r=R(t,"x","gatherND");return z.runKernelFunc(function(i){return i.gatherND(r,e)},{$x:r,$indices:e})}}),DE=F({diag_:function(t){var n=R(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return z.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(e)}}),r0=F({dropout_:function(t,n,e,r){var i=R(t,"x","dropout");if(D(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),D(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return t instanceof Ge?i.clone():i;var o=function(u,l){if(l==null)return u.shape.slice();if(Ht(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],p=0;p<u.shape.length;p++)l[p]==null&&u.shape[p]!=null?c.push(u.shape[p]):c.push(l[p]);return c}return l}(i,e),a=1-n,s=va(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function OE(t,n,e){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var a=2*Math.PI*o/(t+r-1);i[o]=n-e*Math.cos(a)}return zn(i,"float32")}var fh=F({hannWindow_:function(t){return OE(t,.5,.5)}}),i0=F({hammingWindow_:function(t){return OE(t,.54,.46)}}),hh=F({frame_:function(t,n,e,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,a=[];o+n<=t.size;)a.push(Jn(t,o,n)),o+=e;if(r)for(;o<t.size;){var s=o+n-t.size,u=un([Jn(t,o,n-s),$s([s],i)]);a.push(u),o+=e}return a.length===0?gi([],[0,n]):un(a).as2D(a.length,n)}}),o0=F({stft_:function(t,n,e,r,i){var o;i===void 0&&(i=fh),r==null&&(o=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=hh(t,n,e),s=we(a,i(n)),u=[],l=0;l<a.shape[0];l++)u.push(Wl(s.slice([l,0],[1,n]),r));return un(u)}}),_E=Object.freeze({hannWindow:fh,hammingWindow:i0,frame:hh,stft:o0}),Zt,zE=function(t,n,e){return e===void 0&&(e=1),ce(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p,f,h,d,m,v;return pe(this,function(g){switch(g.label){case 0:return r=R(t,"predictions","inTopK"),i=R(n,"targets","inTopK"),D(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),D(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),Pe(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],D(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return a=g.sent(),[4,i.data()];case 2:for(s=g.sent(),u=[a.length/o,o],c=u[1],p=al("bool",l=u[0]),f=0;f<l;f++){for(h=f*c,d=a.subarray(h,h+c),m=[],v=0;v<d.length;v++)m.push({value:d[v],index:v});for(m.sort(function(y,x){return x.value-y.value}),p[f]=0,v=0;v<e;v++)if(m[v].index===s[f]){p[f]=1;break}}return t!==r&&r.dispose(),n!==i&&i.dispose(),[2,xt(p,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Zt||(Zt={}));var Xz=F({absoluteDifference_:function(t,n,e,r){r===void 0&&(r=Zt.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","absoluteDifference"),o=R(n,"predictions","absoluteDifference"),a=null;e!=null&&(a=R(e,"weights","absoluteDifference")),Pe(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return Di(s,a,r)}}),Di=F({computeWeightedLoss_:function(t,n,e){e===void 0&&(e=Zt.SUM_BY_NONZERO_WEIGHTS);var r=R(t,"losses","computeWeightedLoss"),i=null;n!=null&&(i=R(n,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(e===Zt.NONE)return o;if(e===Zt.SUM)return o.sum();if(e===Zt.MEAN){if(i==null)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(se(a)):s}if(e===Zt.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(se(r.size));var u=i.mul(Jr(r.shape)).notEqual(se(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+e)}}),Yz=F({cosineDistance_:function(t,n,e,r,i){i===void 0&&(i=Zt.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","cosineDistance"),a=R(n,"predictions","cosineDistance"),s=null;r!=null&&(s=R(r,"weights","cosineDistance")),Pe(o.shape,a.shape,"Error in cosineDistance: ");var u=se(1).sub(o.mul(a).sum(e,!0));return Di(u,s,i)}}),Qz=F({hingeLoss_:function(t,n,e,r){r===void 0&&(r=Zt.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","hingeLoss"),o=R(n,"predictions","hingeLoss"),a=null;e!=null&&(a=R(e,"weights","hingeLoss")),Pe(i.shape,o.shape,"Error in hingeLoss: ");var s=se(1);i=se(2).mul(i).sub(s);var u=s.sub(i.mul(o)).relu();return Di(u,a,r)}}),Zz=F({huberLoss_:function(t,n,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Zt.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","huberLoss"),a=R(n,"predictions","huberLoss"),s=null;e!=null&&(s=R(e,"weights","huberLoss")),Pe(o.shape,a.shape,"Error in huberLoss: ");var u=se(r),l=a.sub(o).abs(),c=js(l,u),p=l.sub(c),f=se(.5).mul(c.square()).add(u.mul(p));return Di(f,s,i)}}),Jz=F({logLoss_:function(t,n,e,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Zt.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","logLoss"),a=R(n,"predictions","logLoss"),s=null;e!=null&&(s=R(e,"weights","logLoss")),Pe(o.shape,a.shape,"Error in logLoss: ");var u=se(1),l=se(r),c=o.mul(a.add(l).log()).neg().sub(u.sub(o).mul(u.sub(a).add(l).log()));return Di(c,s,i)}}),eF=F({meanSquaredError_:function(t,n,e,r){r===void 0&&(r=Zt.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","meanSquaredError"),o=R(n,"predictions","meanSquaredError"),a=null;e!=null&&(a=R(e,"weights","meanSquaredError")),Pe(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return Di(s,a,r)}}),tF=F({sigmoidCrossEntropy_:function(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Zt.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"multiClassLabels","sigmoidCrossEntropy"),a=R(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=R(e,"weights","sigmoidCrossEntropy")),Pe(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=se(r),l=se(1),c=se(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var p=function(f,h){var d=R(f,"labels","sigmoidCrossEntropyWithLogits"),m=R(h,"logits","sigmoidCrossEntropyWithLogits");Pe(d.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var v=m.relu(),g=m.mul(d),y=m.abs().neg().exp().log1p();return v.sub(g).add(y)}(o,a);return Di(p,s,i)}}),nF=F({softmaxCrossEntropy_:function(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Zt.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"onehotLabels","softmaxCrossEntropy"),a=R(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=R(e,"weights","softmaxCrossEntropy")),Pe(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=se(r),l=se(1),c=se(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var p=function(f,h,d){if(d===void 0&&(d=-1),d===-1&&(d=h.rank-1),d!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+d);return Us(function(m,v,g){var y=v.logSumExp([d],!0),x=v.toFloat().sub(y);return g([m,x]),{value:x.mul(m).neg().sum([d]),gradFunc:function(b,w){var S=w[0],C=w[1],k=Qn(b.shape,[d]);return[b.reshape(k).mul(S.toFloat().sub(C.exp())),b.reshape(k).mul(C.exp().sub(S.toFloat()))]}}})(f,h)}(o,a);return Di(p,s,i)}}),FE=Object.freeze({get Reduction(){return Zt},absoluteDifference:Xz,computeWeightedLoss:Di,cosineDistance:Yz,hingeLoss:Qz,huberLoss:Zz,logLoss:Jz,meanSquaredError:eF,sigmoidCrossEntropy:tF,softmaxCrossEntropy:nF});function ub(t,n){return n===void 0&&(n=!1),z.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],i=zf(e),o=t.clone(),a=gi([[1]],[1,1]),s=a.clone(),u=e>=r?r:e,l=function(p){var f,h=o,d=s,m=i;f=z.tidy(function(){var v=o.slice([p,p],[e-p,1]),g=v.norm(),y=o.slice([p,p],[1,1]),x=gi([[-1]]).where(y.greater(0),gi([[1]])),b=y.sub(x.mul(g)),w=v.div(b);s=w.shape[0]===1?a.clone():a.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var S=x.matMul(b).div(g).neg(),C=o.slice([p,0],[e-p,r]),k=S.mul(s);if(p===0)o=C.sub(k.matMul(s.transpose().matMul(C)));else{var E=C.sub(k.matMul(s.transpose().matMul(C)));o=o.slice([0,0],[p,r]).concat(E,0)}var N=i.slice([0,p],[e,i.shape[1]-p]);if(p===0)i=N.sub(N.matMul(s).matMul(k.transpose()));else{var T=N.sub(N.matMul(s).matMul(k.transpose()));i=i.slice([0,0],[e,p]).concat(T,1)}return[s,o,i]}),s=f[0],o=f[1],i=f[2],Te([h,d,m])},c=0;c<u;++c)l(c);return!n&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var rF=F({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,D(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(u){D(t[u].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+e+")"})},i=1;i<t.length;++i)r(i)}else n=!0,t=vi(t,t.shape[0],0).map(function(u){return Tl(u,[0])});D(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],a=t,s=function(u){o.push(z.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var p=Fn(o[c].mulStrict(l)).mul(o[c]);l=l.sub(p)}return l.div(Zy(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return n?Tr(o,0):o}}),iF=F({qr_:function(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return ub(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(a,s){return a*s}),r=sa(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(a){var s=ub(a,n),u=s[0],l=s[1];i.push(u),o.push(l)}),[Tr(i,0).reshape(t.shape),Tr(o,0).reshape(t.shape)]}}),a0=Object.freeze({gramSchmidt:rF,qr:iF});function ME(t,n,e,r,i){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY);var o=t.shape[0];return e=Math.min(e,o),D(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),D(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),D(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),D(n.rank===1,function(){return"scores must be a 1D tensor"}),D(n.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+n.shape[0]}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i}}var oF=F({resizeBilinear_:function(t,n,e){e===void 0&&(e=!1);var r=R(t,"images","resizeBilinear");D(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),D(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],u=z.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,a,s,e)},{batchImages:i},function(l,c){return{batchImages:function(){return z.runKernelFunc(function(p){return p.resizeBilinearBackprop(l,c[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),aF=F({resizeNearestNeighbor_:function(t,n,e){e===void 0&&(e=!1);var r=R(t,"images","resizeNearestNeighbor");D(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),D(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),D(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],u=z.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,a,s,e)},{batchImages:i},function(l,c){return{batchImages:function(){return z.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(l,c[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),sF=F({nonMaxSuppression_:function(t,n,e,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=R(t,"boxes","nonMaxSuppression"),a=R(n,"scores","nonMaxSuppression"),s=ME(o,a,e,r,i);return e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,z.runKernelFunc(function(u){return u.nonMaxSuppression(o,a,e,r,i)},{$boxes:o})}}),uF=function(t,n,e,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),ce(this,void 0,void 0,function(){var o,a,s,u,l,c,p;return pe(this,function(f){switch(f.label){case 0:return o=R(t,"boxes","nonMaxSuppressionAsync"),a=R(n,"scores","nonMaxSuppressionAsync"),s=ME(o,a,e,r,i),e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return u=f.sent(),l=u[0],c=u[1],p=cy(l,c,e,r,i),o!==t&&o.dispose(),a!==n&&a.dispose(),[2,p]}})})},lF=F({cropAndResize_:function(t,n,e,r,i,o){var a=R(t,"image","cropAndResize","float32"),s=R(n,"boxes","cropAndResize","float32"),u=R(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return D(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),D(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),D(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),D(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),D(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),D(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),z.runKernelFunc(function(c,p){return c.cropAndResize(a,s,u,r,i,o)},{$image:a,$boxes:s})}}),Qo=Object.freeze({resizeBilinear:oF,resizeNearestNeighbor:aF,nonMaxSuppression:sF,nonMaxSuppressionAsync:uF,cropAndResize:lF}),s0=function(t,n){return!(t>0)&&(n==="linear"||n==="relu")},u0=function(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},l0=function(t,n){var e=n,r=Rt(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},c0=function(t,n,e){if(n==="linear")return t;if(n==="relu")return ko(t);if(n==="elu")return Ks(t);if(n==="relu6")return Yy(t);if(n==="prelu")return uh(t,e);throw new Error("Unknown fused activation "+n+".")},cF=F({matMul_:function(t){var n,e=t.a,r=t.b,i=t.transposeA,o=i!==void 0&&i,a=t.transposeB,s=a!==void 0&&a,u=t.bias,l=t.activation,c=l===void 0?"linear":l,p=t.preluActivationWeights;if(s0(z.state.gradientDepth,c)===!1){var f=Zf(e,r,o,s);return u!=null&&(f=Oe(f,u)),c0(f,c,p)}var h=R(e,"a","fused matMul"),d=R(r,"b","fused matMul");n=vt(h,d),h=n[0],d=n[1];var m=o?h.shape[h.rank-2]:h.shape[h.rank-1],v=s?d.shape[d.rank-1]:d.shape[d.rank-2],g=o?h.shape[h.rank-1]:h.shape[h.rank-2],y=s?d.shape[d.rank-2]:d.shape[d.rank-1],x=h.shape.slice(0,-2),b=d.shape.slice(0,-2),w=fe(x),S=fe(b);D(h.rank>=2&&d.rank>=2&&h.rank===d.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+d.rank+"."}),D(Ht(x,b),function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+b+") of Tensors with shapes "+h.shape+" and "+d.shape+" must match."}),D(m===v,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+h.shape+" and "+d.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var C,k,E=h.shape.slice(0,-2).concat([g,y]),N=o?h.as3D(w,m,g):h.as3D(w,g,m),T=s?d.as3D(S,y,v):d.as3D(S,v,y);u!=null&&ze(E,(C=vt(C=R(u,"bias","fused matMul"),h)[0]).shape),p!=null&&(k=R(p,"prelu weights","fused matMul"));var A={$a:N,$b:T};return u!=null&&(A.$bias=C),p!=null&&(A.$preluActivationWeights=k),z.runKernelFunc(function(_,M){var W=_.fusedBatchMatMul({a:N,b:T,transposeA:o,transposeB:s,bias:C,activation:c,preluActivationWeights:k});return M([N,T,W]),W},A,function(_,M){var W=M[0],L=M[1],U=M[2],O=u0(_,U,c),V={};return u!=null&&(V={$bias:function(){return l0(C,O)}}),Object.assign(o||s?!o&&s?{$a:function(){return O.matMul(L,!1,!1)},$b:function(){return O.matMul(W,!0,!1)}}:o&&!s?{$a:function(){return L.matMul(O,!1,!0)},$b:function(){return W.matMul(O,!1,!1)}}:{$a:function(){return L.matMul(O,!0,!0)},$b:function(){return O.matMul(W,!0,!0)}}:{$a:function(){return O.matMul(L,!1,!0)},$b:function(){return W.matMul(O,!0,!1)}},V)}).reshape(E)}}),pF=F({conv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,p=t.activation,f=p===void 0?"linear":p,h=t.preluActivationWeights;if(f=f||"linear",s0(z.state.gradientDepth,f)===!1){var d=wa(n,e,r,i,a,u,l);return c!=null&&(d=Oe(d,c)),c0(d,f,h)}var m=R(n,"x","conv2d"),v=R(e,"filter","conv2d"),g=m,y=!1;m.rank===3&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),D(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),D(v.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."}),l!=null&&D(ft(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),D(g.shape[3]===v.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+v.shape[2]+"."}),D(vn(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),D(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var x,b,w=So(g.shape,v.shape,r,u,i,l);c!=null&&(x=vt(x=R(c,"bias","fused conv2d"),m)[0],ze(w.outShape,x.shape)),h!=null&&(b=R(h,"prelu weights","fused conv2d"));var S={x:g,$filter:v};c!=null&&(S.$bias=x),h!=null&&(S.$preluActivationWeights=b);var C=z.runKernelFunc(function(k,E){var N=k.fusedConv2d({input:g,filter:v,convInfo:w,bias:x,activation:f,preluActivationWeights:b});return E([v,g,N]),N},S,function(k,E){var N=E,T=N[0],A=N[1],_=N[2],M=u0(k,_,f);D(ua(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var W={};return c!=null&&(W={$bias:function(){return l0(x,M)}}),Object.assign({x:function(){return fE(A.shape,M,T,r,i)},$filter:function(){return qy(A,M,T.shape,r,i)}},W)});return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),fF=F({depthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,p=t.activation,f=p===void 0?"linear":p,h=t.preluActivationWeights;if(s0(z.state.gradientDepth,f)===!1){var d=qs(n,e,r,i,a,u,l);return c!=null&&(d=Oe(d,c)),c0(d,f,h)}var m=R(n,"x","depthwiseConv2d"),v=R(e,"filter","depthwiseConv2d"),g=m,y=!1;m.rank===3&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),D(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),D(v.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+v.rank+"."}),D(g.shape[3]===v.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+v.shape[2]+"."}),u==null&&(u=[1,1]),D(vn(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&D(ft(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var x,b,w=So(g.shape,v.shape,r,u,i,l,!0);c!=null&&(x=vt(x=R(c,"bias","fused conv2d"),m)[0],ze(w.outShape,x.shape)),h!=null&&(b=R(h,"prelu weights","fused depthwiseConv2d"));var S={x:g,$filter:v};c!=null&&(S.$bias=x),h!=null&&(S.$preluActivationWeights=b);var C=z.runKernelFunc(function(k,E){var N=k.fusedDepthwiseConv2D({input:g,filter:v,convInfo:w,bias:x,activation:f,preluActivationWeights:b});return E([g,v,N]),N},S,function(k,E){D(ua(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var N=E[0],T=E[1],A=E[2],_=u0(k,A,f),M={};return c!=null&&(M={$bias:function(){return l0(x,_)}}),Object.assign({x:function(){return hE(N.shape,_,T,w)},$filter:function(){return dE(N,_,T.shape,w)}},M)});return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),Is=Object.freeze({matMul:cF,conv2d:pF,depthwiseConv2d:fF}),hF=Object.freeze({image:Qo,linalg:a0,losses:FE,spectral:TE,fused:Is,signal:_E,square:my,conv1d:Xf,conv2d:wa,conv3d:Yf,depthwiseConv2d:qs,separableConv2d:Ky,conv2dTranspose:Qf,conv3dTranspose:mE,op:F,batchNormalization2d:jk,batchNormalization3d:Hk,batchNormalization4d:Gk,batchNormalization:qk,batchNorm:Fy,batchNorm2d:My,batchNorm3d:Ly,batchNorm4d:Py,booleanMaskAsync:lE,complex:_t,real:In,imag:lr,concat:un,concat1d:Kv,concat2d:Xv,concat3d:Yv,concat4d:Qv,split:vi,matMul:Zf,dot:gE,outerProduct:vE,reverse:Yr,reverse1d:yE,reverse2d:xE,reverse3d:bE,reverse4d:wE,maxPool:Jf,avgPool:eh,pool:kE,maxPool3d:th,avgPool3d:nh,slice:Jn,slice1d:Ll,slice2d:rh,slice3d:Pl,slice4d:Es,abs:fo,acos:gy,acosh:vy,asin:yy,asinh:xy,atan:by,atanh:wy,ceil:Cy,clipByValue:yn,cos:Sy,cosh:ky,erf:Ey,exp:Ny,expm1:Iy,floor:Vf,log:Ni,log1p:Ay,logSigmoid:Mk,neg:xa,reciprocal:Ry,round:Ty,rsqrt:Wf,sigmoid:$f,sign:Dy,isNaN:Lk,isInf:Pk,isFinite:Bk,sin:Oy,sinh:_y,softplus:_l,sqrt:zl,step:Vk,tan:zy,tanh:Uf,all:ih,any:gl,argMax:vl,argMin:Xy,logSumExp:NE,max:ho,mean:wt,min:oh,moments:Bl,sum:Fn,prod:ah,equal:ba,equalStrict:rE,greater:Hs,greaterEqual:Ml,greaterEqualStrict:iE,greaterStrict:oE,less:jy,lessEqual:Hy,lessEqualStrict:aE,lessStrict:sE,notEqual:ks,notEqualStrict:uE,add:Oe,addN:Vy,addStrict:Xk,atan2:Wy,div:ln,divStrict:Yk,floorDiv:qf,maximum:ei,maximumStrict:Qk,minimum:js,minimumStrict:Zk,mod:$y,modStrict:Jk,mul:we,mulStrict:Kf,pow:Ss,powStrict:eE,squaredDifference:Uy,squaredDifferenceStrict:tE,sub:Gt,subStrict:nE,elu:Ks,leakyRelu:sh,prelu:uh,relu:ko,relu6:Yy,selu:lh,logicalAnd:Ti,logicalNot:By,logicalOr:Hf,logicalXor:Kk,where:Ii,whereAsync:Gf,buffer:Se,print:WS,batchToSpaceND:Of,cast:_f,clone:$S,cumsum:US,depthToSpace:Jv,expandDims:Un,eye:zf,multinomial:ey,oneHot:ws,pad:Co,pad1d:jS,pad2d:HS,pad3d:GS,pad4d:qS,rand:KS,randomNormal:ty,randomGamma:XS,randomUniform:va,reshape:Rl,spaceToBatchND:Ff,squeeze:Tl,stack:Tr,tile:oo,truncatedNormal:Dl,unstack:sa,setdiff1dAsync:ny,fill:$s,linspace:qv,ones:Jr,range:Tf,scalar:se,tensor:xt,tensor1d:zn,tensor2d:gi,tensor3d:Hv,tensor4d:Wi,tensor5d:BS,tensor6d:VS,variable:Gv,zeros:He,onesLike:Zn,zerosLike:Fe,transpose:lt,softmax:ya,logSoftmax:Pf,localResponseNormalization:Qy,norm:Zy,gather:Gs,unsortedSegmentSum:Gy,basicLSTMCell:IE,multiRNNCell:AE,movingAverage:RE,stridedSlice:Jy,topk:e0,scatterND:t0,fft:Vl,ifft:Ns,rfft:Wl,irfft:ch,sparseToDense:ph,gatherND:n0,diag:DE,dropout:r0,hannWindow:fh,hammingWindow:i0,frame:hh,stft:o0,inTopKAsync:zE});function Y(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(e){e!=null&&D(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function xd(t,n,e,r){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);if(e==="elu")return t.elu(n);if(e==="relu6")return t.relu6(n);if(e==="prelu")return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var dF=function(t){function n(){var e=t.call(this)||this;if(e.blockSize=48,e.firstUse=!0,G().get("IS_BROWSER")){var r=typeof OffscreenCanvas<"u"?new OffscreenCanvas(300,150):typeof document<"u"?document.createElement("canvas"):null;r!==null&&(e.fromPixels2DContext=r.getContext("2d"))}return e.data=new oy(e,z),e}return _r(n,t),n.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,G().get("IS_NODE")&&tg(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`));var o={};return this.data.set(o,{values:e,dtype:i}),o},n.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.fromPixels=function(e,r){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var i,o,a=e.data instanceof Uint8Array,s=typeof ImageData<"u"&&e instanceof ImageData,u=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,c=u?[e.videoWidth,e.videoHeight]:[e.width,e.height],p=c[0],f=c[1];if(G().get("IS_NODE")&&e.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(e.getContext!=null)i=e.getContext("2d").getImageData(0,0,p,f).data;else if(s||a)i=e.data;else{if(!l&&!u)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=p,this.fromPixels2DContext.canvas.height=f,this.fromPixels2DContext.drawImage(e,0,0,p,f),i=this.fromPixels2DContext.getImageData(0,0,p,f).data}if(r===4)o=new Int32Array(i);else{var h=p*f;o=new Int32Array(h*r);for(var d=0;d<h;d++)for(var m=0;m<r;++m)o[d*r+m]=i[4*d+m]}return Hv(o,[f,p,r],"int32")},n.prototype.read=function(e){return ce(this,void 0,void 0,function(){return pe(this,function(r){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var r=this.data.get(e),i=r.dtype,o=r.complexTensors;return i==="complex64"?ig(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if(e.dtype==="string")try{i=r.map(function(o){return ul(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Se(e.shape,e.dtype,i)},n.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return z.makeTensorFromDataId(o,r,i,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return ce(this,void 0,void 0,function(){var r;return pe(this,function(i){return r=wr(),e(),[2,{kernelMs:wr()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:z.keep(e.clone()),imag:z.keep(r.clone())},i},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(Y(e,"slice"),ry(e.shape,r,i)){var o=iy(r,e.strides),a=fe(i);return xt(this.readSync(e.dataId).subarray(o,o+a),i,e.dtype)}for(var s=Se(i,e.dtype),u=this.bufferSync(e),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(p,f){return p+r[f]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},n.prototype.stridedSlice=function(e,r,i,o){Y(e,"stridedSlice");var a=Mf(r,i,o);if(a.some(function(h){return h===0}))return xt([],a);for(var s=Se(a,e.dtype),u=this.bufferSync(e),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),p=new Array(c.length),f=0;f<p.length;f++)p[f]=c[f]*o[f]+r[f];s.set.apply(s,[u.get.apply(u,p)].concat(c))}return s.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=Se([e.size,e.size],e.dtype),o=i.values,a=0;a<r.length;a++)o[a*e.size+a]=r[a];return i.toTensor()},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==r&&(o[a++]=e.shape[s]);var u=new Array(e.rank).fill(0),l=e.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(e,u,l).reshape(o);return c},n.prototype.reverse=function(e,r){Y(e,"reverse");for(var i=Se(e.shape,e.dtype),o=this.bufferSync(e),a=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(p){return c[p]=e.shape[p]-1-c[p]}),i.set.apply(i,[o.get.apply(o,c)].concat(l))},s=0;s<i.size;s++)a(s);return i.toTensor()},n.prototype.concat=function(e,r){var i=this;if(e[0].dtype==="complex64"){var o=e.map(function(h){return In(h)}),a=e.map(function(h){return lr(h)});return _t(this.concat(o,r),this.concat(a,r))}var s=e.map(function(h){var d=fe(h.shape.slice(r));return h.as2D(-1,d)}),u=aa(s.map(function(h){return h.shape}),1),l=Se(u,e[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(h){l.set(i.readSync(h.dataId),c),c+=h.size})}else{var p=0;s.forEach(function(h){for(var d=i.readSync(h.dataId),m=0,v=0;v<h.shape[0];++v)for(var g=v*u[1]+p,y=0;y<h.shape[1];++y)l[g+y]=d[m++];p+=h.shape[1]})}var f=aa(e.map(function(h){return h.shape}),r);return xt(l,f,e[0].dtype)},n.prototype.neg=function(e){return Y(e,"neg"),this.multiply(se(-1),e)},n.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(e,r,kt(e.dtype,r.dtype),function(i,o){return i+o})},n.prototype.addN=function(e){var r=this;Y(e,"addN");for(var i=e.map(function(c){return r.readSync(c.dataId)}),o=Se(e[0].shape,e[0].dtype),a=o.values,s=0;s<e.length;s++)for(var u=i[s],l=0;l<a.length;l++)a[l]+=u[l];return o.toTensor()},n.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(e,r,kt(e.dtype,r.dtype),function(i,o){return i-o})},n.prototype.pow=function(e,r){return Y([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.pow(i,o)})},n.prototype.batchMatMul=function(e,r,i,o){Y([e,r],"matMul");for(var a=i?e.shape[1]:e.shape[2],s=i?e.shape[2]:e.shape[1],u=o?r.shape[1]:r.shape[2],l=e.shape[0],c=this.readSync(e.dataId),p=this.readSync(r.dataId),f=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=f[0],d=f[1],m=f[2],v=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=v[0],y=v[1],x=v[2],b=s*u,w=Se([l,s,u],e.dtype),S=w.values,C=this.blockSize,k=0;k<l;k++)for(var E=0;E<s;E+=C)for(var N=0;N<u;N+=C)for(var T=0;T<a;T+=C)for(var A=Math.min(E+C,s),_=Math.min(N+C,u),M=Math.min(T+C,a),W=E;W<A;W++)for(var L=N;L<_;L++){for(var U=0,O=T;O<M;O++)U+=c[k*h+W*d+O*m]*p[O*g+L*y+k*x];S[k*b+(W*u+L)]+=U}return w.toTensor()},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,u=e.activation,l=e.preluActivationWeights,c=this.batchMatMul(r,i,o,a);return s&&(c=this.add(c,s)),u&&(c=xd(this,c,u,l)),c},n.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(e,r,kt(e.dtype,r.dtype),function(i,o){return i*o})},n.prototype.realDivide=function(e,r){return Y([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(i,o){return i/o})},n.prototype.floorDiv=function(e,r){return Y([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(i,o){return Math.floor(i/o)})},n.prototype.sum=function(e,r){Y(e,"sum"),En("sum",r,e.rank);for(var i=Yt(e.shape,r),o=i[0],a=i[1],s=He(o,kt(e.dtype,"int32")),u=fe(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),p=0;p<l.length;++p){for(var f=p*u,h=0,d=0;d<u;++d)h+=c[f+d];l[p]=h}return s},n.prototype.prod=function(e,r){Y(e,"sum");for(var i=Yt(e.shape,r),o=i[0],a=i[1],s=He(o,kt(e.dtype,"int32")),u=fe(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),p=0;p<l.length;++p){for(var f=p*u,h=1,d=0;d<u;++d)h*=c[f+d];l[p]=h}return s},n.prototype.unsortedSegmentSum=function(e,r,i){Y(e,"unsortedSegmentSum");for(var o=[],a=e.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=se(s,"int32"),l=ba(u,r).asType("float32").mul(e).sum(0);o.push(l)}return Tr(o)},n.prototype.argMin=function(e,r){Y(e,"argMin");var i=[r];En("argMin",i,e.rank);for(var o=Yt(e.shape,i),a=o[0],s=o[1],u=He(a,"int32"),l=fe(s),c=this.readSync(u.dataId),p=this.readSync(e.dataId),f=0;f<c.length;++f){for(var h=f*l,d=p[h],m=0,v=0;v<l;++v){var g=p[h+v];g<d&&(d=g,m=v)}c[f]=m}return u},n.prototype.argMax=function(e,r){Y(e,"argMax");var i=[r];En("argMax",i,e.rank);for(var o=Yt(e.shape,i),a=o[0],s=o[1],u=He(a,"int32"),l=fe(s),c=this.readSync(u.dataId),p=this.readSync(e.dataId),f=0;f<c.length;++f){for(var h=f*l,d=p[h],m=0,v=0;v<l;++v){var g=p[h+v];g>d&&(d=g,m=v)}c[f]=m}return u},n.prototype.cumsum=function(e,r,i,o){if(Y(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var a=kt(e.dtype,"int32"),s=He(e.shape,a),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=e.shape[e.rank-1],p=o?function(v,g){return v+c-g-1}:function(v,g){return v+g},f=0;f<l.length;f+=c)for(var h=0;h<c;h++){var d=p(f,h);if(h===0)u[d]=i?0:l[d];else{var m=p(f,h-1);u[d]=i?l[m]+u[m]:l[d]+u[m]}}return s},n.prototype.equal=function(e,r){return Y([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i===o?1:0})},n.prototype.notEqual=function(e,r){return Y([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i!==o?1:0})},n.prototype.less=function(e,r){return Y([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<o?1:0})},n.prototype.lessEqual=function(e,r){return Y([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<=o?1:0})},n.prototype.greater=function(e,r){return Y([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>o?1:0})},n.prototype.greaterEqual=function(e,r){return Y([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>=o?1:0})},n.prototype.logicalNot=function(e){Y(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return Y([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i&&o})},n.prototype.logicalOr=function(e,r){return Y([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i||o})},n.prototype.select=function(e,r,i){Y([e,r,i],"select");for(var o=this.readSync(e.dataId),a=this.readSync(r.dataId),s=this.readSync(i.dataId),u=He(r.shape,kt(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,p=e.rank===0||e.rank>1||r.rank===1?1:fe(r.shape.slice(1)),f=0;f<o.length;f++)for(var h=0;h<p;h++)o[f]===1?l[c++]=a[f]:l[c++]=s[f];return u},n.prototype.where=function(e){Y([e],"where");var r=this.readSync(e.dataId);return py(e.shape,r)},n.prototype.topk=function(e,r,i){return Y(e,"topk"),ak(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){Y(e,"min"),En("min",r,e.rank);for(var i=Yt(e.shape,r),o=i[0],a=i[1],s=He(o,e.dtype),u=fe(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),p=0;p<l.length;++p){for(var f=p*u,h=c[f],d=0;d<u;++d){var m=c[f+d];m<h&&(h=m)}l[p]=h}return s},n.prototype.minimum=function(e,r){return Y([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.min(i,o)})},n.prototype.mod=function(e,r){return Y([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},n.prototype.max=function(e,r){Y(e,"max"),En("max",r,e.rank);for(var i=Yt(e.shape,r),o=i[0],a=i[1],s=He(o,e.dtype),u=fe(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),p=0;p<l.length;++p){for(var f=p*u,h=c[f],d=0;d<u;++d){var m=c[f+d];m>h&&(h=m)}l[p]=h}return s},n.prototype.maximum=function(e,r){return Y([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.max(i,o)})},n.prototype.all=function(e,r){Y(e,"all"),En("all",r,e.rank);for(var i=Yt(e.shape,r),o=i[0],a=i[1],s=He(o,e.dtype),u=fe(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),p=0;p<l.length;++p){for(var f=p*u,h=c[f],d=0;d<u;++d){var m=c[f+d];h=h&&m}l[p]=h}return s},n.prototype.any=function(e,r){Y(e,"any"),En("any",r,e.rank);for(var i=Yt(e.shape,r),o=i[0],a=i[1],s=He(o,e.dtype),u=fe(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),p=0;p<l.length;++p){for(var f=p*u,h=c[f],d=0;d<u;++d){var m=c[f+d];h=h||m}l[p]=h}return s},n.prototype.squaredDifference=function(e,r){return Y([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var a=i-o;return a*a})},n.prototype.ceil=function(e){Y(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.floor=function(e){Y(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sign=function(e){Y(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},n.prototype.isNaN=function(e){Y(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isInf=function(e){Y(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isFinite=function(e){Y(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.round=function(e){Y(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=Math.floor(r[o]);r[o]-a<.5?i[o]=Math.floor(r[o]):r[o]-a>.5?i[o]=Math.ceil(r[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,e.shape,"float32")},n.prototype.exp=function(e){Y(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.expm1=function(e){Y(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log=function(e){Y(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.log1p=function(e){Y(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log1p(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.sqrt=function(e){Y(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.rsqrt=function(e){Y(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.reciprocal=function(e){Y(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){Y(e,"relu");for(var r=He(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return r},n.prototype.relu6=function(e){Y(e,"relu");for(var r=He(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return r},n.prototype.prelu=function(e,r){return Y([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return i<0?o*i:i})},n.prototype.elu=function(e){Y(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){Y([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),a=this.readSync(e.dataId),s=0;s<o.length;++s){var u=o[s];i[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},n.prototype.selu=function(e){Y(e,"selu");for(var r=hy,i=dy,o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,i){Y(e,"clip");for(var o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>i?i:u<r?r:u}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var a=i[2*o],s=i[2*o+1];r[o]=Math.hypot(a,s)}return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){Y(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){Y(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){Y(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a]>-r,u=o[a]<r,l=Math.exp(o[a]),c=void 0;c=u?l:s?o[a]:Math.log(1+l),i[a]=c}return this.makeOutput(i,e.shape,"float32")},n.prototype.sin=function(e){Y(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){Y(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){Y(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){Y(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){Y(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){Y(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return Y([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.atan2(i,o)})},n.prototype.sinh=function(e){Y(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){Y(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){Y(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=QC(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){Y(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){Y(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){Y(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){Y(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),u=1/(1+.3275911*s);r[o]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){r===void 0&&(r=0),Y(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:r}return this.makeOutput(i,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,u=e.preluActivationWeights,l=this.conv2d(r,i,o);return a&&(l=this.add(l,a)),s&&(l=xd(this,l,s,u)),l},n.prototype.conv2d=function(e,r,i){Y([e,r],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,p=i.dataFormat==="channelsLast",f=Se(i.outShape,e.dtype),h=e.strides[0],d=p?e.strides[1]:e.strides[2],m=p?e.strides[2]:1,v=p?1:e.strides[1],g=f.strides[0],y=p?f.strides[1]:f.strides[2],x=p?f.strides[2]:1,b=p?1:f.strides[1],w=this.readSync(e.dataId),S=this.readSync(r.dataId),C=f.values,k=0;k<i.batchSize;++k)for(var E=k*h,N=k*g,T=0;T<i.outHeight;++T)for(var A=N+T*y,_=T*i.strideHeight-c,M=0;M<o;M++){var W=_+M*s;if(!(W<0||W>=i.inHeight))for(var L=M*r.strides[0],U=E+W*d,O=0;O<i.outWidth;++O)for(var V=A+O*x,$=O*i.strideWidth-l,K=0;K<a;K++){var Q=$+K*u;if(!(Q<0||Q>=i.inWidth))for(var ee=U+Q*m,ue=L+K*r.strides[1],le=0;le<i.inChannels;++le){for(var te=w[ee+le*v],de=0;de<i.outChannels;++de)C[V+de*b]+=te*S[ue+de];ue+=i.outChannels}}}return f.toTensor()},n.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,p=i.padInfo.front,f=i.padInfo.left,h=i.padInfo.top,d=Se(i.outShape,e.dtype),m=this.readSync(e.dataId),v=this.readSync(r.dataId),g=d.values,y=0;y<i.batchSize;++y)for(var x=y*e.strides[0],b=y*d.strides[0],w=0;w<i.outDepth;++w)for(var S=b+w*d.strides[1],C=w*i.strideDepth-p,k=0;k<o;k++){var E=C+k*u;if(!(E<0||E>=i.inDepth))for(var N=k*r.strides[0],T=x+E*e.strides[1],A=0;A<i.outHeight;++A)for(var _=S+A*d.strides[2],M=A*i.strideHeight-h,W=0;W<a;W++){var L=M+W*l;if(!(L<0||L>=i.inHeight))for(var U=N+W*r.strides[1],O=T+L*e.strides[2],V=0;V<i.outWidth;++V)for(var $=_+V*i.outChannels,K=V*i.strideWidth-f,Q=0;Q<s;Q++){var ee=K+Q*c;if(!(ee<0||ee>=i.inWidth))for(var ue=U+Q*r.strides[2],le=O+ee*i.inChannels,te=ue,de=0;de<i.inChannels;++de){for(var ge=m[le+de],ve=0;ve<i.outChannels;++ve)g[$+ve]+=ge*v[te+ve];te+=i.outChannels}}}}return d.toTensor()},n.prototype.conv2dDerInput=function(e,r,i){Y([e,r],"conv2dDerInput");for(var o=Se(i.inShape,"float32"),a=o.values,s=this.readSync(e.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],p=l[1],f=l[2],h=i.batchSize,d=i.filterHeight,m=i.filterWidth,v=i.inChannels,g=i.inHeight,y=i.inWidth,x=i.outChannels,b=i.outHeight,w=i.outWidth,S=i.strideHeight,C=i.strideWidth,k=i.dataFormat,E=d-1-i.padInfo.top,N=m-1-i.padInfo.left,T=k==="channelsLast",A=o.strides[0],_=T?o.strides[1]:o.strides[2],M=T?o.strides[2]:1,W=T?1:o.strides[1],L=e.strides[0],U=T?e.strides[1]:e.strides[2],O=T?e.strides[2]:1,V=T?1:e.strides[1],$=0;$<h;++$)for(var K=0;K<v;++K)for(var Q=0;Q<g;++Q)for(var ee=Q-E,ue=Math.max(0,Math.ceil(ee/S)),le=Math.min(b,(d+ee)/S),te=0;te<y;++te){for(var de=te-N,ge=Math.max(0,Math.ceil(de/C)),ve=Math.min(w,(m+de)/C),$e=0,he=ue;he<le;++he)for(var Ce=he*S-ee,_e=ge;_e<ve;++_e)for(var ke=L*$+U*he+O*_e,Xe=c*(d-1-Ce)+p*(m-1-(_e*C-de))+f*K,Be=0;Be<x;++Be)$e+=s[ke+V*Be]*u[Xe+Be];a[A*$+_*Q+M*te+W*K]=$e}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,i){for(var o=Se(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],p=s[3],f=this.readSync(e.dataId),h=e.strides,d=h[0],m=h[1],v=h[2],g=h[3],y=this.readSync(r.dataId),x=r.strides,b=x[0],w=x[1],S=x[2],C=x[3],k=i.batchSize,E=i.filterDepth,N=i.filterHeight,T=i.filterWidth,A=i.inChannels,_=i.inDepth,M=i.inHeight,W=i.inWidth,L=i.outChannels,U=i.outDepth,O=i.outHeight,V=i.outWidth,$=i.strideDepth,K=i.strideHeight,Q=i.strideWidth,ee=E-1-i.padInfo.front,ue=N-1-i.padInfo.top,le=T-1-i.padInfo.left,te=0;te<k;++te)for(var de=0;de<A;++de)for(var ge=0;ge<_;++ge)for(var ve=ge-ee,$e=Math.max(0,Math.ceil(ve/$)),he=Math.min(U,(E+ve)/$),Ce=0;Ce<M;++Ce)for(var _e=Ce-ue,ke=Math.max(0,Math.ceil(_e/K)),Xe=Math.min(O,(N+_e)/K),Be=0;Be<W;++Be){for(var Dt=Be-le,cn=Math.max(0,Math.ceil(Dt/Q)),Pt=Math.min(V,(T+Dt)/Q),tn=0,Bt=$e;Bt<he;++Bt)for(var pn=Bt*$-ve,Ae=ke;Ae<Xe;++Ae)for(var fn=Ae*K-_e,Ye=cn;Ye<Pt;++Ye)for(var Ct=d*te+m*Bt+v*Ae+g*Ye,Ln=b*(E-1-pn)+w*(N-1-fn)+S*(T-1-(Ye*Q-Dt))+C*de,gr=0;gr<L;++gr)tn+=f[Ct+gr]*y[Ln+gr];a[u*te+l*ge+c*Ce+p*Be+de]=tn}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,i){Y([e,r],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=Se(i.filterShape,"float32"),p=i.padInfo.left,f=i.padInfo.top,h=this.bufferSync(e),d=this.bufferSync(r),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((f-m)/o)),g=Math.min(i.outHeight,(i.inHeight+f-m)/o),y=0;y<u;++y)for(var x=Math.max(0,Math.ceil((p-y)/a)),b=Math.min(i.outWidth,(i.inWidth+p-y)/a),w=0;w<i.inChannels;++w)for(var S=0;S<i.outChannels;++S){for(var C=0,k=0;k<i.batchSize;++k)for(var E=v;E<g;++E)for(var N=m+E*o-f,T=x;T<b;++T){var A=y+T*a-p;C+=l?h.get(k,N,A,w)*d.get(k,E,T,S):h.get(k,w,N,A)*d.get(k,S,E,T)}c.set(C,m,y,w,S)}return c.toTensor()},n.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,p=Se(i.filterShape,"float32"),f=p.values,h=p.strides,d=h[0],m=h[1],v=h[2],g=h[3],y=this.readSync(r.dataId),x=r.strides,b=x[0],w=x[1],S=x[2],C=x[3],k=this.readSync(e.dataId),E=e.strides,N=E[0],T=E[1],A=E[2],_=E[3],M=i.padInfo.front,W=i.padInfo.left,L=i.padInfo.top,U=0;U<u;++U)for(var O=Math.max(0,Math.ceil((M-U)/o)),V=Math.min(i.outDepth,(i.inDepth+M-U)/o),$=U*d,K=0;K<l;++K)for(var Q=Math.max(0,Math.ceil((L-K)/a)),ee=Math.min(i.outHeight,(i.inHeight+L-K)/a),ue=K*m+$,le=0;le<c;++le)for(var te=Math.max(0,Math.ceil((W-le)/s)),de=Math.min(i.outWidth,(i.inWidth+W-le)/s),ge=le*v+ue,ve=0;ve<i.inChannels;++ve)for(var $e=ve*g+ge,he=0;he<i.outChannels;++he){for(var Ce=0,_e=0;_e<i.batchSize;++_e)for(var ke=_e*N,Xe=_e*b,Be=O;Be<V;++Be)for(var Dt=(U+Be*o-M)*T+ke,cn=Be*w+Xe,Pt=Q;Pt<ee;++Pt)for(var tn=(K+Pt*a-L)*A+Dt,Bt=Pt*S+cn,pn=te;pn<de;++pn){var Ae=pn*C+Bt;Ce+=k[(le+pn*s-W)*_+tn+ve]*y[Ae+he]}f[$e+he]=Ce}return p.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,u=e.preluActivationWeights,l=this.depthwiseConv2D(r,i,o);return a&&(l=this.add(l,a)),s&&(l=xd(this,l,s,u)),l},n.prototype.depthwiseConv2D=function(e,r,i){Y([e,r],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,p=i.outChannels/i.inChannels,f=Se(i.outShape,e.dtype),h=this.readSync(e.dataId),d=this.readSync(r.dataId),m=f.values,v=0;v<i.batchSize;++v)for(var g=v*e.strides[0],y=v*f.strides[0],x=0;x<i.outHeight;++x)for(var b=y+x*f.strides[1],w=x*i.strideHeight-l,S=0;S<o;++S){var C=w+S*s;if(!(C<0||C>=i.inHeight))for(var k=S*r.strides[0],E=g+C*e.strides[1],N=0;N<i.outWidth;++N)for(var T=b+N*f.strides[2],A=N*i.strideWidth-c,_=0;_<a;++_){var M=A+_*u;if(!(M<0||M>=i.inWidth))for(var W=k+_*r.strides[1],L=E+M*i.inChannels,U=T,O=W,V=0;V<i.inChannels;++V){for(var $=h[L+V],K=0;K<p;++K)m[U+K]+=$*d[O+K];U+=p,O+=p}}}return f.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,i){Y([e,r],"depthwiseConv2DDerInput");for(var o=Se(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],p=this.readSync(e.dataId),f=e.strides,h=f[0],d=f[1],m=f[2],v=this.readSync(r.dataId),g=r.strides,y=g[0],x=g[1],b=g[2],w=i.batchSize,S=i.filterHeight,C=i.filterWidth,k=i.inChannels,E=i.inHeight,N=i.inWidth,T=i.outChannels,A=i.outHeight,_=i.outWidth,M=i.strideHeight,W=i.strideWidth,L=S-1-i.padInfo.top,U=C-1-i.padInfo.left,O=T/k,V=0;V<w;++V)for(var $=0;$<k;++$)for(var K=0;K<E;++K)for(var Q=K-L,ee=Math.max(0,Math.ceil(Q/M)),ue=Math.min(A,(S+Q)/M),le=0;le<N;++le){for(var te=le-U,de=Math.max(0,Math.ceil(te/W)),ge=Math.min(_,(C+te)/W),ve=0,$e=ee;$e<ue;++$e)for(var he=$e*M-Q,Ce=de;Ce<ge;++Ce)for(var _e=h*V+d*$e+m*Ce,ke=y*(S-1-he)+x*(C-1-(Ce*W-te))+b*$,Xe=0;Xe<O;++Xe)ve+=p[_e+($*O+Xe)]*v[ke+Xe];a[u*V+l*K+c*le+$]=ve}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){Y([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=Se(i.filterShape,"float32"),c=i.padInfo.left,p=i.padInfo.top,f=i.outChannels/i.inChannels,h=this.bufferSync(e),d=this.bufferSync(r),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((p-m)/o)),g=Math.min(i.outHeight,(i.inHeight+p-m)/o),y=0;y<u;++y)for(var x=Math.max(0,Math.ceil((c-y)/a)),b=Math.min(i.outWidth,(i.inWidth+c-y)/a),w=0;w<i.outChannels;++w){for(var S=Math.trunc(w/f),C=w%f,k=0,E=0;E<i.batchSize;++E)for(var N=v;N<g;++N)for(var T=m+N*o-p,A=x;A<b;++A){var _=y+A*a-c;k+=h.get(E,T,_,S)*d.get(E,N,A,w)}l.set(k,m,y,S,C)}return l.toTensor()},n.prototype.tile=function(e,r){return Y(e,"tile"),ok(this.bufferSync(e),r)},n.prototype.pad=function(e,r,i){Y(e,"pad");var o=r.map(function(f,h){return f[0]+e.shape[h]+f[1]}),a=r.map(function(f){return f[0]}),s=this.bufferSync(e),u=Se(o,e.dtype);i!==0&&u.values.fill(i);for(var l=0;l<e.size;l++){var c=s.indexToLoc(l),p=c.map(function(f,h){return f+a[h]});u.set.apply(u,[s.get.apply(s,c)].concat(p))}return u.toTensor()},n.prototype.transpose=function(e,r){Y(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[r[o]];var a=this.readSync(e.dataId),s=Se(i,e.dtype),u=this.bufferSync(e);for(o=0;o<e.size;++o){for(var l=u.indexToLoc(o),c=new Array(l.length),p=0;p<c.length;p++)c[p]=l[r[p]];var f=s.locToIndex(c);s.values[f]=a[o]}return s.toTensor()},n.prototype.gather=function(e,r,i){Y([e,r],"gather");var o=e.shape.slice(),a=this.readSync(r.dataId);o[i]=a.length;for(var s=Se(o,e.dtype),u=this.bufferSync(e),l=0;l<s.size;++l){var c=s.indexToLoc(l),p=c.slice();p[i]=a[c[i]];var f=u.locToIndex(p);s.values[l]=u.values[f]}return s.toTensor()},n.prototype.batchToSpaceND=function(e,r,i){Y([e],"batchToSpaceND");var o=r.reduce(function(p,f){return p*f}),a=Pp(e.shape,r,o),s=Bp(a.length,r.length),u=Vp(e.shape,r,o),l=YS(i,r.length),c=QS(u,i,r.length);return e.reshape(a).transpose(s).reshape(u).slice(l,c)},n.prototype.spaceToBatchND=function(e,r,i){Y([e],"spaceToBatchND");var o=r.reduce(function(f,h){return f*h}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<e.shape.length;++s)a.push([0,0]);var u=e.pad(a),l=Pp(u.shape,r,o,!1),c=Bp(l.length,r.length,!1),p=Vp(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(p)},n.prototype.pool=function(e,r,i){Y(e,"pool");for(var o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(e.dataId),m=Se(r.outShape,e.dtype),v=m.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],y=r.outShape[2]*r.outShape[3],x=r.outShape[3],b=0;b<r.batchSize;++b)for(var w=b*g,S=b*e.strides[0],C=0;C<r.inChannels;++C)for(var k=0;k<r.outHeight;++k)for(var E=k*o-p,N=Math.max(0,E),T=Math.min(r.inHeight,l+E),A=w+k*y,_=0;_<r.outWidth;++_){for(var M=_*a-f,W=Math.max(0,M),L=Math.min(r.inWidth,c+M),U=h,O=0,V=0,$=N;$<T;$+=s){for(var K=S+$*e.strides[1],Q=W;Q<L;Q+=u){var ee=d[K+Q*e.strides[2]+C];i==="max"&&ee>U?U=ee:i==="avg"&&(O+=ee,V++)}if(isNaN(U))break}v[A+_*x+C]=i==="avg"?O/V:U}return m.toTensor()},n.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},n.prototype.maxPoolPositions=function(e,r){for(var i=Se(r.outShape,"int32"),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,h=this.bufferSync(e),d=0;d<r.batchSize;++d)for(var m=0;m<r.inChannels;++m)for(var v=0;v<r.outHeight;++v){for(var g=v*o-p,y=g;y<0;)y+=s;for(var x=Math.min(r.inHeight,l+g),b=0;b<r.outWidth;++b){for(var w=b*a-f,S=w;S<0;)S+=u;for(var C=Math.min(r.inWidth,c+w),k=Number.NEGATIVE_INFINITY,E=-1,N=y;N<x;N+=s)for(var T=N-g,A=S;A<C;A+=u){var _=A-w,M=h.get(d,N,A,m);M>k&&(k=M,E=T*c+_)}i.set(E,d,v,b,m)}}return i.toTensor()},n.prototype.maxPoolBackprop=function(e,r,i,o){Y([r,i],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,o),s=o.strideHeight,u=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,p=o.effectiveFilterHeight,f=o.effectiveFilterWidth,h=f-1-o.padInfo.left,d=p-1-o.padInfo.top,m=Se(r.shape,"float32"),v=this.bufferSync(a),g=this.bufferSync(e),y=0;y<o.batchSize;++y)for(var x=0;x<o.inChannels;++x)for(var b=0;b<o.inHeight;++b)for(var w=0;w<o.inWidth;++w){for(var S=b-d,C=w-h,k=0,E=0;E<p;E+=l){var N=(S+E)/s;if(!(N<0||N>=o.outHeight||Math.floor(N)!==N))for(var T=0;T<f;T+=c){var A=(C+T)/u;if(!(A<0||A>=o.outWidth||Math.floor(A)!==A)){var _=p*f-1-v.get(y,N,A,x)===E*f+T?1:0;_!==0&&(k+=g.get(y,N,A,x)*_)}}}m.set(k,y,b,w,x)}return m.toTensor()},n.prototype.avgPoolBackprop=function(e,r,i){Y([e,r],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,h=f-1-i.padInfo.left,d=p-1-i.padInfo.top,m=Se(r.shape,"float32"),v=1/(s*u),g=this.bufferSync(e),y=0;y<i.batchSize;++y)for(var x=0;x<i.inChannels;++x)for(var b=0;b<i.inHeight;++b)for(var w=0;w<i.inWidth;++w){for(var S=b-d,C=w-h,k=0,E=0;E<p;E+=l){var N=(S+E)/o;if(!(N<0||N>=i.outHeight||Math.floor(N)!==N))for(var T=0;T<f;T+=c){var A=(C+T)/a;A<0||A>=i.outWidth||Math.floor(A)!==A||(k+=g.get(y,N,A,x))}}m.set(k*v,y,b,w,x)}return m.toTensor()},n.prototype.pool3d=function(e,r,i){Y(e,"pool3d");for(var o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,p=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.front,m=r.padInfo.top,v=r.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(e.dataId),x=Se(r.outShape,e.dtype),b=x.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[3]*r.outShape[4],k=r.outShape[4],E=0;E<r.batchSize;++E)for(var N=E*w,T=E*e.strides[0],A=0;A<r.inChannels;++A)for(var _=0;_<r.outDepth;++_){for(var M=_*o-d,W=M;W<0;)W+=u;for(var L=Math.min(r.inDepth,p+M),U=N+_*S,O=0;O<r.outHeight;++O){for(var V=O*a-m,$=V;$<0;)$+=l;for(var K=Math.min(r.inHeight,f+V),Q=U+O*C,ee=0;ee<r.outWidth;++ee){for(var ue=ee*s-v,le=ue;le<0;)le+=c;for(var te=Math.min(r.inWidth,h+ue),de=Q+ee*k,ge=g,ve=0,$e=0,he=W;he<L;he+=u){for(var Ce=T+he*e.strides[1],_e=$;_e<K;_e+=l){for(var ke=Ce+_e*e.strides[2],Xe=le;Xe<te;Xe+=c){var Be=y[ke+Xe*e.strides[3]+A];if(i==="max"&&Be>ge?ge=Be:i==="avg"&&(ve+=Be,$e++),isNaN(ge))break}if(isNaN(ge))break}if(isNaN(ge))break}b[de+A]=i==="avg"?ve/$e:ge}}}return x.toTensor()},n.prototype.avgPool3d=function(e,r){return Y(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,i){Y([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,p=i.dilationDepth,f=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,m=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=d-1-i.padInfo.front,y=v-1-i.padInfo.left,x=m-1-i.padInfo.top,b=Se(r.shape,"float32"),w=1/(u*l*c),S=this.bufferSync(e),C=0;C<i.batchSize;++C)for(var k=0;k<i.inChannels;++k)for(var E=0;E<i.inDepth;++E)for(var N=0;N<i.inHeight;++N)for(var T=0;T<i.inWidth;++T){for(var A=E-g,_=N-x,M=T-y,W=0,L=0;L<d;L+=p){var U=(A+L)/o;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var O=0;O<m;O+=f){var V=(_+O)/a;if(!(V<0||V>=i.outHeight||Math.floor(V)!==V))for(var $=0;$<v;$+=h){var K=(M+$)/s;K<0||K>=i.outWidth||Math.floor(K)!==K||(W+=S.get(C,U,V,K,k))}}}b.set(W*w,C,E,N,T,k)}return b.toTensor()},n.prototype.maxPool3d=function(e,r){return Y(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var i=Se(r.outShape,"int32"),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,p=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.front,m=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(e),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var b=0;b<r.outDepth;++b){for(var w=b*o-d,S=w;S<0;)S+=u;for(var C=Math.min(r.inDepth,p+w),k=0;k<r.outHeight;++k){for(var E=k*a-m,N=E;N<0;)N+=l;for(var T=Math.min(r.inHeight,f+E),A=0;A<r.outWidth;++A){for(var _=A*s-v,M=_;M<0;)M+=c;for(var W=Math.min(r.inWidth,h+_),L=Number.NEGATIVE_INFINITY,U=-1,O=S;O<C;O+=u)for(var V=O-w,$=N;$<T;$+=l)for(var K=$-E,Q=M;Q<W;Q+=c){var ee=Q-_,ue=g.get(y,O,$,Q,x);ue>=L&&(L=ue,U=V*f*h+K*f+ee)}i.set(U,y,b,k,A,x)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,i,o){Y([r,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,o),s=o.strideDepth,u=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,p=o.dilationHeight,f=o.dilationWidth,h=o.effectiveFilterDepth,d=o.effectiveFilterHeight,m=o.effectiveFilterWidth,v=h-1-o.padInfo.front,g=m-1-o.padInfo.left,y=d-1-o.padInfo.top,x=Se(r.shape,"float32"),b=this.bufferSync(a),w=this.bufferSync(e),S=0;S<o.batchSize;++S)for(var C=0;C<o.inChannels;++C)for(var k=0;k<o.inDepth;++k)for(var E=0;E<o.inHeight;++E)for(var N=0;N<o.inWidth;++N){for(var T=k-v,A=E-y,_=N-g,M=0,W=0;W<h;W+=c){var L=(T+W)/s;if(!(L<0||L>=o.outDepth||Math.floor(L)!==L))for(var U=0;U<d;U+=p){var O=(A+U)/u;if(!(O<0||O>=o.outHeight||Math.floor(O)!==O))for(var V=0;V<m;V+=f){var $=(_+V)/l;if(!($<0||$>=o.outWidth||Math.floor($)!==$)){var K=h*d*m-1-b.get(S,L,O,$,C)===W*d*m+U*m+V?1:0;K!==0&&(M+=w.get(S,L,O,$,C)*K)}}}}x.set(M,S,k,E,N,C)}return x.toTensor()},n.prototype.cast=function(e,r){return uy(e,r,this)},n.prototype.reshape=function(e,r){return Up(e,r)},n.prototype.avgPool=function(e,r){return Y(e,"avgPool"),this.pool(e,r,"avg").toFloat()},n.prototype.resizeBilinear=function(e,r,i,o){Y(e,"resizeBilinear");for(var a=e.shape,s=a[0],u=a[1],l=a[2],c=a[3],p=this.readSync(e.dataId),f=new Float32Array(fe([s,r,i,c])),h=[o&&r>1?u-1:u,o&&i>1?l-1:l],d=[o&&r>1?r-1:r,o&&i>1?i-1:i],m=0,v=h[0]/d[0],g=h[1]/d[1],y=0;y<s;y++)for(var x=0;x<r;x++)for(var b=v*x,w=Math.floor(b),S=b-w,C=Math.min(u-1,Math.ceil(b)),k=y*e.strides[0]+w*e.strides[1],E=y*e.strides[0]+C*e.strides[1],N=0;N<i;N++)for(var T=g*N,A=Math.floor(T),_=T-A,M=Math.min(l-1,Math.ceil(T)),W=k+A*e.strides[2],L=E+A*e.strides[2],U=k+ +M*e.strides[2],O=E+M*e.strides[2],V=0;V<c;V++){var $=p[W+V],K=p[L+V],Q=$+(p[U+V]-$)*_,ee=Q+(K+(p[O+V]-K)*_-Q)*S;f[m++]=ee}return xt(f,[s,r,i,c])},n.prototype.resizeBilinearBackprop=function(e,r,i){Y([e,r],"resizeBilinearBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=e.shape,p=c[1],f=c[2],h=new Float32Array(a*s*u*l),d=[i&&p>1?s-1:s,i&&f>1?u-1:u],m=[i&&p>1?p-1:p,i&&f>1?f-1:f],v=d[0]/m[0],g=d[1]/m[1],y=this.readSync(e.dataId),x=0,b=0;b<a;b++)for(var w=b*r.strides[0],S=0;S<p;S++)for(var C=S*v,k=Math.floor(C),E=Math.min(Math.ceil(C),s-1),N=w+k*r.strides[1],T=w+E*r.strides[1],A=C-k,_=1-A,M=0;M<f;M++)for(var W=M*g,L=Math.floor(W),U=Math.min(Math.ceil(W),u-1),O=W-L,V=1-O,$=N+L*r.strides[2],K=N+U*r.strides[2],Q=T+L*r.strides[2],ee=T+U*r.strides[2],ue=_*V,le=_*O,te=A*V,de=A*O,ge=0;ge<l;ge++){var ve=y[x++];h[$+ge]+=ve*ue,h[K+ge]+=ve*le,h[Q+ge]+=ve*te,h[ee+ge]+=ve*de}return Wi(h,[a,u,s,l],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,i,o){Y(e,"resizeNearestNeighbor");for(var a=e.shape,s=a[0],u=a[1],l=a[2],c=a[3],p=this.readSync(e.dataId),f=new Float32Array(s*r*i*c),h=[o&&r>1?u-1:u,o&&i>1?l-1:l],d=[o&&r>1?r-1:r,o&&i>1?i-1:i],m=h[0]/d[0],v=h[1]/d[1],g=0,y=0;y<s;y++)for(var x=y*e.strides[0],b=0;b<r;b++)for(var w=m*b,S=x+Math.min(u-1,o?Math.round(w):Math.floor(w))*e.strides[1],C=0;C<i;C++)for(var k=v*C,E=S+Math.min(l-1,o?Math.round(k):Math.floor(k))*e.strides[2],N=0;N<c;N++){var T=p[E+N];f[g++]=T}return xt(f,[s,r,i,c],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){Y([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=e.shape,p=c[1],f=c[2],h=new Float32Array(a*s*u*l),d=this.readSync(e.dataId),m=[i&&p>1?s-1:s,i&&f>1?u-1:u],v=[i&&p>1?p-1:p,i&&f>1?f-1:f],g=m[0]/v[0],y=m[1]/v[1],x=1/g,b=1/y,w=2*Math.ceil(x)+2,S=2*Math.ceil(b)+2,C=0;C<a;C++)for(var k=C*r.strides[0],E=0;E<s;E++)for(var N=k+E*r.strides[1],T=Math.floor(E*x),A=Math.floor(T-w/2),_=0;_<u;_++)for(var M=N+_*r.strides[2],W=Math.floor(_*b),L=Math.floor(W-S/2),U=0;U<l;U++){for(var O=0,V=0;V<w;V++){var $=V+A;if(!($<0||$>=p)){var K=k+$*e.strides[1],Q=$*g;if(E===Math.min(s-1,i?Math.round(Q):Math.floor(Q)))for(var ee=0;ee<S;ee++){var ue=ee+L;if(!(ue<0||ue>=f)){var le=K+ue*e.strides[2],te=ue*y;_===Math.min(u-1,i?Math.round(te):Math.floor(te))&&(O+=d[le+U])}}}}h[M+U]=O}return Wi(h,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,i,o,a,s){Y([e,r,i,a,s],"batchNorm");for(var u=this.readSync(e.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),p=a?this.readSync(a.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),d=f.length,m=p.length,v=c.length,g=l.length,y=0,x=0,b=0,w=0,S=0;S<u.length;++S)h[S]=f[y++]+(u[S]-l[x++])*p[b++]/Math.sqrt(c[w++]+o),y>=d&&(y=0),x>=g&&(x=0),b>=m&&(b=0),w>=v&&(w=0);return Wi(h,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,i,o,a){Y(e,"localResponseNormalization4D");var s=e.shape[3],u=s-1,l=this.readSync(e.dataId),c=e.size,p=new Float32Array(c);function f(v){for(var g=v%s,y=v-g+Math.max(0,g-r),x=v-g+Math.min(g+r,u),b=0;y<=x;y++){var w=l[y];b+=w*w}return b}for(var h=0;h<c;h++){var d=f(h),m=l[h]*Math.pow(i+o*d,-a);p[h]=m}return Wi(p,e.shape)},n.prototype.LRNGrad=function(e,r,i,o,a,s,u){Y(e,"LRNGrad");for(var l=e.shape[3],c=this.readSync(e.dataId),p=this.readSync(r.dataId),f=this.readSync(i.dataId),h=new Float32Array(e.size),d=e.size,m=0;m<d;m++){for(var v=m%l,g=m-v+Math.max(0,v-o),y=m-v+Math.min(l,v+o+1),x=0,b=g;b<y;b++)x+=Math.pow(p[b],2);for(x=s*x+a,b=g;b<y;b++){var w=-2*s*u*p[b]*f[m]/x;m===b&&(w+=Math.pow(x,-u)),w*=c[m],h[b]+=w}}return Wi(h,e.shape)},n.prototype.multinomial=function(e,r,i,o){Y(e,"multinomial");for(var a=r?e:ya(e),s=a.shape[0],u=a.shape[1],l=He([s,i],"int32"),c=this.readSync(l.dataId),p=this.readSync(a.dataId),f=0;f<s;++f){var h=f*u,d=new Float32Array(u-1);d[0]=p[h];for(var m=1;m<d.length;++m)d[m]=d[m-1]+p[h+m];for(var v=Df(o.toString()),g=f*i,y=0;y<i;++y){var x=v();c[g+y]=d.length;for(var b=0;b<d.length;b++)if(x<d[b]){c[g+y]=b;break}}}return l},n.prototype.oneHot=function(e,r,i,o){Y(e,"oneHot");var a=new Float32Array(e.size*r);a.fill(o);for(var s=this.readSync(e.dataId),u=0;u<e.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=i);return gi(a,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,i,o,a){return Y(e,"nonMaxSuppression"),cy(this.readSync(e.dataId),this.readSync(r.dataId),i,o,a)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],a=Se(e.shape,"float32"),s=Se(e.shape,"float32"),u=In(e).as2D(i,o),l=lr(e).as2D(i,o),c=0;c<i;c++)for(var p=u.slice([c,0],[1,o]),f=l.slice([c,0],[1,o]),h=_t(p,f),d=this.readSync(this.fftImpl(h,r).dataId),m=0;m<o;m++){var v=$x(d,m);a.values[c*o+m]=v.real,s.values[c*o+m]=v.imag}return _t(a.toTensor(),s.toTensor()).as2D(i,o)},n.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(a=_t(In(a).div(se(o)),lr(a).div(se(o)))),a}var s=this.readSync(e.dataId),u=function(l){for(var c=new Float32Array(l.length/2),p=new Float32Array(l.length/2),f=0;f<l.length;f+=2)c[f/2]=l[f],p[f/2]=l[f+1];return{real:c,imag:p}}(this.fourierTransformByMatmul(s,o,r));return _t(u.real,u.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,r,i){if(r===1)return e;var o=this.readSync(e.dataId),a=r/2,s=function(g){for(var y=Math.ceil(g.length/4),x=new Float32Array(y),b=new Float32Array(y),w=0;w<g.length;w+=4)x[Math.floor(w/4)]=g[w],b[Math.floor(w/4)]=g[w+1];return{real:x,imag:b}}(o),u=_t(s.real,s.imag).as1D(),l=function(g){for(var y=Math.floor(g.length/4),x=new Float32Array(y),b=new Float32Array(y),w=2;w<g.length;w+=4)x[Math.floor(w/4)]=g[w],b[Math.floor(w/4)]=g[w+1];return{real:x,imag:b}}(o),c=_t(l.real,l.imag).as1D();u=this.fftRadix2(u,a,i),c=this.fftRadix2(c,a,i);var p=function(g,y){for(var x=new Float32Array(g/2),b=new Float32Array(g/2),w=0;w<Math.ceil(g/2);w++){var S=(y?2:-2)*Math.PI*(w/g);x[w]=Math.cos(S),b[w]=Math.sin(S)}return{real:x,imag:b}}(r,i),f=_t(p.real,p.imag).mul(c),h=u.add(f),d=u.sub(f),m=In(h).concat(In(d)),v=lr(h).concat(lr(d));return _t(m,v).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=d3(a*l,r,i),p=$x(e,l);s+=p.real*c.real-p.imag*c.imag,u+=p.real*c.imag+p.imag*c.real}i&&(s/=r,u/=r),h3(o,s,u,a)}return o},n.prototype.depthToSpace=function(e,r,i){D(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),D(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],a=e.shape[1],s=e.shape[2],u=e.shape[3],l=a*r,c=s*r,p=u/(r*r),f=this.readSync(e.dataId),h=new Float32Array(o*l*c*p),d=0,m=0;m<o;++m)for(var v=0;v<l;++v)for(var g=Math.floor(v/r),y=v%r,x=0;x<c;++x)for(var b=Math.floor(x/r),w=(y*r+x%r)*p,S=0;S<p;++S){var C=S+w+u*(b+s*(g+a*m));h[d++]=f[C]}return Wi(h,[o,l,c,p])},n.prototype.broadcastedBinaryOp=function(e,r,i,o){var a=ze(e.shape,r.shape),s=Se(a,i),u=this.readSync(e.dataId),l=this.readSync(r.dataId),c=Vo(e.shape,a),p=Vo(r.shape,a),f=s.values;if(c.length+p.length===0)for(var h=0;h<f.length;++h)f[h]=o(u[h%u.length],l[h%l.length]);else{var d=this.bufferSync(e),m=this.bufferSync(r),v=function(g){var y=s.indexToLoc(g),x=y.slice(-e.rank);c.forEach(function(C){return x[C]=0});var b=d.locToIndex(x),w=y.slice(-r.rank);p.forEach(function(C){return w[C]=0});var S=m.locToIndex(w);f[g]=o(u[b],l[S])};for(h=0;h<f.length;++h)v(h)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=ze(e.shape,r.shape),a=Se(o,"float32"),s=Se(o,"float32"),u=this.readSync(e.dataId),l=this.readSync(r.dataId),c=Vo(e.shape,o),p=Vo(r.shape,o),f=a.values,h=s.values;if(c.length+p.length===0)for(var d=0;d<f.length;d++){var m=d%u.length,v=d%l.length,g=i(u[2*m],u[2*m+1],l[2*v],l[2*v+1]);f[d]=g.real,h[d]=g.imag}else{var y=this.bufferSync(this.data.get(e.dataId).complexTensors.real),x=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(w){var S=a.indexToLoc(w),C=S.slice(-e.rank);c.forEach(function(A){return C[A]=0});var k=y.locToIndex(C),E=S.slice(-r.rank);p.forEach(function(A){return E[A]=0});var N=x.locToIndex(E),T=i(u[2*k],u[2*k+1],l[2*N],l[2*N+1]);f[w]=T.real,h[w]=T.imag};for(d=0;d<f.length;d++)b(d)}return this.complex(a.toTensor(),s.toTensor())},n.prototype.split=function(e,r,i){return ik(e,r,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,i,o,a,s){for(var u=e.shape,l=u[0],c=u[1],p=u[2],f=u[3],h=r.shape[0],d=o[0],m=o[1],v=Se([h,d,m,f],e.dtype),g=this.readSync(r.dataId),y=this.readSync(i.dataId),x=this.readSync(e.dataId),b=e.strides,w=v.strides,S=0;S<h;S++){var C=4*S,k=g[C],E=g[C+1],N=g[C+2],T=g[C+3],A=y[S];if(!(A>=l))for(var _=d>1?(N-k)*(c-1)/(d-1):0,M=m>1?(T-E)*(p-1)/(m-1):0,W=0;W<d;W++){var L=d>1?k*(c-1)+W*_:.5*(k+N)*(c-1);if(L<0||L>c-1)for(var U=0;U<m;U++)for(var O=0;O<f;O++){var V=O+U*w[2]+W*w[1]+S*w[0];v.values[V]=s}else if(a==="bilinear"){var $=Math.floor(L),K=Math.ceil(L),Q=L-$;for(U=0;U<m;U++)if((he=m>1?E*(p-1)+U*M:.5*(E+T)*(p-1))<0||he>p-1)for(O=0;O<f;O++)V=O+U*w[2]+W*w[1]+S*w[0],v.values[V]=s;else{var ee=Math.floor(he),ue=Math.ceil(he),le=he-ee;for(O=0;O<f;O++){var te=x[V=O+ee*b[2]+$*b[1]+A*b[0]],de=x[V=O+ue*b[2]+$*b[1]+A*b[0]],ge=x[V=O+ee*b[2]+K*b[1]+A*b[0]],ve=te+(de-te)*le,$e=ge+(x[V=O+ue*b[2]+K*b[1]+A*b[0]]-ge)*le;V=O+U*w[2]+W*w[1]+S*w[0],v.values[V]=ve+($e-ve)*Q}}}else for(U=0;U<m;++U){var he;if((he=m>1?E*(p-1)+U*M:.5*(E+T)*(p-1))<0||he>p-1)for(O=0;O<f;O++)V=O+U*w[2]+W*w[1]+S*w[0],v.values[V]=s;else{var Ce=Math.round(he),_e=Math.round(L);for(O=0;O<f;O++){var ke=O+Ce*b[2]+_e*b[1]+A*b[0],Xe=O+U*w[2]+W*w[1]+S*w[0];v.values[Xe]=x[ke]}}}}}return v.toTensor()},n.prototype.sparseToDense=function(e,r,i,o){var a=Wp(0,e,i),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,p=a.outputSize;return this.scatter(e,r,i,p,l,u,s,c,o,!1)},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],a=ZS(e,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return xt([],s,e.dtype);for(var p=new bs([u,l],e.dtype),f=this.readSync(r.dataId),h=this.readSync(e.dataId),d=0;d<u;d++){for(var m=[],v=0,g=0;g<o;g++){var y=f[d*o+g];v+=y*c[g],m.push(y)}if(v<0||v>=e.size/l)throw new Error("Invalid indices: "+m+" does not index into "+e.shape);for(var x=0;x<l;x++)p.values[d*l+x]=h[v*l+x]}return p.toTensor().reshape(s)},n.prototype.scatterND=function(e,r,i){var o=Wp(0,e,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,p=se(0);return this.scatter(e,r,i,c,u,s,a,l,p,!0)},n.prototype.fill=function(e,r,i){var o=sl(i=i||Vs(r),fe(e));return o.fill(r),z.makeTensor(o,e,i,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=sl(e.dtype,fe(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,i){return ly(e,r,i)},n.prototype.scatter=function(e,r,i,o,a,s,u,l,c,p){var f=[o/a,a],h=this.readSync(e.dataId),d=this.readSync(r.dataId);if(o===0)return xt([],i,r.dtype);var m=new bs(f,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var v=0;v<s;v++){for(var g=[],y=0,x=0;x<u;x++){var b=h[v*u+x];g.push(b),y+=b*l[x]}if(y<0||y>=o/a)throw new Error("Invalid indices: "+g+" does not index into "+i);for(var w=0;w<a;w++)p?m.values[y*a+w]+=d[v*a+w]:m.values[y*a+w]=r.rank===0?d[0]:d[v*a+w]}return m.toTensor().reshape(i)},n}(ay);z.registerBackend("cpu",function(){return new dF},1),Um({kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,i=e;Y(r,"square");for(var o=i.data.get(r.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];a[s]=u*u}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}}),Um({kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,i=e,o=new Ie(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}});var mF=function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t}();G().get("IS_BROWSER")&&G().setPlatform("browser",new mF);var bd,gF=function(){return require("node-fetch")},vF=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return G().global.fetch!=null?G().global.fetch(n,e):(bd==null&&(bd=gF()),bd(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},t}();G().get("IS_NODE")&&G().setPlatform("node",new vF);var og={float32:4,int32:4,uint16:2,uint8:1,bool:1},jp=4;function LE(t,n){for(var e={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,p=fe(c),f=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var d=og[h.dtype],m=t.slice(r,r+p*d),v=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")f=Float32Array.from(v,function(S){return S*h.scale+h.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=Int32Array.from(v,function(S){return Math.round(S*h.scale+h.min)})}r+=p*d}else if(l==="string"){var g=fe(s.shape);f=[];for(var y=0;y<g;y++){var x=new Uint32Array(t.slice(r,r+jp))[0];r+=jp;var b=new Uint8Array(t.slice(r,r+x));f.push(b),r+=x}}else{var w=og[l];if(m=t.slice(r,r+p*w),l==="float32")f=new Float32Array(m);else if(l==="int32")f=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Uint8Array(m)}r+=p*w}e[u]=xt(f,c,l)},o=0,a=n;o<a.length;o++)i(a[o]);return e}function yF(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var ag=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function lb(t){return ag?Buffer.byteLength(t):new Blob([t]).size}function p0(t){var n=0;t.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function cb(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function $l(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:lb(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:lb(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Gn=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var i=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var a=o(n,r);a!==null&&i.push(a)}),i},t}(),is="://",ao=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){D(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(is)&&(n=n.slice(0,n.indexOf(is))),D(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();D(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function np(t){if(t.indexOf(is)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ao.getSchemes().join(","));return{scheme:t.split(is)[0],path:t.split(is)[1]}}function pb(t,n,e){return e===void 0&&(e=!1),ce(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p;return pe(this,function(f){switch(f.label){case 0:return D(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),D((r=Gn.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),D(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],D((o=Gn.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),D(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),a=o[0],s=np(t).scheme,u=np(t).path,l=s===np(t).scheme,[4,i.load()];case 1:return c=f.sent(),e&&l?[4,ao.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,a.save(c)];case 4:return p=f.sent(),!e||l?[3,6]:[4,ao.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var $o="models_store",Xi="model_info_store";function PE(){if(!G().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function sg(t){var n=t.result;n.createObjectStore($o,{keyPath:"modelPath"}),n.createObjectStore(Xi,{keyPath:"modelPath"})}var os=function(){function t(n){if(this.indexedDB=PE(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return ce(this,void 0,void 0,function(){return pe(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return ce(this,void 0,void 0,function(){return pe(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(i,o){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return sg(a)},a.onsuccess=function(){var s=a.result;if(e==null){var u=s.transaction($o,"readonly"),l=u.objectStore($o).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),o(l.error)},u.oncomplete=function(){return s.close()}}else{var c,p=$l(e),f=s.transaction(Xi,"readwrite"),h=f.objectStore(Xi),d=h.put({modelPath:r.modelPath,modelArtifactsInfo:p});d.onsuccess=function(){var m=(c=s.transaction($o,"readwrite")).objectStore($o).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:p});m.onsuccess=function(){return i({modelArtifactsInfo:p})},m.onerror=function(v){var g=(h=f.objectStore(Xi)).delete(r.modelPath);g.onsuccess=function(){return s.close(),o(m.error)},g.onerror=function(y){return s.close(),o(m.error)}}},d.onerror=function(m){return s.close(),o(d.error)},f.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),fb=function(t){return G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(os.URL_SCHEME)?(n=t.slice(os.URL_SCHEME.length),new os(n)):null;var n};Gn.registerSaveRouter(fb),Gn.registerLoadRouter(fb);var xF=function(){function t(){this.indexedDB=PE()}return t.prototype.listModels=function(){return ce(this,void 0,void 0,function(){var n=this;return pe(this,function(e){return[2,new Promise(function(r,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return sg(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(Xi,"readonly"),u=s.objectStore(Xi).getAll();u.onsuccess=function(){for(var l={},c=0,p=u.result;c<p.length;c++){var f=p[c];l[f.modelPath]=f.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),i(u.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},t.prototype.removeModel=function(n){return ce(this,void 0,void 0,function(){var e=this;return pe(this,function(r){var i;return n=(i=n).startsWith(os.URL_SCHEME)?i.slice(os.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return sg(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(Xi,"readwrite"),p=c.objectStore(Xi),f=p.get(n);f.onsuccess=function(){if(f.result==null)return l.close(),a(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var h=p.delete(n),d=function(){var m=(u=l.transaction($o,"readwrite")).objectStore($o).delete(n);m.onsuccess=function(){return o(f.result.modelArtifactsInfo)},m.onerror=function(v){return a(f.error)}};h.onsuccess=d,h.onerror=function(m){return d(),l.close(),a(f.error)}},f.onerror=function(h){return l.close(),a(f.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},t}();if(G().getBool("IS_BROWSER"))try{ao.registerManager(os.URL_SCHEME,new xF)}catch{}var fi="/",Ma="tensorflowjs_models",BE="info",bF="model_topology",wF="weight_specs",CF="weight_data",SF="model_metadata";function VE(t){return{info:[Ma,t,BE].join(fi),topology:[Ma,t,bF].join(fi),weightSpecs:[Ma,t,wF].join(fi),weightData:[Ma,t,CF].join(fi),modelMetadata:[Ma,t,SF].join(fi)}}function kF(t){var n=t.split(fi);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(fi)}var as=function(){function t(n){if(!G().getBool("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=VE(this.modelPath)}return t.prototype.save=function(n){return ce(this,void 0,void 0,function(){var e,r,i;return pe(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),i=$l(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(a=n.weightData,ag?Buffer.from(a).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(a))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}var a;return[2]})})},t.prototype.load=function(){return ce(this,void 0,void 0,function(){var n,e,r,i,o,a,s;return pe(this,function(u){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(l){if(ag){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var p=atob(l),f=new Uint8Array(p.length),h=0;h<p.length;++h)f.set([p.charCodeAt(h)],h);return f.buffer}(s),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),hb=function(t){return G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(as.URL_SCHEME)?(n=t.slice(as.URL_SCHEME.length),new as(n)):null;var n};Gn.registerSaveRouter(hb),Gn.registerLoadRouter(hb);var EF=function(){function t(){D(G().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),D(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return ce(this,void 0,void 0,function(){var n,e,r,i,o,a;return pe(this,function(s){for(n={},e=Ma+fi,r=fi+BE,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(a=kF(o),n[a]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return ce(this,void 0,void 0,function(){var e,r;return pe(this,function(i){var o;if(n=(o=n).startsWith(as.URL_SCHEME)?o.slice(as.URL_SCHEME.length):o,e=VE(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(G().getBool("IS_BROWSER"))try{ao.registerManager(as.URL_SCHEME,new EF)}catch{}var NF="model",IF=".json",AF=".weights.bin";function db(t){return new Promise(function(n){return setTimeout(n)}).then(t)}var wd=function(){function t(n){if(!G().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=NF),this.modelTopologyFileName=n+IF,this.weightDataFileName=n+AF}return t.prototype.save=function(n){return ce(this,void 0,void 0,function(){var e,r,i,o,a,s;return pe(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,db(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,db(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:$l(n)}]}})})},t.URL_SCHEME="downloads://",t}(),RF=function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return ce(this,void 0,void 0,function(){var n,e,r=this;return pe(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){e.length===0&&o({modelTopology:c});var p=l.weightsManifest;if(p!=null){var f;try{f=r.checkManifestAndWeightFiles(p,e)}catch(v){return void a(v)}var h=[],d=[],m=[];p.forEach(function(v){v.paths.forEach(function(g){d.push(g),m.push(null)}),h.push.apply(h,v.weights)}),p.forEach(function(v){v.paths.forEach(function(g){var y=new FileReader;y.onload=function(x){var b=x.target.result,w=d.indexOf(g);m[w]=b,m.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:h,weightData:p0(m)})},y.onerror=function(x){return a("Failed to weights data from file of path '"+g+"'.")},y.readAsArrayBuffer(f[g])})})}else a(new Error("weightManifest field is missing from file "+n.name))}else a(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],i=e.map(function(u){return cb(u.name)}),o={},a=0,s=n;a<s.length;a++)s[a].paths.forEach(function(u){var l=cb(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[u]=e[i.indexOf(l)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}();function mb(t,n,e,r){(function(o){D(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,a){D(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),D(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),D(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(e=e??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(a){var s=e+ ++i/t.length*(r-e);return n(s),a}),o}))}function WE(t,n){return ce(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c;return pe(this,function(p){switch(p.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?G().platform.fetch:n.fetchFunc,r=t.map(function(f){return e(f,n.requestInit,{isBinary:!0})}),i=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=p.sent(),[3,4];case 2:return[4,mb(r,n.onProgress,i,o)];case 3:a=p.sent(),p.label=4;case 4:return s=a.map(function(f){return f.arrayBuffer()}),u=.5,l=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=p.sent(),[3,8];case 6:return[4,mb(s,n.onProgress,u,l)];case 7:c=p.sent(),p.label=8;case 8:return[2,c]}})})}function gb(t){var n=this;return function(e,r,i){return r===void 0&&(r=""),ce(n,void 0,void 0,function(){var o,a,s,u,l,c,p,f,h,d;return pe(this,function(m){switch(m.label){case 0:if(o=e.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],u=[],e.forEach(function(v,g){var y=0;v.weights.forEach(function(x){var b="quantization"in x?x.quantization.dtype:x.dtype,w=og[b]*fe(x.shape),S=function(){o[g]=!0,a[g]==null&&(a[g]=[]),a[g].push({manifestEntry:x,groupOffset:y,sizeBytes:w})};i!=null?i.forEach(function(C,k){C===x.name&&(S(),s[k]=!0)}):S(),u.push(x.name),y+=w})}),!s.every(function(v){return v}))throw l=i.filter(function(v,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=o.reduce(function(v,g,y){return g&&v.push(y),v},[]),p=[],c.forEach(function(v){e[v].paths.forEach(function(g){var y=r+(r.endsWith("/")?"":"/")+g;p.push(y)})}),[4,t(p)];case 1:return f=m.sent(),h={},d=0,c.forEach(function(v){for(var g=e[v].paths.length,y=0,x=0;x<g;x++)y+=f[d+x].byteLength;for(var b=new ArrayBuffer(y),w=new Uint8Array(b),S=0,C=0;C<g;C++){var k=new Uint8Array(f[d+C]);w.set(k,S),S+=k.byteLength}a[v].forEach(function(E){var N=LE(b.slice(E.groupOffset,E.groupOffset+E.sizeBytes),[E.manifestEntry]);for(var T in N)h[T]=N[T]}),d+=g}),[2,h]}})})}}Gn.registerSaveRouter(function(t){return G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(wd.URL_SCHEME)?(n=t.slice(wd.URL_SCHEME.length),n===void 0&&(n="model"),new wd(n)):null;var n});var $E=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(D(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=G().platform.fetch,D(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&D(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return ce(this,void 0,void 0,function(){var e,r,i,o;return pe(this,function(a){switch(a.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:$l(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return ce(this,void 0,void 0,function(){var n,e,r,i,o,a,s,u;return pe(this,function(l){switch(l.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=l.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");l.label=2;case 2:return l.trys.push([2,4,,5]),[4,n.json()];case 3:return e=l.sent(),[3,5];case 4:throw l.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=e.modelTopology,o=e.weightsManifest,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:u=l.sent(),a=u[0],s=u[1],l.label=7;case 7:return[2,{modelTopology:i,weightSpecs:a,weightData:s}]}})})},t.prototype.loadWeights=function(n){return ce(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,p,f;return pe(this,function(h){switch(h.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=function(d){var m=d.lastIndexOf("/"),v=d.lastIndexOf("?"),g=d.substring(0,m),y=v>m?d.substring(v):"";return[g+"/",y]}(e),i=r[0],o=r[1],a=this.weightPathPrefix||i,s=[],u=0,l=n;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return p=[],n.forEach(function(d){d.paths.forEach(function(m){p.push(a+m+o)})}),[4,WE(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[s,p0(f)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function ug(t){return t.match($E.URL_SCHEME_REGEX)!=null}var vb=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return ug(e)}):ug(t))?lg(t,{onProgress:n}):null};function lg(t,n){return new $E(t,n)}Gn.registerSaveRouter(vb),Gn.registerLoadRouter(vb);var Cd=function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return ce(this,void 0,void 0,function(){return pe(this,function(n){return[2,this.modelArtifacts]})})},t}(),TF=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return ce(this,void 0,void 0,function(){return pe(this,function(e){return[2,this.saveHandler(n)]})})},t}(),qn=Object.freeze({browserFiles:function(t){return new RF(t)},browserHTTPRequest:function(t,n){return lg(t,n)},concatenateArrayBuffers:p0,decodeWeights:LE,encodeWeights:function(t,n){return ce(this,void 0,void 0,function(){var e,r,i,o,a,s=this;return pe(this,function(u){switch(u.label){case 0:for(e=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),o=function(l){var c=i[l],p=Array.isArray(t)?t[l].tensor:t[c];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+p.dtype);var f={name:c,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var h=new Promise(function(d){return ce(s,void 0,void 0,function(){var m,v,g,y,x,b,w;return pe(this,function(S){switch(S.label){case 0:return[4,p.bytes()];case 1:for(m=S.sent(),v=m.reduce(function(C,k){return C+k.length},0)+jp*m.length,g=new Uint8Array(v),y=0,x=0;x<m.length;x++)b=m[x],w=new Uint8Array(new Uint32Array([b.length]).buffer),g.set(w,y),y+=jp,g.set(b,y),y+=b.length;return d(g),[2]}})})});r.push(h)}else r.push(p.data());n!=null&&(f.group=n),e.push(f)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:yF(u.sent()),specs:e}]}})})},fromMemory:function(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Cd(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Cd({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Cd({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return Gn.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:$l,getSaveHandlers:function(t){return Gn.getSaveHandlers(t)},http:lg,isHTTPScheme:ug,loadWeights:function(t,n,e,r){return n===void 0&&(n=""),ce(this,void 0,void 0,function(){return pe(this,function(i){return[2,gb(function(o){return WE(o,{requestInit:r})})(t,n,e)]})})},registerLoadRouter:function(t){return Gn.registerLoadRouter(t)},registerSaveRouter:function(t){return Gn.registerSaveRouter(t)},weightsLoaderFactory:gb,withSaveHandler:function(t){return new TF(t)},copyModel:function(t,n){return ce(this,void 0,void 0,function(){return pe(this,function(e){return[2,pb(t,n,!1)]})})},listModels:function(){return ce(this,void 0,void 0,function(){var t,n,e,r,i,o,a;return pe(this,function(s){switch(s.label){case 0:t=ao.getSchemes(),n={},e=0,r=t,s.label=1;case 1:return e<r.length?(i=r[e],[4,ao.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())n[i+is+a]=o[a];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(t,n){return ce(this,void 0,void 0,function(){return pe(this,function(e){return[2,pb(t,n,!0)]})})},removeModel:function(t){return ce(this,void 0,void 0,function(){var n;return pe(this,function(e){return n=np(t),[2,ao.getManager(n.scheme).removeModel(n.path)]})})}}),DF=F({confusionMatrix_:function(t,n,e){var r=R(t,"labels","confusionMatrix"),i=R(n,"predictions","confusionMatrix");D(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),D(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),D(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),D(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),D(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=ws(r.asType("int32"),e),a=ws(i.asType("int32"),e);return o.transpose().matMul(a).asType("int32")}}),OF=Object.freeze({confusionMatrix:DF}),_F=F({fromPixels_:function(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");var e=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(e&&e&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");return z.fromPixels(t,n)}}),UE=Object.freeze({toPixels:function(t,n){return ce(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,p,f,h,d,m,v,g,y,x,b,w,S,C,k;return pe(this,function(E){switch(E.label){case 0:if(e=R(t,"img","toPixels"),t instanceof Ge||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(a=e.rank===2?1:e.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,e.data()];case 1:return s=E.sent(),u=e.min(),l=e.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=E.sent(),p=c[0],f=c[1],h=p[0],d=f[0],u.dispose(),l.dispose(),e.dtype==="float32"){if(h<0||d>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+d+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(h<0||d>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+d+"].")}for(m=e.dtype==="float32"?255:1,v=new Uint8ClampedArray(o*i*4),g=0;g<i*o;++g)y=void 0,x=void 0,b=void 0,w=void 0,a===1?(y=s[g]*m,x=s[g]*m,b=s[g]*m,w=255):a===3?(y=s[3*g]*m,x=s[3*g+1]*m,b=s[3*g+2]*m,w=255):a===4&&(y=s[4*g]*m,x=s[4*g+1]*m,b=s[4*g+2]*m,w=s[4*g+3]*m),v[0+(S=4*g)]=Math.round(y),v[S+1]=Math.round(x),v[S+2]=Math.round(b),v[S+3]=Math.round(w);return n!=null&&(n.width=o,n.height=i,C=n.getContext("2d"),k=new ImageData(v,o,i),C.putImageData(k,0,0)),e!==t&&e.dispose(),[2,v]}})})},fromPixels:_F}),jE=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),HE=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function Eo(t){D(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),D(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),D(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),HE.register(t)}var Z=Object.freeze({Serializable:jE,SerializationMap:HE,registerClass:Eo}),zF=.001,GE=.1;function Sd(){return z.backend.floatPrecision()===32?zF:GE}function kd(t,n,e){var r=!0;if((Qt(t)||Qt(n))&&(r=!1),Qt(t)&&Qt(n)&&(r=!0),r){var i=t.constructor.name,o=n.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(t)&&Array.isArray(n)){var a=Xr(t),s=Xr(n);if(!Ht(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=Qt(t)?t:Ei(t),l=Qt(n)?n:Ei(n);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+`.
Actual:   `+u+`.
Expected: `+l+".");for(var c=0;c<l.length;++c){var p=u[c],f=l[c];if(!e(p,f))throw new Error("Arrays differ: actual["+c+"] = "+p+", expected["+c+"] = "+f+`.
Actual:   `+u+`.
Expected: `+l+".")}}function Ed(t,n,e){return!isFinite(t)&&!isFinite(n)||!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}var FF=Object.freeze({TEST_EPSILON_FLOAT16:GE,expectArraysClose:function(t,n,e){return e==null&&(e=Sd()),kd(t,n,function(r,i){return Ed(r,i,e)})},testEpsilon:Sd,expectPromiseToFail:function(t,n){t().then(function(){return n.fail()},function(){return n()})},expectArraysEqual:function(t,n){var e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return Ki(t)||Ki(t[0])||Ki(n)||Ki(n[0])?kd(t,e,function(r,i){return r==i}):kd(t,n,function(r,i){return Ed(r,i,0)})},expectNumbersClose:function(t,n,e){if(e==null&&(e=Sd()),!Ed(t,n,e))throw new Error("Numbers differ: actual === "+t+", expected === "+n)},expectValuesInRange:function(t,n,e){for(var r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error("Value out of range:"+t[r]+" low: "+n+", high: "+e)},expectArrayBuffersEqual:function(t,n){expect(new Float32Array(t)).toEqual(new Float32Array(n))}}),qE="1.3.1",MF=Object.freeze({gpgpu_util:az,webgl_util:M_,forceHalfFloat:function(){G().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Fk,setWebGLContext:cS,GPGPUContext:Ak}),Oi=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return _r(n,t),n.prototype.minimize=function(e,r,i){r===void 0&&(r=!1);var o=this.computeGradients(e,i),a=o.value,s=o.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return Te(s),r?a:(a.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return rk(e,r)},n.prototype.dispose=function(){this.iterations_!=null&&Te(this.iterations_)},n.prototype.saveIterations=function(){return ce(this,void 0,void 0,function(){return pe(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:se(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){return pe(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){return pe(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return ce(this,void 0,void 0,function(){var r;return pe(this,function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}})})},n}(jE);Object.defineProperty(Oi,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var f0=function(t){function n(e,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=z.backend.epsilon()),o}return _r(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=z.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:j(function(){return Fe(a).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:j(function(){return Fe(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var u=r.accumulatedGrads[o].variable,l=r.accumulatedUpdates[o].variable;j(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),p=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),f=l.mul(r.rho).add(p.square().mul(1-r.rho));u.assign(c),l.assign(f);var h=p.mul(-r.learningRate).add(a);a.assign(h)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Te(this.accumulatedGrads.map(function(e){return e.variable})),Te(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){var e;return pe(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){var r;return pe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(Oi);Eo(f0);var h0=function(t){function n(e,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return _r(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=z.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:j(function(){return $s(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var u=r.accumulatedGrads[o].variable;j(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(z.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&Te(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){return pe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(Oi);Eo(h0);var d0=function(t){function n(e,r,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],j(function(){a.accBeta1=se(r).variable(),a.accBeta2=se(i).variable()}),o==null&&(a.epsilon=z.backend.epsilon()),a}return _r(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);j(function(){var o=Gt(1,r.accBeta1),a=Gt(1,r.accBeta2);i.forEach(function(s,u){var l=z.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:j(function(){return Fe(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:j(function(){return Fe(l).variable(!1)})});var c=Array.isArray(e)?e[u].tensor:e[s];if(c!=null){var p=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,h=p.mul(r.beta1).add(c.mul(1-r.beta1)),d=f.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(o),v=d.div(a);p.assign(h),f.assign(d);var g=m.div(v.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Te(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&Te(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){var e;return pe(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){var r,i=this;return pe(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),j(function(){i.accBeta1.assign(Ss(i.beta1,i.iterations_+1)),i.accBeta2.assign(Ss(i.beta2,i.iterations_+1))}),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(Oi);Eo(d0);var m0=function(t){function n(e,r,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],j(function(){s.iteration=se(0).variable(),s.accBeta1=se(r).variable()}),o==null&&(s.epsilon=z.backend.epsilon()),s}return _r(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);j(function(){var o=Gt(1,r.accBeta1),a=ln(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=z.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Fe(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Fe(l).variable(!1)});var c=Array.isArray(e)?e[u].tensor:e[s];if(c!=null){var p=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,h=p.mul(r.beta1).add(c.mul(1-r.beta1)),d=f.mul(r.beta2),m=c.abs(),v=d.maximum(m);p.assign(h),f.assign(v);var g=a.div(o).mul(h.div(v.add(r.epsilon))).add(l);l.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Te(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&Te(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){return pe(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){return pe(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(Oi);Eo(m0);var dh=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return _r(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var s=z.registeredVariables[i];j(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Kr(se(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){return pe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n}(Oi);Eo(dh);var g0=function(t){function n(e,r,i){i===void 0&&(i=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=se(o.momentum),o}return _r(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=z.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:j(function(){return Fe(a).variable(!1)})});var s=r.accumulations[o].variable,u=Array.isArray(e)?e[o].tensor:e[i];u!=null&&j(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Te(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){return pe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(dh);Eo(g0);var v0=function(t){function n(e,r,i,o,a){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=t.call(this)||this;return s.learningRate=e,s.decay=r,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=z.backend.epsilon()),s}return _r(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=z.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:j(function(){return Fe(a).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:j(function(){return Fe(a).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:j(function(){return Fe(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var u=r.accumulatedMeanSquares[o].variable,l=r.accumulatedMoments[o].variable;j(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[o].variable,f=p.mul(r.decay).add(s.mul(1-r.decay)),h=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(f.square().add(r.epsilon)).sqrt()));u.assign(c),p.assign(f),l.assign(h);var d=a.sub(h);a.assign(d)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));h=l.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(h),d=a.sub(h),a.assign(d)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Te(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Te(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&Te(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return ce(this,void 0,void 0,function(){var e;return pe(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return ce(this,void 0,void 0,function(){var r;return pe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(Oi);Eo(v0);var Io=function(){function t(){}return t.sgd=function(n){return new dh(n)},t.momentum=function(n,e,r){return r===void 0&&(r=!1),new g0(n,e,r)},t.rmsprop=function(n,e,r,i,o){return e===void 0&&(e=.9),r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=!1),new v0(n,e,r,i,o)},t.adam=function(n,e,r,i){return n===void 0&&(n=.001),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new d0(n,e,r,i)},t.adadelta=function(n,e,r){return n===void 0&&(n=.001),e===void 0&&(e=.95),r===void 0&&(r=null),new f0(n,e,r)},t.adamax=function(n,e,r,i,o){return n===void 0&&(n=.002),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),o===void 0&&(o=0),new m0(n,e,r,i,o)},t.adagrad=function(n,e){return e===void 0&&(e=.1),new h0(n,e)},t}(),Oo={sgd:Io.sgd,momentum:Io.momentum,adadelta:Io.adadelta,adagrad:Io.adagrad,rmsprop:Io.rmsprop,adamax:Io.adamax,adam:Io.adam},LF=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(t){return t()};function rp(){return new Promise(function(t){return LF(function(){return t()})})}q=hF;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var KE=function(t,n){return(KE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function X(t,n){function e(){this.constructor=t}KE(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var Nd,Cu=function(){return(Cu=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function be(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function ye(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(p){c=[6,p],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}function It(){return Nd==null&&(Nd=MS().epsilon()),Nd}function Dr(){return"channelsLast"}var _o=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return X(n,t),n}(Error),jr=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return X(n,t),n}(Error),B=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return X(n,t),n}(Error),Ee=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return X(n,t),n}(Error),PF=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return X(n,t),n}(Error);(function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return X(n,t),n})(Error);function la(t,n){if(Array.isArray(t)){for(var e=[],r=0;r<n;r++)e=e.concat(t);return e}return(e=new Array(n)).fill(t),e}function Wr(t,n){if(!t)throw new PF(n)}function yb(t,n){for(var e=0,r=0,i=t;r<i.length;r++)i[r]===n&&e++;return e}function dn(t){return t.length===1?t[0]:t}function Je(t){return Array.isArray(t)?t:[t]}function ci(t){var n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Fo(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,function(n,e){return e.toUpperCase()})}var ar={};function y0(t){if(t==null)return null;var n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function cg(t){if(t!=null&&typeof t=="object")if(Array.isArray(t))t.forEach(function(o){return cg(o)});else for(var n=0,e=Object.keys(t);n<e.length;n++){var r=e[n],i=t[r];i!=null&&typeof i=="object"&&(Array.isArray(i)||i.type!=="ndarray"||typeof i.value!="number"?cg(i):t[r]=i.value)}}function Ul(t,n,e,r,i){var o,a,s;if(n===void 0&&(n={}),e===void 0&&(e={}),r===void 0&&(r="object"),i===void 0&&(i=!1),typeof t=="string"){var u=t,l=void 0;if(u in e)l=e[u];else if(u in ar)l=ar[u];else if((l=n[u])==null)throw new B("Unknown "+r+": "+t+`. This may be due to one of the following reasons:
1. The `+r+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return l}var c=t;if(c.className==null||c.config==null)throw new B(r+": Improper config format: "+JSON.stringify(c)+`.
'className' and 'config' must set.`);var p=c.className,f=void 0,h=void 0;if(p in e?(f=(o=e[p])[0],h=o[1]):p in ar?(f=(a=ar.className)[0],h=a[1]):p in n&&(f=(s=n[p])[0],h=s[1]),f==null)throw new B("Unknown "+r+": "+p+`. This may be due to one of the following reasons:
1. The `+r+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(h!=null){for(var d={},m=0,v=Object.keys(ar);m<v.length;m++)d[S=v[m]]=ar[S];for(var g=0,y=Object.keys(e);g<y.length;g++)d[S=y[g]]=e[S];c.config.customObjects=d;for(var x=Cu({},ar),b=0,w=Object.keys(e);b<w.length;b++){var S=w[b];ar[S]=e[S]}cg(c.config);var C=h(f,c.config,e,i);return ar=Cu({},x),C}x=Cu({},ar);for(var k=0,E=Object.keys(e);k<E.length;k++)S=E[k],ar[S]=e[S];return C=new f(c.config),ar=Cu({},x),C}function BF(t,n){return t<n?-1:t>n?1:0}function Ec(t,n){return-1*BF(t,n)}function so(t){if(t==null)return t;for(var n=[],e=0,r=t;e<r.length;e++){var i=r[e];n.indexOf(i)===-1&&n.push(i)}return n}function VF(t){if(t==null)throw new B("Invalid value in obj: "+JSON.stringify(t));for(var n in t)if(t.hasOwnProperty(n))return!1;return!0}function Xs(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new B(e+" is not a valid "+n+".  Valid values are "+t+" or null/undefined.")}function x0(t,n,e,r){return e===void 0&&(e=0),r===void 0&&(r=1/0),Wr(e>=0),Wr(r>=e),Array.isArray(t)&&t.length>=e&&t.length<=r&&t.every(function(i){return typeof i===n})}function xn(t,n){Array.isArray(t)?(me.assert(t.length>0,function(){return n+" is unexpectedly an empty array."}),t.forEach(function(e,r){return xn(e,"element "+(r+1)+" of "+n)})):me.assert(Number.isInteger(t)&&t>0,function(){return"Expected "+n+" to be a positive integer, but got "+XE(t)+"."})}function XE(t){return t===null?"null":Array.isArray(t)?"["+t.map(function(n){return XE(n)}).join(",")+"]":typeof t=="string"?'"'+t+'"':""+t}function WF(t,n){var e,r=me.now();return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=me.now();return a-r<n?e:(r=a,e=t.apply(void 0,i))}}function YE(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}function b0(t,n){return j(function(){return zl(Fn(Kf(t,t),n,!0))})}var jl=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.getConfig=function(){return{}},n}(Z.Serializable),QE=function(t){function n(e){var r=t.call(this)||this;return r.defaultMaxValue=2,r.defaultAxis=0,r.maxValue=e.maxValue!=null?e.maxValue:r.defaultMaxValue,r.axis=e.axis!=null?e.axis:r.defaultAxis,r}return X(n,t),n.prototype.apply=function(e){var r=this;return j(function(){var i=b0(e,r.axis),o=yn(i,0,r.maxValue);return we(e,ln(o,Oe(It(),i)))})},n.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},n.className="MaxNorm",n}(jl);Z.registerClass(QE);var ZE=function(t){function n(e){var r=t.call(this)||this;return r.defaultAxis=0,r.axis=e.axis!=null?e.axis:r.defaultAxis,r}return X(n,t),n.prototype.apply=function(e){var r=this;return j(function(){return ln(e,Oe(It(),b0(e,r.axis)))})},n.prototype.getConfig=function(){return{axis:this.axis}},n.className="UnitNorm",n}(jl);Z.registerClass(ZE);var JE=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return ko(e)},n.className="NonNeg",n}(jl);Z.registerClass(JE);var eN=function(t){function n(e){var r=t.call(this)||this;return r.defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=e.minValue!=null?e.minValue:r.defaultMinValue,r.maxValue=e.maxValue!=null?e.maxValue:r.defaultMaxValue,r.rate=e.rate!=null?e.rate:r.defaultRate,r.axis=e.axis!=null?e.axis:r.defaultAxis,r}return X(n,t),n.prototype.apply=function(e){var r=this;return j(function(){var i=b0(e,r.axis),o=Oe(we(r.rate,yn(i,r.minValue,r.maxValue)),we(1-r.rate,i));return we(e,ln(o,Oe(It(),i)))})},n.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},n.className="MinMaxNorm",n}(jl);Z.registerClass(eN);var xb={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ke(t){return y0(t)}function bb(t,n){return n===void 0&&(n={}),Ul(t,Z.SerializationMap.getMap().classNameMap,n,"constraint")}function At(t){return t==null?null:typeof t=="string"?bb({className:t in xb?xb[t]:t,config:{}}):t instanceof jl?t:bb(t)}function $F(t){return new QE(t)}function UF(t){return new ZE(t)}function jF(){return new JE}function HF(t){return new eN(t)}var GF=Object.freeze({maxNorm:$F,unitNorm:UF,nonNeg:jF,minMaxNorm:HF}),qF=["channelsFirst","channelsLast"],KF=["valid","same","causal"],XF=["max","avg"],YF=["sum","mul","concat","ave"],Oa=new Map;function Tt(t){Xs(qF,"DataFormat",t)}function mr(t){Xs(KF,"PaddingMode",t)}function tN(t){Xs(XF,"PoolMode",t)}var Pu=[],wb="/";function Zo(t,n){Pu.push(t);try{var e=n();return Pu.pop(),e}catch(r){throw Pu.pop(),r}}function QF(){return Pu.length===0?"":Pu.join(wb)+wb}function nN(t){if(!iN(t))throw new Error("Not a valid tensor name: '"+t+"'");return QF()+t}function rN(t){if(!iN(t))throw new Error("Not a valid tensor name: '"+t+"'");Oa.has(t)||Oa.set(t,0);var n=Oa.get(t);if(Oa.set(t,Oa.get(t)+1),n>0){var e=t+"_"+n;return Oa.set(e,1),e}return t}var ZF=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function iN(t){return!!t.match(ZF)}function JF(t){return t===parseInt(t.toString(),10)}function uo(t,n,e){n==null&&(n=0),e==null&&(e=t.length);for(var r=1,i=n;i<e;++i)r*=t[i];return r}function oN(t){return t=Array.isArray(t)?new Float32Array(t):t,zn(t)}function As(t){return oh(oN(t)).dataSync()[0]}function mo(t){return ho(oN(t)).dataSync()[0]}function Or(t,n){if(n<t)throw new B("end ("+n+") < begin ("+t+") is forbidden.");for(var e=[],r=t;r<n;++r)e.push(r);return e}function Hl(t,n){return t.asType(n)}function Gl(t,n){n===void 0&&(n=-1);var e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),t.reshape(e)}function eM(t,n){return j(function(){if(t.shape.length!==2)throw new B("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return pg(Gl(t,1),[1,n,1])})}function tM(t){var n=[uo(t.shape)];return t.reshape(n)}function nM(t){if(t.rank<=1)throw new B("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var n=[t.shape[0],uo(t.shape,1)];return t.reshape(n)}function Jo(t,n,e){return j(function(){switch(t.rank){case 1:return Ll(t,n,e);case 2:return rh(t,[n,0],[e,t.shape[1]]);case 3:return Pl(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return Es(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Jn(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Jn(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new B("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function Id(t,n,e){return j(function(){switch(t.rank){case 1:return Ll(t,n,e);case 2:return rh(t,[0,n],[t.shape[0],e]);case 3:return Pl(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return Es(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new B("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Nc(t,n,e,r){return j(function(){switch(t.rank){case 1:return Ll(t,n,e);case 2:switch(r){case 1:return Jo(t,n,e);case 2:return Id(t,n,e);default:throw new B("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Jo(t,n,e);case 2:return Pl(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return Id(t,n,e);default:throw new B("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Jo(t,n,e);case 2:return Es(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return Es(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return Id(t,n,e);default:throw new B("The axis is not within the rank of the tensor "+r)}default:throw new B("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function aN(t,n){var e;return n===void 0&&(n=-1),n<0&&(n=(e=t[0].rank)!==0?e:0),n===t[0].rank&&(n=-1),un(t,n)}function Cb(t,n){switch(t.rank){case 1:return Kv([t,n]);case 2:return Xv([t,n],0);case 3:return Yv([t,n],0);case 4:return Qv([t,n],0);default:throw new B("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function pg(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new B("The length of input n ("+n.length+") does not match the number of dimensions in input x ("+t.rank+")");return oo(t,n)}function mh(t,n,e,r,i){return n===void 0&&(n=0),e===void 0&&(e=1),ty(t,n,e,r,i)}function yi(t,n,e,r){if(t.rank<2||n.rank<2)throw new Ee("dot requires both inputs to be rank >= 2 but got x shape = "+t.shape+" and y shape = "+n.shape);if(n.rank>=3&&t.shape.slice(-1)[0]!==(c=n.shape.slice(-2)[0]))throw new Ee("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+t.shape+" and  y shape = "+n.shape);if(t.rank===2&&n.rank===2){var i=!1,o=!1;return Is.matMul({a:t,b:n,transposeA:i,transposeB:o,bias:r?fg(t.rank,r,Dr()):null,activation:e})}var a=t.shape.slice(),s=a.pop();t=t.reshape([-1,s]);var u=n.shape.slice(),l=u.pop(),c=u.pop(),p=u.concat([l]),f=Array.from({length:n.rank},function(d,m){return m===0?n.rank-2:m<=n.rank-2?m-1:m});n=n.transpose(f).reshape([c,-1]);var h=a.concat(p);return i=!1,o=!1,Is.matMul({a:t,b:n,transposeA:i,transposeB:o,bias:r?fg(t.rank,r,Dr()):null,activation:e}).reshape(h)}function sN(t,n,e){return j(function(){return n=Array.isArray(n)?zn(n,"int32"):n.toInt(),Gs(t,n,e)})}function ql(t){return Kf(t,t)}function fg(t,n,e){var r=n.shape;if(n.rank!==1&&n.rank!==t)throw new B("Unexpected bias dimensions: "+n.rank+"; expected it to be 1 or "+t);if(t===5){if(e==="channelsFirst")return r.length===1?n.reshape([1,r[0],1,1,1]):n.reshape([1,r[3],r[0],r[1],r[2]]);if(e==="channelsLast")return r.length===1?n.reshape([1,1,1,1,r[0]]):n.reshape([1].concat(r))}else if(t===4){if(e==="channelsFirst")return r.length===1?n.reshape([1,r[0],1,1]):n.reshape([1,r[2],r[0],r[1]]);if(e==="channelsLast")return r.length===1?n.reshape([1,1,1,r[0]]):n.reshape([1].concat(r))}else if(t===3){if(e==="channelsFirst")return r.length===1?n.reshape([1,r[0],1]):n.reshape([1,r[1],r[0]]);if(e==="channelsLast")return r.length===1?n.reshape([1,1,r[0]]):n.reshape([1].concat(r))}else if(t<3)return n;throw new B("Unsupported input rank by biasAdd: "+n.rank)}function _i(t,n,e){return j(function(){return e==null&&(e=Dr()),Tt(e),t.add(fg(t.rank,n,e))})}function rM(t,n){if(n===void 0&&(n=1),n!==1)throw new Ee("Support for alpha values other than 1 ("+n+") is not implemented yet.");return Ks(t)}function iM(t){return j(function(){return ln(t,fo(t).add(1))})}function uN(t,n,e,r){return j(function(){return r0(t,n,e,r)})}function oM(t){return j(function(){var n=Oe(.5,we(.2,t));return yn(n,0,1)})}function Rs(t,n,e){return e===void 0&&(e=!1),e?t():n()}var aM=["fanIn","fanOut","fanAvg"],sM=["normal","uniform","truncatedNormal"];function uM(t){Xs(aM,"FanMode",t)}function lM(t){Xs(sM,"Distribution",t)}var Lr=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.fromConfigUsesCustomObjects=function(){return!1},n.prototype.getConfig=function(){return{}},n}(Z.Serializable),lN=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e,r){return He(e,r)},n.className="Zeros",n}(Lr);Z.registerClass(lN);var w0=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e,r){return Jr(e,r)},n.className="Ones",n}(Lr);Z.registerClass(w0);var cN=function(t){function n(e){var r=t.call(this)||this;if(typeof e!="object")throw new B("Expected argument of type ConstantConfig but got "+e);if(e.value===void 0)throw new B("config must have value set but got "+e);return r.value=e.value,r}return X(n,t),n.prototype.apply=function(e,r){var i=this;return j(function(){return we(se(i.value),Jr(e,r))})},n.prototype.getConfig=function(){return{value:this.value}},n.className="Constant",n}(Lr);Z.registerClass(cN);var pN=function(t){function n(e){var r=t.call(this)||this;return r.DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return X(n,t),n.prototype.apply=function(e,r){return va(e,this.minval,this.maxval,r)},n.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},n.className="RandomUniform",n}(Lr);Z.registerClass(pN);var fN=function(t){function n(e){var r=t.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return X(n,t),n.prototype.apply=function(e,r){if((r=r||"float32")!=="float32"&&r!=="int32")throw new Ee("randomNormal does not support dType "+r+".");return mh(e,this.mean,this.stddev,r,this.seed)},n.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},n.className="RandomNormal",n}(Lr);Z.registerClass(fN);var hN=function(t){function n(e){var r=t.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return X(n,t),n.prototype.apply=function(e,r){if((r=r||"float32")!=="float32"&&r!=="int32")throw new Ee("truncatedNormal does not support dType "+r+".");return Dl(e,this.mean,this.stddev,r,this.seed)},n.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},n.className="TruncatedNormal",n}(Lr);Z.registerClass(hN);var dN=function(t){function n(e){var r=t.call(this)||this;return r.gain=e.gain!=null?e.gain:1,r}return X(n,t),n.prototype.apply=function(e,r){var i=this;return j(function(){if(e.length!==2||e[0]!==e[1])throw new B("Identity matrix initializer can only be used for 2D square matrices.");return we(i.gain,zf(e[0]))})},n.prototype.getConfig=function(){return{gain:this.gain}},n.className="Identity",n}(Lr);function cM(t,n){var e,r;if(n===void 0&&(n="channelsLast"),Tt(n),t.length===2)e=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1)if(n==="channelsFirst"){var i=uo(t,2);e=t[1]*i,r=t[0]*i}else n==="channelsLast"&&(i=uo(t,0,t.length-2),e=t[t.length-2]*i,r=t[t.length-1]*i);else{var o=uo(t);e=Math.sqrt(o),r=Math.sqrt(o)}return[e,r]}Z.registerClass(dN);var Mn=function(t){function n(e){var r=t.call(this)||this;if(e.scale<0)throw new B("scale must be a positive float. Got: "+e.scale);return r.scale=e.scale==null?1:e.scale,r.mode=e.mode==null?"fanIn":e.mode,uM(r.mode),r.distribution=e.distribution==null?"normal":e.distribution,lM(r.distribution),r.seed=e.seed,r}return X(n,t),n.prototype.apply=function(e,r){var i=cM(e),o=i[0],a=i[1],s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,o):this.mode==="fanOut"?s/=Math.max(1,a):s/=Math.max(1,(o+a)/2),this.distribution==="normal"){var u=Math.sqrt(s);if((r=r||"float32")!=="float32"&&r!=="int32")throw new Ee(this.getClassName()+" does not support dType "+r+".");return Dl(e,0,u,r,this.seed)}var l=Math.sqrt(3*s);return va(e,-l,l,r)},n.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},n.className="VarianceScaling",n}(Lr);Z.registerClass(Mn);var C0=function(t){function n(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})||this}return X(n,t),n.prototype.getClassName=function(){return Mn.className},n.className="GlorotUniform",n}(Mn);Z.registerClass(C0);var S0=function(t){function n(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})||this}return X(n,t),n.prototype.getClassName=function(){return Mn.className},n.className="GlorotNormal",n}(Mn);Z.registerClass(S0);var k0=function(t){function n(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})||this}return X(n,t),n.prototype.getClassName=function(){return Mn.className},n.className="HeNormal",n}(Mn);Z.registerClass(k0);var E0=function(t){function n(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})||this}return X(n,t),n.prototype.getClassName=function(){return Mn.className},n.className="HeUniform",n}(Mn);Z.registerClass(E0);var N0=function(t){function n(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})||this}return X(n,t),n.prototype.getClassName=function(){return Mn.className},n.className="LeCunNormal",n}(Mn);Z.registerClass(N0);var I0=function(t){function n(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})||this}return X(n,t),n.prototype.getClassName=function(){return Mn.className},n.className="LeCunNormal",n}(Mn);Z.registerClass(I0);var mN=function(t){function n(e){var r=t.call(this)||this;if(r.DEFAULT_GAIN=1,r.gain=e.gain==null?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r.seed!=null)throw new Ee("Random seed is not implemented for Orthogonal Initializer yet.");return r}return X(n,t),n.prototype.apply=function(e,r){var i=this;return j(function(){if(e.length!==2)throw new Ee("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var o=mh(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),a=a0.gramSchmidt(o);return e[0]>e[1]&&(a=a.transpose()),we(i.gain,a)})},n.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},n.className="Orthogonal",n}(Lr);Z.registerClass(mN);var Sb={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function kb(t,n){return n===void 0&&(n={}),Ul(t,Z.SerializationMap.getMap().classNameMap,n,"initializer")}function We(t){return y0(t)}function at(t){if(typeof t=="string"){var n=t in Sb?Sb[t]:t;if(n==="GlorotNormal")return new S0;if(n==="GlorotUniform")return new C0;if(n==="HeNormal")return new k0;if(n==="HeUniform")return new E0;if(n==="LeCunNormal")return new N0;if(n==="LeCunUniform")return new I0;var e={};return e.className=n,e.config={},kb(e)}return t instanceof Lr?t:kb(t)}function pM(){return new lN}function fM(){return new w0}function hM(t){return new cN(t)}function dM(t){return new pN(t)}function mM(t){return new fN(t)}function gM(t){return new hN(t)}function vM(t){return new dN(t)}function yM(t){return new Mn(t)}function xM(t){return new C0(t)}function bM(t){return new S0(t)}function wM(t){return new k0(t)}function CM(t){return new E0(t)}function SM(t){return new N0(t)}function kM(t){return new I0(t)}function EM(t){return new mN(t)}var NM=Object.freeze({zeros:pM,ones:fM,constant:hM,randomUniform:dM,randomNormal:mM,truncatedNormal:gM,identity:vM,varianceScaling:yM,glorotUniform:xM,glorotNormal:bM,heNormal:wM,heUniform:CM,leCunNormal:SM,leCunUniform:kM,orthogonal:EM}),IM=0;function gN(){return IM++}var Ic={};function gh(t){return t===void 0&&(t=""),t in Ic||(Ic[t]=0),Ic[t]+=1,t+Ic[t].toString()}function hg(t){return Array.isArray(t)&&Array.isArray(t[0])}function Hp(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ne(t){var n;if(Array.isArray(t)){if(t.length!==1)throw new B("Expected Tensor length to be 1; got "+t.length);n=t[0]}else n=t;return n}function Ze(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return(t=t)[0];throw new B("Expected exactly 1 Shape; got "+t.length)}return t}function Gp(t){for(var n=0,e=0,r=t;e<r.length;e++){var i=r[e];i.shape.length===0?n+=1:n+=i.shape.reduce(function(o,a){return o*a})}return n}var Eb="Variable",vN=function(){function t(n,e,r,i,o){e===void 0&&(e="float32"),r===void 0&&(r=Eb),i===void 0&&(i=!0),o===void 0&&(o=null),this.dtype=e??"float32",this.shape=n.shape,this.id=gN(),r=r??Eb,this.originalName=nN(r),this.name=rN(this.originalName),this.trainable_=i,this.constraint=o,this.val=Gv(n,this.trainable_,this.name,this.dtype)}return t.prototype.read=function(){return this.assertNotDisposed(),this.val},t.prototype.write=function(n){return this.assertNotDisposed(),AM(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this},t.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},t.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(n){this.trainable_=n,this.val.trainable=n},enumerable:!0,configurable:!0}),t}();function AM(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function dg(t){return t.map(function(n){return n.read()})}function A0(t){t.forEach(function(n){n[0].write(n[1])})}var Ut=function(){return function(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}(),Sr=function(){return function(t,n,e,r,i,o,a){this.dtype=t,this.shape=n,this.sourceLayer=e,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=gN(),o!=null&&(this.originalName=nN(o),this.name=rN(this.originalName)),this.rank=n.length}}(),RM=0,vh=function(){function t(n,e){this.callArgs=e,this.id=RM++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(var r=0,i=n.inboundLayers;r<i.length;r++){var o=i[r];o!=null&&o.outboundNodes.push(this)}n.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var n=[],e=0,r=this.inboundLayers;e<r.length;e++){var i=r[e];i!=null?n.push(i.name):n.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),TM=0,Le=function(t){function n(e){var r=t.call(this)||this;r._callHook=null,r._addedWeightNames=[],r._stateful=!1,r.id=TM++,r.activityRegularizer=null,r.inputSpec=null,r.supportsMasking=!1,r._trainableWeights=[],r._nonTrainableWeights=[],r._losses=[],r._updates=[],r._built=!1,r.inboundNodes=[],r.outboundNodes=[];var i=e.name;if(!i){var o=r.getClassName();i=ci(o)+"_"+gh(o)}if(r.name=i,r.trainable_=e.trainable==null||e.trainable,e.inputShape!=null||e.batchInputShape!=null){var a=void 0;if(e.batchInputShape!=null)a=e.batchInputShape;else if(e.inputShape!=null){var s=null;e.batchSize!=null&&(s=e.batchSize),a=[s].concat(e.inputShape)}r.batchInputShape=a;var u=e.dtype;u==null&&(u=e.inputDType),u==null&&(u="float32"),r.dtype=u}return e.weights!=null?r.initialWeights=e.weights:r.initialWeights=null,r._refCount=null,r.fastWeightInitDuringBuild=!1,r}return X(n,t),n.nodeKey=function(e,r){return e.name+"_ib-"+r.toString()},n.prototype.getNodeAtIndex=function(e,r){if(this.inboundNodes.length===0)throw new jr("The layer has never been called and thus has no defined "+r+".");if(this.inboundNodes.length<=e)throw new B("Asked to get "+r+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},n.prototype.getInputAt=function(e){return dn(this.getNodeAtIndex(e,"input").inputTensors)},n.prototype.getOutputAt=function(e){return dn(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(n.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new _o("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new _o("Layer "+this.name+" is not connected, no input to return.");return dn(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"output",{get:function(){if(this.inboundNodes.length===0)throw new _o("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new _o("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return dn(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),n.prototype.calculateLosses=function(){return this.losses.map(function(e){return e()})},Object.defineProperty(n.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach(function(r){return r.trainable=e}),this.trainable_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(e){return e.trainable}):[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(e){return!e.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),n.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},n.prototype.assertInputCompatibility=function(e){if(e=Je(e),this.inputSpec!=null&&this.inputSpec.length!==0){var r=Je(this.inputSpec);if(e.length!==r.length)throw new B("Layer "+this.name+" expects "+r.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var i=0;i<e.length;i++){var o=e[i],a=r[i];if(a!=null){var s=o.rank;if(a.ndim!=null&&s!==a.ndim)throw new B("Input "+i+" is incompatible with layer "+this.name+": expected ndim="+a.ndim+", found ndim="+s);if(a.maxNDim!=null&&s>a.maxNDim)throw new B("Input "+i+" is incompatible with layer "+this.name+": expected max_ndim="+a.maxNDim+", found ndim="+s);if(a.minNDim!=null&&s<a.minNDim)throw new B("Input "+i+" is incompatible with layer "+this.name+": expected min_ndim="+a.minNDim+", found ndim="+s+".");if(a.dtype!=null&&o.dtype!==a.dtype)throw new B("Input "+i+" is incompatible with layer "+this.name+" : expected dtype="+a.dtype+", found dtype="+o.dtype+".");if(a.axes){var u=o.shape;for(var l in a.axes){var c=Number(l),p=a.axes[l],f=c>=0?u[c]:u[u.length+c];if(p!=null&&[p,null].indexOf(f)===-1)throw new B("Input "+i+" is incompatible with layer "+this.name+": expected axis "+c+" of input shape to have value "+p+" but got shape "+u+".")}}if(a.shape!=null)for(var h=0;h<a.shape.length;++h){var d=a.shape[h],m=o.shape[h];if(d!=null&&m!=null&&d!==m)throw new B("Input "+i+" is incompatible with layer "+this.name+": expected shape="+a.shape+", found shape="+o.shape+".")}}}}},n.prototype.call=function(e,r){return e},n.prototype.invokeCallHook=function(e,r){this._callHook!=null&&this._callHook(e,r)},n.prototype.setCallHook=function(e){this._callHook=e},n.prototype.clearCallHook=function(){this._callHook=null},n.prototype.apply=function(e,r){var i=this;r=r||{},this.assertNotDisposed();for(var o=Je(e),a=!0,s=0,u=o;s<u.length;s++)if(!(u[s]instanceof Sr)){a=!1;break}for(var l=!0,c=0,p=o;c<p.length;c++)if(p[c]instanceof Sr){l=!1;break}if(a===l)throw new B("Arguments to apply() must be all SymbolicTensors or all Tensors");return Zo(this.name,function(){if(!i.built){i.assertInputCompatibility(e);for(var f=[],h=0,d=Je(e);h<d.length;h++){var m=d[h];f.push(m.shape)}i.build(dn(f)),i.built=!0,i.initialWeights&&i.setWeights(i.initialWeights),i._refCount===null&&l&&(i._refCount=1)}if(i.assertInputCompatibility(e),l){for(var v=[],g=0,y=Je(S=i.call(e,r));g<y.length;g++){var x=y[g];o.indexOf(x)!==-1&&(x=x.clone()),v.push(x)}if(S=dn(v),i.activityRegularizer!=null)throw new Ee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return S}var b=DM(e),w=i.computeOutputShape(b),S=void 0,C=OM(e);if(i.warnOnIncompatibleInputShape(Array.isArray(e)?b[0]:b),S=w!=null&&w.length>0&&Array.isArray(w[0])?w.map(function(k,E){return new Sr(C,k,i,Je(e),r,i.name,E)}):new Sr(C,w,i,Je(e),r,i.name),i.addInboundNode(e,S,null,null,b,w,r),i._refCount++,i.activityRegularizer!=null)throw new Ee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return S})},n.prototype.warnOnIncompatibleInputShape=function(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var r=!1;this.batchInputShape.forEach(function(i,o){i!=null&&e[o]!=null&&e[o]!==i&&(r=!0)}),r&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(n.prototype,"outputShape",{get:function(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new _o("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],r=0,i=this.inboundNodes;r<i.length;r++){var o=i[r],a=JSON.stringify(o.outputShapes);e.indexOf(a)===-1&&e.push(a)}if(e.length===1){var s=this.inboundNodes[0].outputShapes;return Array.isArray(s)&&Array.isArray(s[0])&&s.length===1?s[0]:s}throw new _o("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),n.prototype.countParams=function(){if(!this.built)throw new jr("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return Gp(this.weights)},n.prototype.build=function(e){this.built=!0},n.prototype.getWeights=function(e){return e===void 0&&(e=!1),dg(e?this.trainableWeights:this.weights)},n.prototype.setWeights=function(e){var r=this;j(function(){var i=r.weights;if(i.length!==e.length)throw new B('You called setWeights(weights) on layer "'+r.name+'" with a weight list of length '+e.length+", but the layer was expecting "+i.length+" weights. Provided weights: "+e+"...");if(i.length!==0){for(var o=[],a=dg(i),s=0;s<a.length;++s){var u=a[s],l=i[s],c=e[s];if(!me.arraysEqual(u.shape,c.shape))throw new B("Layer weight shape "+u.shape+" not compatible with provided weight shape "+c.shape);o.push([l,c])}A0(o)}})},n.prototype.addWeight=function(e,r,i,o,a,s,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new B("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(o=at("zeros"));var l=o.apply(r,i),c=new vN(l,i,e,s,u);return l.dispose(),a!=null&&this.addLoss(function(){return a.apply(c.read())}),s==null&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c},n.prototype.setFastWeightInitDuringBuild=function(e){this.fastWeightInitDuringBuild=e},n.prototype.addLoss=function(e){var r;e==null||Array.isArray(e)&&e.length===0||(e=Je(e),this._losses!==void 0&&this._losses!==null&&(r=this.losses).push.apply(r,e))},n.prototype.computeOutputShape=function(e){return e},n.prototype.computeMask=function(e,r){var i=this;if(!this.supportsMasking){if(r!=null){if(!Array.isArray(r))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");r.forEach(function(o){if(o!=null)throw new TypeError("Layer "+i.name+" does not support masking, but was passed an inputMask.")})}return null}return r},n.prototype.addInboundNode=function(e,r,i,o,a,s,u){u===void 0&&(u=null);var l=Je(e);r=Je(r),i=Je(i),o=Je(o),a=Hp(a),s=Hp(s);for(var c=[],p=[],f=[],h=0,d=l;h<d.length;h++){var m=d[h];c.push(m.sourceLayer),p.push(m.nodeIndex),f.push(m.tensorIndex)}new vh({outboundLayer:this,inboundLayers:c,nodeIndices:p,tensorIndices:f,inputTensors:l,outputTensors:r,inputMasks:i,outputMasks:o,inputShapes:a,outputShapes:s},u);for(var v=0;v<r.length;v++)r[v].sourceLayer=this,r[v].nodeIndex=this.inboundNodes.length-1,r[v].tensorIndex=v},n.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e},n.prototype.disposeWeights=function(){return this.weights.forEach(function(e){return e.dispose()}),this.weights.length},n.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Layer '"+this.name+"' is already disposed.")},n.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return--this._refCount==0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},n}(Z.Serializable);function DM(t){for(var n=[],e=0,r=t=Je(t);e<r.length;e++){var i=r[e];n.push(i.shape)}return dn(n)}function OM(t){return"float32"}function yN(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];var r=n.inboundNodes[e];if(r.inboundLayers.length===0)return r.inputTensors;for(var i=[],o=0;o<r.inboundLayers.length;o++)for(var a=0,s=yN(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]);a<s.length;a++){var u=s[a];i.indexOf(u)===-1&&i.push(u)}return i}var Nb,Kl=function(t){function n(e){var r=t.call(this,{dtype:e.dtype,name:e.name!=null?e.name:gh("input").toString()})||this;if(e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new B("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var i=e.batchInputShape;if(i==null){if(e.inputShape==null)throw new B("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new B("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=i,r.dtype=o,r.inputSpec=[{shape:i}];var a=new Sr(r.dtype,r.batchInputShape,r,[],{},r.name);return a.nodeIndex=0,a.tensorIndex=0,new vh({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]}),r}return X(n,t),n.prototype.apply=function(e,r){throw new B("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},n.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},n.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},n.className="InputLayer",n}(Le);function xN(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new B("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));var e=t.dtype;return e==null&&(e="float32"),new Kl({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function Pi(t){return be(this,void 0,void 0,function(){var n,e,r,i,o,a,s,u;return ye(this,function(l){switch(l.label){case 0:if(t==null)return[2];for(i in n=[],e=[],r=[],t)typeof(o=t[i])!="number"&&(a=o,n.push(a.data()),e.push(i),r.push(a));return n.length>0?[4,Promise.all(n)]:[3,2];case 1:for(s=l.sent(),u=0;u<s.length;++u)t[e[u]]=s[u][0];Te(r),l.label=2;case 2:return[2]}})})}function bN(t){if(t!=null)for(var n in t){var e=t[n];typeof e!="number"&&e.dispose()}}Z.registerClass(Kl),function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(Nb||(Nb={}));var _M=125,Ts=function(){function t(){this.validationData=null}return t.prototype.setParams=function(n){this.params=n},t.prototype.onEpochBegin=function(n,e){return be(this,void 0,void 0,function(){return ye(this,function(r){return[2]})})},t.prototype.onEpochEnd=function(n,e){return be(this,void 0,void 0,function(){return ye(this,function(r){return[2]})})},t.prototype.onBatchBegin=function(n,e){return be(this,void 0,void 0,function(){return ye(this,function(r){return[2]})})},t.prototype.onBatchEnd=function(n,e){return be(this,void 0,void 0,function(){return ye(this,function(r){return[2]})})},t.prototype.onTrainBegin=function(n){return be(this,void 0,void 0,function(){return ye(this,function(e){return[2]})})},t.prototype.onTrainEnd=function(n){return be(this,void 0,void 0,function(){return ye(this,function(e){return[2]})})},t.prototype.setModel=function(n){},t}(),wN=function(){function t(n,e){e===void 0&&(e=10),n==null&&(n=[]),this.callbacks=n,this.queueLength=e}return t.prototype.append=function(n){this.callbacks.push(n)},t.prototype.setParams=function(n){for(var e=0,r=this.callbacks;e<r.length;e++)r[e].setParams(n)},t.prototype.setModel=function(n){for(var e=0,r=this.callbacks;e<r.length;e++)r[e].setModel(n)},t.prototype.onEpochBegin=function(n,e){return be(this,void 0,void 0,function(){var r,i;return ye(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onEpochBegin(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onEpochEnd=function(n,e){return be(this,void 0,void 0,function(){var r,i;return ye(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onEpochEnd(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onBatchBegin=function(n,e){return be(this,void 0,void 0,function(){var r,i;return ye(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onBatchBegin(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onBatchEnd=function(n,e){return be(this,void 0,void 0,function(){var r,i;return ye(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onBatchEnd(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onTrainBegin=function(n){return be(this,void 0,void 0,function(){var e,r;return ye(this,function(i){switch(i.label){case 0:n==null&&(n={}),e=0,r=this.callbacks,i.label=1;case 1:return e<r.length?[4,r[e].onTrainBegin(n)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t.prototype.onTrainEnd=function(n){return be(this,void 0,void 0,function(){var e,r;return ye(this,function(i){switch(i.label){case 0:n==null&&(n={}),e=0,r=this.callbacks,i.label=1;case 1:return e<r.length?[4,r[e].onTrainEnd(n)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t}(),zM=function(t){function n(){return t.call(this)||this}return X(n,t),n.prototype.onEpochBegin=function(e){return be(this,void 0,void 0,function(){return ye(this,function(r){return this.seen=0,this.totals={},[2]})})},n.prototype.onBatchEnd=function(e,r){return be(this,void 0,void 0,function(){var i,o,a,s,u=this;return ye(this,function(l){for(s in r==null&&(r={}),i=r.size==null?0:r.size,this.seen+=i,o=function(c){var p=r[c];if(typeof p=="number")a.totals.hasOwnProperty(c)||(a.totals[c]=0),a.totals[c]=a.totals[c]+p*i;else{var f=void 0;c in a.totals?f=a.totals[c]:a.totals[c]=0;var h=j(function(){return Oe(u.totals[c],we(p,i))});a.totals[c]=h,f!=null&&f.dispose()}},a=this,r)o(s);return[2]})})},n.prototype.onEpochEnd=function(e,r){return be(this,void 0,void 0,function(){var i,o,a,s,u,l=this;return ye(this,function(c){if(r!=null)for(i=function(p){if(o.totals[p]==null)return"continue";typeof o.totals[p]=="number"?r[p]=o.totals[p]/o.seen:j(function(){var f=we(ln(1,l.seen),l.totals[p]);r[p]=f,l.totals[p].dispose(),Kr(r[p])})},o=this,a=0,s=this.params.metrics;a<s.length;a++)u=s[a],i(u);return[2]})})},n}(Ts),CN=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.onTrainBegin=function(e){return be(this,void 0,void 0,function(){return ye(this,function(r){return this.epoch=[],this.history={},[2]})})},n.prototype.onEpochEnd=function(e,r){return be(this,void 0,void 0,function(){var i;return ye(this,function(o){for(i in r==null&&(r={}),this.epoch.push(e),r)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(r[i]);return[2]})})},n.prototype.syncData=function(){return be(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c;return ye(this,function(p){switch(p.label){case 0:for(o in e=[],r=[],i=[],this.history)for(a=this.history[o],s=0;s<a.length;++s)typeof a[s]!="number"&&(u=a[s],e.push(u.data()),r.push(o),i.push(s));return[4,Promise.all(e)];case 1:for(l=p.sent(),c=0;c<l.length;++c)this.history[r[c]][i[c]].dispose(),this.history[r[c]][i[c]]=l[c][0];return[2]}})})},n}(Ts),SN=function(t){function n(e,r){var i=t.call(this)||this;if(i.currentEpoch=0,i.yieldEvery=r||"auto",i.yieldEvery==="auto"&&(i.yieldEvery=_M),i.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return me.isNumber(i.yieldEvery)&&(i.maybeWait=WF(i.maybeWait.bind(i),i.yieldEvery)),i.trainBegin=e.onTrainBegin,i.trainEnd=e.onTrainEnd,i.epochBegin=e.onEpochBegin,i.epochEnd=e.onEpochEnd,i.batchBegin=e.onBatchBegin,i.batchEnd=e.onBatchEnd,i.yield=e.onYield,i}return X(n,t),n.prototype.maybeWait=function(e,r,i){return be(this,void 0,void 0,function(){var o;return ye(this,function(a){switch(a.label){case 0:return o=[],this.yield==null?[3,2]:[4,Pi(i)];case 1:a.sent(),o.push(this.yield(e,r,i)),a.label=2;case 2:return o.push(rp()),[4,Promise.all(o)];case 3:return a.sent(),[2]}})})},n.prototype.onEpochBegin=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){switch(i.label){case 0:return this.currentEpoch=e,this.epochBegin==null?[3,3]:[4,Pi(r)];case 1:return i.sent(),[4,this.epochBegin(e,r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.onEpochEnd=function(e,r){return be(this,void 0,void 0,function(){var i;return ye(this,function(o){switch(o.label){case 0:return i=[],this.epochEnd==null?[3,2]:[4,Pi(r)];case 1:o.sent(),i.push(this.epochEnd(e,r)),o.label=2;case 2:return this.yieldEvery==="epoch"&&i.push(rp()),[4,Promise.all(i)];case 3:return o.sent(),[2]}})})},n.prototype.onBatchBegin=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){switch(i.label){case 0:return this.batchBegin==null?[3,3]:[4,Pi(r)];case 1:return i.sent(),[4,this.batchBegin(e,r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.onBatchEnd=function(e,r){return be(this,void 0,void 0,function(){var i;return ye(this,function(o){switch(o.label){case 0:return i=[],this.batchEnd==null?[3,2]:[4,Pi(r)];case 1:o.sent(),i.push(this.batchEnd(e,r)),o.label=2;case 2:return this.yieldEvery==="batch"?i.push(rp()):me.isNumber(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,e,r)),[4,Promise.all(i)];case 3:return o.sent(),[2]}})})},n.prototype.onTrainBegin=function(e){return be(this,void 0,void 0,function(){return ye(this,function(r){switch(r.label){case 0:return this.trainBegin==null?[3,3]:[4,Pi(e)];case 1:return r.sent(),[4,this.trainBegin(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},n.prototype.onTrainEnd=function(e){return be(this,void 0,void 0,function(){return ye(this,function(r){switch(r.label){case 0:return this.trainEnd==null?[3,3]:[4,Pi(e)];case 1:return r.sent(),[4,this.trainEnd(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},n}(Ts);function kN(t,n){return t==null&&(t={}),t instanceof Ts?[t]:Array.isArray(t)&&t[0]instanceof Ts?t:Je(t).map(function(e){return new SN(e,n)})}var EN=function(){function t(){}return t.registerCallbackConstructor=function(n,e){me.assert(n>=0&&Number.isInteger(n),function(){return"Verbosity level is expected to be an integer >= 0, but got "+n}),t.checkForDuplicate(e),t.constructors[n]==null&&(t.constructors[n]=[]),t.constructors[n].push(e)},t.checkForDuplicate=function(n){for(var e in t.constructors)t.constructors[+e].forEach(function(r){if(r===n)throw new B("Duplicate callback constructor.")})},t.clear=function(){t.constructors={}},t.createCallbacks=function(n){var e=[];for(var r in t.constructors){var i=+r;n>=i&&e.push.apply(e,t.constructors[i])}return e.map(function(o){return new o})},t.constructors={},t}();function NN(t,n,e,r,i,o,a,s,u){var l=new CN,c=[new zM].concat(EN.createCallbacks(n));t!=null&&c.push.apply(c,t),c.push(l);var p=new wN(c);return p.setParams({epochs:e,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:n,doValidation:s,metrics:u}),{callbackList:p,history:l}}function Ar(t,n,e){return n===void 0&&(n={}),e===void 0&&(e=!1),Ul(t,Z.SerializationMap.getMap().classNameMap,n,"layer",e)}function qp(t,n){return j(function(){t.dtype!=="float32"&&(t=t.asType("float32"));var e=Fn(ql(t),n,!0),r=$s(e.shape,It()),i=zl(ei(e,r));return ln(t,i)})}function Ca(t,n){return j(function(){return wt(ql(Gt(n,t)),-1)})}function yh(t,n){return j(function(){return wt(fo(Gt(n,t)),-1)})}function Ys(t,n){return j(function(){var e=Gt(t,n),r=yn(fo(t),It(),Number.MAX_VALUE),i=fo(ln(e,r));return we(100,wt(i,-1))})}function FM(t,n){return j(function(){var e=yn(n,It(),Number.MAX_VALUE),r=Ni(Oe(1,e)),i=yn(t,It(),Number.MAX_VALUE),o=Ni(Oe(1,i));return wt(ql(Gt(r,o)),-1)})}function MM(t,n){return j(function(){var e=ei(0,Gt(1,we(t,n)));return wt(ql(e),-1)})}function LM(t,n){return j(function(){var e=ei(0,Gt(1,we(t,n)));return wt(e,-1)})}function PM(t,n){return j(function(){var e=Fn(we(t,n),-1),r=ho(we(Gt(1,t),n),-1);return ei(0,Oe(1,Gt(r,e)))})}function BM(t,n){return j(function(){var e=Math.log(2),r=Gt(n,t),i=Gt(Oe(r,_l(we(-2,r))),e);return wt(i,-1)})}function yl(t,n,e){return e===void 0&&(e=!1),j(function(){if(e)n=ya(n);else{var r=Fn(n,n.shape.length-1,!0);n=ln(n,r)}return n=yn(n,It(),1-It()),xa(Fn(we(t.toFloat(),Ni(n)),n.shape.length-1))})}function Kp(t,n){return j(function(){var e=Vf(tM(t)).toInt(),r=(n=yn(n,It(),1-It())).shape;return yl(ws(e,r[r.length-1]).reshape(r),n,!1)})}function VM(t,n){if(!me.arraysEqual(t.shape,n.shape))throw new B("logits and labels must have the same shape, but got shapes "+JSON.stringify(t.shape)+" and "+JSON.stringify(n.shape));return j(function(){var e=n.relu(),r=n.abs().neg();return e.sub(n.mul(t)).add(r.exp().log1p())})}function xh(t,n){return j(function(){var e;return e=yn(n,It(),1-It()),e=Ni(ln(e,Gt(1,e))),wt(VM(t,e),-1)})}function WM(t,n){return j(function(){var e=yn(t,It(),1),r=yn(n,It(),1);return Fn(we(t,Ni(ln(e,r))),-1)})}function $M(t,n){return j(function(){var e=Ni(Oe(It(),n));return wt(Gt(n,we(t,e)),-1)})}function R0(t,n){return j(function(){var e=qp(t,-1),r=qp(n,-1),i=we(e,r);return xa(Fn(i,-1))})}var Xp={meanSquaredError:Ca,meanAbsoluteError:yh,meanAbsolutePercentageError:Ys,meanSquaredLogarithmicError:FM,squaredHinge:MM,hinge:LM,categoricalHinge:PM,logcosh:BM,categoricalCrossentropy:yl,sparseCategoricalCrossentropy:Kp,binaryCrossentropy:xh,kullbackLeiblerDivergence:WM,poisson:$M,cosineProximity:R0};function Ad(t){if(typeof t=="string"){if(t in Xp)return Xp[t];var n="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n="Unknown loss "+t+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new B(n)}return t}function T0(t,n){return j(function(){var e=we(.5,Zn(n)),r=Hl(Hs(n,e),t.dtype);return wt(ba(t,r),-1)})}function D0(t,n){return j(function(){return Hl(ba(vl(t,-1),vl(n,-1)),"float32")})}function IN(t,n){return j(function(){return Ti(t.equal(1),n.equal(1)).sum().cast("float32")})}function UM(t,n){return j(function(){return Ti(t.equal(1),n.equal(0)).sum().cast("float32")})}function jM(t,n){return j(function(){return Ti(t.equal(0),n.equal(1)).sum().cast("float32")})}function AN(t,n){return j(function(){var e=IN(t,n),r=jM(t,n),i=e.add(r);return Ii(Hs(i,0),e.div(i),0).cast("float32")})}function HM(t,n){return j(function(){var e=IN(t,n),r=UM(t,n),i=e.add(r);return Ii(Hs(i,0),e.div(i),0).cast("float32")})}function RN(t,n){return xh(t,n)}function TN(t,n){return t.rank===n.rank&&(t=t.squeeze([t.rank-1])),(n=n.argMax(-1)).dtype!==t.dtype&&(n=n.asType(t.dtype)),ba(t,n).asType("float32")}var GM=Ca,qM=Ca,KM=yh,XM=yh,YM=Ys,QM=Ys,O0=yl,ZM=R0,DN=Kp,Yp={binaryAccuracy:T0,categoricalAccuracy:D0,precision:AN,categoricalCrossentropy:O0,sparseCategoricalCrossentropy:DN,mse:GM,MSE:qM,mae:KM,MAE:XM,mape:YM,MAPE:QM,cosine:ZM};function JM(t){if(typeof t=="string"&&t in Yp)return Yp[t];if(typeof t!="string"&&t!=null)return t;throw new B("Unknown metric "+t)}function Ac(t){if(Wr(t!==null,"Unknown LossOrMetricFn "+t),typeof t=="string")return t;for(var n=void 0,e=0,r=Object.keys(Xp);e<r.length;e++){var i=r[e];if(Xp[i]===t){n=i;break}}if(n!==void 0)return n;for(var o=0,a=Object.keys(Yp);o<a.length;o++)if(i=a[o],Yp[i]===t){n=i;break}return n!==void 0?n:t.name}function e4(t){var n={Adagrad:function(){return Oo.adagrad(.01)},Adadelta:function(){return Oo.adadelta(1,.95,It())},Adam:function(){return Oo.adam(.001,.9,.999,It())},Adamax:function(){return Oo.adamax(.002,.9,.999,It(),0)},RMSProp:function(){return Oo.rmsprop(.001,.9,0,It())},SGD:function(){return Oo.sgd(.01)}};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new B("Unknown Optimizer "+t)}var Ib=1048576;function Ab(t,n,e){if(e===void 0&&(e=!1),t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!mg(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){var r=JSON.stringify(t);r.length>Ib&&console.warn('User-defined metadata of model "'+n+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+Ib+".")}}function mg(t){if(t===null)return!0;if(typeof t=="object"){if(Object.getPrototypeOf(t)===Object.prototype){for(var n=0,e=Object.keys(t);n<e.length;n++){var r=e[n];if(typeof r!="string"||!mg(t[r]))return!1}return!0}if(Array.isArray(t)){for(var i=0,o=t;i<o.length;i++)if(!mg(o[i]))return!1;return!0}return!1}var a=typeof t;return a==="string"||a==="number"||a==="boolean"}function t4(t,n,e,r){r===void 0&&(r=console.log);var i,o=r4(t),a=["Layer (type)","Output shape","Param #"];if(o?(n=n||65,e=e||[.45,.85,1]):(n=n||98,e=e||[.33,.55,.67,1]),e[e.length-1]<=1&&(e=e.map(function(f){return Math.floor(n*f)})),!o)for(var s in a.push("Receives inputs"),i=[],t.nodesByDepth)i.push.apply(i,t.nodesByDepth[s]);r("_".repeat(n)),Qp(a,e,r),r("=".repeat(n));for(var u=t.layers,l=0;l<u.length;++l)o?i4(u[l],e,r):o4(u[l],e,i,r),r((l===u.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();var c=n4(t),p=Gp(t.nonTrainableWeights);r("Total params: "+(c+p)),r("Trainable params: "+c),r("Non-trainable params: "+p),r("_".repeat(n))}function n4(t){return t.collectedTrainableWeights!=null?Gp(t.collectedTrainableWeights):Gp(t.trainableWeights)}function r4(t){var n=!0,e=[],r=[];for(var i in t.nodesByDepth)e.push(t.nodesByDepth[i]);for(var o=0,a=e;o<a.length;o++){var s=a[o];if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){n=!1;break}r.push.apply(r,s)}if(n)for(var u=0,l=t.layers;u<l.length;u++){for(var c=!1,p=0,f=l[u].inboundNodes;p<f.length;p++){var h=f[p];if(r.indexOf(h)!==-1){if(c){n=!1;break}c=!0}}if(!n)break}return n}function Qp(t,n,e){e===void 0&&(e=console.log);for(var r="",i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[i]).slice(0,n[i]),r+=" ".repeat(n[i]-r.length);e(r)}function i4(t,n,e){var r;try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}Qp([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],n,e)}function o4(t,n,e,r){var i;try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}for(var o=[],a=0,s=t.inboundNodes;a<s.length;a++){var u=s[a];if(!(e!=null&&e.length>0&&e.indexOf(u)===-1))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,p=u.nodeIndices[l],f=u.tensorIndices[l];o.push(c+"["+p+"]["+f+"]")}}var h=t.name,d=t.getClassName(),m=o.length===0?"":o[0];for(Qp([h+" ("+d+")",i,t.countParams().toString(),m],n,r),l=1;l<o.length;++l)Qp(["","","",o[l]],n,r)}function ON(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function xl(t,n){if(t===null)return null;if(typeof t=="string")return Fo(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){for(var e=[],r=t.length,i=0;i<r;++i){var o=t[i];ON(n,i,o)?e.push(o):e.push(xl(o,n))}return e}for(var a={},s=0,u=Object.keys(t);s<u.length;s++){var l=u[s],c=t[l];if(l==="name"&&typeof c=="string")a[l]=c;else{var p=Fo(l);a[p]=xl(c,p)}}return a}function gg(t,n){if(t==null)return null;if(typeof t=="string")return ci(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){for(var e=[],r=t.length,i=0;i<r;++i){var o=t[i];ON(n,i,o)?e.push(o):e.push(gg(o,n))}return e}for(var a={},s=0,u=Object.keys(t);s<u.length;s++){var l=u[s],c=t[l],p=ci(l);a[p]=l!=="name"&&l!=="className"||typeof c!="string"?gg(c,l):c}return a}var bh="1.3.1";function a4(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return _f(n,t.dtype)}catch{throw new B("The dtype of the feed ("+n.dtype+") can not be cast to the dtype of the key '"+t.name+"' ("+t.dtype+").")}}var Ya=function(){function t(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(var e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(var r=0,i=n;r<i.length;r++){var o=i[r];this.add(o.key,o.value)}}}return t.prototype.add=function(n,e,r){if(this.id2Value[n.id]!=null)throw new B("Duplicate key: name="+n.name+", id="+n.id);return this.id2Value[n.id]=a4(n,e),this.name2Id[n.name]=n.id,r!=null&&(this.id2Mask[n.id]=r),this},t.prototype.addFeed=function(n){this.add(n.key,n.value)},t.prototype.hasKey=function(n){return this.id2Value[n.id]!=null},t.prototype.names=function(){return Object.keys(this.name2Id)},t.prototype.getValue=function(n){if(n instanceof Sr){if(this.id2Value[n.id]==null)throw new B("Nonexistent key: "+n.name);return this.id2Value[n.id]}var e=this.name2Id[n];if(e==null)throw new B("Feed dict has no SymbolicTensor name: "+n);return this.id2Value[e]},t.prototype.getMask=function(n){if(n instanceof Sr){if(this.id2Value[n.id]==null)throw new B("Nonexistent key: "+n.name);return this.id2Mask[n.id]}var e=this.name2Id[n];if(e==null)throw new B("Feed dict has no SymbolicTensor name: "+n);return this.id2Mask[e]},t.prototype.disposeMasks=function(){this.id2Mask!=null&&Te(this.id2Mask)},t}(),Rd={},Rb={};function Su(t,n,e,r){for(var i=e!=null&&e.training,o=Array.isArray(t),a=o?t:[t],s=a.map(function(K){return K.name}),u=[],l=n.names(),c=0,p=s;c<p.length;c++){var f=p[c];l.indexOf(f)!==-1?u.push(n.getValue(f)):u.push(null)}r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var h,d,m=s.join(",")+"|"+n.names().join(",");if(Rd[m]==null){var v=s4(a,n);h=v.sorted,d=v.recipientCounts,Rd[m]=h,Rb[m]=d}h=Rd[m],d={},i||Object.assign(d,Rb[m]);for(var g=new Ya(n),y=0;y<h.length;++y){if(r!=null){var x=Lp().numTensors;x>r.maxNumTensors&&(r.maxNumTensors=x),x<r.minNumTensors&&(r.minNumTensors=x)}var b=h[y],w=b.sourceLayer;if(!(w instanceof Kl)){for(var S=[],C=[],k=[],E=!1,N=0,T=b.inputs;N<T.length;N++){var A=T[N],_=g.getValue(A),M=g.getMask(A);S.push(_),C.push(M),M!=null&&(E=!0),i||(d[A.name]--,d[A.name]!==0||n.hasKey(A)||s.indexOf(A.name)!==-1||_.isDisposed||A.sourceLayer.stateful===!0||k.push(_))}E&&((e=e||{}).mask=C[0]);var W=Je(w.apply(S,e)),L=null;w.supportsMasking&&(L=w.computeMask(S,C));for(var U=l4(b),O=Array.isArray(U)?U:[U],V=0;V<O.length;++V){g.hasKey(O[V])||g.add(O[V],W[V],Array.isArray(L)?L[0]:L);var $=s.indexOf(O[V].name);$!==-1&&(u[$]=W[V])}i||Te(k)}}return g.disposeMasks(),o?u:u[0]}function s4(t,n){me.assert(t!=null&&t.length>0,function(){return"Expected at least one fetch, got none"});var e=[],r={};if(t.length===1){var i=Tb(t[0],n);e=i.sorted,r=i.recipientMap}else for(var o=new Set,a=0,s=t;a<s.length;a++){for(var u=Tb(s[a],n),l=u.sorted,c=u.recipientMap,p=0,f=l;p<f.length;p++){var h=f[p];o.has(h.name)||(e.push(h),o.add(h.name))}var d=function(v){r[v]==null&&(r[v]=new Set),c[v].forEach(function(g){return r[v].add(g)})};for(var m in c)d(m)}return{sorted:e,recipientCounts:u4(r)}}function u4(t){var n={};for(var e in t)n[e]=t[e].size;return n}function Tb(t,n){for(var e=new Set,r=[],i={},o=0,a=n.names();o<a.length;o++){var s=a[o];e.add(s)}var u=[],l=[];for(u.push(t);u.length>0;){var c=u[u.length-1];if(e.has(c.name))u.pop();else{var p=l[l.length-1]===u.length-1;if(c.inputs.length===0||p)u.pop(),r.push(c),e.add(c.name),p&&l.pop();else{l.push(u.length-1);for(var f=0,h=c.inputs;f<h.length;f++){var d=h[f];i[d.name]==null&&(i[d.name]=new Set),i[d.name].add(c.name),e.has(d.name)||u.push(d)}}}}return{sorted:r,recipientMap:i}}function l4(t){var n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{for(var e=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var i=0,o=t.sourceLayer.inboundNodes[r].outputTensors;i<o.length;i++)if(o[i].id===t.id){e=r;break}n=t.sourceLayer.getOutputAt(e)}return n}var c4=function(t){function n(e){var r=t.call(this,{})||this;if(r.containerNodes=new Set,r.name=e.name,r.name==null){var i=r.getClassName().toLowerCase();r.name=gh(i)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],so(r.inputs).length!==r.inputs.length)throw new B("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(Ae){return Ae.name}));so(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(Ae){return Ae.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];for(var o=0,a=r.outputs;o<a.length;o++){var s=(N=a[o]).sourceLayer,u=N.nodeIndex,l=N.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,p=r.inputs;c<p.length;c++)s=(N=p[c]).sourceLayer,u=N.nodeIndex,l=N.tensorIndex,Wr(u===0,"input layer has >1 nodes"),Wr(l===0,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var f=0;f<r.inputLayers.length;f++){if(!((s=r.inputLayers[f])instanceof Kl))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+e.inputs+". Input "+f+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var h=0,d=r.outputLayers;h<d.length;h++)s=d[h],r.outputNames.push(s.name);r.internalInputShapes=r.inputs.map(function(Ae){return Ae.shape}),r.internalOutputShapes=r.outputs.map(function(Ae){return Ae.shape});for(var m={},v={},g={},y={},x={},b=[],w=function(Ae,fn,Ye,Ct,Ln,gr){Ct!=null&&Ln!=null&&gr!=null||(Ct=Ae.sourceLayer,Ln=Ae.nodeIndex,gr=Ae.tensorIndex);var St=Ct.inboundNodes[Ln];if(Ye.indexOf(St)!==-1)throw new jr("The tensor "+Ae.name+' at layer "'+Ct.name+'" is part of a cycle.');if(fn.indexOf(St)===-1){r.containerNodes.add(n.nodeKey(Ct,Ln)),Ct.id in x||(x[Ct.id]=Object.keys(x).length),Ye.indexOf(St)===-1&&Ye.push(St);for(var ti=St.inboundLayers.length,ir=0;ir<ti;ir++){var Qs=St.inputTensors[ir],Ia=St.inboundLayers[ir],Zs=St.nodeIndices[ir],nt=St.tensorIndices[ir];w(Qs,fn,Ye,Ia,Zs,nt)}for(fn.push(St);Ye.indexOf(St)>=0;)Ye.splice(Ye.indexOf(St),1);b.push(St)}},S=[],C=[],k=0,E=r.outputs;k<E.length;k++){var N=E[k];w(N,S,C)}for(var T=0,A=b.slice().reverse();T<A.length;T++){v[(ke=A[T]).id]=ke,ke.id in m||(m[ke.id]=0);var _=m[ke.id],M=g[ke.outboundLayer.id]==null?0:g[ke.outboundLayer.id];for(_=Math.max(_,M),g[ke.outboundLayer.id]=_,y[ke.outboundLayer.id]=ke.outboundLayer,m[ke.id]=_,f=0;f<ke.inboundLayers.length;f++){var W=ke.inboundLayers[f],L=(u=ke.nodeIndices[f],W.inboundNodes[u]),U=m[L.id]==null?0:m[L.id];m[L.id]=Math.max(_+1,U),v[L.id]=L}}var O={};for(var V in m)(_=m[V])in O||(O[_]=[]),O[_].push(v[V]);var $={};for(var K in g)(_=g[K])in $||($[_]=[]),$[_].push(y[K]);var Q=Object.keys($).map(function(Ae){return parseInt(Ae,10)}).sort(Ec);r.layers=[];for(var ee=0,ue=Q;ee<ue.length;ee++){var le=$[_=ue[ee]];le.sort(function(Ae,fn){var Ye=x[Ae.id],Ct=x[fn.id];return Ye<Ct?-1:Ye>Ct?1:0});for(var te=0,de=le;te<de.length;te++)(s=de[te])instanceof n&&r.internalContainerRefs.push(s),r.layers.push(s)}r.layersByDepth=$,Q=Object.keys(O).map(function(Ae){return parseInt(Ae,10)}).sort(Ec);for(var ge=r.inputs.slice(),ve=[],$e=0,he=Q;$e<he.length;$e++)for(var Ce=0,_e=O[_=he[$e]];Ce<_e.length;Ce++){var ke;if((s=(ke=_e[Ce]).outboundLayer)!=null){for(var Xe=0,Be=ke.inputTensors;Xe<Be.length;Xe++)if(N=Be[Xe],ge.indexOf(N)===-1)throw new jr("Graph disconnected: cannot obtain value for tensor "+N+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+ve);for(var Dt=0,cn=ke.outputTensors;Dt<cn.length;Dt++)N=cn[Dt],ge.push(N);ve.push(s.name)}}r.nodesByDepth=O;for(var Pt=r.layers.map(function(Ae){return Ae.name}),tn=function(Ae){var fn=Pt.filter(function(Ye){return Ye===Ae}).length;if(fn!==1)throw new jr('The name "'+Ae+'" is used '+fn+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(Pt))},Bt=0,pn=Pt;Bt<pn.length;Bt++)tn(pn[Bt]);return r.outboundNodes=[],r.inboundNodes=[],new vh({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(Ae){return null}),outputMasks:r.outputs.map(function(Ae){return null}),inputShapes:r.inputs.map(function(Ae){return Ae.shape}),outputShapes:r.outputs.map(function(Ae){return Ae.shape})}),r.built=!0,r._refCount=1,r}return X(n,t),n.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Container '"+this.name+"' is already disposed.")},n.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount==0){for(var r=0,i=this.layers;r<i.length;r++){var o=i[r];e.numDisposedVariables+=o.dispose().numDisposedVariables}for(var a=0,s=this.internalContainerRefs;a<s.length;a++){var u=s[a];e.numDisposedVariables+=u.dispose().numDisposedVariables}}return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(n.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this.layers.forEach(function(r){r._trainableWeights.forEach(function(i){return i.trainable=e})}),this.trainable_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new B("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],r=0,i=this.layers;r<i.length;r++){var o=i[r];e=e.concat(o.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){for(var e=[],r=0,i=this.layers;r<i.length;r++){var o=i[r];e.push.apply(e,o.nonTrainableWeights)}if(!this.trainable){for(var a=[],s=0,u=this.layers;s<u.length;s++)o=u[s],a.push.apply(a,o.trainableWeights);return a.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),n.prototype.loadWeights=function(e,r){r===void 0&&(r=!0);for(var i={},o=0,a=0,s=this.layers;a<s.length;a++)for(var u=0,l=s[a].weights;u<l.length;u++){var c=l[u];if(i[c.originalName]!=null)throw new B("Duplicate weight name: "+c.originalName);i[c.originalName]=c,o++}var p=[];for(var f in e){if(i[f]!=null)p.push([i[f],e[f]]);else if(r)throw new B("Provided weight data has no target variable: "+f);delete i[f]}if(r){var h=[];for(var d in i)h.push(d);if(h.length>0)throw new B(h.length+" of "+o+" weights are not set: "+h)}A0(p)},n.prototype.updatedConfig=function(){var e=this.getConfig(),r={};return r.className=this.getClassName(),r.config=e,r.kerasVersion="tfjs-layers "+bh,r.backend="TensorFlow.js",r},n.prototype.toJSON=function(e,r){r===void 0&&(r=!0);var i=gg(this.updatedConfig());return r?JSON.stringify(i):i},n.prototype.call=function(e,r){var i=this;return j(function(){e=Je(e);for(var o=new Ya,a=0;a<i.inputs.length;++a)o.add(i.inputs[a],e[a]);return Su(i.outputs,o,r)})},n.prototype.computeMask=function(e,r){var i=this;return j(function(){var o;return e=Je(e),o=r==null?la(null,e.length):Je(r),i.runInternalGraph(e,o)[1]})},n.prototype.computeOutputShape=function(e){var r=Hp(e);if(r.length!==this.inputLayers.length)throw new B("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var i={},o=0;o<r.length;o++){var a=this.inputLayers[o],s=r[o];i[E=a.name+"_0_0"]=s}var u=Object.keys(this.nodesByDepth).map(function(T){return parseInt(T,10)}).sort(Ec);if(u.length>1)for(var l=0,c=u;l<c.length;l++)for(var p=c[l],f=0,h=this.nodesByDepth[p];f<h.length;f++){var d=h[f];if(a=d.outboundLayer,this.inputLayers.map(function(T){return T.id}).indexOf(a.id)===-1){for(var m=[],v=0;v<d.inboundLayers.length;v++){var g=d.inboundLayers[v],y=d.nodeIndices[v],x=d.tensorIndices[v],b=i[E=g.name+"_"+y+"_"+x];m.push(b)}var w=Hp(a.computeOutputShape(dn(m))),S=a.inboundNodes.indexOf(d);for(v=0;v<w.length;v++)i[E=a.name+"_"+S+"_"+v]=w[v]}}var C=[],k=[];for(o=0;o<this.outputLayers.length;o++){a=this.outputLayers[o],S=this.outputLayersNodeIndices[o],x=this.outputLayersTensorIndices[o];var E=a.name+"_"+S+"_"+x;k.push(E)}for(o=0;o<k.length;o++){var N=k[o];Wr(N in i),C.push(i[N])}return dn(C)},n.prototype.runInternalGraph=function(e,r){r==null&&(r=la(null,e.length));for(var i={},o=0;o<this.inputs.length;++o){var a=this.inputs[o],s=e[o],u=r[o];i[a.id]=[s,u]}for(var l=0,c=Object.keys(this.nodesByDepth).map(function($){return parseInt($,10)}).sort(Ec);l<c.length;l++)for(var p=c[l],f=0,h=this.nodesByDepth[p];f<h.length;f++){for(var d=h[f],m=d.outboundLayer,v=d.inputTensors,g=d.outputTensors,y=new Array,x=0,b=v;x<b.length;x++)(a=b[x]).id in i&&y.push(i[a.id]);if(y.length===v.length){var w={},S=void 0,C=void 0,k=void 0,E=void 0;if(d.callArgs!=null&&(w=d.callArgs),y.length===1){var N=y[0],T=N[0],A=N[1];w.mask==null&&(w.mask=A),k=Je(m.call(T,w)),E=Je(m.computeMask(T,A)),S=[T],C=[A]}else S=y.map(function($){return $[0]}),C=y.map(function($){return $[1]}),w.mask==null&&(w.mask=C),k=Je(m.call(S,w)),E=Je(m.computeMask(S,C));if(m.activityRegularizer)throw new Ee("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(o=0;o<g.length;++o)a=g[o],s=k[o],u=E[o],i[a.id]=[s,u]}}for(var _=[],M=[],W=[],L=0,U=this.outputs;L<U.length;L++){Wr((a=U[L]).id in i,"Could not compute output "+a.name+" : "+a.id);var O=i[a.id],V=O[0];u=O[1],W.push(V.shape),_.push(V),M.push(u)}return[_,M,W]},n.prototype.buildNodeConversionMap=function(e){for(var r,i={},o=0,a=this.layers;o<a.length;o++){var s=a[o];r=s instanceof n?1:0;for(var u=0;u<s.inboundNodes.length;u++){var l=n.nodeKey(s,u);this.containerNodes.has(l)&&(i[l]=r,r+=1)}}return i},n.prototype.getLayer=function(e,r){if(r!=null){if(this.layers.length<=r)throw new B("Was asked to retrieve layer at index "+r+", but model only has "+this.layers.length+" layer(s).");return this.layers[r]}if(e==null)throw new B("Provide either a layer name or layer index");for(var i=0,o=this.layers;i<o.length;i++){var a=o[i];if(a.name===e)return a}throw new B("No such layer: "+e)},n.prototype.calculateLosses=function(){var e=this;return j(function(){for(var r=[],i=0,o=e.layers;i<o.length;i++)for(var a=o[i],s=0;s<a.inboundNodes.length;++s){var u=n.nodeKey(a,s);e.containerNodes.has(u)&&r.push.apply(r,a.calculateLosses())}return r})},n.prototype.getConfig=function(){for(var e={name:this.name},r=this.buildNodeConversionMap(this.layers),i=[],o=0,a=this.layers;o<a.length;o++){for(var s=(w=a[o]).getClassName(),u=w.getConfig(),l=[],c=0;c<w.inboundNodes.length;c++){var p=w.inboundNodes[c],f=n.nodeKey(w,c),h={};if(this.containerNodes.has(f)){if(p.callArgs)try{JSON.stringify(p.callArgs),h=p.callArgs}catch{console.warn("Layer "+w.name+" was passed non-serializable keyword arguments: "+p.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),h={}}if(p.inboundLayers.length>0){for(var d=[],m=0;m<p.inboundLayers.length;m++){var v=p.inboundLayers[m],g=p.nodeIndices[m],y=p.tensorIndices[m];(C=r[n.nodeKey(v,g)])==null&&(C=0),d.push([v.name,C,y,h])}l.push(d)}}}var x={};x.name=w.name,x.className=s,x.config=u,x.inboundNodes=l,i.push(x)}e.layers=i;var b=[];for(m=0;m<this.inputLayers.length;m++){var w=this.inputLayers[m];g=this.inputLayersNodeIndices[m],f=n.nodeKey(w,g),this.containerNodes.has(f)&&((C=r[f])!==null&&C!==void 0||(C=0),y=this.inputLayersTensorIndices[m],b.push([w.name,C,y]))}e.inputLayers=b;var S=[];for(m=0;m<this.outputLayers.length;m++)if(w=this.outputLayers[m],g=this.outputLayersNodeIndices[m],f=n.nodeKey(w,g),this.containerNodes.has(f)){var C;(C=r[f])!==null&&C!==void 0||(C=0),y=this.outputLayersTensorIndices[m],S.push([w.name,C,y])}return e.outputLayers=S,e},n.fromConfig=function(e,r,i,o){o===void 0&&(o=!1);var a={},s={};function u(L,U){L.name in s?s[L.name].push(U):s[L.name]=[U]}function l(L,U){for(var O,V=[],$=0,K=U;$<K.length;$++){var Q=K[$],ee=Q[0],ue=Q[1],le=Q[2];if(O=Q[3]==null?{}:Q[3],!(ee in a))return void u(L,U);var te=a[ee];if(te.inboundNodes.length<=ue)return void u(L,U);var de=te.inboundNodes[ue];V.push(de.outputTensors[le])}V.length>0&&L.apply(dn(V),O)}function c(L){var U=L.name,O=Ar(L,r.customObjects!=null?r.customObjects:{});O.setFastWeightInitDuringBuild(o),a[U]=O,L.inboundNodes.forEach(function(V){if(!(V instanceof Array))throw new B("Corrupted configuration, expected array for nodeData: "+V);u(O,V)})}for(var p=r.name,f=r.layers,h=0,d=f;h<d.length;h++)c(g=d[h]);for(;!VF(s);)for(var m=0,v=f;m<v.length;m++){var g=v[m];if((W=a[g.name]).name in s){var y=s[W.name];delete s[W.name];for(var x=0,b=y;x<b.length;x++)l(W,b[x])}}for(var w=[],S=[],C=0,k=r.inputLayers;C<k.length;C++){var E=(g=k[C])[0],N=g[1],T=g[2];Wr(E in a);var A=(W=a[E]).inboundNodes[N].outputTensors;w.push(A[T])}for(var _=0,M=r.outputLayers;_<M.length;_++){E=(g=M[_])[0],N=g[1],T=g[2],Wr(E in a);var W;A=(W=a[E]).inboundNodes[N].outputTensors,S.push(A[T])}return new e({inputs:w,outputs:S,name:p})},Object.defineProperty(n.prototype,"stateful",{get:function(){if(this._stateful)throw new B("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,r=this.layers;e<r.length;e++)if(r[e].stateful)return!0;return!1},enumerable:!0,configurable:!0}),n.prototype.resetStates=function(){var e=this;j(function(){e.layers.forEach(function(r){r.stateful&&r.resetStates()})})},n}(Le);function p4(t,n,e){var r=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(function(o){return null});if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error("Provided "+e+" is an array of "+t.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return t}if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){var i=[];return n.forEach(function(o){o in t?i.push(t[o]):i.push(null)}),i}throw new Error("The model has multiple ("+r+") outputs, so "+e+" must be either an array with "+r+" elements or an object with "+n+" keys. Provided "+e+" not understood: "+JSON.stringify(t))}function _N(t,n){return p4(t,n,"classWeight")}function zN(t,n,e,r){return be(this,void 0,void 0,function(){var i,o,a,s,u;return ye(this,function(l){switch(l.label){case 0:if(n!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");return e==null?[3,2]:(i=j(function(){if(t.shape.length===1)return t.clone();if(t.shape.length===2){if(t.shape[1]>1)return t.argMax(1);if(t.shape[1]===1)return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+t.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+t.rank+") during handling of class weights. The rank is expected to be 1 or 2.")}),s=(a=Array).from,[4,i.data()]);case 1:return o=s.apply(a,[l.sent()]),Te(i),u=[],o.forEach(function(c){if(e[c]==null)throw new Error("classWeight must contain all classes in the training data. The class "+c+" exists in the data but not in classWeight");u.push(e[c])}),[2,zn(u,"float32")];case 2:return[2,null]}})})}function f4(t,n){return we(t,n)}var h4=32;function FN(t,n){var e,r,i=n;e=i.xs,r=i.ys,me.assert(e!=null&&r!=null,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+n});var o=Db("input",t.inputNames,e),a=Db("output",t.outputNames,r),s=o[0].shape[0];me.assert(o.length===t.inputs.length,function(){return"LayersModel has "+t.inputs.length+" inputs, but the dataset provides "+o.length+" inputs.  (Expected input keys: "+JSON.stringify(t.inputNames)+")"}),me.assert(a.length===t.outputs.length,function(){return"LayersModel has "+t.outputs.length+" outputs, but the dataset provides "+a.length+" outputs.  (Expected output keys: "+JSON.stringify(t.outputNames)+")"});var u=function(f){me.assert(o[f].shape[0]===s,function(){return"Batch size mismatch: input "+t.inputNames[f]+" has "+o[f].shape[0]+"; expected  "+s+" based on input "+t.inputNames[0]+"."})};for(var l in o)u(l);var c=function(f){me.assert(a[f].shape[0]===s,function(){return"Batch size mismatch: output "+t.outputNames[f]+" has "+a[f].shape[0]+"; expected  "+s+" based on input "+t.inputNames[0]+"."})};for(var p in a)c(p);return{xs:o,ys:a}}function Db(t,n,e){if(e instanceof Ge)return[e];if(Array.isArray(e))return me.assert(e.length===n.length,function(){return"Received an array of "+e.length+" Tensors, but expected "+n.length+" to match the "+t+" keys "+n+"."}),e;for(var r=[],i=0,o=n;i<o.length;i++){var a=o[i];if(e[a]==null)throw new B("The feature data generated by the dataset lacks the required "+t+" key '"+a+"'.");r.push(e[a])}return r}function d4(t){if(t.length===3)throw new Ee("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function m4(t,n,e){return be(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p,f,h,d,m,v,g,y,x,b,w,S,C,k,E,N,T,A,_,M,W,L,U,O,V,$;return ye(this,function(K){switch(K.label){case 0:if(r=e.batchesPerEpoch!=null,me.assert(t.optimizer!=null,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),me.assert(e!=null,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),me.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+e.epochs}),me.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+e.batchesPerEpoch}),me.assert(e.validationSplit==null,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0,K.label=1;case 1:return K.trys.push([1,,26,27]),i=e.validationData!=null,o=void 0,a=void 0,i&&(Ob(e.validationData)?me.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+e.validationBatches}):(s=d4(e.validationData),o=s.xs,a=s.ys)),u=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c=void 0,c=i?l.slice().concat(l.map(function(Q){return"val_"+Q})):l.slice(),p=kN(e.callbacks,e.yieldEvery),f=e.verbose==null?1:e.verbose,h=NN(p,f,e.epochs,null,null,g4(n,e),null,i,c),d=h.callbackList,m=h.history,d.setModel(t),t.history=m,[4,d.onTrainBegin()];case 2:return K.sent(),t.stopTraining_=!1,v=e.initialEpoch==null?0:e.initialEpoch,[4,n.iterator()];case 3:g=K.sent(),K.label=4;case 4:return v<e.epochs?(y={},[4,d.onEpochBegin(v)]):[3,23];case 5:return K.sent(),x=0,b=0,r?[3,7]:[4,n.iterator()];case 6:g=K.sent(),K.label=7;case 7:return!r||x<e.batchesPerEpoch?[4,g.next()]:[3,21];case 8:return w=K.sent(),r&&w.done?(console.warn("You provided `batchesPerEpoch` as "+e.batchesPerEpoch+", but your dataset iterator ran out of data after "+x+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+e.batchesPerEpoch*e.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):w.value==null?[3,15]:(S=FN(t,w.value),C=S.xs,k=S.ys,(E={}).batch=b,E.size=C[0].shape[0],[4,d.onBatchBegin(b,E)]);case 9:if(K.sent(),N=[],e.classWeight==null)return[3,13];T=_N(e.classWeight,t.outputNames),$=0,K.label=10;case 10:return $<T.length?(_=(A=N).push,[4,zN(k[$],null,T[$])]):[3,13];case 11:_.apply(A,[K.sent()]),K.label=12;case 12:return++$,[3,10];case 13:for(M=C.concat(k).concat(N),W=u(M),Te(M),$=0;$<l.length;++$)L=l[$],U=W[$],E[L]=U,Kr(U);return[4,d.onBatchEnd(b,E)];case 14:K.sent(),bN(E),b++,x++,K.label=15;case 15:return(r?x>=e.batchesPerEpoch:w.done)?i?(O=void 0,Ob(e.validationData)?(V=Je,[4,t.evaluateDataset(e.validationData,{batches:e.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return O=V.apply(void 0,[K.sent()]),[3,18];case 17:O=Je(t.evaluate(o,a,{batchSize:e.validationBatchSize==null?h4:e.validationBatchSize,verbose:0})),K.label=18;case 18:for($=0;$<t.metricsNames.length;++$)y["val_"+t.metricsNames[$]]=O[$];K.label=19;case 19:return[3,21];case 20:return t.stopTraining_?[3,21]:[3,7];case 21:return[4,d.onEpochEnd(v,y)];case 22:return K.sent(),v++,t.stopTraining_?[3,23]:[3,4];case 23:return[4,d.onTrainEnd()];case 24:return K.sent(),[4,t.history.syncData()];case 25:return K.sent(),[2,t.history];case 26:return t.isTraining=!1,[7];case 27:return[2]}})})}function g4(t,n){var e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function Ob(t){return typeof t.iterator=="function"}function v4(t){return typeof t.next=="function"}function y4(t,n,e){return be(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p,f;return ye(this,function(h){switch(h.label){case 0:if(r=(e=e||{}).batches!=null,i=t.testFunction,o=[],e.verbose>0)throw new Ee("Verbose mode is not implemented yet.");return me.assert(!r||e.batches>0&&Number.isInteger(e.batches),function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(e.batches)}),v4(n)?(s=n,[3,3]):[3,1];case 1:return[4,n.iterator()];case 2:s=h.sent(),h.label=3;case 3:a=s,u=0,l=0,c=function(){var d;return ye(this,function(m){switch(m.label){case 0:return[4,a.next()];case 1:return d=m.sent(),o=j(function(){if(d.value){var v=FN(t,d.value),g=v.xs,y=v.ys,x=g.concat(y),b=j(function(){return i(x)});if(Te(x),l===0)for(var w=0;w<b.length;++w)o.push(se(0));var S=x[0].shape[0],C=function(k){var E=b[k],N=o[k];o[k]=j(function(){return Oe(o[k],we(S,E))}),l>0&&Te(N)};for(w=0;w<b.length;++w)C(w);Te(b),u+=S,++l}return o}),d.done?(r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+e.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},h.label=4;case 4:return!r||l<e.batches?[5,c()]:[3,6];case 5:return h.sent()==="break"?[3,6]:[3,4];case 6:for(p=0;p<o.length;++p)f=o[p],o[p]=ln(o[p],u),Te(f);return[2,dn(o)]}})})}function vg(t){me.assert(t>0&&Number.isInteger(t),function(){return"batchSize is required to be a positive integer, but got "+t})}function ku(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(function(r){return Jo(r,n,e-n)}):Jo(t,n,e-n)}function _0(t,n){return j(function(){return t==null?null:Array.isArray(t)?t.map(function(e){return _0(e,n)}):sN(t,n.dtype==="int32"?n:n.toInt())})}function yg(t,n){for(var e=[],r=0,i=null;r<t;)(i=r+n)>=t&&(i=t),e.push([r,i]),r=i;return e}function x4(t,n,e,r,i,o,a,s,u,l,c,p,f,h,d){return be(this,void 0,void 0,function(){var m,v,g,y,x,b,w,S;return ye(this,function(C){switch(C.label){case 0:if(i==null&&(i=32),o==null&&(o=1),c==null&&(c=!0),f==null&&(f=0),m=!1,u!=null&&l!=null&&(m=!0),d!=null&&(m=!0,h==null))throw new B("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return(v=t.checkNumSamples(e,i,h,"steps_per_epoch"))!=null&&(g=Or(0,v)),a==null&&(a=1),y=NN(s,a,o,f,v,h,i,m,p),x=y.callbackList,b=y.history,x.setModel(t),t.history=b,[4,x.onTrainBegin()];case 1:C.sent(),t.stopTraining_=!1,w=function(k){var E,N,T,A,_;return ye(this,function(M){switch(M.label){case 0:return[4,x.onEpochBegin(k)];case 1:if(M.sent(),E={},h==null)return[3,2];throw new Ee("stepsPerEpoch mode is not implemented yet.");case 2:if(c==="batch")throw new Ee("batch shuffling is not implemneted yet");c&&me.shuffle(g),N=zn(g),T=yg(v,i),A=function(W){var L;return ye(this,function(U){switch(U.label){case 0:return L={},[4,x.onBatchBegin(W,L)];case 1:return U.sent(),j(function(){var O=T[W][0],V=T[W][1],$=Jo(N,O,V-O);L.batch=W,L.size=V-O;for(var K=_0(e,$),Q=n(K),ee=0;ee<r.length;++ee){var ue=r[ee],le=Q[ee];L[ue]=le,Kr(le)}if(W===T.length-1&&m){var te=t.testLoop(u,l,i);for(ee=0;ee<r.length;++ee)ue=r[ee],le=te[ee],Kr(le),E["val_"+ue]=le}}),[4,x.onBatchEnd(W,L)];case 2:return U.sent(),bN(L),t.stopTraining_?[2,"break"]:[2]}})},_=0,M.label=3;case 3:return _<T.length?[5,A(_)]:[3,6];case 4:if(M.sent()==="break")return[3,6];M.label=5;case 5:return++_,[3,3];case 6:N.dispose(),M.label=7;case 7:return[4,x.onEpochEnd(k,E)];case 8:return M.sent(),t.stopTraining_?[2,"break"]:[2]}})},S=f,C.label=2;case 2:return S<o?[5,w(S)]:[3,5];case 3:if(C.sent()==="break")return[3,5];C.label=4;case 4:return++S,[3,2];case 5:return[4,x.onTrainEnd()];case 6:return C.sent(),[4,t.history.syncData()];case 7:return C.sent(),[2,t.history]}})})}function b4(t,n,e,r){return r===void 0&&(r={}),be(this,void 0,void 0,function(){var i,o,a,s,u,l,c,p,f,h,d,m,v,g,y,x,b,w,S,C,k,E;return ye(this,function(N){switch(N.label){case 0:if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0,N.label=1;case 1:return N.trys.push([1,,7,8]),vg(p=r.batchSize==null?32:r.batchSize),f=!1,[4,t.standardizeUserData(n,e,r.sampleWeight,r.classWeight,f,p)];case 2:if(h=N.sent(),i=h[0],o=h[1],c=h[2],d=!1,m=void 0,!(r.validationData!=null&&r.validationData.length>0))return[3,4];if(d=!0,r.validationData.length!==2)throw r.validationData.length===3?new Ee("validationData including sample weights is not supported yet."):new B("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");return a=r.validationData[0],s=r.validationData[1],v=!0,[4,t.standardizeUserData(a,s,null,null,v,p)];case 3:return g=N.sent(),u=g[0],l=g[1],m=u.concat(l),[3,5];case 4:r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1?(d=!0,y=Math.floor(i[0].shape[0]*(1-r.validationSplit)),x=i[0].shape[0],u=ku(i,y,x),i=ku(i,0,y),l=ku(o,y,x),o=ku(o,0,y),m=u.concat(l)):r.validationSteps!=null&&(d=!0),N.label=5;case 5:return b=i.concat(o).concat(c),t.checkTrainableWeightsConsistency(),w=t.makeTrainFunction(),S=t.getDedupedMetricsNames(),C=void 0,k=void 0,d?(t.makeTestFunction(),C=t.testFunction,k=S.slice().concat(S.map(function(T){return"val_"+T}))):(C=null,m=[],k=S.slice()),E=kN(r.callbacks,r.yieldEvery),[4,x4(t,w,b,S,p,r.epochs,r.verbose,E,C,m,r.shuffle,k,r.initialEpoch,null,null)];case 6:return[2,N.sent()];case 7:return t.isTraining=!1,Uo(i,n),Uo(o,e),Uo(u,a),Uo(l,s),c!=null&&Te(c),[7];case 8:return[2]}})})}function MN(t){var n=[];t instanceof Ge&&(t=[t]);for(var e=0;e<t.length;++e){var r=t[e];if(r.rank===1)n.push(Gl(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(r)}}return n}function Uo(t,n){if(t!=null){var e=[];if(n instanceof Ge)e.push(n.id);else if(Array.isArray(n))n.forEach(function(u){return e.push(u.id)});else if(n!=null)for(var r in n){var i=n[r];e.push(i.id)}var o=[];if(t instanceof Ge)e.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(function(u){e.indexOf(u.id)===-1&&o.push(u)});else if(t!=null)for(var a in t){var s=t[a];e.indexOf(s.id)===-1&&o.push(s)}o.forEach(function(u){u.isDisposed||u.dispose()})}}function w4(t){return t instanceof Ge}function xg(t){return Array.isArray(t)}function _b(t){return!w4(t)&&!xg(t)}function zb(t,n,e,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=""),n==null||n.length===0){if(t!=null){var o=!1;if(xg(t)&&t.length>0)o=!0;else if(_b(t)){for(var a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new B("Error when checking model "+i+" expected no data, but got "+t)}return[]}if(t==null)return n.map(function(v){return null});var s;if(_b(t)){t=t,s=[];for(var u=0,l=n;u<l.length;u++){var c=l[u];if(t[c]==null)throw new B('No data provided for "'+c+'". Need data for each key in: '+n);s.push(t[c])}}else if(xg(t)){if((t=t).length!==n.length)throw new B("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+n.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);s=t}else{if(t=t,n.length>1)throw new B("The model "+i+" expects "+n.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);s=[t]}if(s=MN(s),e!=null){for(var p=0;p<n.length;++p)if(e[p]!=null){var f=s[p];if(f.shape.length!==e[p].length)throw new B("Error when checking "+i+": expected "+n[p]+" to have "+e[p].length+" dimension(s). but got array with shape "+f.shape);for(var h=0;h<e[p].length;++h)if(h!==0||r){var d=f.shape[h],m=e[p][h];if(m!=null&&m>=0&&d!==m)throw new B("Error when checking "+i+": expected "+n[p]+" to have shape ["+e[p]+"], but got array with shape ["+f.shape+"].")}}}return s}function C4(t,n,e){var r=so(t.map(function(o){return o.shape[0]}));r.sort();var i=so(n.map(function(o){return o.shape[0]}));if(i.sort(),r.length>1)throw new B("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(o){return o.shape})));if(i.length>1)throw new B("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(n.map(function(o){return o.shape})));if(r.length>0&&i.length>0&&!me.arraysEqual(r,i))throw new B("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+i[0]+" target sample(s).")}function S4(t,n,e){for(var r=[Ca,xh,yl],i=0;i<t.length;++i){var o=t[i],a=n[i],s=e[i];if(a!=null){if(a===yl&&o.shape[o.shape.length-1]===1)throw new B("You are passing a target array of shape "+o.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(r.indexOf(a)!==-1)for(var u=o.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var p=u[c],f=l[c];if(f!=null&&p!==f)throw new B("A target Tensor with shape "+o.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}function Fb(t,n,e,r,i){var o;if(r===void 0&&(r=!0),i===void 0&&(i=""),Array.isArray(t)){if(t.length!==n.length)throw new B("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+n.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");o=t}else{if(n.length>1)throw new B("The model expects "+n.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");o=[t]}if(e!=null){for(var a=0;a<n.length;++a)if(e[a]!=null){var s=o[a];if(s.shape.length!==e[a].length)throw new B("Error when checking "+i+": expected "+n[a]+" to have "+e[a].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<e[a].length;++u)if(u!==0||r){var l=s.shape[u],c=e[a][u];if(c!=null&&c!==l)throw new B("Error when checking "+i+": expected "+n[a]+" to have shape "+JSON.stringify(e[a])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}}function k4(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(function(u){return[]});var e;if(typeof t=="string"||typeof t=="function")e=[t];else{if(!Array.isArray(t)&&typeof t!="object")throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);e=t}if(Array.isArray(e))return n.map(function(u){return e});for(var r=[],i=0,o=n;i<o.length;i++){var a=o[i],s=e.hasOwnProperty(a)?e[a]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}var E4="layers-model",ea=function(t){function n(e){var r=t.call(this,e)||this;return r.isTraining=!1,r}return X(n,t),n.prototype.summary=function(e,r,i){if(i===void 0&&(i=console.log),!this.built)throw new B("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");t4(this,e,r,i)},n.prototype.compile=function(e){var r=this;if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=e4(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Oi))throw new B("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var i=[];if(Array.isArray(e.loss)||typeof e.loss=="string"||typeof e.loss=="function")if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new B("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");var o=e.loss;i=o.map(function(v){return Ad(v)})}else{var a=Ad(e.loss);this.outputs.forEach(function(v){i.push(a)})}else{for(var s in e.loss=e.loss,e.loss)if(this.outputNames.indexOf(s)===-1)throw new B('Unknown entry in loss dictionary: "'+s+'". Only expected the following keys: '+this.outputNames);for(var u=0,l=this.outputNames;u<l.length;u++){var c=l[u];e.loss[c]==null&&console.warn('Output "'+c+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+c+" during training"),i.push(Ad(e.loss[c]))}}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var p=0;p<this.outputs.length;++p){var f=this.internalOutputShapes[p],h=this.outputNames[p];this.feedOutputNames.push(h),this.feedOutputShapes.push(f),this.feedLossFns.push(this.lossFunctions[p])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Zo("loss",function(){for(var v=0;v<r.outputs.length;++v)if(d.indexOf(v)===-1){var g=r.lossFunctions[v];r.outputs.length>1&&(r.metricsTensors.push([g,v]),r.metricsNames.push(r.outputNames[v]+"_loss"))}});var m=k4(e.metrics,this.outputNames);Zo("metric",function(){for(var v=function(y){if(d.indexOf(y)!==-1)return"continue";(function(x){for(var b,w,S,C=function(N){if(typeof N=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(N)!==-1){var T=r.internalOutputShapes[y];T[T.length-1]===1||r.lossFunctions[y]===xh?["accuracy","acc"].indexOf(N)!==-1?w=T0:["crossentropy","ce"].indexOf(N)!==-1&&(w=RN):r.lossFunctions[y]===Kp?["accuracy","acc"].indexOf(N)!==-1?w=TN:["crossentropy","ce"].indexOf(N)!==-1&&(w=DN):["accuracy","acc"].indexOf(N)!==-1?w=D0:["crossentropy","ce"].indexOf(N)!==-1&&(w=O0);var A=void 0;["accuracy","acc"].indexOf(N)!==-1?A="acc":["crossentropy","ce"].indexOf(N)!==-1&&(A="ce"),S=w,b=""+A}else{var _=JM(N);S=_,b=""+Ac(N)}var M;Zo(b,function(){M=S}),function(W,L,U){r.outputNames.length>1&&(L=r.outputNames[W]+"_"+L),r.metricsNames.push(L),r.metricsTensors.push([U,W])}(y,b,M)},k=0,E=x;k<E.length;k++)C(E[k])})(m[y])},g=0;g<r.outputs.length;++g)v(g)}),this.collectedTrainableWeights=this.trainableWeights},n.prototype.checkTrainableWeightsConsistency=function(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},n.prototype.evaluate=function(e,r,i){i===void 0&&(i={});var o=i.batchSize==null?32:i.batchSize;vg(o);var a=this.standardizeUserDataXY(e,r,!0,o);try{var s=a[0].concat(a[1]);this.makeTestFunction();var u=this.testFunction;return dn(this.testLoop(u,s,o,i.verbose,i.steps))}finally{Uo(a[0],e),Uo(a[1],r)}},n.prototype.evaluateDataset=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){return this.makeTestFunction(),[2,y4(this,e,r)]})})},n.prototype.checkNumSamples=function(e,r,i,o){var a;if(o===void 0&&(o="steps"),i!=null){if(a=null,r!=null)throw new B("If "+o+" is set, batchSize must be null or undefined.Got batchSize = "+r)}else{if(e==null)throw new B("Either the input data should have a defined shape, or "+o+" shoud be specified.");a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a},n.prototype.execute=function(e,r){if(Array.isArray(r)&&r.length===0)throw new B("`outputs` is an empty Array, which is not allowed.");var i=Array.isArray(r),o=i?r:[r],a=this.retrieveSymbolicTensors(o),s=new Ya;if(e instanceof Ge&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new B("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var u=0;u<this.inputs.length;++u)s.add(this.inputs[u],e[u])}else for(var l=0,c=this.inputs;l<c.length;l++){var p=c[l],f=e[p.name];if(f==null)throw new B("No value is provided for the model's input "+p.name);s.add(p,f)}var h=Su(a,s);return i?h:h[0]},n.prototype.retrieveSymbolicTensors=function(e){for(var r=la(null,e.length),i=e.length,o=0,a=this.layers;o<a.length;o++){for(var s=a[o],u=Array.isArray(s.output)?s.output:[s.output],l=u.map(function(h){return h.name}),c=0;c<e.length;++c){var p=l.indexOf(e[c]);if(p!==-1&&(r[c]=u[p],i--),i===0)break}if(i===0)break}if(i>0){var f=[];throw r.forEach(function(h,d){h==null&&f.push(e[d])}),new B("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(f))}return r},n.prototype.predictLoop=function(e,r,i){var o=this;return r===void 0&&(r=32),i===void 0&&(i=!1),j(function(){var a=o.checkNumSamples(e);if(i)throw new Ee("Verbose predictLoop() is not implemented yet.");for(var s=yg(a,r),u=o.outputs.map(function(p){return[]}),l=function(p){j(function(){var f=s[p][0],h=s[p][1],d=ku(e,f,h),m=[];if(Array.isArray(d))for(var v=0;v<d.length;++v)m.push({key:o.inputs[v],value:d[v]});else m.push({key:o.inputs[0],value:d});var g=new Ya(m);return Su(o.outputs,g)}).forEach(function(f,h){return u[h].push(f)})},c=0;c<s.length;++c)l(c);return dn(u.map(function(p){return un(p,0)}))})},n.prototype.predict=function(e,r){r===void 0&&(r={});var i=MN(e);Fb(i,this.inputNames,this.feedInputShapes,!1);try{var o=r.batchSize==null?32:r.batchSize;return vg(o),this.predictLoop(i,o)}finally{Uo(i,e)}},n.prototype.predictOnBatch=function(e){Fb(e,this.inputNames,this.feedInputShapes,!0);var r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)},n.prototype.standardizeUserDataXY=function(e,r,i,o){if(this.optimizer_==null)throw new jr("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],s=0;s<this.feedOutputShapes.length;++s){var u=this.feedOutputShapes[s];this.feedLossFns[s]===Kp?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(C4(e=zb(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=zb(r,this.feedOutputNames,a,!1,"target")),S4(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!=0)throw new B("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+o+". Found: "+e[0].shape[0]+" sample(s).");return[e,r]},n.prototype.standardizeUserData=function(e,r,i,o,a,s){return a===void 0&&(a=!0),be(this,void 0,void 0,function(){var u,l,c,p,f,h,d,m;return ye(this,function(v){switch(v.label){case 0:if(u=this.standardizeUserDataXY(e,r,a,s),l=u[0],c=u[1],i!=null)throw new Error("sample weight is not supported yet.");if(p=null,o==null)return[3,4];f=_N(o,this.outputNames),p=[],h=0,v.label=1;case 1:return h<f.length?(m=(d=p).push,[4,zN(c[h],null,f[h])]):[3,4];case 2:m.apply(d,[v.sent()]),v.label=3;case 3:return++h,[3,1];case 4:return[2,[l,c,p]]}})})},n.prototype.testLoop=function(e,r,i,o,a){var s=this;return o===void 0&&(o=0),j(function(){var u=s.checkNumSamples(r,i,a,"steps"),l=[];if(o>0)throw new Ee("Verbose mode is not implemented yet.");if(a!=null)throw new Ee("steps mode in testLoop() is not implemented yet");for(var c=yg(u,i),p=zn(Or(0,u)),f=0;f<c.length;++f){var h=c[f][0],d=c[f][1],m=Jo(p,h,d-h),v=_0(r,m),g=e(v);if(f===0)for(var y=0;y<g.length;++y)l.push(se(0));for(y=0;y<g.length;++y){var x=g[y];l[y]=Oe(l[y],we(d-h,x))}}for(y=0;y<l.length;++y)l[y]=ln(l[y],u);return l})},n.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,r=[],i=0;i<e.length;++i){var o=e[i],a=o;yb(e,o)>1&&(a+="_"+yb(e.slice(0,i),o)),r.push(a)}return r},n.prototype.makeTrainFunction=function(){var e=this;return function(r){var i=[],o=r.slice(0,e.inputs.length),a=r.slice(e.inputs.length,e.inputs.length+e.outputs.length),s=r.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),u=[],l=e.collectedTrainableWeights.map(function(c){return c.read()});return[e.optimizer_.minimize(function(){for(var c=[],p=0;p<e.inputs.length;++p)c.push({key:e.inputs[p],value:o[p]});var f,h=new Ya(c),d=Su(e.outputs,h,{training:!0});for(p=0;p<e.lossFunctions.length;++p){var m=(0,e.lossFunctions[p])(a[p],d[p]);s[p]!=null&&(m=f4(m,s[p]));var v=wt(m);i.push(v),f=p===0?m:Oe(f,m)}for(p=0;p<e.metricsTensors.length;++p){var g=void 0;if(e.outputs.length>1&&p<e.outputs.length)g=i[p];else{var y=e.metricsTensors[p][0],x=e.metricsTensors[p][1];g=wt(y(a[x],d[x]))}Kr(g),u.push(g)}return f=wt(f),e.calculateLosses().forEach(function(b){f=Oe(f,b)}),f},!0,l)].concat(u)}},n.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(r){return j(function(){for(var i,o=[],a=r.slice(0,e.inputs.length),s=r.slice(e.inputs.length,e.inputs.length+e.outputs.length),u=[],l=0;l<e.inputs.length;++l)u.push({key:e.inputs[l],value:a[l]});var c=new Ya(u),p=Su(e.outputs,c);for(l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],h=wt(f(s[l],p[l]));i=l===0?h:Oe(i,h),o.push(i)}for(l=0;l<e.metricsTensors.length;++l){var d=e.metricsTensors[l][0],m=e.metricsTensors[l][1],v=wt(d(s[m],p[m]));o.push(v)}return o})}},n.prototype.fit=function(e,r,i){return i===void 0&&(i={}),be(this,void 0,void 0,function(){return ye(this,function(o){return[2,b4(this,e,r,i)]})})},n.prototype.fitDataset=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){return[2,m4(this,e,r)]})})},n.prototype.trainOnBatch=function(e,r){return be(this,void 0,void 0,function(){var i,o,a,s,u,l,c,p,f;return ye(this,function(h){switch(h.label){case 0:return[4,this.standardizeUserData(e,r)];case 1:i=h.sent(),o=i[0],a=i[1],s=this.makeTrainFunction(),u=s(o.concat(a)),l=[],c=0,p=u,h.label=2;case 2:return c<p.length?[4,p[c].data()]:[3,5];case 3:f=h.sent(),l.push(f[0]),h.label=4;case 4:return c++,[3,2];case 5:return Te(u),[2,dn(l)]}})})},n.prototype.getNamedWeights=function(e){for(var r=[],i=e!=null&&e.trainableOnly,o=i?this.trainableWeights:this.weights,a=this.getWeights(i),s=0;s<o.length;++s)i&&!o[s].trainable||r.push({name:o[s].originalName,tensor:a[s]});return r},Object.defineProperty(n.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=t.prototype.dispose.call(this);if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){var r=Lp().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-Lp().numTensors}return e},n.prototype.getLossIdentifiers=function(){var e;if(typeof this.loss=="string")e=ci(this.loss);else if(Array.isArray(this.loss)){for(var r=0,i=this.loss;r<i.length;r++)if(typeof i[r]!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(function(c){return ci(c)})}else{var o=Object.keys(this.loss);e={};for(var a=this.loss,s=0,u=o;s<u.length;s++){var l=u[s];if(typeof a[l]!="string")throw new Error("Serialization of non-string loss is not supported.");e[l]=ci(a[l])}}return e},n.prototype.getMetricIdentifiers=function(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[ci(Ac(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(i){return ci(Ac(i))});var e={};for(var r in this.metrics)e[r]=ci(Ac(this.metrics[r]));return e},n.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},n.prototype.loadTrainingConfig=function(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");var r,i,o=Ar(xl(e.optimizer_config));if(typeof e.loss=="string")r=Fo(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(function(s){return Fo(s)});else if(e.loss!=null)for(var a in r={},e.loss)r[a]=Fo(e.loss[a]);if(Array.isArray(e.metrics))i=e.metrics.map(function(s){return Fo(s)});else if(e.metrics!=null)for(var a in i={},e.metrics)i[a]=Fo(e.metrics[a]);this.compile({loss:r,metrics:i,optimizer:o})},n.prototype.save=function(e,r){return be(this,void 0,void 0,function(){var i,o,a,s,u,l,c,p,f,h,d,m,v,g;return ye(this,function(y){switch(y.label){case 0:if(typeof e=="string"){if((i=qn.getSaveHandlers(e)).length===0)throw new B("Cannot find any save handlers for URL '"+e+"'");if(i.length>1)throw new B("Found more than one ("+i.length+") save handlers for URL '"+e+"'");e=i[0]}if(e.save==null)throw new B("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,qn.encodeWeights(this.getNamedWeights(r))];case 1:return o=y.sent(),a=!1,s=null,u=this.toJSON(s,a),l={modelTopology:u,format:E4,generatedBy:"TensorFlow.js tfjs-layers v"+bh,convertedBy:null},r!=null&&r.includeOptimizer&&this.optimizer!=null?(l.trainingConfig=this.getTrainingConfig(),c="optimizer",m=(d=qn).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,m.apply(d,[y.sent(),c])];case 3:p=y.sent(),f=p.data,h=p.specs,(g=o.specs).push.apply(g,h),o.data=qn.concatenateArrayBuffers([o.data,f]),y.label=4;case 4:return this.userDefinedMetadata!=null&&(v=!0,Ab(this.userDefinedMetadata,this.name,v),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,[2,e.save(l)]}})})},n.prototype.setUserDefinedMetadata=function(e){Ab(e,this.name),this.userDefinedMetadata=e},n.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},n.className="Model",n}(c4);function N4(t,n){return be(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l;return ye(this,function(c){switch(c.label){case 0:return"modelTopology"in t||(t={modelTopology:t}),(e=(t=t).modelTopology).model_config!=null&&(e=e.model_config),r=xl(e),i=Ar(r,n),t.weightsManifest==null?[3,2]:[4,qn.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map(function(p){return p.originalName}))];case 1:for(o=c.sent(),a={},s=0,u=i.weights;s<u.length;s++)l=u[s],a[l.originalName]=o[l.originalName];i.loadWeights(a),Te(o),c.label=2;case 2:return[2,i]}})})}function I4(t,n){return be(this,void 0,void 0,function(){var e;return ye(this,function(r){if(n==null&&(n={}),typeof t=="string"){if((e=qn.getLoadHandlers(t,n.onProgress)).length===0)e.push(qn.browserHTTPRequest(t,n));else if(e.length>1)throw new B("Found more than one ("+e.length+") load handlers for URL '"+t+"'");t=e[0]}return[2,A4(t,void 0,n)]})})}function A4(t,n,e){return be(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p;return ye(this,function(f){switch(f.label){case 0:if(e==null&&(e={}),t.load==null)throw new B("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,t.load()];case 1:if(r=f.sent(),(i=r.modelTopology).model_config!=null&&(i=i.model_config),o=e.strict==null||e.strict,a=r.weightData!=null&&r.weightSpecs!=null&&o,s=Ar(xl(i),n,a),(u=r.trainingConfig)!=null&&s.loadTrainingConfig(u),r.userDefinedMetadata!=null&&s.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData==null)return[3,4];if(r.weightSpecs==null)throw new B("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return l=R4(r.weightData,r.weightSpecs),c=l.modelWeights,p=l.optimizerWeights,s.loadWeights(c,o),s.optimizer!=null&&p.length>0?[4,s.optimizer.setWeights(p)]:[3,3];case 2:f.sent(),f.label=3;case 3:Te(c),Te(p.map(function(h){return h.tensor})),f.label=4;case 4:return[2,s]}})})}function R4(t,n){var e=qn.decodeWeights(t,n),r={},i=[];return n.forEach(function(o){o.group==="optimizer"?i.push({name:o.name,tensor:e[o.name]}):r[o.name]=e[o.name]}),{modelWeights:r,optimizerWeights:i}}Z.registerClass(ea);var z0=function(t){function n(e){var r=t.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},r.trainable=!0,r.built=!1,r.name=e.name!=null?e.name:gh("sequential_"),e.layers!=null)for(var i=0,o=e.layers;i<o.length;i++){var a=o[i];r.add(a)}return r}return X(n,t),n.prototype.checkShape=function(e){if(e.inboundNodes[0].outputTensors[0].shape.some(function(r){return r<0}))throw new B("Negative dimension size caused by adding layer "+e.name+" with input shape ["+e.inboundNodes[0].inputTensors[0].shape+"]")},n.prototype.add=function(e){var r,i=e instanceof n||e instanceof ea;if(i){if((r=e).outputs.length!==1)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new B("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new B("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var o=xN({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(i)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new B("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(e.inboundNodes[0].outputTensors.length!==1)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=yN(this.outputs[0])}this.inboundNodes=[],new vh({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:la(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(s){return s.shape}),outputShapes:this.outputs[0].shape})}else{var a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},n.prototype.pop=function(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},n.prototype.call=function(e,r){return this.model==null&&this.build(),this.model.call(e,r)},n.prototype.build=function(e){if(Ze(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ea({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},n.prototype.countParams=function(){return this.built||this.build(),t.prototype.countParams.call(this)},n.prototype.summary=function(e,r,i){i===void 0&&(i=console.log),this.built||this.build(),t.prototype.summary.call(this,e,r,i)},n.prototype.setWeights=function(e){this.model==null&&this.build(),this.model.setWeights(e)},n.prototype.evaluate=function(e,r,i){if(i===void 0&&(i={}),!this.built)throw new jr("The model needs to be compiled before being used.");return this.model.evaluate(e,r,i)},n.prototype.evaluateDataset=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){if(!this.built)throw new jr("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(e,r)]})})},n.prototype.predict=function(e,r){return r===void 0&&(r={}),this.model==null&&this.build(),this.model.predict(e,r)},n.prototype.predictOnBatch=function(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)},n.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(n.prototype,"optimizer",{get:function(){return this.model==null?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e},enumerable:!0,configurable:!0}),n.prototype.fit=function(e,r,i){return i===void 0&&(i={}),be(this,void 0,void 0,function(){return ye(this,function(o){if(!this.built)throw new jr("The model needs to be compiled before being used.");return[2,this.model.fit(e,r,i)]})})},n.prototype.fitDataset=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){if(!this.built)throw new jr("The model needs to be compiled before being used.");return[2,this.model.fitDataset(e,r)]})})},n.prototype.trainOnBatch=function(e,r){return be(this,void 0,void 0,function(){return ye(this,function(i){return[2,this.model.trainOnBatch(e,r)]})})},n.fromConfig=function(e,r,i,o){var a;o===void 0&&(o=!1);var s={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new B("Legacy serialization format not supported yet.");a=r}else me.assert(r.layers!=null,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),a=r.layers,delete r.layers,s=r;var u=new e(s);if(!(u instanceof n))throw new Ee("Sequential.fromConfig called on non-Sequential input: "+u);for(var l=0,c=a;l<c.length;l++){var p=Ar(c[l],void 0,o);o&&p.setFastWeightInitDuringBuild(!0),u.add(p)}return u},Object.defineProperty(n.prototype,"stopTraining",{get:function(){if(this.model==null)throw new B("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(this.model==null)throw new B("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){for(var e=[],r=0,i=this.layers;r<i.length;r++){var o=i[r],a={};a.className=o.getClassName(),a.config=o.getConfig(),e.push(a)}return{name:this.name,layers:e}},n.className="Sequential",n}(ea);function T4(t){return new ea(t)}function D4(t){return new z0(t)}function O4(t,n){return n==null&&(n={}),I4(t,n)}function LN(t){return xN(t)}function _4(t,n){EN.registerCallbackConstructor(t,n)}Z.registerClass(z0);var rr=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.getConfig=function(){return{}},n}(Z.Serializable),z4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e,r){return r===void 0&&(r=1),rM(e,r)},n.className="elu",n}(rr);Z.registerClass(z4);var F4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return lh(e)},n.className="selu",n}(rr);Z.registerClass(F4);var M4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return ko(e)},n.className="relu",n}(rr);Z.registerClass(M4);var L4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return j(function(){return js(6,ko(e))})},n.className="relu6",n}(rr);Z.registerClass(L4);var P4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return e},n.className="linear",n}(rr);Z.registerClass(P4);var B4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return $f(e)},n.className="sigmoid",n}(rr);Z.registerClass(B4);var V4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return oM(e)},n.className="hardSigmoid",n}(rr);Z.registerClass(V4);var W4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return _l(e)},n.className="softplus",n}(rr);Z.registerClass(W4);var $4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return iM(e)},n.className="softsign",n}(rr);Z.registerClass($4);var U4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e){return Uf(e)},n.className="tanh",n}(rr);Z.registerClass(U4);var PN=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e,r){return r===void 0&&(r=-1),ya(e,r)},n.className="softmax",n}(rr);Z.registerClass(PN);var j4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.apply=function(e,r){return r===void 0&&(r=-1),Pf(e,r)},n.className="logSoftmax",n}(rr);function er(t){return t.getClassName()}function Td(t,n){return n===void 0&&(n={}),Ul(t,Z.SerializationMap.getMap().classNameMap,n,"activation")}function go(t){var n;return t==null?Td(n={className:"linear",config:{}}):typeof t=="string"?((n={}).className=t,n.config={},Td(n)):t instanceof rr?t:Td(t)}function F0(t){if(t!=null&&typeof t!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}Z.registerClass(j4);var BN=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n}(Z.Serializable),wh=function(t){function n(e){var r=t.call(this)||this;return F0(e),r.l1=e==null||e.l1==null?.01:e.l1,r.l2=e==null||e.l2==null?.01:e.l2,r.hasL1=r.l1!==0,r.hasL2=r.l2!==0,r}return X(n,t),n.prototype.apply=function(e){var r=this;return j(function(){var i=He([1]);return r.hasL1&&(i=Oe(i,Fn(we(r.l1,fo(e))))),r.hasL2&&(i=Oe(i,Fn(we(r.l2,ql(e))))),i.asScalar()})},n.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},n.fromConfig=function(e,r){return new e({l1:r.l1,l2:r.l2})},n.className="L1L2",n}(BN);function H4(t){return F0(t),new wh({l1:t!=null?t.l1:null,l2:0})}function G4(t){return F0(t),new wh({l2:t!=null?t.l2:null,l1:0})}Z.registerClass(wh);var Mb={l1l2:"L1L2"};function De(t){return y0(t)}function Lb(t,n){return n===void 0&&(n={}),Ul(t,Z.SerializationMap.getMap().classNameMap,n,"regularizer")}function st(t){return t==null?null:typeof t=="string"?Lb({className:t in Mb?Mb[t]:t,config:{}}):t instanceof BN?t:Lb(t)}var VN=function(t){function n(e){var r=t.call(this,e??{})||this;return r.supportsMasking=!0,e!=null&&(r.maxValue=e.maxValue),r}return X(n,t),n.prototype.call=function(e,r){e=Ne(e);var i=ko(e);return this.maxValue!=null&&(i=yn(i,0,this.maxValue)),i},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={maxValue:this.maxValue},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ReLU",n}(Le);Z.registerClass(VN);var WN=function(t){function n(e){var r=t.call(this,e??{})||this;return r.DEFAULT_ALPHA=.3,e==null&&(e={}),r.alpha=e.alpha==null?r.DEFAULT_ALPHA:e.alpha,r}return X(n,t),n.prototype.call=function(e,r){var i=Ne(e);return sh(i,this.alpha)},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={alpha:this.alpha},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="LeakyReLU",n}(Le);Z.registerClass(WN);var $N=function(t){function n(e){var r=t.call(this,e??{})||this;if(r.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),r.supportsMasking=!0,r.alphaInitializer=at(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=st(e.alphaRegularizer),r.alphaConstraint=At(e.alphaConstraint),e.sharedAxes==null)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if(typeof e.sharedAxes!="number")throw new B("Expected sharedAxes to be a number or an array of numbers, but got "+e.sharedAxes);r.sharedAxes=[e.sharedAxes]}return r}return X(n,t),n.prototype.build=function(e){var r=(e=Ze(e)).slice(1);if(this.sharedAxes!=null)for(var i=0,o=this.sharedAxes;i<o.length;i++)r[(s=o[i])-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(this.sharedAxes!=null)for(var s=1;s<e.length;++s)a[s]=e[s];this.inputSpec=[new Ut({ndim:e.length,axes:a})],this.built=!0},n.prototype.call=function(e,r){return e=Ne(e),uh(e,this.alpha.read())},n.prototype.getConfig=function(){var e={alphaInitializer:We(this.alphaInitializer),alphaRegularizer:De(this.alphaRegularizer),alphaConstraint:Ke(this.alphaConstraint),sharedAxes:this.sharedAxes},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="PReLU",n}(Le);Z.registerClass($N);var UN=function(t){function n(e){var r=t.call(this,e??{})||this;if(r.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==r.DEFAULT_ALPHA)throw new Ee("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return r.alpha=e.alpha==null?r.DEFAULT_ALPHA:e.alpha,r}return X(n,t),n.prototype.call=function(e,r){var i=Ne(e);return Ks(i)},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={alpha:this.alpha},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ELU",n}(Le);Z.registerClass(UN);var jN=function(t){function n(e){var r=t.call(this,e??{})||this;return r.DEFAULT_THETA=1,e==null&&(e={}),r.theta=e.theta==null?r.DEFAULT_THETA:e.theta,r}return X(n,t),n.prototype.call=function(e,r){var i=Ne(e);return i.mul(Hl(i.greater(this.theta),"float32"))},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={theta:this.theta},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ThresholdedReLU",n}(Le);Z.registerClass(jN);var HN=function(t){function n(e){var r=t.call(this,e??{})||this;return r.DEFAULT_AXIS=1,e==null&&(e={}),r.softmax=new PN().apply,r.axis=e.axis==null?r.DEFAULT_AXIS:e.axis,r}return X(n,t),n.prototype.call=function(e,r){var i=Ne(e);return this.softmax(i,this.axis)},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={axis:this.axis},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Softmax",n}(Le);function Dd(t,n,e){if(typeof t=="number")return la(t,n);if(t.length!==n)throw new B("The "+e+" argument must be an integer or tuple of "+n+" integers. Received: "+t.length+" elements.");for(var r=0;r<n;++r){var i=t[r];if(!JF(i))throw new B("The "+e+" argument must be an integer or tuple of "+n+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+i)}return t}function xi(t,n,e,r,i){return i===void 0&&(i=1),t==null?t:(o=e==="same"?t:t-(n+(n-1)*(i-1))+1,Math.floor((o+r-1)/r));var o}function Rc(t,n,e,r){if(t==null)return null;if(r==="valid")t=t*n+mo([e-n,0]);else{if(r!=="same")throw new B("Unsupport padding mode: "+r+".");t*=n}return t}function M0(t,n){return j(function(){return Tt(n),n==="channelsFirst"?lt(t,[0,2,3,1]):t})}function GN(t,n){return j(function(){return Tt(n),n==="channelsFirst"?lt(t,[0,2,3,4,1]):t})}function q4(t,n,e,r,i,o,a){return r===void 0&&(r=1),i===void 0&&(i="valid"),a===void 0&&(a=1),j(function(){if(o==null&&(o=Dr()),Tt(o),t.shape.length!==3)throw new B("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(n.shape.length!==3)throw new B("The kernel for a conv1dWithBias operation should be 3, but is "+n.shape.length+" instead");if(e!=null&&e.shape.length!==1)throw new B("The bias for a conv1dWithBias operation should be 1, but is "+n.shape.length+" instead");if(o==="channelsFirst"&&(t=lt(t,[0,2,1])),i==="causal")throw new Ee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Xf(t,n,r,i==="same"?"same":"valid","NWC",a);return e!=null&&(s=_i(s,e)),s})}function Pb(t,n,e,r,i,o,a,s){return r===void 0&&(r=[1,1]),i===void 0&&(i="valid"),s===void 0&&(s=null),j(function(){if(o==null&&(o=Dr()),Tt(o),t.rank!==3&&t.rank!==4)throw new B("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+t.rank+".");if(n.rank!==3&&n.rank!==4)throw new B("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+t.rank+".");var u=M0(t,o);if(i==="causal")throw new Ee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Is.conv2d({x:u,filter:n,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:e,activation:s}),o==="channelsFirst"&&(u=lt(u,[0,3,1,2])),u})}function K4(t,n,e,r,i,o,a){return r===void 0&&(r=[1,1,1]),i===void 0&&(i="valid"),j(function(){if(o==null&&(o=Dr()),Tt(o),t.rank!==4&&t.rank!==5)throw new B("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(n.rank!==4&&n.rank!==5)throw new B("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");var s=GN(t,o);if(i==="causal")throw new Ee("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Yf(s,n,r,i==="same"?"same":"valid","NDHWC",a),e!=null&&(s=_i(s,e)),o==="channelsFirst"&&(s=lt(s,[0,4,1,2,3])),s})}Z.registerClass(HN);var qN=function(t){function n(e,r){var i=t.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),i.rank=e,xn(i.rank,"rank"),i.rank!==1&&i.rank!==2&&i.rank!==3)throw new Ee("Convolution layer for rank other than 1, 2, or 3 ("+i.rank+") is not implemented yet.");if(i.kernelSize=Dd(r.kernelSize,e,"kernelSize"),i.strides=Dd(r.strides==null?1:r.strides,e,"strides"),i.padding=r.padding==null?"valid":r.padding,mr(i.padding),i.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Tt(i.dataFormat),i.activation=go(r.activation),i.useBias=r.useBias==null||r.useBias,i.biasInitializer=at(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=At(r.biasConstraint),i.biasRegularizer=st(r.biasRegularizer),i.activityRegularizer=st(r.activityRegularizer),i.dilationRate=Dd(r.dilationRate==null?1:r.dilationRate,e,"dilationRate"),i.rank===1&&Array.isArray(i.dilationRate)&&i.dilationRate.length!==1)throw new B("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(i.rank===2){if(typeof i.dilationRate=="number")i.dilationRate=[i.dilationRate,i.dilationRate];else if(i.dilationRate.length!==2)throw new B("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate))}else if(i.rank===3){if(typeof i.dilationRate=="number")i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(i.dilationRate.length!==3)throw new B("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(i.dilationRate))}return i}return X(n,t),n.verifyArgs=function(e){if(Wr("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!x0(e.kernelSize,"number",1,3))throw new B("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(e.kernelSize)+".")},n.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:er(this.activation),useBias:this.useBias,biasInitializer:We(this.biasInitializer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),biasConstraint:Ke(this.biasConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(Le),Ch=function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.kernel=null,n.verifyArgs(r),i.filters=r.filters,xn(i.filters,"filters"),i.kernelInitializer=at(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=At(r.kernelConstraint),i.kernelRegularizer=st(r.kernelRegularizer),i}return X(n,t),n.prototype.build=function(e){var r;e=Ze(e);var i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new B("The channel dimension of the input should be defined. Found "+e[i]);var o=e[i],a=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(r={},r[i]=o,r)}],this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){var o;e=Ne(e);var a=i.bias==null?null:i.bias.read(),s=YE(i.activation.getClassName());if(s!=null&&i.rank===2)o=Pb(e,i.kernel.read(),a,i.strides,i.padding,i.dataFormat,i.dilationRate,s);else{if(i.rank===1)o=q4(e,i.kernel.read(),a,i.strides[0],i.padding,i.dataFormat,i.dilationRate[0]);else if(i.rank===2)o=Pb(e,i.kernel.read(),a,i.strides,i.padding,i.dataFormat,i.dilationRate);else{if(i.rank!==3)throw new Ee("convolutions greater than 3D are not implemented yet.");o=K4(e,i.kernel.read(),a,i.strides,i.padding,i.dataFormat,i.dilationRate)}i.activation!=null&&(o=i.activation.apply(o))}return o})},n.prototype.computeOutputShape=function(e){e=Ze(e);for(var r=[],i=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2),o=0;o<i.length;++o){var a=xi(i[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);r.push(a)}var s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(r)).push(this.filters):(s.push(this.filters),s=s.concat(r)),s},n.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:We(this.kernelInitializer),kernelRegularizer:De(this.kernelRegularizer),kernelConstraint:Ke(this.kernelConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.verifyArgs=function(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new B("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},n}(qN),L0=function(t){function n(e){var r=t.call(this,2,e)||this;return n.verifyArgs(e),r}return X(n,t),n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},n.verifyArgs=function(e){if(typeof e.kernelSize!="number"&&!x0(e.kernelSize,"number",1,2))throw new B("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},n.className="Conv2D",n}(Ch);Z.registerClass(L0);var KN=function(t){function n(e){var r=t.call(this,3,e)||this;return n.verifyArgs(e),r}return X(n,t),n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},n.verifyArgs=function(e){if(typeof e.kernelSize!="number"&&(!Array.isArray(e.kernelSize)||e.kernelSize.length!==1&&e.kernelSize.length!==3))throw new B("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(e.kernelSize)+".")},n.className="Conv3D",n}(Ch);Z.registerClass(KN);var XN=function(t){function n(e){var r=t.call(this,e)||this;if(r.inputSpec=[new Ut({ndim:4})],r.padding!=="same"&&r.padding!=="valid")throw new B("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+r.padding);return r}return X(n,t),n.prototype.build=function(e){var r;if((e=Ze(e)).length!==4)throw new B("Input should have rank 4; Received input shape: "+JSON.stringify(e));var i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new B("The channel dimension of the inputs should be defined. Found `None`.");var o=e[i],a=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ut({ndim:4,axes:(r={},r[i]=o,r)})],this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){var o=Ne(e);if(o.shape.length!==4)throw new B("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+o.shape.length);var a,s,u=o.shape,l=u[0];i.dataFormat==="channelsFirst"?(a=2,s=3):(a=1,s=2);var c=u[a],p=u[s],f=i.kernelSize[0],h=i.kernelSize[1],d=i.strides[0],m=i.strides[1],v=[l,Rc(c,d,f,i.padding),Rc(p,m,h,i.padding),i.filters];i.dataFormat!=="channelsLast"&&(o=lt(o,[0,2,3,1]));var g=Qf(o,i.kernel.read(),v,i.strides,i.padding);return i.dataFormat!=="channelsLast"&&(g=lt(g,[0,3,1,2])),i.bias!=null&&(g=_i(g,i.bias.read(),i.dataFormat)),i.activation!=null&&(g=i.activation.apply(g)),g})},n.prototype.computeOutputShape=function(e){var r,i,o,a=(e=Ze(e)).slice();this.dataFormat==="channelsFirst"?(r=1,i=2,o=3):(r=3,i=1,o=2);var s=this.kernelSize[0],u=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return a[r]=this.filters,a[i]=Rc(a[i],l,s,this.padding),a[o]=Rc(a[o],c,u,this.padding),a},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.dilationRate,e},n.className="Conv2DTranspose",n}(L0);Z.registerClass(XN);var X4=function(t){function n(e,r){var i=t.call(this,e,r)||this;if(i.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",i.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",i.depthwiseKernel=null,i.pointwiseKernel=null,r.filters==null)throw new B("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new B("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new B("SeparableConv"+i.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(r.padding));return i.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,i.depthwiseInitializer=at(r.depthwiseInitializer||i.DEFAULT_DEPTHWISE_INITIALIZER),i.depthwiseRegularizer=st(r.depthwiseRegularizer),i.depthwiseConstraint=At(r.depthwiseConstraint),i.pointwiseInitializer=at(r.depthwiseInitializer||i.DEFAULT_POINTWISE_INITIALIZER),i.pointwiseRegularizer=st(r.pointwiseRegularizer),i.pointwiseConstraint=At(r.pointwiseConstraint),i}return X(n,t),n.prototype.build=function(e){var r;if((e=Ze(e)).length<this.rank+2)throw new B("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null||e[i]<0)throw new B("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[i]));for(var o=e[i],a=this.kernelSize.concat([o,this.depthMultiplier]),s=[],u=0;u<this.rank;++u)s.push(1);s.push(o*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new Ut({ndim:this.rank+2,axes:(r={},r[i]=o,r)})],this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){var o;if(e=Ne(e),i.rank===1)throw new Ee("1D separable convolution is not implemented yet.");return i.rank===2&&(i.dataFormat==="channelsFirst"&&(e=lt(e,[0,2,3,1])),o=Ky(e,i.depthwiseKernel.read(),i.pointwiseKernel.read(),i.strides,i.padding,i.dilationRate,"NHWC")),i.useBias&&(o=_i(o,i.bias.read(),i.dataFormat)),i.activation!=null&&(o=i.activation.apply(o)),i.dataFormat==="channelsFirst"&&(o=lt(o,[0,3,1,2])),o})},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=We(this.depthwiseInitializer),e.pointwiseInitializer=We(this.pointwiseInitializer),e.depthwiseRegularizer=De(this.depthwiseRegularizer),e.pointwiseRegularizer=De(this.pointwiseRegularizer),e.depthwiseConstraint=Ke(this.depthwiseConstraint),e.pointwiseConstraint=Ke(this.pointwiseConstraint),e},n.className="SeparableConv",n}(Ch),YN=function(t){function n(e){return t.call(this,2,e)||this}return X(n,t),n.className="SeparableConv2D",n}(X4);Z.registerClass(YN);var QN=function(t){function n(e){var r=t.call(this,1,e)||this;return n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return X(n,t),n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},n.verifyArgs=function(e){if(typeof e.kernelSize!="number"&&!x0(e.kernelSize,"number",1,1))throw new B("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},n.className="Conv1D",n}(Ch);Z.registerClass(QN);var ZN=function(t){function n(e){var r=t.call(this,e)||this;return typeof e.cropping=="number"?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return X(n,t),n.prototype.computeOutputShape=function(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},n.prototype.call=function(e,r){var i=this;return j(function(){return e=Ne(e),i.dataFormat==="channelsLast"?Nc(Nc(e,i.cropping[0][0],e.shape[1]-i.cropping[0][0]-i.cropping[0][1],2),i.cropping[1][0],e.shape[2]-i.cropping[1][1]-i.cropping[1][0],3):Nc(Nc(e,i.cropping[0][0],e.shape[2]-i.cropping[0][0]-i.cropping[0][1],3),i.cropping[1][0],e.shape[3]-i.cropping[1][1]-i.cropping[1][0],4)})},n.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Cropping2D",n}(Le);Z.registerClass(ZN);var JN=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=e.size==null?r.DEFAULT_SIZE:e.size,r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,r}return X(n,t),n.prototype.computeOutputShape=function(e){if(this.dataFormat==="channelsFirst"){var r=e[2]==null?null:this.size[0]*e[2],i=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,i]}return r=e[1]==null?null:this.size[0]*e[1],i=e[2]==null?null:this.size[1]*e[2],[e[0],r,i,e[3]]},n.prototype.call=function(e,r){var i=this;return j(function(){var o=Ne(e),a=o.shape;if(i.dataFormat==="channelsFirst"){o=lt(o,[0,2,3,1]);var s=i.size[0]*a[2],u=i.size[1]*a[3],l=o.resizeNearestNeighbor([s,u]);return lt(l,[0,3,1,2])}return s=i.size[0]*a[1],u=i.size[1]*a[2],o.resizeNearestNeighbor([s,u])})},n.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="UpSampling2D",n}(Le);function Y4(t,n,e,r,i,o){return e===void 0&&(e=[1,1]),r===void 0&&(r="valid"),j(function(){i==null&&(i=Dr()),Tt(i);var a=M0(t,i);if(t.rank!==4)throw new B("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(n.rank!==4)throw new B("depthwiseKernel is required to be 4-D, but is instead "+n.rank+"-D");return a=qs(a,n,e,r==="same"?"same":"valid","NHWC",o),i==="channelsFirst"&&(a=lt(a,[0,3,1,2])),a})}Z.registerClass(JN);var eI=function(t){function n(e){var r=t.call(this,2,e)||this;return r.depthwiseKernel=null,r.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,r.depthwiseInitializer=at(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=At(e.depthwiseConstraint),r.depthwiseRegularizer=st(e.depthwiseRegularizer),r}return X(n,t),n.prototype.build=function(e){if((e=Ze(e)).length<4)throw new B("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new B("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[r]+").");var i=e[r],o=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){var o=Y4(e=Ne(e),i.depthwiseKernel.read(),i.strides,i.padding,i.dataFormat,null);return i.useBias&&(o=_i(o,i.bias.read(),i.dataFormat)),i.activation!=null&&(o=i.activation.apply(o)),o})},n.prototype.computeOutputShape=function(e){e=Ze(e);var r=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=xi(r,this.kernelSize[0],this.padding,this.strides[0]),s=xi(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,a,s]:[e[0],a,s,o]},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=We(this.depthwiseInitializer),e.depthwiseRegularizer=De(this.depthwiseRegularizer),e.depthwiseConstraint=Ke(this.depthwiseRegularizer),e},n.className="DepthwiseConv2D",n}(qN);Z.registerClass(eI);var tI=function(t){function n(e){var r=t.call(this,e)||this;return r.rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return X(n,t),n.prototype.getNoiseShape=function(e){if(this.noiseShape==null)return this.noiseShape;for(var r=e.shape,i=[],o=0;o<this.noiseShape.length;++o)i.push(this.noiseShape[o]==null?r[o]:this.noiseShape[o]);return i},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e);if(0<i.rate&&i.rate<1){var a=r.training!=null&&r.training,s=i.getNoiseShape(o);return Rs(function(){return uN(o,i.rate,s,i.seed)},function(){return o},a)}return e})},n.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.prototype.dispose=function(){return t.prototype.dispose.call(this)},n.className="Dropout",n}(Le);Z.registerClass(tI);var nI=function(t){function n(e){var r=t.call(this,e)||this;if(r.activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){var i=null;e.batchSize!=null&&(i=e.batchSize),r.batchInputShape=[i,e.inputDim]}return r.units=e.units,xn(r.units,"units"),r.activation=go(e.activation),e.useBias!=null&&(r.useBias=e.useBias),r.kernelInitializer=at(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=at(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=At(e.kernelConstraint),r.biasConstraint=At(e.biasConstraint),r.kernelRegularizer=st(e.kernelRegularizer),r.biasRegularizer=st(e.biasRegularizer),r.activityRegularizer=st(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return X(n,t),n.prototype.build=function(e){var r,i=(e=Ze(e))[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(r={},r[-1]=i,r)}],this.built=!0},n.prototype.computeOutputShape=function(e){var r=(e=Ze(e)).slice();return r[r.length-1]=this.units,r},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o,a=Ne(e),s=YE(i.activation.getClassName());return s!=null?o=yi(a,i.kernel.read(),s,i.bias?i.bias.read():null):(o=yi(a,i.kernel.read()),i.bias!=null&&(o=_i(o,i.bias.read())),i.activation!=null&&(o=i.activation.apply(o))),o})},n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),biasInitializer:We(this.biasInitializer),kernelRegularizer:De(this.kernelRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),biasConstraint:Ke(this.biasConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Dense",n}(Le);Z.registerClass(nI);var rI=function(t){function n(e){var r=t.call(this,e||{})||this;return r.inputSpec=[{minNDim:3}],r}return X(n,t),n.prototype.computeOutputShape=function(e){for(var r=0,i=(e=Ze(e)).slice(1);r<i.length;r++)if(i[r]==null)throw new B('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],uo(e,1)]},n.prototype.call=function(e,r){var i=this;return j(function(){return i.invokeCallHook(e,r),nM(Ne(e))})},n.className="Flatten",n}(Le);Z.registerClass(rI);var iI=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.activation=go(e.activation),r}return X(n,t),n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e);return i.activation.apply(o)})},n.prototype.getConfig=function(){var e={activation:er(this.activation)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Activation",n}(Le);Z.registerClass(iI);var oI=function(t){function n(e){var r=t.call(this,e)||this;return r.n=e.n,r.inputSpec=[{ndim:2}],r}return X(n,t),n.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},n.prototype.call=function(e,r){var i=this;return j(function(){return eM(e=Ne(e),i.n)})},n.prototype.getConfig=function(){var e={n:this.n},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="RepeatVector",n}(Le);Z.registerClass(oI);var aI=function(t){function n(e){var r=t.call(this,e)||this;r.targetShape=e.targetShape;for(var i=0;i<r.targetShape.length;++i)r.isUnknown(r.targetShape[i])&&(r.targetShape[i]=null);return r}return X(n,t),n.prototype.isUnknown=function(e){return e<0||e==null},n.prototype.fixUnknownDimension=function(e,r){for(var i="Total size of new array must be unchanged.",o=r.slice(),a=1,s=null,u=0;u<o.length;++u){var l=o[u];if(this.isUnknown(l)){if(s!==null)throw new B("Can only specifiy one unknown dimension.");s=u}else a*=l}var c=uo(e);if(s!==null){if(a===0||c%a!=0)throw new B(i);o[s]=c/a}else if(c!==a)throw new B(i);return o},n.prototype.computeOutputShape=function(e){for(var r=!1,i=0;i<e.length;++i)if(this.isUnknown(e[i])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e),a=o.shape,s=a.slice(0,1).concat(i.fixUnknownDimension(a.slice(1),i.targetShape));return o.reshape(s)})},n.prototype.getConfig=function(){var e={targetShape:this.targetShape},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Reshape",n}(Le);Z.registerClass(aI);var sI=function(t){function n(e){var r=t.call(this,e)||this;if(e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+e.dims+" instead.");var i=Or(1,e.dims.length+1);if(!me.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Ut({ndim:r.dims.length+1})],r}return X(n,t),n.prototype.computeOutputShape=function(e){var r=(e=Ze(e)).slice();return this.dims.forEach(function(i,o){r[o+1]=e[i]}),r},n.prototype.call=function(e,r){return lt(Ne(e),this.dimsIncludingBatch)},n.prototype.getConfig=function(){var e={dims:this.dims},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Permute",n}(Le);Z.registerClass(sI);var uI=function(t){function n(e){var r=t.call(this,e??{})||this;return r.supportsMasking=!0,r.maskValue=e!=null?e.maskValue==null?0:e.maskValue:0,r}return X(n,t),n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={maskValue:this.maskValue};return Object.assign(r,e),r},n.prototype.computeMask=function(e,r){var i=Ne(e);return gl(ks(i,this.maskValue),-1)},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e),a=gl(ks(o,i.maskValue),-1,!0);return o.mul(a.asType(o.dtype))})},n.className="Masking",n}(Le);Z.registerClass(uI);var lI=function(t){function n(e){var r=t.call(this,e)||this;if(r.embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){var i=null;e.batchSize!=null&&(i=e.batchSize),e.inputLength==null?r.batchInputShape=[i,null]:r.batchInputShape=[i].concat(Je(e.inputLength))}return r.inputDim=e.inputDim,xn(r.inputDim,"inputDim"),r.outputDim=e.outputDim,xn(r.outputDim,"outputDim"),r.embeddingsInitializer=at(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=st(e.embeddingsRegularizer),r.activityRegularizer=st(e.activityRegularizer),r.embeddingsConstraint=At(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return X(n,t),n.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},n.prototype.warnOnIncompatibleInputShape=function(e){},n.prototype.computeMask=function(e,r){var i=this;return j(function(){return i.maskZero?(e=Ne(e),ks(e,Fe(e))):null})},n.prototype.computeOutputShape=function(e){if(e=Ze(e),this.inputLength==null)return e.concat([this.outputDim]);var r=Je(this.inputLength);if(r.length!==e.length-1)throw new B('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var i=0,o=0;o<r.length;++o){var a=r[o],s=e[o+1];if(a!=null&&s!=null&&a!==s)throw new B('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);a==null&&(r[i]=s),i++}return[e[0]].concat(r,[this.outputDim])},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e);return o.dtype!=="int32"&&(o=Hl(o,"int32")),sN(i.embeddings.read(),o.as1D()).reshape(Ze(i.computeOutputShape(o.shape)))})},n.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:We(this.embeddingsInitializer),embeddingsRegularizer:De(this.embeddingsRegularizer),activityRegularizer:De(this.activityRegularizer),embeddingsConstraint:Ke(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Embedding",n}(Le);Z.registerClass(lI);var Sa=function(t){function n(e){var r=t.call(this,e||{})||this;return r.supportsMasking=!0,r}return X(n,t),n.prototype.mergeFunction=function(e){throw new Ee},n.prototype.computeElementwiseOpOutputShape=function(e,r){if(e==null||r==null)return null;if(e.length<r.length)return this.computeElementwiseOpOutputShape(r,e);if(r.length===0)return e;for(var i=e.slice(0,e.length-r.length),o=0;o<r.length;++o){var a=e[e.length-r.length+o],s=r[o];if(a==null||s==null||a<0||s<0)i.push(null);else if(a===1)i.push(s);else if(s===1)i.push(a);else{if(a!==s)throw new B("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(r));i.push(a)}}return i},n.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ze(e)]),(e=e).length<2)throw new B("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var r=[],i=0,o=e;i<o.length;i++)(u=o[i])!=null&&u[0]!==null&&r.push(u[0]);if((r=so(r)).length>1)throw new B("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var a=e[0]==null?null:e[0].slice(1),s=1;s<e.length;++s){var u=e[s]==null?null:e[s].slice(1);a=this.computeElementwiseOpOutputShape(a,u)}var l=e.map(function(c){return c.length});e.indexOf(null)===-1&&so(l).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0},n.prototype.call=function(e,r){var i=this;return j(function(){if(e=e,i.reshapeRequired){var o=[],a=e.map(function(k){return k.rank});if(a.indexOf(null)===-1){for(var s=mo(a),u=0,l=e;u<l.length;u++){for(var c=(m=l[u]).rank,p=0;p<s-c;++p)m=Gl(m,1);o.push(m)}return i.mergeFunction(o)}for(var f=!1,h=0,d=e;h<d.length;h++){var m;if((c=(m=d[h]).rank)==null){var v=m.shape,g=v[0],y=v.slice(1).concat([g]),x=m.reshape([g].concat(uo(v.slice(1))));x=(x=lt(x,[1,0])).reshape(y),o.push(x),f=!0}else if(c>1){var b=Or(1,c).concat([0]);o.push(lt(m,b)),f=!0}else o.push(m)}var w=i.mergeFunction(o),S=w.rank;if(f)if(S==null){var C=w.shape;y=[g=C[C.length-1]].concat(C.slice(0,C.length-1)),w=lt(w.reshape([-1,g]),[1,0]).reshape(y)}else S>1&&(b=[S-1].concat(Or(0,S-1)),w=lt(w,b));return w}return i.mergeFunction(e)})},n.prototype.computeOutputShape=function(e){var r;r=(e=e)[0]==null?null:e[0].slice(1);for(var i=1;i<e.length;++i){var o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}for(var a=[],s=0,u=e;s<u.length;s++)(o=u[s])!=null&&o[0]!==null&&a.push(o[0]);return r=(a=so(a)).length===1?a.concat(r):[null].concat(r)},n.prototype.computeMask=function(e,r){return j(function(){if(r==null)return null;if(!Array.isArray(r))throw new B("`mask` should be an Array");if(!Array.isArray(e))throw new B("`inputs` should be an Array");if(r.length!==e.length)throw new B("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+e.length+" vs "+r.length+")");if(r.every(function(a){return a==null}))return null;for(var i=(r=r.map(function(a){return a==null?a:Un(a,0)}))[0],o=1;o<r.length-1;++o)i=Ti(i,r[o]);return i})},n}(Le),cI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.mergeFunction=function(e){return j(function(){for(var r=e[0].clone(),i=1;i<e.length;++i)r=Oe(r,e[i]);return r})},n.className="Add",n}(Sa);Z.registerClass(cI);var pI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.mergeFunction=function(e){return j(function(){for(var r=e[0].clone(),i=1;i<e.length;++i)r=we(r,e[i]);return r})},n.className="Multiply",n}(Sa);Z.registerClass(pI);var fI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.mergeFunction=function(e){return j(function(){for(var r=e[0].clone(),i=1;i<e.length;++i)r=Oe(r,e[i]);return we(1/e.length,r)})},n.className="Average",n}(Sa);Z.registerClass(fI);var hI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.mergeFunction=function(e){return j(function(){for(var r=e[0],i=1;i<e.length;++i)r=ei(r,e[i]);return r})},n.className="Maximum",n}(Sa);Z.registerClass(hI);var dI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.mergeFunction=function(e){return j(function(){for(var r=e[0],i=1;i<e.length;++i)r=js(r,e[i]);return r})},n.className="Minimum",n}(Sa);Z.registerClass(dI);var mI=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_AXIS=-1,e==null&&(e={}),r.axis=e.axis==null?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return X(n,t),n.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||e.length===1)throw new B("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var r=!0,i=0,o=e=e;i<o.length;i++)if((f=o[i])!=null){r=!1;break}if(!r){for(var a=[],s=0;s<e.length;++s){var u=e[s].slice();u.splice(this.axis,1);for(var l=!1,c=0,p=a;c<p.length;c++){var f=p[c];if(me.arraysEqual(f,u)){l=!0;break}}l||a.push(u)}if(a.length>1)throw new B("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},n.prototype.mergeFunction=function(e){var r=this;return j(function(){return aN(e,r.axis)})},n.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new B("A `Concatenate` layer should be called on a list of inputs.");for(var r=e,i=r[0].slice(),o=this.axis<0?i.length+this.axis:this.axis,a=0,s=r.slice(1);a<s.length;a++){var u=s[a];if(i[o]==null||u[o]==null){i[o]=null;break}i[o]+=u[o]}return i},n.prototype.computeMask=function(e,r){var i=this;if(r==null)return null;if(!Array.isArray(r))throw new B("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new B("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new B("Mismatch in the length of mask ("+r.length+") and the legnth of inputs ("+e.length+")");return j(function(){var o=!0;if(r.forEach(function(l){l==null||(o=!1)}),o)return null;for(var a=[],s=0;s<e.length;++s)r[s]==null?a.push(Zn(e[s]).asType("bool")):r[s].rank<e[s].rank?a.push(Un(r[s],-1)):a.push(r[s]);var u=un(a,i.axis);return ih(u,-1,!1)})},n.prototype.getConfig=function(){var e={axis:this.axis},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Concatenate",n}(Sa);function pu(t,n){for(;t<0;)t+=n;return t}function Q4(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new Ee("batchDot is not implemented for tensors of 4D or higher rank yet");if(me.assert(t.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, but got "+t.shape.length}),me.assert(t.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, but got "+n.shape.length}),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new Ee("batchDot is not implemented for complex64-type Tensors yet.");var r=t.shape.length,i=n.shape.length;e==null&&(e=[r-1,i-2]);var o=e;return j(function(){var a,s;if(r>i){a=r-i;for(var u=[],l=0;l<a;++l)u.push(1);n=n.reshape(n.shape.concat(u))}else if(i>r){for(a=i-r,u=[],l=0;l<a;++l)u.push(1);t=t.reshape(t.shape.concat(u))}else a=0;if(t.shape.length===2&&n.shape.length===2)s=o[0]===o[1]?t.mulStrict(n).sum(o[0]):t.transpose([1,0]).mulStrict(n).sum(o[1]);else{var c=o[0]!==t.shape.length-1,p=o[1]===n.shape.length-1;s=t.matMul(n,c,p)}if(a>0){var f=void 0,h=[];for(l=f=r>i?r+i-3:r-1;l<f+a;++l)h.push(l);s=s.squeeze(h)}return s.shape.length===1&&(s=s.expandDims(1)),s})}Z.registerClass(mI);var gI=function(t){function n(e){var r=t.call(this,e)||this;return r.axes=e.axes,r.normalize=e.normalize!=null&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return X(n,t),n.prototype.build=function(e){me.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=e[0],i=e[1];if(r.length>3||i.length>3)throw new Ee("Dot layer does not support tensors of 4D or higher rank yet.");var o=this.interpretAxes(r,i);if(r[o[0]]!==i[o[1]])throw new B("Dimension incompatibility: "+r[o[0]]+" !== "+i[o[1]])},n.prototype.mergeFunction=function(e){if(e.length!==2)throw new B("A `Dot` layer must be called on exactly 2 inputs, but received "+e.length+" input(s).");var r,i=e[0],o=e[1];return r=Array.isArray(this.axes)?this.axes.map(function(a,s){return pu(a,e[s].shape.length)}):[pu(this.axes,i.shape.length),pu(this.axes,o.shape.length)],this.normalize&&(i=qp(i,r[0]),o=qp(o,r[1])),Q4(i,o,r)},n.prototype.interpretAxes=function(e,r){return Array.isArray(this.axes)?this.axes:[pu(this.axes,e.length),pu(this.axes,r.length)]},n.prototype.computeOutputShape=function(e){me.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=e[0].slice(),i=e[1].slice();if(r.length>3||i.length>3)throw new Ee("Dot layer does not support tensors of 4D or higher rank yet.");var o=this.interpretAxes(r,i);r.splice(o[0],1),i.splice(o[1],1),i.splice(0,1);var a=r.concat(i);return a.length===1&&a.push(1),a},n.prototype.computeMask=function(e,r){return null},n.prototype.getConfig=function(){var e={axes:this.axes,normalize:this.normalize},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Dot",n}(Sa);Z.registerClass(gI);var vI=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.stddev=e.stddev,r}return X(n,t),n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={stddev:this.stddev};return Object.assign(r,e),r},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e);return Rs(function(){return mh(o.shape,0,i.stddev).add(o)},function(){return o},r.training||!1)})},n.className="GaussianNoise",n}(Le);Z.registerClass(vI);var yI=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.rate=e.rate,r}return X(n,t),n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,e),r},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r);var o=Ne(e);return i.rate>0&&i.rate<1?Rs(function(){var a=Math.sqrt(i.rate/(1-i.rate));return o.mul(mh(o.shape,1,a))},function(){return o},r.training||!1):o})},n.className="GaussianDropout",n}(Le);Z.registerClass(yI);var xI=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return X(n,t),n.prototype._getNoiseShape=function(e){return this.noiseShape||Ne(e).shape},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,e),r},n.prototype.call=function(e,r){var i=this;return j(function(){if(i.rate<1&&i.rate>0){var o=i._getNoiseShape(e);return Rs(function(){var a=Ne(e),s=-1.7580993408473766,u=Ml(va(o),i.rate);u=Hl(u,"float32");var l=Math.pow((1-i.rate)*(1+i.rate*Math.pow(s,2)),-.5),c=-l*s*i.rate;return a.mul(u).add(u.add(-1).mul(s)).mul(l).add(c)},function(){return Ne(e)},r.training||!1)}return e})},n.className="AlphaDropout",n}(Le);function bl(t,n,e,r,i,o){var a;if(o===void 0&&(o=.001),t.rank===2)a=My(t,n,e,r,i,o);else if(t.rank===3)a=Ly(t,n,e,r,i,o);else{if(t.rank!==4)throw new Ee("batchNormalization is not implemented for array of rank "+t.rank+" yet");a=Py(t,n,e,r,i,o)}return a}function Z4(t,n,e,r,i){return i===void 0&&(i=.001),j(function(){var o=Bl(t,r),a=o.mean,s=o.variance;return[bl(t,a,s,e,n,i),a,s]})}function J4(t,n,e,r,i){return i===void 0&&(i=.001),j(function(){for(var o=Bl(t,r),a=o.mean,s=o.variance,u=[],l=0,c=Or(0,t.rank);l<c.length;l++){var p=c[l];r.indexOf(p)!==-1?u.push(1):u.push(t.shape[p])}var f=a.reshape(u),h=s.reshape(u),d=n==null?null:n.reshape(u),m=e==null?null:e.reshape(u);return[bl(t,f,h,m,d,i),a,s]})}function eL(t,n,e,r,i){return i===void 0&&(i=.001),me.arraysEqual(r.slice().sort(),Or(0,t.rank-1))?Z4(t,n,e,r,i):J4(t,n,e,r,i)}Z.registerClass(xI);var bI=function(t){function n(e){var r=this;return e==null&&(e={}),(r=t.call(this,e)||this).supportsMasking=!0,r.axis=e.axis==null?-1:e.axis,r.momentum=e.momentum==null?.99:e.momentum,r.epsilon=e.epsilon==null?.001:e.epsilon,r.center=e.center==null||e.center,r.scale=e.scale==null||e.scale,r.betaInitializer=at(e.betaInitializer||"zeros"),r.gammaInitializer=at(e.gammaInitializer||"ones"),r.movingMeanInitializer=at(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=at(e.movingVarianceInitializer||"ones"),r.betaConstraint=At(e.betaConstraint),r.gammaConstraint=At(e.gammaConstraint),r.betaRegularizer=st(e.betaRegularizer),r.gammaRegularizer=st(e.gammaRegularizer),r}return X(n,t),n.prototype.build=function(e){var r;e=Ze(e);var i=this.axis>=0?this.axis:this.axis+e.length,o=e[i];if(o==null)throw new B("Axis "+i+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new Ut({ndim:e.length,axes:(r={},r[i]=o,r)})];var a=[o];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){var o=r.training!=null&&r.training,a=Ne(e),s=a.shape,u=s.length,l=Or(0,u),c=i.axis>=0?i.axis:i.axis+u;l.splice(c,1);var p=la(1,u);p[c]=s[c];var f=l.slice();f.sort();var h=!me.arraysEqual(f,Or(0,u).slice(0,u-1));if(!o)return function(){if(h){var x=i.movingMean.read().reshape(p),b=i.movingVariance.read().reshape(p),w=i.center?i.beta.read().reshape(p):null,S=i.scale?i.gamma.read().reshape(p):null;return bl(a,x,b,w,S,i.epsilon)}return bl(a,i.movingMean.read(),i.movingVariance.read(),i.beta==null?null:i.beta.read(),i.gamma==null?null:i.gamma.read(),i.epsilon)}();var d=eL(a,i.gamma.read(),i.beta.read(),l,i.epsilon),m=d[0],v=d[1],g=d[2],y=function(x,b,w){j(function(){var S=1-w,C=x.read(),k=C.sub(b).mul(S);x.write(C.sub(k))})};return y(i.movingMean,v,i.momentum),y(i.movingVariance,g,i.momentum),m})},n.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:We(this.betaInitializer),gammaInitializer:We(this.gammaInitializer),movingMeanInitializer:We(this.movingMeanInitializer),movingVarianceInitializer:We(this.movingVarianceInitializer),betaRegularizer:De(this.betaRegularizer),gammaRegularizer:De(this.gammaRegularizer),betaConstraint:Ke(this.betaConstraint),gammaConstraint:Ke(this.gammaConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="BatchNormalization",n}(Le);Z.registerClass(bI);var wI=function(t){function n(e){var r=this;if(e==null&&(e={}),(r=t.call(this,e)||this).axis=e.axis==null?-1:e.axis,typeof r.axis=="number"){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received "+r.axis)}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(r.axis));for(var i=0,o=r.axis;i<o.length;i++){var a=o[i];if(!Number.isInteger(a))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(r.axis))}}return r.epsilon=e.epsilon==null?.001:e.epsilon,r.center=e.center==null||e.center,r.scale=e.scale==null||e.scale,r.betaInitializer=at(e.betaInitializer||"zeros"),r.gammaInitializer=at(e.gammaInitializer||"ones"),r.betaRegularizer=st(e.betaRegularizer),r.gammaRegularizer=st(e.gammaRegularizer),r.supportsMasking=!0,r}return X(n,t),n.prototype.build=function(e){var r=(e=Ze(e)).length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(var i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=r);for(var o=0,a=this.axis;o<a.length;o++){var s=a[o];if(s<0||s>=r)throw new Error("Invalid axis: "+s)}if(this.axis.length!==so(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var u=this.axis.map(function(l){return e[l]});this.scale?this.gamma=this.addWeight("gamma",u,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",u,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},n.prototype.call=function(e,r){var i=this,o=Ne(e),a=o.shape,s=a.length;return j(function(){for(var u=Bl(o,i.axis,!0),l=u.mean,c=u.variance,p=la(1,s),f=0,h=i.axis;f<h.length;f++){var d=h[f];p[d]=a[d]}for(var m=function(w){return w!=null&&w.shape.length!==s&&i.axis!==[s-1]?w.reshape(p):w},v=m(i.gamma.read()),g=m(i.beta.read()),y=[],x=[],b=0;b<s;++b)i.axis.indexOf(b)!==-1?(y.push(a[b]),x.push(1)):(y.push(1),x.push(a[b]));return l=l.tile(y),c=c.tile(y),v=v.tile(x),g=g.tile(x),bl(o,l,c,g,v,i.epsilon)})},n.prototype.getConfig=function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:We(this.betaInitializer),gammaInitializer:We(this.gammaInitializer),betaRegularizer:De(this.betaRegularizer),gammaRegularizer:De(this.gammaRegularizer)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="LayerNormalization",n}(Le);function tL(t,n,e){return j(function(){if(t.rank!==4)throw new B("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new B("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=Dr()),e!=="channelsLast"&&e!=="channelsFirst")throw new B("Unknown data format: "+e+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r=e==="channelsFirst"?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],Co(t,r)})}Z.registerClass(wI);var CI=function(t){function n(e){var r=this;if(e==null&&(e={}),(r=t.call(this,e)||this).dataFormat=e.dataFormat==null?Dr():e.dataFormat,e.padding==null)r.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new B("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var i=void 0,o=void 0;if(typeof e.padding[0]=="number")i=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new B("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(i=e.padding[0],e.padding[1].length!==2)throw new B("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");o=e.padding[1]}r.padding=[i,o]}return r.inputSpec=[new Ut({ndim:4})],r}return X(n,t),n.prototype.computeOutputShape=function(e){var r,i;return e=Ze(e),this.dataFormat==="channelsFirst"?(r=e[2]!=null&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,i=e[3]!=null&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],r,i]):(r=e[1]!=null&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,i=e[2]!=null&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],r,i,e[3]])},n.prototype.call=function(e,r){var i=this;return j(function(){return tL(Ne(e),i.padding,i.dataFormat)})},n.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ZeroPadding2D",n}(Le);function Sh(t,n,e,r,i,o){return j(function(){var a;Tt(i),tN(o),mr(r),e==null&&(e=[1,1]),r==null&&(r="valid"),i==null&&(i=Dr()),o==null&&(o="max"),t=M0(t,i);var s=r==="same"?"same":"valid";return a=o==="max"?Jf(t,n,e,s):eh(t,n,e,s),i==="channelsFirst"&&(a=lt(a,[0,3,1,2])),a})}function SI(t,n,e,r,i,o){return j(function(){var a;Tt(i),tN(o),mr(r),e==null&&(e=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Dr()),o==null&&(o="max"),t=GN(t,i);var s=r==="same"?"same":"valid";return a=o==="max"?th(t,n,e,s):nh(t,n,e,s),i==="channelsFirst"&&(a=lt(a,[0,4,1,2,3])),a})}Z.registerClass(CI);var kI=function(t){function n(e){var r=this;if(e.poolSize==null&&(e.poolSize=2),r=t.call(this,e)||this,typeof e.poolSize=="number")r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||e.poolSize.length!==1||typeof e.poolSize[0]!="number")throw new B("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));r.poolSize=e.poolSize}if(xn(r.poolSize,"poolSize"),e.strides==null)r.strides=r.poolSize;else if(typeof e.strides=="number")r.strides=[e.strides];else{if(!Array.isArray(e.strides)||e.strides.length!==1||typeof e.strides[0]!="number")throw new B("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));r.strides=e.strides}return xn(r.strides,"strides"),r.padding=e.padding==null?"valid":e.padding,mr(r.padding),r.inputSpec=[new Ut({ndim:3})],r}return X(n,t),n.prototype.computeOutputShape=function(e){var r=xi((e=Ze(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],r,e[2]]},n.prototype.call=function(e,r){var i=this;return j(function(){i.invokeCallHook(e,r),e=Gl(Ne(e),2);var o=i.poolingFunction(Ne(e),[i.poolSize[0],1],[i.strides[0],1],i.padding,"channelsLast");return Tl(o,[2])})},n.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(Le),EI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tt(a),mr(o),Sh(e,r,i,o,a,"max")},n.className="MaxPooling1D",n}(kI);Z.registerClass(EI);var NI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tt(a),mr(o),Sh(e,r,i,o,a,"avg")},n.className="AveragePooling1D",n}(kI);Z.registerClass(NI);var II=function(t){function n(e){var r=this;if(e.poolSize==null&&(e.poolSize=[2,2]),(r=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new B("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");r.strides=e.strides}else r.strides=[e.strides,e.strides];return xn(r.poolSize,"poolSize"),xn(r.strides,"strides"),r.padding=e.padding==null?"valid":e.padding,r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(r.dataFormat),mr(r.padding),r.inputSpec=[new Ut({ndim:4})],r}return X(n,t),n.prototype.computeOutputShape=function(e){e=Ze(e);var r=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2];return r=xi(r,this.poolSize[0],this.padding,this.strides[0]),i=xi(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],r,i]:[e[0],r,i,e[3]]},n.prototype.call=function(e,r){var i=this;return j(function(){return i.invokeCallHook(e,r),i.poolingFunction(Ne(e),i.poolSize,i.strides,i.padding,i.dataFormat)})},n.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(Le),AI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tt(a),mr(o),Sh(e,r,i,o,a,"max")},n.className="MaxPooling2D",n}(II);Z.registerClass(AI);var RI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tt(a),mr(o),Sh(e,r,i,o,a,"avg")},n.className="AveragePooling2D",n}(II);Z.registerClass(RI);var TI=function(t){function n(e){var r=this;if(e.poolSize==null&&(e.poolSize=[2,2,2]),(r=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new B("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+e.strides.length+".");r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return xn(r.poolSize,"poolSize"),xn(r.strides,"strides"),r.padding=e.padding==null?"valid":e.padding,r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(r.dataFormat),mr(r.padding),r.inputSpec=[new Ut({ndim:5})],r}return X(n,t),n.prototype.computeOutputShape=function(e){e=Ze(e);var r=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return r=xi(r,this.poolSize[0],this.padding,this.strides[0]),i=xi(i,this.poolSize[1],this.padding,this.strides[1]),o=xi(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],r,i,o]:[e[0],r,i,o,e[4]]},n.prototype.call=function(e,r){var i=this;return j(function(){return i.invokeCallHook(e,r),i.poolingFunction(Ne(e),i.poolSize,i.strides,i.padding,i.dataFormat)})},n.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(Le),DI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tt(a),mr(o),SI(e,r,i,o,a,"max")},n.className="MaxPooling3D",n}(TI);Z.registerClass(DI);var OI=function(t){function n(e){return t.call(this,e)||this}return X(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tt(a),mr(o),SI(e,r,i,o,a,"avg")},n.className="AveragePooling3D",n}(TI);Z.registerClass(OI);var _I=function(t){function n(e){var r=t.call(this,e)||this;return r.inputSpec=[new Ut({ndim:3})],r}return X(n,t),n.prototype.computeOutputShape=function(e){return[e[0],e[2]]},n.prototype.call=function(e,r){throw new Ee},n}(Le),zI=function(t){function n(e){return t.call(this,e||{})||this}return X(n,t),n.prototype.call=function(e,r){return j(function(){var i=Ne(e);return wt(i,1)})},n.className="GlobalAveragePooling1D",n}(_I);Z.registerClass(zI);var FI=function(t){function n(e){return t.call(this,e||{})||this}return X(n,t),n.prototype.call=function(e,r){return j(function(){var i=Ne(e);return ho(i,1)})},n.className="GlobalMaxPooling1D",n}(_I);Z.registerClass(FI);var MI=function(t){function n(e){var r=t.call(this,e)||this;return r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tt(r.dataFormat),r.inputSpec=[new Ut({ndim:4})],r}return X(n,t),n.prototype.computeOutputShape=function(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]},n.prototype.call=function(e,r){throw new Ee},n.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(Le),LI=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.call=function(e,r){var i=this;return j(function(){var o=Ne(e);return i.dataFormat==="channelsLast"?wt(o,[1,2]):wt(o,[2,3])})},n.className="GlobalAveragePooling2D",n}(MI);Z.registerClass(LI);var PI=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n.prototype.call=function(e,r){var i=this;return j(function(){var o=Ne(e);return i.dataFormat==="channelsLast"?ho(o,[1,2]):ho(o,[2,3])})},n.className="GlobalMaxPooling2D",n}(MI);function BI(t,n,e,r){if(Array.isArray(t)){if(n!=null||e!=null)throw new B("When inputs is an array, neither initialState or constants should be provided");r!=null&&(e=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function i(o){return o==null||Array.isArray(o)?o:[o]}return{inputs:t,initialState:n=i(n),constants:e=i(e)}}function VI(t,n,e,r,i,o,a,s){return r===void 0&&(r=!1),a===void 0&&(a=!1),s===void 0&&(s=!1),j(function(){var u=n.shape.length;if(u<3)throw new B("Input should be at least 3D, but is "+u+"D.");var l=[1,0].concat(Or(2,u));if(n=lt(n,l),o!=null)throw new Ee("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&((i=i.asType("bool").asType("float32")).rank===u-1&&(i=Un(i,-1)),i=lt(i,l)),r&&(n=Yr(n,0),i!=null&&(i=Yr(i,0)));var c,p,f=[],h=e,d=n.shape[0],m=sa(n);i!=null&&(p=sa(i));for(var v,g=function(x){var b=m[x],w=j(function(){return t(b,h)});if(i==null)c=w[0],h=w[1];else{var S=j(function(){var C=p[x],k=Zn(C).sub(C);return{output:w[0].mul(C).addStrict(h[0].mul(k)),newStates:h.map(function(E,N){return w[1][N].mul(C).addStrict(E.mul(k))})}});c=S.output,h=S.newStates}s&&f.push(c)},y=0;y<d;++y)g(y);return s&&(v=Tr(f,1)),[c,v,h]})}Z.registerClass(PI);var ka=function(t){function n(e){var r,i=t.call(this,e)||this;if(e.cell==null)throw new B("cell property is missing for the constructor of RNN.");if((r=Array.isArray(e.cell)?new W0({cells:e.cell}):e.cell).stateSize==null)throw new B("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return i.cell=r,i.returnSequences=e.returnSequences!=null&&e.returnSequences,i.returnState=e.returnState!=null&&e.returnState,i.goBackwards=e.goBackwards!=null&&e.goBackwards,i._stateful=e.stateful!=null&&e.stateful,i.unroll=e.unroll!=null&&e.unroll,i.supportsMasking=!0,i.inputSpec=[new Ut({ndim:3})],i.stateSpec=null,i.states_=null,i.numConstants=null,i.keptStates=[],i}return X(n,t),n.prototype.getStates=function(){return this.states_==null?Or(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(e){return null}):this.states_},n.prototype.setStates=function(e){this.states_=e},n.prototype.computeOutputShape=function(e){hg(e)&&(e=e[0]),e=e;var r=this.cell.stateSize;Array.isArray(r)||(r=[r]);var i,o=r[0];if(i=this.returnSequences?[e[0],e[1],o]:[e[0],o],this.returnState){for(var a=[],s=0,u=r;s<u.length;s++){var l=u[s];a.push([e[0],l])}return[i].concat(a)}return i},n.prototype.computeMask=function(e,r){var i=this;return j(function(){Array.isArray(r)&&(r=r[0]);var o=i.returnSequences?r:null;if(i.returnState){var a=i.states.map(function(s){return null});return[o].concat(a)}return o})},Object.defineProperty(n.prototype,"states",{get:function(){if(this.states_==null){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[],i=0;i<e;++i)r.push(null);return r}return this.states_},set:function(e){this.states_=e},enumerable:!0,configurable:!0}),n.prototype.build=function(e){if(this.numConstants!=null)throw new Ee("Constants support is not implemented in RNN yet.");hg(e)&&(e=e[0]),e=e;var r=this.stateful?e[0]:null,i=e[e.length-1];this.inputSpec[0]=new Ut({shape:[r,null,i]});var o,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],this.stateSpec!=null){if(!me.arraysEqual(this.stateSpec.map(function(s){return s.shape[s.shape.length-1]}),o))throw new B("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=o.map(function(s){return new Ut({shape:[null,s]})});this.stateful&&this.resetStates()},n.prototype.resetStates=function(e,r){var i=this;r===void 0&&(r=!1),j(function(){if(!i.stateful)throw new _o("Cannot call resetStates() on an RNN Layer that is not stateful.");var o=i.inputSpec[0].shape[0];if(o==null)throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(i.states_==null)Array.isArray(i.cell.stateSize)?i.states_=i.cell.stateSize.map(function(c){return He([o,c])}):i.states_=[He([o,i.cell.stateSize])];else if(e==null)Te(i.states_),i.keptStates!=null&&(Te(i.keptStates),i.keptStates=[]),Array.isArray(i.cell.stateSize)?i.states_=i.cell.stateSize.map(function(c){return He([o,c])}):i.states_[0]=He([o,i.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==i.states_.length)throw new B("Layer "+i.name+" expects "+i.states_.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);r===!0?i.keptStates.push(i.states_.slice()):Te(i.states_);for(var a=0;a<i.states_.length;++a){var s=e[a],u=Array.isArray(i.cell.stateSize)?i.cell.stateSize[a]:i.cell.stateSize,l=[o,u];if(!me.arraysEqual(s.shape,l))throw new B("State "+a+" is incompatible with layer "+i.name+": expected shape="+l+", received shape="+s.shape);i.states_[a]=s}}i.states_=i.states_.map(function(c){return Kr(c.clone())})})},n.prototype.apply=function(e,r){var i=r==null?null:r.initialState,o=r==null?null:r.constants;r==null&&(r={});var a=BI(e,i,o,this.numConstants);e=a.inputs,i=a.initialState,o=a.constants;var s=[],u=[];if(i!=null){r.initialState=i,s=s.concat(i),this.stateSpec=[];for(var l=0,c=i;l<c.length;l++){var p=c[l];this.stateSpec.push(new Ut({shape:p.shape}))}u=u.concat(this.stateSpec)}if(o!=null&&(r.constants=o,s=s.concat(o),this.numConstants=o.length),s[0]instanceof Sr){var f=[e].concat(s),h=this.inputSpec.concat(u),d=this.inputSpec;this.inputSpec=h;var m=t.prototype.apply.call(this,f,r);return this.inputSpec=d,m}return t.prototype.apply.call(this,e,r)},n.prototype.call=function(e,r){var i=this;return j(function(){var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;e=Ne(e),s==null&&(s=i.stateful?i.states_:i.getInitialState(e));var u=Array.isArray(i.cell.stateSize)?i.cell.stateSize.length:1;if(s.length!==u)throw new B("RNN Layer has "+u+" state(s) but was passed "+s.length+" initial state(s).");i.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var l={training:a},c=VI(function(m,v){var g=i.cell.call([m].concat(v),l);return[g[0],g.slice(1)]},e,s,i.goBackwards,o,null,i.unroll,i.returnSequences),p=c[0],f=c[1],h=c[2];i.stateful&&i.resetStates(h,a);var d=i.returnSequences?f:p;return i.returnState?[d].concat(h):d})},n.prototype.getInitialState=function(e){var r=this;return j(function(){var i=He(e.shape);return i=Gl(i=Fn(i,[1,2])),Array.isArray(r.cell.stateSize)?r.cell.stateSize.map(function(o){return o>1?pg(i,[1,o]):i}):r.cell.stateSize>1?[pg(i,[1,r.cell.stateSize])]:[i]})},Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),n.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)},n.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(e.numConstants=this.numConstants);var r=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:r};var i=t.prototype.getConfig.call(this);return Object.assign(e,i),e},n.fromConfig=function(e,r,i){i===void 0&&(i={});var o=Ar(r.cell,i);return new e(Object.assign(r,{cell:o}))},n.className="RNN",n}(Le);Z.registerClass(ka);var Xl=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return X(n,t),n}(Le),P0=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,xn(r.units,"units"),r.activation=go(e.activation==null?r.DEFAULT_ACTIVATION:e.activation),r.useBias=e.useBias==null||e.useBias,r.kernelInitializer=at(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=at(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=at(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=st(e.kernelRegularizer),r.recurrentRegularizer=st(e.recurrentRegularizer),r.biasRegularizer=st(e.biasRegularizer),r.kernelConstraint=At(e.kernelConstraint),r.recurrentConstraint=At(e.recurrentConstraint),r.biasConstraint=At(e.biasConstraint),r.dropout=As([1,mo([0,e.dropout==null?0:e.dropout])]),r.recurrentDropout=As([1,mo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return X(n,t),n.prototype.build=function(e){e=Ze(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){if((e=e).length!==2)throw new B("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var o=e[1];e=e[0];var a,s=r.training!=null&&r.training;0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=Ds(function(){return Zn(e)},i.dropout,s)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=Ds(function(){return Zn(o)},i.recurrentDropout,s));var u=i.dropoutMask,l=i.recurrentDropoutMask;a=yi(u!=null?we(e,u):e,i.kernel.read()),i.bias!=null&&(a=_i(a,i.bias.read())),l!=null&&(o=we(o,l));var c=Oe(a,yi(o,i.recurrentKernel.read()));return i.activation!=null&&(c=i.activation.apply(c)),[c,c]})},n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),recurrentInitializer:We(this.recurrentInitializer),biasInitializer:We(this.biasInitializer),kernelRegularizer:De(this.kernelRegularizer),recurrentRegularizer:De(this.recurrentRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),recurrentConstraint:Ke(this.recurrentConstraint),biasConstraint:Ke(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="SimpleRNNCell",n}(Xl);Z.registerClass(P0);var WI=function(t){function n(e){return e.cell=new P0(e),t.call(this,e)||this}return X(n,t),n.prototype.call=function(e,r){var i=this;return j(function(){i.cell.dropoutMask!=null&&(Te(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(Te(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return t.prototype.call.call(i,e,{mask:o,training:a,initialState:s})})},Object.defineProperty(n.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),recurrentInitializer:We(this.recurrentInitializer),biasInitializer:We(this.biasInitializer),kernelRegularizer:De(this.kernelRegularizer),recurrentRegularizer:De(this.recurrentRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),recurrentConstraint:Ke(this.recurrentConstraint),biasConstraint:Ke(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=t.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},n.fromConfig=function(e,r){return new e(r)},n.className="SimpleRNN",n}(ka);Z.registerClass(WI);var B0=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,xn(r.units,"units"),r.activation=go(e.activation===void 0?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=go(e.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=e.useBias==null||e.useBias,r.kernelInitializer=at(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=at(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=at(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=st(e.kernelRegularizer),r.recurrentRegularizer=st(e.recurrentRegularizer),r.biasRegularizer=st(e.biasRegularizer),r.kernelConstraint=At(e.kernelConstraint),r.recurrentConstraint=At(e.recurrentConstraint),r.biasConstraint=At(e.biasConstraint),r.dropout=As([1,mo([0,e.dropout==null?0:e.dropout])]),r.recurrentDropout=As([1,mo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return X(n,t),n.prototype.build=function(e){var r=(e=Ze(e))[e.length-1];this.kernel=this.addWeight("kernel",[r,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){if((e=e).length!==2)throw new B("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var o=r.training!=null&&r.training,a=e[1];e=e[0],0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=Ds(function(){return Zn(e)},i.dropout,o,3)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=Ds(function(){return Zn(a)},i.recurrentDropout,o,3));var s,u,l,c=i.dropoutMask,p=i.recurrentDropoutMask;0<i.dropout&&i.dropout<1&&(e=we(e,c[0]));var f=yi(e,i.kernel.read());i.useBias&&(f=_i(f,i.bias.read())),0<i.recurrentDropout&&i.recurrentDropout<1&&(a=we(a,p[0]));var h=i.recurrentKernel.read(),d=vi(h,[2*i.units,i.units],h.rank-1),m=d[0],v=d[1],g=yi(a,m),y=vi(f,3,f.rank-1),x=y[0],b=y[1],w=y[2],S=vi(g,2,g.rank-1),C=S[0],k=S[1];s=i.recurrentActivation.apply(Oe(x,C)),u=i.recurrentActivation.apply(Oe(b,k));var E=yi(we(u,a),v);l=i.activation.apply(Oe(w,E));var N=Oe(we(s,a),we(Oe(1,xa(s)),l));return[N,N]})},n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),recurrentActivation:er(this.recurrentActivation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),recurrentInitializer:We(this.recurrentInitializer),biasInitializer:We(this.biasInitializer),kernelRegularizer:De(this.kernelRegularizer),recurrentRegularizer:De(this.recurrentRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),recurrentConstraint:Ke(this.recurrentConstraint),biasConstraint:Ke(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="GRUCell",n}(Xl);Z.registerClass(B0);var $I=function(t){function n(e){return e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new B0(e),t.call(this,e)||this}return X(n,t),n.prototype.call=function(e,r){var i=this;return j(function(){i.cell.dropoutMask!=null&&(Te(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(Te(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return t.prototype.call.call(i,e,{mask:o,training:a,initialState:s})})},Object.defineProperty(n.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),recurrentActivation:er(this.recurrentActivation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),recurrentInitializer:We(this.recurrentInitializer),biasInitializer:We(this.biasInitializer),kernelRegularizer:De(this.kernelRegularizer),recurrentRegularizer:De(this.recurrentRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),recurrentConstraint:Ke(this.recurrentConstraint),biasConstraint:Ke(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},n.fromConfig=function(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)},n.className="GRU",n}(ka);Z.registerClass($I);var V0=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,xn(r.units,"units"),r.activation=go(e.activation===void 0?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=go(e.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=e.useBias==null||e.useBias,r.kernelInitializer=at(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=at(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=at(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=st(e.kernelRegularizer),r.recurrentRegularizer=st(e.recurrentRegularizer),r.biasRegularizer=st(e.biasRegularizer),r.kernelConstraint=At(e.kernelConstraint),r.recurrentConstraint=At(e.recurrentConstraint),r.biasConstraint=At(e.biasConstraint),r.dropout=As([1,mo([0,e.dropout==null?0:e.dropout])]),r.recurrentDropout=As([1,mo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return X(n,t),n.prototype.build=function(e){var r,i,o=(e=Ze(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[o,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,s=this.units;i=new((r=function(u){function l(){return u!==null&&u.apply(this,arguments)||this}return X(l,u),l.prototype.apply=function(c,p){var f=a.apply([s]),h=new w0().apply([s]),d=a.apply([2*s]);return Cb(Cb(f,h),d)},l}(Lr)).className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},n.prototype.call=function(e,r){var i=this;return j(function(){var o=r.training!=null&&r.training;if((e=e).length!==3)throw new B("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var a=e[1],s=e[2];e=e[0],0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=Ds(function(){return Zn(e)},i.dropout,o,4)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=Ds(function(){return Zn(a)},i.recurrentDropout,o,4));var u,l,c,p,f=i.dropoutMask,h=i.recurrentDropoutMask;0<i.dropout&&i.dropout<1&&(e=we(e,f[0]));var d=yi(e,i.kernel.read());0<i.recurrentDropout&&i.recurrentDropout<1&&(a=we(a,h[0])),d=Oe(d,yi(a,i.recurrentKernel.read())),i.useBias&&(d=_i(d,i.bias.read()));var m=vi(d,4,d.rank-1),v=m[0],g=m[1],y=m[2],x=m[3];u=i.recurrentActivation.apply(v),l=i.recurrentActivation.apply(g),c=Oe(we(l,s),we(u,i.activation.apply(y))),p=i.recurrentActivation.apply(x);var b=we(p,i.activation.apply(c));return[b,b,c]})},n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),recurrentActivation:er(this.recurrentActivation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),recurrentInitializer:We(this.recurrentInitializer),biasInitializer:We(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:De(this.kernelRegularizer),recurrentRegularizer:De(this.recurrentRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),recurrentConstraint:Ke(this.recurrentConstraint),biasConstraint:Ke(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="LSTMCell",n}(Xl);Z.registerClass(V0);var UI=function(t){function n(e){return e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new V0(e),t.call(this,e)||this}return X(n,t),n.prototype.call=function(e,r){var i=this;return j(function(){i.cell.dropoutMask!=null&&(Te(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(Te(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return t.prototype.call.call(i,e,{mask:o,training:a,initialState:s})})},Object.defineProperty(n.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){var e={units:this.units,activation:er(this.activation),recurrentActivation:er(this.recurrentActivation),useBias:this.useBias,kernelInitializer:We(this.kernelInitializer),recurrentInitializer:We(this.recurrentInitializer),biasInitializer:We(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:De(this.kernelRegularizer),recurrentRegularizer:De(this.recurrentRegularizer),biasRegularizer:De(this.biasRegularizer),activityRegularizer:De(this.activityRegularizer),kernelConstraint:Ke(this.kernelConstraint),recurrentConstraint:Ke(this.recurrentConstraint),biasConstraint:Ke(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},n.fromConfig=function(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)},n.className="LSTM",n}(ka);Z.registerClass(UI);var W0=function(t){function n(e){var r=t.call(this,e)||this;return r.cells=e.cells,r}return X(n,t),Object.defineProperty(n.prototype,"stateSize",{get:function(){for(var e=[],r=0,i=this.cells.slice().reverse();r<i.length;r++){var o=i[r];Array.isArray(o.stateSize)?e.push.apply(e,o.stateSize):e.push(o.stateSize)}return e},enumerable:!0,configurable:!0}),n.prototype.call=function(e,r){var i=this;return j(function(){for(var o=(e=e).slice(1),a=[],s=0,u=i.cells.slice().reverse();s<u.length;s++){var l=u[s];Array.isArray(l.stateSize)?a.push(o.splice(0,l.stateSize.length)):a.push(o.splice(0,1))}a.reverse();for(var c,p=[],f=0;f<i.cells.length;++f)l=i.cells[f],o=a[f],c=f===0?[e[0]].concat(o):[c[0]].concat(o),c=l.call(c,r),p.push(c.slice(1));o=[];for(var h=0,d=p.slice().reverse();h<d.length;h++){var m=d[h];o.push.apply(o,m)}return[c[0]].concat(o)})},n.prototype.build=function(e){var r;hg(e)&&(e=e[0]),e=e,this.cells.forEach(function(i,o){Zo("RNNCell_"+o,function(){i.build(e),r=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,e=[e[0],r]})}),this.built=!0},n.prototype.getConfig=function(){for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push({className:o.getClassName(),config:o.getConfig()})}var a={cells:e},s=t.prototype.getConfig.call(this);return Object.assign(a,s),a},n.fromConfig=function(e,r,i){i===void 0&&(i={});for(var o=[],a=0,s=r.cells;a<s.length;a++){var u=s[a];o.push(Ar(u,i))}return new e({cells:o})},Object.defineProperty(n.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push.apply(e,o.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push.apply(e,o.nonTrainableWeights)}if(!this.trainable){for(var a=[],s=0,u=this.cells;s<u.length;s++)o=u[s],a.push.apply(a,o.trainableWeights);return a.concat(e)}return e},enumerable:!0,configurable:!0}),n.prototype.getWeights=function(){for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push.apply(e,o.weights)}return dg(e)},n.prototype.setWeights=function(e){for(var r=[],i=0,o=this.cells;i<o.length;i++)for(var a=o[i],s=a.weights.length,u=e.splice(s),l=0;l<a.weights.length;++l)r.push([a.weights[l],u[l]]);A0(r)},n.className="StackedRNNCells",n}(Xl);function Ds(t,n,e,r){function i(){return uN(t(),n)}if(e===void 0&&(e=null),r===void 0&&(r=1),r>1){for(var o=[],a=0;a<r;a++)o.push(Rs(i,t,e));return o.map(function(s){return Kr(s.clone())})}return Kr(Rs(i,t,e).clone())}Z.registerClass(W0);var jI=function(t){function n(e){var r=t.call(this,e)||this;return r.layer=e.layer,r}return X(n,t),n.prototype.build=function(e){this.built=!0},Object.defineProperty(n.prototype,"trainable",{get:function(){return this.layer!=null&&this.layer.trainable},set:function(e){this.layer!=null&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),n.prototype.getWeights=function(){return this.layer.getWeights()},n.prototype.setWeights=function(e){this.layer.setWeights(e)},n.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)},n.fromConfig=function(e,r,i){i===void 0&&(i={});var o=Ar(r.layer,i);delete r.layer;var a={layer:o};return Object.assign(a,r),new e(a)},n}(Le),HI=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r}return X(n,t),n.prototype.build=function(e){if((e=Ze(e)).length<3)throw new B("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),t.prototype.build.call(this,e)},n.prototype.computeOutputShape=function(e){var r=[(e=Ze(e))[0]].concat(e.slice(2)),i=this.layer.computeOutputShape(r),o=e[1];return[i[0],o].concat(i.slice(1))},n.prototype.call=function(e,r){var i=this;return j(function(){return VI(function(o,a){return[Ne(i.layer.call(o,r)),[]]},e=Ne(e),[],!1,null,null,!1,!0)[1]})},n.className="TimeDistributed",n}(jI);function nL(t){Xs(YF,"BidirectionalMergeMode",t)}Z.registerClass(HI);var rL="concat",GI=function(t){function n(e){var r=t.call(this,e)||this,i=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=i,r.forwardLayer=Ar(o),i.goBackwards=i.goBackwards!==!0;var a={};if(a.className=e.layer.getClassName(),a.config=i,r.backwardLayer=Ar(a),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=e.mergeMode===void 0?rL:e.mergeMode,nL(r.mergeMode),e.weights)throw new Ee("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return X(n,t),Object.defineProperty(n.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),n.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},n.prototype.setWeights=function(e){var r=e.length,i=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,i)),this.backwardLayer.setWeights(e.slice(i))},n.prototype.computeOutputShape=function(e){var r,i,o,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState&&(o=a.slice(1)),r=a[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):i=this.mergeMode==null?[r,r.slice()]:[r],this.returnState?this.mergeMode==null?i.concat(o).concat(o.slice()):[r].concat(o).concat(o.slice()):dn(i)},n.prototype.apply=function(e,r){var i=r==null?null:r.initialState,o=r==null?null:r.constants;r==null&&(r={});var a=BI(e,i,o,this.numConstants);if(e=a.inputs,i=a.initialState,o=a.constants,Array.isArray(e)&&(i=e.slice(1),e=e[0]),(i==null||i.length===0)&&o==null)return t.prototype.apply.call(this,e,r);var s=[],u=[];if(i!=null){var l=i.length;if(l%2>0)throw new B("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=i,s.push.apply(s,i);var c=i.map(function(y){return new Ut({shape:y.shape})});this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),u.push.apply(u,c)}if(o!=null)throw new Ee("Support for constants in Bidirectional layers is not implemented yet.");for(var p=s[0]instanceof Sr,f=0,h=s;f<h.length;f++)if(h[f]instanceof Sr!==p)throw new B("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(p){var d=[e].concat(s),m=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=m;var g=t.prototype.apply.call(this,d,r);return this.inputSpec=v,g}return t.prototype.apply.call(this,e,r)},n.prototype.call=function(e,r){var i=this;return j(function(){if(r.mask!=null)throw new Ee("The support for masking is not implemented for Bidirectional layers yet.");var o,a,s,u,l=r.initialState;if(l==null)o=i.forwardLayer.call(e,r),a=i.backwardLayer.call(e,r);else{var c=l.slice(0,l.length/2),p=l.slice(l.length/2);o=i.forwardLayer.call(e,Object.assign(r,{initialState:c})),a=i.backwardLayer.call(e,Object.assign(r,{initialState:p}))}return i.returnState&&(Array.isArray(o)&&(s=o.slice(1).concat(a.slice(1))),o=o[0],a=a[0]),i.returnSequences&&(a=Yr(a,1)),i.mergeMode==="concat"?u=aN([o,a]):i.mergeMode==="sum"?u=Oe(o,a):i.mergeMode==="ave"?u=we(.5,Oe(o,a)):i.mergeMode==="mul"?u=we(o,a):i.mergeMode==null&&(u=[o,a]),i.returnState?i.mergeMode==null?u.concat(s):[u].concat(s):u})},n.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},n.prototype.build=function(e){var r=this;Zo(this.forwardLayer.name,function(){r.forwardLayer.build(e)}),Zo(this.backwardLayer.name,function(){r.backwardLayer.build(e)}),this.built=!0},Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),n.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)},n.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.fromConfig=function(e,r){var i=Ar(r.layer);if(delete r.layer,r.numConstants!=null)throw new Ee("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var o=r;return o.layer=i,new e(o)},n.className="Bidirectional",n}(jI);function iL(t){return new Kl(t)}function oL(t){return new UN(t)}function aL(t){return new VN(t)}function sL(t){return new WN(t)}function uL(t){return new $N(t)}function lL(t){return new HN(t)}function cL(t){return new jN(t)}function pL(t){return new QN(t)}function fL(t){return new L0(t)}function hL(t){return new XN(t)}function dL(t){return new KN(t)}function mL(t){return new YN(t)}function gL(t){return new ZN(t)}function vL(t){return new JN(t)}function yL(t){return new eI(t)}function xL(t){return new iI(t)}function bL(t){return new nI(t)}function wL(t){return new tI(t)}function CL(t){return new rI(t)}function SL(t){return new oI(t)}function kL(t){return new aI(t)}function EL(t){return new sI(t)}function NL(t){return new lI(t)}function IL(t){return new cI(t)}function AL(t){return new fI(t)}function RL(t){return new mI(t)}function TL(t){return new hI(t)}function DL(t){return new dI(t)}function OL(t){return new pI(t)}function _L(t){return new gI(t)}function zL(t){return new bI(t)}function FL(t){return new wI(t)}function ML(t){return new CI(t)}function $0(t){return new NI(t)}function LL(t){return $0(t)}function PL(t){return $0(t)}function U0(t){return new RI(t)}function BL(t){return U0(t)}function VL(t){return U0(t)}function j0(t){return new OI(t)}function WL(t){return j0(t)}function $L(t){return j0(t)}function UL(t){return new zI(t)}function jL(t){return new LI(t)}function qI(t){return new FI(t)}function KI(t){return new PI(t)}function XI(t){return new EI(t)}function YI(t){return new AI(t)}function HL(t){return new DI(t)}function GL(t){return new $I(t)}function qL(t){return new B0(t)}function KL(t){return new UI(t)}function XL(t){return new V0(t)}function YL(t){return new WI(t)}function QL(t){return new P0(t)}function ZL(t){return new ka(t)}function JL(t){return new W0(t)}function eP(t){return new GI(t)}function tP(t){return new HI(t)}Z.registerClass(GI);var nP=qI,rP=KI,iP=XI,oP=YI;function aP(t){return new vI(t)}function sP(t){return new yI(t)}function uP(t){return new xI(t)}function lP(t){return new uI(t)}var cP=Object.freeze({inputLayer:iL,elu:oL,reLU:aL,leakyReLU:sL,prelu:uL,softmax:lL,thresholdedReLU:cL,conv1d:pL,conv2d:fL,conv2dTranspose:hL,conv3d:dL,separableConv2d:mL,cropping2D:gL,upSampling2d:vL,depthwiseConv2d:yL,activation:xL,dense:bL,dropout:wL,flatten:CL,repeatVector:SL,reshape:kL,permute:EL,embedding:NL,add:IL,average:AL,concatenate:RL,maximum:TL,minimum:DL,multiply:OL,dot:_L,batchNormalization:zL,layerNormalization:FL,zeroPadding2d:ML,averagePooling1d:$0,avgPool1d:LL,avgPooling1d:PL,averagePooling2d:U0,avgPool2d:BL,avgPooling2d:VL,averagePooling3d:j0,avgPool3d:WL,avgPooling3d:$L,globalAveragePooling1d:UL,globalAveragePooling2d:jL,globalMaxPooling1d:qI,globalMaxPooling2d:KI,maxPooling1d:XI,maxPooling2d:YI,maxPooling3d:HL,gru:GL,gruCell:qL,lstm:KL,lstmCell:XL,simpleRNN:YL,simpleRNNCell:QL,rnn:ZL,stackedRNNCells:JL,bidirectional:eP,timeDistributed:tP,globalMaxPool1d:nP,globalMaxPool2d:rP,maxPool1d:iP,maxPool2d:oP,Layer:Le,RNN:ka,RNNCell:Xl,input:LN,gaussianNoise:aP,gaussianDropout:sP,alphaDropout:uP,masking:lP});function pP(t,n){return T0(t,n)}function fP(t,n){return RN(t,n)}function hP(t,n){return TN(t,n)}function dP(t,n){return D0(t,n)}function mP(t,n){return O0(t,n)}function gP(t,n){return AN(t,n)}function vP(t,n){return HM(t,n)}function yP(t,n){return R0(t,n)}function xP(t,n){return yh(t,n)}function bP(t,n){return Ys(t,n)}function wP(t,n){return Ys(t,n)}function CP(t,n){return Ys(t,n)}function SP(t,n){return Ca(t,n)}function kP(t,n){return Ca(t,n)}function EP(t,n){return Ca(t,n)}var NP=Object.freeze({binaryAccuracy:pP,binaryCrossentropy:fP,sparseCategoricalAccuracy:hP,categoricalAccuracy:dP,categoricalCrossentropy:mP,precision:gP,recall:vP,cosineProximity:yP,meanAbsoluteError:xP,meanAbsolutePercentageError:bP,MAPE:wP,mape:CP,meanSquaredError:SP,MSE:kP,mse:EP}),IP=Object.freeze({modelFromJSON:N4});function AP(t){return new wh(t)}function RP(t){return H4(t)}function TP(t){return G4(t)}var DP=Object.freeze({l1l2:AP,l1:RP,l2:TP}),QI=function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.model=null,e}return X(n,t),n.prototype.setModel=function(e){if(!(e instanceof ea))throw new Error("model must be a LayersModel, not some other Container");this.model=e},n}(Ts);function Tc(t,n){return t<n}function Bb(t,n){return t>n}var ZI=function(t){function n(e){var r=t.call(this)||this;if(e==null&&(e={}),e.restoreBestWeights)throw new Ee("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,["auto","min","max"].indexOf(r.mode)===-1&&(console.warn("EarlyStopping mode '"+r.mode+"' is invalid. Falling back to mode 'auto'."),r.mode="auto"),r.mode==="min"?r.monitorFunc=Tc:r.mode==="max"||r.monitor.indexOf("acc")!==-1?r.monitorFunc=Bb:r.monitorFunc=Tc,r.monitorFunc===Tc&&(r.minDelta*=-1),r}return X(n,t),n.prototype.onTrainBegin=function(e){return be(this,void 0,void 0,function(){return ye(this,function(r){return this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===Tc?1/0:-1/0,[2]})})},n.prototype.onEpochEnd=function(e,r){return be(this,void 0,void 0,function(){var i;return ye(this,function(o){switch(o.label){case 0:return[4,Pi(r)];case 1:return o.sent(),(i=this.getMonitorValue(r))==null?[2]:(this.monitorFunc(i-this.minDelta,this.best)?(this.best=i,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)),[2])}})})},n.prototype.onTrainEnd=function(e){return be(this,void 0,void 0,function(){return ye(this,function(r){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]})})},n.prototype.getMonitorValue=function(e){e==null&&(e={});var r=e[this.monitor];return r==null&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(e)),r},n}(QI);function OP(t){return new ZI(t)}var _P={earlyStopping:OP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ui,Vb,bg=function(){return(bg=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function ca(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function pa(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(p){c=[6,p],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(ui||(ui={})),function(t){(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(Vb||(Vb={}));var H0={};function zP(t,n){var e={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:n};H0[t]=e}function JI(t){return H0[t]}function FP(t){delete H0[t]}function I(t,n,e,r){var i=n.inputParams[t];if(i&&i.inputIndexStart!==void 0){var o=i.inputIndexStart,a=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd;if(i.type==="tensor")return mn(n.inputNames[i.inputIndexStart],e,r);if(i.type==="tensors")return n.inputNames.slice(o,a).map(function(l){return mn(l,e,r)});var s=Array.prototype.slice.call(mn(n.inputNames.slice(o)[0],e,r).dataSync());return i.type==="number"?s[0]:s}var u=n.attrParams[t];return u&&u.value}function mn(t,n,e){var r=Bu(t),i=r[0],o=r[1],a=e.currentContextIds.find(function(s){return!!n[Zp(i,s)]});return a!==void 0?n[Zp(i,a)][o]:void 0}function MP(t,n,e){return n[Zp(t,e.currentContextId)]}function ip(t,n){var e=Bu(t),r=e[0],i=e[1];return[Zp(r,n&&n.currentContextId),i]}function Zp(t,n){return n?t+"-"+n:t}function Bu(t){var n=t.lastIndexOf(":");return n===-1?[t,0]:[t.substring(0,n),Number(t.substring(n+1))]}function Od(t,n){for(var e=[],r=0;r<t.length;r+=n)e.push(t.slice(r,r+n));return e}var LP=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],PP=Object.freeze({json:LP}),BP=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],VP=Object.freeze({json:BP}),WP=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],$P=Object.freeze({json:WP}),UP=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],jP=Object.freeze({json:UP}),HP=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],GP=Object.freeze({json:HP}),qP=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],KP=Object.freeze({json:qP}),XP=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],YP=Object.freeze({json:XP}),QP=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],ZP=Object.freeze({json:QP}),JP=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],eB=Object.freeze({json:JP}),tB=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],nB=Object.freeze({json:tB}),rB=[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],iB=Object.freeze({json:rB}),oB=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],aB=Object.freeze({json:oB}),sB=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],uB=Object.freeze({json:sB}),lB=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],cB=Object.freeze({json:lB}),pB=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],fB=Object.freeze({json:pB}),hB=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],dB=Object.freeze({json:hB}),mB=function(){function t(){var n=[PP,VP,$P,jP,GP,KP,YP,nB,eB,ZP,iB,aB,uB,cB,fB,dB],e=[].concat.apply([],n.map(function(r){return r.json}));this.opMappers=e.reduce(function(r,i){return r[i.tfOpName]=i,r},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.transformGraph=function(n){var e=this,r=[],i=[],o=n.node.reduce(function(l,c){return l[c.name]=e.mapNode(c),c.op==="Placeholder"&&r.push(l[c.name]),c.op==="Const"&&i.push(l[c.name]),l},{}),a=[],s=[],u=Object.keys(o);return u.forEach(function(l){var c=o[l];c.inputNames.forEach(function(p){var f=ip(p)[0];c.inputs.push(o[f]),o[f].children.push(c)}),c.inputs.length===0&&a.push(c)}),u.forEach(function(l){var c=o[l];c.children.length===0&&s.push(c)}),{nodes:o,inputs:a,outputs:s,weights:i,placeholders:r}},t.prototype.mapNode=function(n){var e=JI(n.op)||this.opMappers[n.op]||{};n.attr==null&&(n.attr={});var r={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(function(i){return i.startsWith("^")?i.substr(1):i}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr};return e.inputs!=null&&(r.inputParams=e.inputs.reduce(function(i,o){return i[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},i},{})),e.attrs!=null&&(r.attrParams=e.attrs.reduce(function(i,o){var a=o.type,s=void 0;switch(o.type){case"string":(s=wg(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=wg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":(s=Ag(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Ag(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":(s=Sg(n.attr,o.tfName,o.defaultValue||0))===void 0&&o.tfDeprecatedName&&(s=Sg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":(s=Ig(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Ig(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":(s=Cg(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Cg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":(s=Tg(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Tg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":(s=Ng(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Ng(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":(s=Rg(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Rg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":(s=kg(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=kg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":(s=Eg(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Eg(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+o.type+" for op: "+n.op)}return i[o.name]={value:s,type:a},i},{})),r},t}();function gB(t){var n=G().global;if(n.atob!==void 0)return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function eA(t,n){var e=Array.isArray(t)?String.fromCharCode.apply(null,t):gB(t);return n?e:e.toLowerCase()}function wg(t,n,e,r){r===void 0&&(r=!1);var i=t[n];return i!=null?eA(i.s,r):e}function Cg(t,n,e){var r=t[n];return r?r.b:e}function Sg(t,n,e){var r=t[n]||{},i=r.i!=null?r.i:r.f!=null?r.f:e;return typeof i=="number"?i:parseInt(i,10)}function tA(t){switch(typeof t=="string"&&(t=ui[t]),t){case ui.DT_FLOAT:return"float32";case ui.DT_INT32:case ui.DT_INT64:return"int32";case ui.DT_BOOL:return"bool";case ui.DT_DOUBLE:return"float32";case ui.DT_STRING:return"string";default:return null}}function kg(t,n,e){var r=t[n];return r&&r.type?tA(r.type):e}function Eg(t,n,e){var r=t[n];return r&&r.list&&r.list.type?r.list.type.map(function(i){return tA(i)}):e}function nA(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(function(n){return typeof n.size=="number"?n.size:parseInt(n.size,10)}):[]}function Ng(t,n,e){var r=t[n];return r&&r.shape?nA(r.shape):e}function Ig(t,n,e){var r=t[n];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(i){return typeof i=="number"?i:parseInt(i,10)}):e}function Ag(t,n,e,r){r===void 0&&(r=!1);var i=t[n];return i&&i.list&&i.list.s?i.list.s.map(function(o){return eA(o,r)}):e}function Rg(t,n,e){var r=t[n];return r&&r.list&&r.list.shape?r.list.shape.map(function(i){return nA(i)}):e}function Tg(t,n,e){var r=t[n];return r&&r.list&&r.list.b?r.list.b:e}var vB=function(){function t(n,e,r){var i=this;this.node=n,this.tensorMap=e,this.context=r,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(function(o){return i.getInput(o)}),n.rawAttrs!=null&&(this.attrs=Object.keys(n.rawAttrs).reduce(function(o,a){return o[a]=i.getAttr(a),o},{}))}return t.prototype.getInput=function(n){return mn(n,this.tensorMap,this.context)},t.prototype.getAttr=function(n,e){var r=this.node.rawAttrs[n];if(r.tensor!=null)return mn(n,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Sg(this.node.rawAttrs,n,e);if(r.s!=null)return wg(this.node.rawAttrs,n,e);if(r.b!=null)return Cg(this.node.rawAttrs,n,e);if(r.shape!=null)return Ng(this.node.rawAttrs,n,e);if(r.type!=null)return kg(this.node.rawAttrs,n,e);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Ig(this.node.rawAttrs,n,e);if(r.list.s!=null)return Ag(this.node.rawAttrs,n,e);if(r.list.shape!=null)return Rg(this.node.rawAttrs,n,e);if(r.list.b!=null)return Tg(this.node.rawAttrs,n,e);if(r.list.type!=null)return Eg(this.node.rawAttrs,n,e)}return e},t}(),yB=function(t,n,e){switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[Oe(I("a",t,n,e),I("b",t,n,e))];case"AddN":return[Vy(I("tensors",t,n,e))];case"FloorMod":case"Mod":return[$y(I("a",t,n,e),I("b",t,n,e))];case"Mul":return[we(I("a",t,n,e),I("b",t,n,e))];case"RealDiv":case"Div":return[ln(I("a",t,n,e),I("b",t,n,e))];case"FloorDiv":return[qf(I("a",t,n,e),I("b",t,n,e))];case"Sub":return[Gt(I("a",t,n,e),I("b",t,n,e))];case"Minimum":return[js(I("a",t,n,e),I("b",t,n,e))];case"Maximum":return[ei(I("a",t,n,e),I("b",t,n,e))];case"Pow":return[Ss(I("a",t,n,e),I("b",t,n,e))];case"SquaredDifference":return[Uy(I("a",t,n,e),I("b",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},xB=function(t,n,e){switch(t.op){case"Abs":case"ComplexAbs":return[fo(I("x",t,n,e))];case"Acos":return[gy(I("x",t,n,e))];case"Acosh":return[vy(I("x",t,n,e))];case"Asin":return[yy(I("x",t,n,e))];case"Asinh":return[xy(I("x",t,n,e))];case"Atan":return[by(I("x",t,n,e))];case"Atan2":return[Wy(I("x",t,n,e),I("y",t,n,e))];case"Atanh":return[wy(I("x",t,n,e))];case"Ceil":return[Cy(I("x",t,n,e))];case"Complex":return[_t(I("real",t,n,e),I("imag",t,n,e))];case"Cos":return[Sy(I("x",t,n,e))];case"Cosh":return[ky(I("x",t,n,e))];case"Elu":return[Ks(I("x",t,n,e))];case"Erf":return[Ey(I("x",t,n,e))];case"Exp":return[Ny(I("x",t,n,e))];case"Expm1":return[Iy(I("x",t,n,e))];case"Floor":return[Vf(I("x",t,n,e))];case"Log":return[Ni(I("x",t,n,e))];case"Log1p":return[Ay(I("x",t,n,e))];case"Imag":return[lr(I("x",t,n,e))];case"Neg":return[xa(I("x",t,n,e))];case"Reciprocal":return[Ry(I("x",t,n,e))];case"Real":return[In(I("x",t,n,e))];case"Relu":return[ko(I("x",t,n,e))];case"Round":return[Ty(I("x",t,n,e))];case"Selu":return[lh(I("x",t,n,e))];case"Sigmoid":return[$f(I("x",t,n,e))];case"Sin":return[Oy(I("x",t,n,e))];case"Sign":return[Dy(I("x",t,n,e))];case"Sinh":return[_y(I("x",t,n,e))];case"Softplus":return[_l(I("x",t,n,e))];case"Sqrt":return[zl(I("x",t,n,e))];case"Square":return[my(I("x",t,n,e))];case"Tanh":return[Uf(I("x",t,n,e))];case"Tan":return[zy(I("x",t,n,e))];case"Relu6":case"ClipByValue":return[yn(I("x",t,n,e),I("clipValueMin",t,n,e),I("clipValueMax",t,n,e))];case"Rsqrt":return[Wf(mn(t.inputNames[0],n,e))];case"Prod":return[ah(I("x",t,n,e),I("axes",t,n,e))];case"LeakyRelu":return[sh(I("x",t,n,e),I("alpha",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},bB=function(){function t(n,e,r,i,o,a,s){this.name=n,this.dtype=e,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(n){return n.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(n){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(n<0||n>=this.tensors.length)throw new Error("Tried to read from index "+n+", but array size is: "+this.tensors.length);var e=this.tensors[n];if(e.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+n+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(n){var e=this;return n.map(function(r){return e.read(r)})},t.prototype.write=function(n,e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error("Tried to write to index "+n+", but array is not resizeable and size is: "+this.maxSize);var r=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+n+`,
          because the value dtype is `+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()!==0||this.elementShape!=null&&this.elementShape.length!==0||(this.elementShape=e.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+n+"."),r&&r.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+n+", because it has already been read.");if(r&&r.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+n+", because it has already been written.");r.tensor=e,r.written=!0,this.tensors[n]=r},t.prototype.writeMany=function(n,e){var r=this;if(n.length!==e.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+n.length+" is not the same as tensors size: "+e.length+".");n.forEach(function(i,o){return r.write(i,e[o])})},t.prototype.gather=function(n,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!n){n=[];for(var r=0;r<this.size();r++)n.push(r)}if(n.length===0)return xt([],[0].concat(this.elementShape));var i=this.readMany(n);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),Tr(i,0)},t.prototype.concat=function(n){if(n&&n!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+n);if(this.size()===0)return xt([],[0].concat(this.elementShape));for(var e=[],r=0;r<this.size();r++)e.push(r);var i=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+i[0].shape+")"),un(i,0)},t.prototype.scatter=function(n,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(n.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+n.length+" vs. "+e.shape[0]);var r=Math.max.apply(Math,n);if(!this.dynamicSize&&r>=this.maxSize)throw new Error("Max index must be < array size ("+r+"  vs. "+this.maxSize+")");this.writeMany(n,sa(e,0))},t.prototype.split=function(n,e){var r=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var i=0,o=n.map(function(c){return i+=c});if(i!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+i+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+n.length+"), and the TensorArray is not marked as dynamically resizeable");var a=i===0?0:e.size/i,s=[];j(function(){e=e.reshape([1,i,a]);for(var c=0;c<n.length;++c){var p=[0,c===0?0:o[c-1],0],f=[1,n[c],a];s[c]=Jn(e,p,f).reshape(r.elementShape)}return s});for(var u=[],l=0;l<n.length;l++)u[l]=l;this.writeMany(u,s)},t.prototype.assertShapesMatchAllowUndefinedSize=function(n,e,r){r===void 0&&(r=""),me.assert(this.shapesEqualAllowUndefinedSize(n,e),function(){return r+" Shapes "+n+" and "+e+" must match"})},t.prototype.shapesEqualAllowUndefinedSize=function(n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==-1&&e[r]!==-1&&n[r]!==e[r])return!1;return!0},t.nextId=0,t}();function wB(t,n,e){return ca(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,p,f,h,d,m,v,g,y,x,b,w,S,C,k,E,N,T,A,_,M,W,L,U,O,V,$,K;return pa(this,function(Q){switch(Q.label){case 0:switch(t.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[I("pred",t,n,e).clone()]];case 2:return r=I("pred",t,n,e),i=I("data",t,n,e),[4,r.data()];case 3:return[2,Q.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(o=t.inputNames.find(function(ee){return mn(ee,n,e)!==void 0}))?[mn(o,n,e).clone()]:void 0];case 5:return a=I("frameName",t,n,e),s=I("tensor",t,n,e),e.enterFrame(a),[2,[s.clone()]];case 6:return u=I("tensor",t,n,e),e.exitFrame(),[2,[u.clone()]];case 7:return l=I("tensor",t,n,e),e.nextIteration(),[2,[l.clone()]];case 8:return c=I("size",t,n,e),p=I("dtype",t,n,e),f=I("elementShape",t,n,e),h=I("dynamicSize",t,n,e),d=I("clearAfterRead",t,n,e),m=I("identicalElementShapes",t,n,e),v=I("name",t,n,e),g=new bB(v,p,c,f,m,h,d),e.addTensorArray(g),[2,[se(g.id),se(1)]];case 9:return y=I("tensorArrayId",t,n,e),x=I("index",t,n,e),b=I("tensor",t,n,e),e.getTensorArray(y).write(x,b),[2,[se(1)]];case 10:return w=I("tensorArrayId",t,n,e),S=I("index",t,n,e),[2,[e.getTensorArray(w).read(S)]];case 11:return C=I("tensorArrayId",t,n,e),k=I("indices",t,n,e),E=I("dtype",t,n,e),[2,[e.getTensorArray(C).gather(k,E)]];case 12:return N=I("tensorArrayId",t,n,e),T=I("indices",t,n,e),A=I("tensor",t,n,e),e.getTensorArray(N).scatter(T,A),[2,[se(1)]];case 13:return _=I("tensorArrayId",t,n,e),M=e.getTensorArray(_),W=I("dtype",t,n,e),[2,[M.concat(W)]];case 14:return L=I("tensorArrayId",t,n,e),U=I("tensor",t,n,e),O=I("lengths",t,n,e),e.getTensorArray(L).split(O,U),[2,[se(1)]];case 15:return V=I("tensorArrayId",t,n,e),$=e.getTensorArray(V),[2,[se($.size(),"int32")]];case 16:return K=I("tensorArrayId",t,n,e),e.getTensorArray(K).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})})}var CB=function(t,n,e){var r,i;switch(t.op){case"Conv1D":var o=I("stride",t,n,e),a=I("pad",t,n,e),s=I("dataFormat",t,n,e).toUpperCase(),u=I("dilation",t,n,e);return[Xf(I("x",t,n,e),I("filter",t,n,e),o,a,s,u)];case"Conv2D":o=I("strides",t,n,e),a=I("pad",t,n,e),s=I("dataFormat",t,n,e).toUpperCase();var l=I("dilations",t,n,e);return[wa(I("x",t,n,e),I("filter",t,n,e),[o[1],o[2]],a,s,[l[1],l[2]])];case"_FusedConv2D":var c=(r=I("fusedOps",t,n,e))[0],p=r[1],f=c==="biasadd",h=p==="prelu",d=c==="fusedbatchnorm",m=I("numArgs",t,n,e);if(f){if(h&&m!==2)throw new Error("Fused Conv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!h&&m!==1)throw new Error("Fused Conv2d with BiasAdd must have one extra argument: bias.")}if(d)throw new Error("Fused Conv2d with FusedBatchNorm is not supported.");o=I("strides",t,n,e),a=I("pad",t,n,e),s=I("dataFormat",t,n,e).toUpperCase(),l=I("dilations",t,n,e);var v=(i=I("args",t,n,e))[0],g=i[1];return[Is.conv2d({x:I("x",t,n,e),filter:I("filter",t,n,e),strides:[o[1],o[2]],pad:a,dataFormat:s,dilations:[l[1],l[2]],bias:v,activation:p,preluActivationWeights:g})];case"Conv2DBackpropInput":case"Conv2dTranspose":var y=I("outputShape",t,n,e);return o=I("strides",t,n,e),a=I("pad",t,n,e),[Qf(I("x",t,n,e),I("filter",t,n,e),y,[o[1],o[2]],a)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return o=I("strides",t,n,e),a=I("pad",t,n,e),l=I("dilations",t,n,e),s=I("dataFormat",t,n,e).toUpperCase(),[qs(I("input",t,n,e),I("filter",t,n,e),[o[1],o[2]],a,s,[l[1],l[2]])];case"Conv3D":return o=I("strides",t,n,e),a=I("pad",t,n,e),s=I("dataFormat",t,n,e).toUpperCase(),l=I("dilations",t,n,e),[Yf(I("x",t,n,e),I("filter",t,n,e),[o[1],o[2],o[3]],a,s,[l[1],l[2],l[3]])];case"AvgPool":o=I("strides",t,n,e),a=I("pad",t,n,e);var x=I("kernelSize",t,n,e);return[eh(I("x",t,n,e),[x[1],x[2]],[o[1],o[2]],a)];case"MaxPool":return o=I("strides",t,n,e),a=I("pad",t,n,e),x=I("kernelSize",t,n,e),[Jf(I("x",t,n,e),[x[1],x[2]],[o[1],o[2]],a)];case"AvgPool3D":return o=I("strides",t,n,e),a=I("pad",t,n,e),x=I("kernelSize",t,n,e),[nh(I("x",t,n,e),[x[1],x[2],x[3]],[o[1],o[2],o[3]],a)];case"MaxPool3D":return o=I("strides",t,n,e),a=I("pad",t,n,e),x=I("kernelSize",t,n,e),[th(I("x",t,n,e),[x[1],x[2],x[3]],[o[1],o[2],o[3]],a)];default:throw TypeError("Node type "+t.op+" is not implemented")}},SB=function(t,n,e){switch(t.op){case"Fill":var r=I("shape",t,n,e),i=I("dtype",t,n,e),o=I("value",t,n,e);return[$s(r,o,i)];case"LinSpace":var a=I("start",t,n,e),s=I("stop",t,n,e),u=I("num",t,n,e);return[qv(a,s,u)];case"Multinomial":var l=I("logits",t,n,e),c=I("numSamples",t,n,e),p=I("seed",t,n,e);return[ey(l,c,p)];case"OneHot":var f=I("indices",t,n,e),h=I("depth",t,n,e),d=I("onValue",t,n,e),m=I("offValue",t,n,e);return[ws(f,h,d,m)];case"Ones":return[Jr(I("shape",t,n,e),I("dtype",t,n,e))];case"OnesLike":return[Zn(I("x",t,n,e))];case"RandomUniform":return[va(I("shape",t,n,e),I("minval",t,n,e),I("maxval",t,n,e),I("dtype",t,n,e))];case"Range":a=I("start",t,n,e);var v=I("stop",t,n,e),g=I("step",t,n,e);return[Tf(a,v,g,I("dtype",t,n,e))];case"TruncatedNormal":r=I("shape",t,n,e);var y=I("mean",t,n,e),x=I("stdDev",t,n,e);return p=I("seed",t,n,e),[Dl(r,y,x,I("dtype",t,n,e),p)];case"Zeros":return[He(I("shape",t,n,e),I("dtype",t,n,e))];case"ZerosLike":return[Fe(I("x",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function kB(t,n,e){return ca(this,void 0,void 0,function(){var r,i,o,a,s;return pa(this,function(u){switch(u.label){case 0:switch(t.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,6];case 1:return r=I("boxes",t,n,e),i=I("scores",t,n,e),o=I("maxOutputSize",t,n,e),a=I("iouThreshold",t,n,e),s=I("scoreThreshold",t,n,e),[4,Qo.nonMaxSuppressionAsync(r,i,o,a,s)];case 2:return[2,[u.sent()]];case 3:return[4,Gf(I("condition",t,n,e).asType("bool"))];case 4:return[2,[u.sent()]];case 5:return[2,ny(I("x",t,n,e),I("y",t,n,e))];case 6:throw TypeError("Node type "+t.op+" is not implemented")}})})}var EB=function(t,n,e){switch(t.op){case"TopKV2":var r=I("x",t,n,e),i=I("k",t,n,e),o=I("sorted",t,n,e),a=e0(r,i,o);return[a.values,a.indices];default:throw TypeError("Node type "+t.op+" is not implemented")}},NB=function(t,n,e){switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":var r=I("default",t,n,e);return[mn(t.name,n,e)||r];case"Placeholder":return[mn(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[I("x",t,n,e).clone()];case"IdentityN":return I("x",t,n,e).map(function(l){return l.clone()});case"Snapshot":return[I("x",t,n,e).clone()];case"Shape":return[zn(I("x",t,n,e).shape,"int32")];case"ShapeN":return I("x",t,n,e).map(function(l){return zn(l.shape)});case"Size":return[se(I("x",t,n,e).size,"int32")];case"Rank":return[se(I("x",t,n,e).rank,"int32")];case"NoOp":return[];case"Print":var i=I("x",t,n,e),o=I("data",t,n,e),a=I("message",t,n,e),s=I("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+t.op+" is not implemented")}},IB=function(t,n,e){switch(t.op){case"ResizeBilinear":var r=I("images",t,n,e),i=I("size",t,n,e),o=I("alignCorners",t,n,e);return[Qo.resizeBilinear(r,[i[0],i[1]],o)];case"ResizeNearestNeighbor":return r=I("images",t,n,e),i=I("size",t,n,e),o=I("alignCorners",t,n,e),[Qo.resizeNearestNeighbor(r,[i[0],i[1]],o)];case"CropAndResize":var a=I("image",t,n,e),s=I("boxes",t,n,e),u=I("boxInd",t,n,e),l=I("cropSize",t,n,e),c=I("method",t,n,e),p=I("extrapolationValue",t,n,e);return[Qo.cropAndResize(a,s,u,l,c,p)];default:throw TypeError("Node type "+t.op+" is not implemented")}},AB=function(t,n,e){switch(t.op){case"Equal":return[ba(I("a",t,n,e),I("b",t,n,e))];case"NotEqual":return[ks(I("a",t,n,e),I("b",t,n,e))];case"Greater":return[Hs(I("a",t,n,e),I("b",t,n,e))];case"GreaterEqual":return[Ml(I("a",t,n,e),I("b",t,n,e))];case"Less":return[jy(I("a",t,n,e),I("b",t,n,e))];case"LessEqual":return[Hy(I("a",t,n,e),I("b",t,n,e))];case"LogicalAnd":return[Ti(I("a",t,n,e),I("b",t,n,e))];case"LogicalNot":return[By(I("a",t,n,e))];case"LogicalOr":return[Hf(I("a",t,n,e),I("b",t,n,e))];case"Select":return[Ii(I("condition",t,n,e),I("a",t,n,e),I("b",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},RB=function(t,n,e){switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Zf(I("a",t,n,e),I("b",t,n,e),I("transposeA",t,n,e),I("transposeB",t,n,e))];case"Transpose":return[lt(I("x",t,n,e),I("perm",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},TB=function(t,n,e){switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Fy(I("x",t,n,e),I("mean",t,n,e),I("variance",t,n,e),I("offset",t,n,e),I("scale",t,n,e),I("epsilon",t,n,e))];case"LRN":return[Qy(I("x",t,n,e),I("radius",t,n,e),I("bias",t,n,e),I("alpha",t,n,e),I("beta",t,n,e))];case"Softmax":return[ya(I("x",t,n,e))];case"LogSoftmax":return[Pf(I("x",t,n,e))];case"SparseToDense":return[ph(I("sparseIndices",t,n,e),I("outputShape",t,n,e),I("sparseValues",t,n,e),I("defaultValue",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},DB=function(t,n,e){switch(t.op){case"Max":var r=I("axis",t,n,e),i=I("keepDims",t,n,e);return[ho(I("x",t,n,e),r,i)];case"Mean":return r=I("axis",t,n,e),i=I("keepDims",t,n,e),[wt(I("x",t,n,e),r,i)];case"Min":return r=I("axis",t,n,e),i=I("keepDims",t,n,e),[oh(I("x",t,n,e),r,i)];case"Sum":return r=I("axis",t,n,e),i=I("keepDims",t,n,e),[Fn(I("x",t,n,e),r,i)];case"All":return r=I("axis",t,n,e),i=I("keepDims",t,n,e),[ih(I("x",t,n,e),r,i)];case"Any":return r=I("axis",t,n,e),i=I("keepDims",t,n,e),[gl(I("x",t,n,e),r,i)];case"ArgMax":return r=I("axis",t,n,e),[vl(I("x",t,n,e),r)];case"ArgMin":return r=I("axis",t,n,e),[Xy(I("x",t,n,e),r)];case"Prod":return r=I("axis",t,n,e),i=I("keepDims",t,n,e),[ah(I("x",t,n,e),r,i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},OB=function(t,n,e){switch(t.op){case"ConcatV2":case"Concat":var r=I("axis",t,n,e),i=I("tensors",t,n,e);return[un(i,r)];case"GatherV2":case"Gather":r=I("axis",t,n,e);var o=I("x",t,n,e),a=I("indices",t,n,e);return[Gs(o,a.asType("int32"),r)];case"ReverseV2":case"Reverse":return r=I("axis",t,n,e),o=I("x",t,n,e),[Yr(o,r)];case"Slice":var s=I("begin",t,n,e),u=I("size",t,n,e);return[Jn(I("x",t,n,e),s,u)];case"StridedSlice":s=I("begin",t,n,e);var l=I("end",t,n,e),c=I("strides",t,n,e),p=I("beginMask",t,n,e),f=I("endMask",t,n,e),h=I("ellipsisMask",t,n,e),d=I("newAxisMask",t,n,e),m=I("shrinkAxisMask",t,n,e),v=I("x",t,n,e);if(s.length===1&&v.shape.length>1)for(var g=1;g<v.shape.length;g++)s.push(0),l.push(v.shape[g]),c.push(c[0]);return[Jy(v,s,l,c,p,f,h,d,m)];case"Pack":return j(function(){var E=I("axis",t,n,e),N=I("tensors",t,n,e),T=N[0].shape,A=N[0].squeeze().shape,_=N.map(function(M){var W=me.arraysEqual(M.shape,T);if(!W&&!me.arraysEqual(M.squeeze().shape,A))throw new Error("the input tensors shape does not match");return W?M:M.reshape(T)});return[Tr(_,E)]});case"Unpack":return j(function(){var E=I("axis",t,n,e),N=I("tensor",t,n,e);return sa(N,E)});case"Tile":var y=I("reps",t,n,e);return[oo(I("x",t,n,e),y)];case"Split":case"SplitV":r=I("axis",t,n,e);var x=I("numOrSizeSplits",t,n,e);return vi(I("x",t,n,e),x,r);case"ScatterNd":a=I("indices",t,n,e);var b=I("values",t,n,e),w=I("shape",t,n,e);return[t0(a,b,w)];case"GatherNd":var S=I("x",t,n,e);return a=I("indices",t,n,e),[n0(S,a)];case"SparseToDense":a=I("sparseIndices",t,n,e),w=I("outputShape",t,n,e);var C=I("sparseValues",t,n,e),k=I("defaultValue",t,n,e);return[ph(a,C,w,C.dtype===k.dtype?k:k.asType(C.dtype))];default:throw TypeError("Node type "+t.op+" is not implemented")}},_B=function(t,n,e){switch(t.op){case"FFT":return[Vl(I("x",t,n,e))];case"IFFT":return[Ns(I("x",t,n,e))];case"RFFT":return[Wl(I("x",t,n,e))];case"IRFFT":return[ch(I("x",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},zB=function(t,n,e){switch(t.op){case"Cast":return[_f(I("x",t,n,e),I("dtype",t,n,e))];case"ExpandDims":var r=I("axis",t,n,e);return[Un(I("x",t,n,e),r)];case"Squeeze":return r=I("axis",t,n,e),[Tl(I("x",t,n,e),r)];case"Reshape":return[Rl(I("x",t,n,e),I("shape",t,n,e))];case"PadV2":case"Pad":return[Co(I("x",t,n,e),Od(I("padding",t,n,e),2),I("constantValue",t,n,e))];case"SpaceToBatchND":var i=I("blockShape",t,n,e),o=Od(I("paddings",t,n,e),2);return[Ff(I("x",t,n,e),i,o)];case"BatchToSpaceND":i=I("blockShape",t,n,e);var a=Od(I("crops",t,n,e),2);return[Of(I("x",t,n,e),i,a)];case"DepthToSpace":var s=I("blockSize",t,n,e),u=I("dataFormat",t,n,e).toUpperCase();return[Jv(I("x",t,n,e),s,u)];default:throw TypeError("Node type "+t.op+" is not implemented")}};function Wb(t,n,e){var r=function(i,o,a){switch(i.category){case"arithmetic":return yB(i,o,a);case"basic_math":return xB(i,o,a);case"control":return wB(i,o,a);case"convolution":return CB(i,o,a);case"creation":return SB(i,o,a);case"dynamic":return kB(i,o,a);case"evaluation":return EB(i,o,a);case"image":return IB(i,o,a);case"graph":return NB(i,o,a);case"logical":return AB(i,o,a);case"matrices":return RB(i,o,a);case"normalization":return TB(i,o,a);case"reduction":return DB(i,o,a);case"slice_join":return OB(i,o,a);case"spectral":return _B(i,o,a);case"transformation":return zB(i,o,a);case"custom":var s=JI(i.op);if(s&&s.customExecutor)return s.customExecutor(new vB(i,o,a));throw TypeError("Custom op "+i.op+" is not registered.");default:throw TypeError("Unknown op '"+i.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,n,e);return r instanceof Promise?r.then(function(i){return[].concat(i)}):[].concat(r)}var $b=function(){function t(n,e){this.weightMap=n,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(n,e){return{id:n,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var n=[],e=0;e<this.contexts.length-1;e++){var r=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(r))}n.push(""),this._currentContextIds=n},t.prototype.contextIdforContexts=function(n){return n?n.map(function(e){return e.id===0&&e.iterationId===0?"":e.frameName+"-"+e.iterationId}).join("/"):""},t.prototype.enterFrame=function(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(n){return this.weightMap[n]},t.prototype.addTensorArray=function(n){this.tensorArrayMap[n.id]=n},t.prototype.getTensorArray=function(n){return this.tensorArrayMap[n]},t}();function Ub(t,n,e){for(var r=new Set,i=[],o=null,a=null,s=new Set,u=n.slice();u.length>0;){var l=u.pop();(rA(l)||PB(l))&&o==null&&(a=(o=l).children.map(function(c){return c.name}).filter(function(c){return r.has(c)})),r.add(l.name),e[l.name]==null&&t[l.name]==null&&(l.inputs.length!==0?l.inputs.forEach(function(c){s.has(c.name)||(s.add(c.name),u.push(c))}):i.push(l.name))}return{inputs:t,outputs:n,usedNodes:r,missingInputs:i,dynamicNode:o,syncInputs:a}}function FB(t,n,e){var r=e.usedNodes,i=e.inputs,o=[];Object.keys(i).map(function(l){return t.nodes[l]}).forEach(function(l){r.has(l.name)&&o.push(l)}),t.weights.forEach(function(l){r.has(l.name)&&o.push(l)});for(var a=new Set,s=[];o.length>0;){var u=o.pop();a.add(u.name),n[u.name]||s.push(u),u.children.forEach(function(l){!a.has(l.name)&&r.has(l.name)&&l.inputs.every(function(c){return a.has(c.name)})&&o.push(l)})}return s}var MB=["Switch","Merge","Enter","Exit","NextIteration"],LB=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"];function rA(t){return MB.indexOf(t.op)>=0}function PB(t){return LB.indexOf(t.op)>=0}var BB=function(){function t(n){this.graph=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=n.placeholders,this._outputs=n.outputs}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(n){var e=Object.keys(n).map(function(r){return n[r].map(function(i){return i.id})});this.weightIds=[].concat.apply([],e),this._weightMap=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.placeholders.map(function(n){return{name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(n){return{name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(n){return n.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.outputs.map(function(n){return n.name})},enumerable:!0,configurable:!0}),t.prototype.getCompilationKey=function(n,e){var r=n.map(function(o){return o.name}).sort(),i=e.map(function(o){return o.name}).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)},t.prototype.compile=function(n,e){var r=Ub(n,e,this.weightMap),i=r.missingInputs,o=r.dynamicNode,a=r.syncInputs;if(o!=null)throw new Error("This execution contains the node '"+o.name+"', which has the dynamic op '"+o.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+a+"]");if(i.length>0){var s=e.map(function(l){return l.name}),u=Object.keys(n);throw new Error("Cannot compute the outputs ["+s+"] from the provided inputs ["+u+"]. Missing the following inputs: ["+i+"]")}return FB(this.graph,this.weightMap,r)},t.prototype.execute=function(n,e){var r=this,i=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),this.checkOutputs(e);var o=i.map(function(c){return r.graph.nodes[c]}),a=e.map(function(c){return r.graph.nodes[Bu(c)[0]]}),s=this.getCompilationKey(o,a),u=this.compiledMap.get(s);u==null&&(u=this.compile(n,a),this.compiledMap.set(s,u));var l={};return j(function(){var c=new $b(r._weightMap,l),p=bg({},r.weightMap);Object.keys(n).forEach(function(g){p[g]=[n[g]]});for(var f=r.getFrozenTensorIds(p),h={},d=0;d<u.length;d++){var m=u[d];if(!p[m.name]){var v=Wb(m,p,c);if(v instanceof Promise)throw new Error("The execution of the op '"+m.op+"' returned a promise. Please use model.executeAsync() instead.");p[m.name]=v,r.checkTensorForDisposal(m.name,m,p,c,f,e,h)}}return e.map(function(g){return mn(g,p,c)})})},t.prototype.getFrozenTensorIds=function(n){var e=[].concat.apply([],Object.keys(n).map(function(r){return n[r]}).map(function(r){return r.map(function(i){return i.id})}));return new Set(e)},t.prototype.checkTensorForDisposal=function(n,e,r,i,o,a,s){e.category!=="control"&&a.indexOf(n)===-1&&(r[n].forEach(function(u){u!=null&&(s[u.id]=(s[u.id]||0)+e.children.length)}),e.inputs.forEach(function(u){if(u.category!=="control"){var l=MP(u.name,r,i);l!=null&&l.forEach(function(c){if(c&&!o.has(c.id)){var p=s[c.id];p===1?(c.dispose(),delete s[c.id]):p!=null&&s[c.id]--}})}}))},t.prototype.executeAsync=function(n,e){return ca(this,void 0,void 0,function(){var r,i,o,a,s,u,l=this;return pa(this,function(c){switch(c.label){case 0:return this.checkInputs(n),this.checkInputShapeAndType(n),this.checkOutputs(e),r={},i=new $b(this._weightMap,r),[4,this.executeWithControlFlow(n,i,e)];case 1:return o=c.sent(),a=e.map(function(p){return mn(p,o,i)}),s=new Set(a.map(function(p){return p.id})),u=new Set(Object.keys(n).map(function(p){return n[p].id})),Object.keys(o).forEach(function(p){o[p].forEach(function(f){!f||f.isDisposed||s.has(f.id)||u.has(f.id)||l.weightIds.indexOf(f.id)!==-1||f.dispose()})}),[2,a]}})})},t.prototype.executeWithControlFlow=function(n,e,r){return ca(this,void 0,void 0,function(){var i,o,a,s,u,l,c,p,f,h,d,m,v,g,y,x,b=this;return pa(this,function(w){switch(w.label){case 0:i=Object.keys(n),o=i.map(function(S){return b.graph.nodes[S]}),a=r.map(function(S){return b.graph.nodes[Bu(S)[0]]}),s=Ub(n,a,this.weightMap),u=s.usedNodes,l=s.missingInputs,c=s.dynamicNode,p=s.syncInputs,f=o.concat(this.graph.weights).map(function(S){return{node:S,contexts:e.currentContext}}),h=bg({},this.weightMap),Object.keys(n).forEach(function(S){h[S]=[n[S]]}),d={},m=this.getFrozenTensorIds(h),v={},w.label=1;case 1:return f.length>0?(g=this.processStack(o,f,e,h,v,m,r,d,u),[4,Promise.all(g)]):[3,3];case 2:return w.sent(),[3,1];case 3:if(c==null&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(y=a.filter(function(S){return!rA(S)&&!mn(S.name,h,e)}).map(function(S){return S.name})).length>0)throw x="",c!=null&&(x="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+p+"]"),new Error("Cannot compute the outputs ["+y+"] from the provided inputs ["+i+"]. Consider providing the following inputs: ["+l+"]. "+x);return[2,h]}})})},t.prototype.processStack=function(n,e,r,i,o,a,s,u,l){for(var c=this,p=[],f=function(){var d=e.pop();r.currentContext=d.contexts;var m="";if(d.node.op==="Enter"&&I("isConstant",d.node,i,r)&&(m=ip(d.node.name,r)[0]),n.indexOf(d.node)===-1){var v=Wb(d.node,i,r);m||(m=ip(d.node.name,r)[0]);var g=r.currentContext;v instanceof Promise?p.push(v.then(function(y){return i[m]=y,r.currentContext=g,c.checkTensorForDisposal(m,d.node,i,r,a,s,u),c.processChildNodes(d.node,e,r,i,o,l),y})):(i[m]=v,h.checkTensorForDisposal(m,d.node,i,r,a,s,u),h.processChildNodes(d.node,e,r,i,o,l))}else h.processChildNodes(d.node,e,r,i,o,l)},h=this;e.length>0;)f();return p},t.prototype.processChildNodes=function(n,e,r,i,o,a){n.children.forEach(function(s){var u=ip(s.name,r)[0];!o[u]&&a.has(s.name)&&(s.op==="Merge"?s.inputNames.some(function(l){return!!mn(l,i,r)})&&(o[u]=!0,e.push({contexts:r.currentContext,node:s})):s.inputNames.every(function(l){return!!mn(l,i,r)})&&(o[u]=!0,e.push({contexts:r.currentContext,node:s})))})},t.prototype.dispose=function(){var n=this;Object.keys(this.weightMap).forEach(function(e){return n.weightMap[e].forEach(function(r){return r.dispose()})})},t.prototype.checkInputShapeAndType=function(n){var e=this;Object.keys(n).forEach(function(r){var i=n[r],o=e.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){var a=o.attrParams.shape.value,s=a.length===i.shape.length&&i.shape.every(function(u,l){return a[l]===-1||a[l]===u});me.assert(s,function(){return"The shape of dict['"+o.name+"'] provided in model.execute(dict) must be ["+a+"], but was ["+i.shape+"]"})}o.attrParams.dtype&&o.attrParams.dtype.value&&me.assert(i.dtype===o.attrParams.dtype.value,function(){return"The dtype of dict['"+o.name+"'] provided in model.execute(dict) must be "+o.attrParams.dtype.value+", but was "+i.dtype})})},t.prototype.checkInputs=function(n){var e=this,r=Object.keys(n).filter(function(i){return!e.graph.nodes[i]});if(r.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+r+"] that are not part of graph")},t.prototype.checkOutputs=function(n){var e=this;n.forEach(function(r){var i=Bu(r)[0];if(!e.graph.nodes[i])throw new Error("The output '"+r+"' is not found in the graph")})},t}(),VB="?tfjs-format=file",WB="model.json",iA=function(){function t(n,e){e===void 0&&(e={}),this.modelUrl=n,this.loadOptions=e,this.version="n/a",e==null&&(this.loadOptions={})}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var n=this.modelUrl;if(n.load!=null)this.handler=n;else if(this.loadOptions.requestInit!=null)this.handler=qn.browserHTTPRequest(n,this.loadOptions);else{var e=qn.getLoadHandlers(n,this.loadOptions.onProgress);if(e.length===0)e.push(qn.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error("Found more than one ("+e.length+") load handlers for URL '"+[n]+"'");this.handler=e[0]}},t.prototype.load=function(){return ca(this,void 0,void 0,function(){var n,e,r;return pa(this,function(i){switch(i.label){case 0:if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return n=i.sent(),e=n.modelTopology,this.version=e.versions.producer+"."+e.versions.minConsumer,r=qn.decodeWeights(n.weightData,n.weightSpecs),this.executor=new BB(mB.Instance.transformGraph(e)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},t.prototype.predict=function(n,e){return this.execute(n,this.outputNodes)},t.prototype.normalizeInputs=function(n){if(!(n instanceof Ge||Array.isArray(n)))return n;if((n=Array.isArray(n)?n:[n]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+n.length+" input tensors.");return this.inputNodes.reduce(function(e,r,i){return e[r]=n[i],e},{})},t.prototype.normalizeOutputs=function(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]},t.prototype.execute=function(n,e){n=this.normalizeInputs(n),e=this.normalizeOutputs(e);var r=this.executor.execute(n,e);return r.length>1?r:r[0]},t.prototype.executeAsync=function(n,e){return ca(this,void 0,void 0,function(){var r;return pa(this,function(i){switch(i.label){case 0:return n=this.normalizeInputs(n),e=this.normalizeOutputs(e),[4,this.executor.executeAsync(n,e)];case 1:return[2,(r=i.sent()).length>1?r:r[0]]}})})},t.prototype.convertTensorMapToTensorsMap=function(n){return Object.keys(n).reduce(function(e,r){return e[r]=[n[r]],e},{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function $B(t,n){return n===void 0&&(n={}),ca(this,void 0,void 0,function(){var e;return pa(this,function(r){switch(r.label){case 0:if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return n==null&&(n={}),n.fromTFHub&&t.load==null&&(t.endsWith("/")||(t+="/"),t=""+t+WB+VB),[4,(e=new iA(t,n)).load()];case 1:return r.sent(),[2,e]}})})}var oA="1.3.1";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var aA=function(t,n){return(aA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function Ue(t,n){function e(){this.constructor=t}aA(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function ne(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function re(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(p){c=[6,p],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}function Ea(t,n){return t(n={exports:{}},n.exports),n.exports}var UB=Ea(function(t){(function(n,e,r){function i(a,s){return s.c=a.c,s.s0=a.s0,s.s1=a.s1,s.s2=a.s2,s}function o(a,s){var u=new function(p){var f,h=this,d=(f=4022871197,function(m){m=m.toString();for(var v=0;v<m.length;v++){var g=.02519603282416938*(f+=m.charCodeAt(v));g-=f=g>>>0,f=(g*=f)>>>0,f+=4294967296*(g-=f)}return 23283064365386963e-26*(f>>>0)});h.next=function(){var m=2091639*h.s0+23283064365386963e-26*h.c;return h.s0=h.s1,h.s1=h.s2,h.s2=m-(h.c=0|m)},h.c=1,h.s0=d(" "),h.s1=d(" "),h.s2=d(" "),h.s0-=d(p),h.s0<0&&(h.s0+=1),h.s1-=d(p),h.s1<0&&(h.s1+=1),h.s2-=d(p),h.s2<0&&(h.s2+=1),d=null}(a),l=s&&s.state,c=u.next;return c.int32=function(){return 4294967296*u.next()|0},c.double=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(0,t,!1)}),jB=Ea(function(t){(function(n,e,r){function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function o(a,s){var u=new function(p){var f=this,h="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var m=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^m^m>>>8},p===(0|p)?f.x=p:h+=p;for(var d=0;d<h.length+64;d++)f.x^=0|h.charCodeAt(d),f.next()}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(0,t,!1)}),HB=Ea(function(t){(function(n,e,r){function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function o(a,s){var u=new function(p){var f=this,h="";f.next=function(){var m=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^m^m<<1)|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,p===(0|p)?f.x=p:h+=p;for(var d=0;d<h.length+64;d++)f.x^=0|h.charCodeAt(d),d==h.length&&(f.d=f.x<<10^f.x>>>4),f.next()}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(0,t,!1)}),GB=Ea(function(t){(function(n,e,r){function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function o(a,s){a==null&&(a=+new Date);var u=new function(p){var f=this;f.next=function(){var h,d,m=f.x,v=f.i;return h=m[v],d=(h^=h>>>7)^h<<24,d^=(h=m[v+1&7])^h>>>10,d^=(h=m[v+3&7])^h>>>3,d^=(h=m[v+4&7])^h<<7,h=m[v+7&7],d^=(h^=h<<13)^h<<9,m[v]=d,f.i=v+1&7,d},function(h,d){var m,v=[];if(d===(0|d))v[0]=d;else for(d=""+d,m=0;m<d.length;++m)v[7&m]=v[7&m]<<15^d.charCodeAt(m)+v[m+1&7]<<13;for(;v.length<8;)v.push(0);for(m=0;m<8&&v[m]===0;++m);for(m==8?v[7]=-1:v[m],h.x=v,h.i=0,m=256;m>0;--m)h.next()}(f,p)}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},c.int32=u.next,c.quick=c,l&&(l.x&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(0,t,!1)}),qB=Ea(function(t){(function(n,e,r){function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function o(a,s){a==null&&(a=+new Date);var u=new function(p){var f=this;f.next=function(){var h,d,m=f.w,v=f.X,g=f.i;return f.w=m=m+1640531527|0,d=v[g+34&127],h=v[g=g+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,d=v[g]=d^h,f.i=g,d+(m^m>>>16)|0},function(h,d){var m,v,g,y,x,b=[],w=128;for(d===(0|d)?(v=d,d=null):(d+="\0",v=0,w=Math.max(w,d.length)),g=0,y=-32;y<w;++y)d&&(v^=d.charCodeAt((y+32)%d.length)),y===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(x=x+1640531527|0,g=(m=b[127&y]^=v+x)==0?g+1:0);for(g>=128&&(b[127&(d&&d.length||0)]=-1),g=127,y=512;y>0;--y)v=b[g+34&127],m=b[g=g+1&127],v^=v<<13,m^=m<<17,v^=v>>>15,m^=m>>>12,b[g]=v^m;h.w=x,h.X=b,h.i=g}(f,p)}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},c.int32=u.next,c.quick=c,l&&(l.X&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(0,t,!1)}),KB=Ea(function(t){(function(n,e,r){function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function o(a,s){var u=new function(p){var f=this,h="";f.next=function(){var m=f.b,v=f.c,g=f.d,y=f.a;return m=m<<25^m>>>7^v,v=v-g|0,g=g<<24^g>>>8^y,y=y-m|0,f.b=m=m<<20^m>>>12^v,f.c=v=v-g|0,f.d=g<<16^v>>>16^y,f.a=y-m|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,p===Math.floor(p)?(f.a=p/4294967296|0,f.b=0|p):h+=p;for(var d=0;d<h.length+20;d++)f.b^=0|h.charCodeAt(d),f.next()}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(p===0);return p},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(0,t,!1)}),zo=Ea(function(t){(function(n,e){var r,i=this,o=256,a=6,s="random",u=e.pow(o,a),l=e.pow(2,52),c=2*l,p=o-1;function f(v,g,y){var x=[],b=d(function C(k,E){var N,T=[],A=typeof k;if(E&&A=="object")for(N in k)try{T.push(C(k[N],E-1))}catch{}return T.length?T:A=="string"?k:k+"\0"}((g=g==1?{entropy:!0}:g||{}).entropy?[v,m(n)]:v??function(){try{var C;return r&&(C=r.randomBytes)?C=C(o):(C=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(C)),m(C)}catch{var k=i.navigator,E=k&&k.plugins;return[+new Date,i,E,i.screen,m(n)]}}(),3),x),w=new function(C){var k,E=C.length,N=this,T=0,A=N.i=N.j=0,_=N.S=[];for(E||(C=[E++]);T<o;)_[T]=T++;for(T=0;T<o;T++)_[T]=_[A=p&A+C[T%E]+(k=_[T])],_[A]=k;(N.g=function(M){for(var W,L=0,U=N.i,O=N.j,V=N.S;M--;)W=V[U=p&U+1],L=L*o+V[p&(V[U]=V[O=p&O+W])+(V[O]=W)];return N.i=U,N.j=O,L})(o)}(x),S=function(){for(var C=w.g(a),k=u,E=0;C<l;)C=(C+E)*o,k*=o,E=w.g(1);for(;C>=c;)C/=2,k/=2,E>>>=1;return(C+E)/k};return S.int32=function(){return 0|w.g(4)},S.quick=function(){return w.g(4)/4294967296},S.double=S,d(m(w.S),n),(g.pass||y||function(C,k,E,N){return N&&(N.S&&h(N,w),C.state=function(){return h(w,{})}),E?(e[s]=C,k):C})(S,b,"global"in g?g.global:this==e,g.state)}function h(v,g){return g.i=v.i,g.j=v.j,g.S=v.S.slice(),g}function d(v,g){for(var y,x=v+"",b=0;b<x.length;)g[p&b]=p&(y^=19*g[p&b])+x.charCodeAt(b++);return m(g)}function m(v){return String.fromCharCode.apply(0,v)}if(e["seed"+s]=f,d(e.random(),n),t.exports){t.exports=f;try{r=require("crypto")}catch{}}})([],Math)});zo.alea=UB,zo.xor128=jB,zo.xorwow=HB,zo.xorshift7=GB,zo.xor4096=qB,zo.tychei=KB;var XB=zo,sA=XB.alea;function YB(t,n){return Jp(t,n)}function Jp(t,n,e,r){if(e===void 0&&(e=new Map),r===void 0&&(r=new Set),t==null)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(e.has(t))return e.get(t);var i=n(t);if(i.recurse&&i.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(Os(t)){var o=Array.isArray(t)?[]:{};for(var a in r.add(t),t){var s=Jp(t[a],n,e,r);o[a]=s}return r.delete(t),o}throw new Error("Can't recurse into non-iterable type: "+t)}return e.set(t,i.value),i.value}function QB(t,n){return n===void 0&&(n=lA),uA(t,n)}function uA(t,n,e){e===void 0&&(e=new Set);var r=t[0];if(e.has(r))throw new Error("Circular references are not supported.");var i=n(t);if(i.recurse&&i.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(Os(r)){var o=Array.isArray(r)?[]:{};e.add(r);var a=function(u){var l=uA(t.map(function(c){return c[u]}),n,e);o[u]=l};for(var s in r)a(s);return e.delete(r),o}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function lA(t){return t===null?null:Os(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function cA(t,n){return ne(this,void 0,void 0,function(){var e,r,i,o,a,s;return re(this,function(u){switch(u.label){case 0:e=new Map,Jp(t,n,e),r=0,i=Array.from(e.keys()),u.label=1;case 1:return r<i.length?(o=i[r],(a=e.get(o))instanceof Promise?[4,a]:[3,3]):[3,4];case 2:s=u.sent(),e.set(o,s),u.label=3;case 3:return r++,[3,1];case 4:return[2,Jp(t,n,e)]}})})}function Os(t){return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof Ge))}function ZB(t){return t==null||JB(t)||Array.isArray(t)||typeof t=="object"&&t instanceof Ge||me.isTypedArray(t)}function JB(t){return t===null||typeof t!="object"&&typeof t!="function"}function eV(t){return YB(t,tV)}function tV(t){return t instanceof Ge?{value:t.clone(),recurse:!1}:Os(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var pA=function(){function t(n){if(this.capacity=n,this.begin=0,this.end=0,n==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(n<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(n),this.doubledCapacity=2*n}return t.prototype.wrap=function(n){for(;n<0;)n+=this.doubledCapacity;return n%this.doubledCapacity},t.prototype.get=function(n){if(n<0)throw new RangeError("Can't get item at a negative index.");return this.data[n%this.capacity]},t.prototype.set=function(n,e){if(n<0)throw new RangeError("Can't set item at a negative index.");this.data[n%this.capacity]=e},t.prototype.length=function(){var n=this.end-this.begin;return n<0&&(n=this.doubledCapacity+n),n},t.prototype.isFull=function(){return this.length()===this.capacity},t.prototype.isEmpty=function(){return this.length()===0},t.prototype.push=function(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,n),this.end=this.wrap(this.end+1)},t.prototype.pushAll=function(n){for(var e=0,r=n;e<r.length;e++){var i=r[e];this.push(i)}},t.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var n=this.get(this.end);return this.set(this.end,void 0),n},t.prototype.unshift=function(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,n)},t.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var n=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),n},t.prototype.shuffleExcise=function(n){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+n),r=this.get(e);return this.set(e,this.pop()),r},t}(),nV=function(t){function n(){return t.call(this,n.INITIAL_CAPACITY)||this}return Ue(n,t),n.prototype.isFull=function(){return!1},n.prototype.push=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.push.call(this,e)},n.prototype.unshift=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.unshift.call(this,e)},n.prototype.expand=function(){for(var e=2*this.capacity,r=new Array(e),i=this.length(),o=0;o<i;o++)r[o]=this.get(this.wrap(this.begin+o));this.data=r,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=i},n.INITIAL_CAPACITY=32,n}(pA);function fA(t){return new oV(t)}function G0(t){return new aV(t)}function rV(t,n){return new hA(t,n)}function iV(t,n){return n===void 0&&(n=Yi.FAIL),new mV(t,n)}var Yi,Lt=function(){function t(){}return t.prototype.toArray=function(){return ne(this,void 0,void 0,function(){var n,e;return re(this,function(r){switch(r.label){case 0:return n=[],[4,this.next()];case 1:e=r.sent(),r.label=2;case 2:return e.done?[3,4]:(n.push(e.value),[4,this.next()]);case 3:return e=r.sent(),[3,2];case 4:return[2,n]}})})},t.prototype.toArrayForTest=function(){return ne(this,void 0,void 0,function(){var n,e,r;return re(this,function(i){switch(i.label){case 0:return n=this.prefetch(100),e=[],[4,n.next()];case 1:r=i.sent(),i.label=2;case 2:return r.done?[3,4]:(e.push(r.value),[4,n.next()]);case 3:return r=i.sent(),[3,2];case 4:return[2,e]}})})},t.prototype.resolveFully=function(){return ne(this,void 0,void 0,function(){var n;return re(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:n=e.sent(),e.label=2;case 2:return n.done?[3,4]:[4,this.next()];case 3:return n=e.sent(),[3,2];case 4:return[2]}})})},t.prototype.resolveWhile=function(n){return ne(this,void 0,void 0,function(){var e,r;return re(this,function(i){switch(i.label){case 0:return[4,this.next()];case 1:e=i.sent(),r=n(e.value),i.label=2;case 2:return e.done||!r?[3,4]:[4,this.next()];case 3:return e=i.sent(),r=n(e.value),[3,2];case 4:return[2]}})})},t.prototype.handleErrors=function(n){return new hV(this,n)},t.prototype.filter=function(n){return new pV(this,n)},t.prototype.map=function(n){return new fV(this,n)},t.prototype.mapAsync=function(n){return new jb(this,n)},t.prototype.serialMapAsync=function(n){return new jb(this,n).serial()},t.prototype.flatmap=function(n){return new dV(this,n)},t.prototype.forEachAsync=function(n){return ne(this,void 0,void 0,function(){return re(this,function(e){return[2,this.map(n).resolveFully()]})})},t.prototype.serialForEach=function(n){return ne(this,void 0,void 0,function(){return re(this,function(e){return[2,this.serialMapAsync(n).resolveWhile(function(r){return r===!0})]})})},t.prototype.rowMajorBatch=function(n,e){return e===void 0&&(e=!0),new cV(this,n,e)},t.prototype.columnMajorBatch=function(n,e,r){return e===void 0&&(e=!0),r===void 0&&(r=lA),this.rowMajorBatch(n,e).map(function(i){return QB(i,r)})},t.prototype.concatenate=function(n,e){return new hA(fA([this,n]),e)},t.prototype.take=function(n){return n<0||n==null?this:new lV(this,n)},t.prototype.skip=function(n){return n<0||n==null?this:new uV(this,n)},t.prototype.prefetch=function(n){return new dA(this,n)},t.prototype.shuffle=function(n,e){return new gV(this,n,e)},t.prototype.serial=function(){return new sV(this)},t}(),oV=function(t){function n(e){var r=t.call(this)||this;return r.items=e,r.trav=0,r}return Ue(n,t),n.prototype.summary=function(){return"Array of "+this.items.length+" items"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e;return re(this,function(r){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(e=this.items[this.trav],this.trav++,[2,{value:eV(e),done:!1}])})})},n}(Lt),aV=function(t){function n(e){var r=t.call(this)||this;return r.nextFn=e,r}return Ue(n,t),n.prototype.summary=function(){return"Function call"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){try{return[2,this.nextFn()]}catch(r){throw r.message="Error thrown while iterating through a dataset: "+r.message,r}return[2]})})},n}(Lt),sV=function(t){function n(e){var r=t.call(this)||this;return r.upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return[2,this.upstream.next()]})})},n}(Lt),uV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.maxCount=r,i.count=0,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){var e;return re(this,function(r){switch(r.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(e=r.sent()).done?[2,e]:(Te(e.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},n}(Lt),lV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.maxCount=r,i.count=0,i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Take"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},n}(Lt),cV=function(t){function n(e,r,i){i===void 0&&(i=!0);var o=t.call(this)||this;return o.upstream=e,o.batchSize=r,o.enableSmallLastBatch=i,o.lastRead=Promise.resolve({value:null,done:!1}),o}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){var e,r;return re(this,function(i){switch(i.label){case 0:e=[],i.label=1;case 1:return e.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(r=i.sent()).done?this.enableSmallLastBatch&&e.length>0?[2,{value:e,done:!1}]:[2,{value:null,done:!0}]:(e.push(r.value),[3,1]);case 3:return[2,{value:e,done:!1}]}})})},n}(Lt),pV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.predicate=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){var e;return re(this,function(r){switch(r.label){case 0:return[4,this.upstream.next()];case 1:return(e=r.sent()).done||this.predicate(e.value)?[2,e]:(Te(e.value),[3,0]);case 2:return[2]}})})},n}(Lt),fV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.transform=r,i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Map"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return re(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if((e=l.sent()).done)return[2,{value:null,done:!0}];for(r=qr.getTensorsInContainer(e.value),i=this.transform(e.value),o=qr.getTensorsInContainer(i),a=0,s=r;a<s.length;a++)u=s[a],qr.isTensorInList(u,o)||u.dispose();return[2,{value:i,done:!1}]}})})},n}(Lt),hV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.handler=r,i.count=0,i.lastRead=Promise.resolve({value:null,done:!1}),i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){var e;return re(this,function(r){switch(r.label){case 0:r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,r.sent()];case 3:return e=r.sent(),this.handler(e)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},n}(Lt),jb=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.transform=r,i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return re(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:return(e=l.sent()).done?[2,{value:null,done:!0}]:(r=qr.getTensorsInContainer(e.value),[4,this.transform(e.value)]);case 2:for(i=l.sent(),o=qr.getTensorsInContainer(i),a=0,s=r;a<s.length;a++)u=s[a],qr.isTensorInList(u,o)||u.dispose();return[2,{value:i,done:!1}]}})})},n}(Lt),q0=function(t){function n(){var e=t.call(this)||this;return e.outputQueue=new nV,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Ue(n,t),n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){switch(e.label){case 0:return this.outputQueue.length()!==0?[3,2]:[4,this.pump()];case 1:return e.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},n}(Lt),dV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.transform=r,i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},n.prototype.pump=function(){return ne(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return re(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if((e=l.sent()).done)return[2,!1];for(r=qr.getTensorsInContainer(e.value),i=this.transform(e.value),o=qr.getTensorsInContainer(i),this.outputQueue.pushAll(i),a=0,s=r;a<s.length;a++)u=s[a],qr.isTensorInList(u,o)||u.dispose();return[2,!0]}})})},n}(q0),hA=function(t){function n(e,r){var i=t.call(this)||this;return i.baseErrorHandler=r,i.lastRead=null,i.iterator=null,i.moreIterators=e,i}return Ue(n,t),n.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},n.prototype.next=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},n.prototype.readFromChain=function(e){return ne(this,void 0,void 0,function(){var r,i;return re(this,function(o){switch(o.label){case 0:return[4,e];case 1:return o.sent(),this.iterator!=null?[3,3]:[4,this.moreIterators.next()];case 2:if((r=o.sent()).done)return[2,{value:null,done:!0}];this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),o.label=3;case 3:return[4,this.iterator.next()];case 4:return(i=o.sent()).done?(this.iterator=null,[2,this.readFromChain(e)]):[2,i]}})})},n}(Lt);(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(Yi||(Yi={}));var mV=function(t){function n(e,r){r===void 0&&(r=Yi.FAIL);var i=t.call(this)||this;return i.iterators=e,i.mismatchMode=r,i.count=0,i.currentPromise=null,i}return Ue(n,t),n.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},n.prototype.nextState=function(e){return ne(this,void 0,void 0,function(){function r(s){return s instanceof Lt?{value:s.next().then(function(u){return i++,u.done&&o++,u.value}),recurse:!1}:{value:null,recurse:!0}}var i,o,a;return re(this,function(s){switch(s.label){case 0:return[4,e];case 1:return s.sent(),i=0,o=0,[4,cA(this.iterators,r)];case 2:if(a=s.sent(),i===o)return[2,{value:null,done:!0}];if(o>0)switch(this.mismatchMode){case Yi.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case Yi.SHORTEST:return[2,{value:null,done:!0}];case Yi.LONGEST:}return this.count++,[2,{value:a,done:!1}]}})})},n.prototype.next=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},n}(Lt),dA=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.bufferSize=r,i.buffer=new pA(r),i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},n.prototype.refill=function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}},n.prototype.next=function(){return this.refill(),this.buffer.shift()},n}(Lt),gV=function(t){function n(e,r,i){var o=t.call(this,e,r)||this;return o.upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=sA(i||me.now().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return Ue(n,t),n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e=this;return re(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.randomInt=function(e){return Math.floor(this.random()*e)},n.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},n.prototype.serialNext=function(){return ne(this,void 0,void 0,function(){var e,r;return re(this,function(i){switch(i.label){case 0:this.upstreamExhausted||this.refill(),i.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(e=this.chooseIndex(),[4,this.buffer.shuffleExcise(e)]);case 2:return(r=i.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,r]);case 3:return[2,{value:null,done:!0}]}})})},n}(dA),Yl=function(){function t(){this.size=null}return t.prototype.batch=function(n,e){var r=this;e===void 0&&(e=!0);var i=this;return me.assert(n>0,function(){return`batchSize needs to be positive, but it is
      `+n}),kn(function(){return ne(r,void 0,void 0,function(){return re(this,function(o){switch(o.label){case 0:return[4,i.iterator()];case 1:return[2,o.sent().columnMajorBatch(n,e,xV)]}})})},this.size===1/0||this.size==null?this.size:e?Math.ceil(this.size/n):Math.floor(this.size/n))},t.prototype.concatenate=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){var i,o;return re(this,function(a){switch(a.label){case 0:return[4,r.iterator()];case 1:return o=(i=a.sent()).concatenate,[4,n.iterator()];case 2:return[2,o.apply(i,[a.sent()])]}})})},this.size===1/0||n.size===1/0?1/0:this.size!=null&&n.size!=null?this.size+n.size:null)},t.prototype.filter=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().filter(function(o){return j(function(){return n(o)})})]}})})},this.size===1/0?1/0:null)},t.prototype.forEachAsync=function(n){return ne(this,void 0,void 0,function(){return re(this,function(e){switch(e.label){case 0:return[4,this.iterator()];case 1:return[2,e.sent().forEachAsync(n)]}})})},t.prototype.forEach=function(n){return ne(this,void 0,void 0,function(){return re(this,function(e){return Af("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(n)]})})},t.prototype.map=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().map(function(o){return j(function(){return n(o)})})]}})})},this.size)},t.prototype.mapAsync=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().mapAsync(n)]}})})},this.size)},t.prototype.prefetch=function(n){var e=this;if(n==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var r=this;return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().prefetch(n)]}})})},this.size)},t.prototype.repeat=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){var i=this;return re(this,function(o){return[2,rV(G0(function(){return ne(i,void 0,void 0,function(){var a;return re(this,function(s){switch(s.label){case 0:return a={},[4,r.iterator()];case 1:return[2,(a.value=s.sent(),a.done=!1,a)]}})})}).take(n))]})})},this.size!=null&&n>0?this.size*n:n===0?0:this.size!=null&&(n===void 0||n<0)?1/0:null)},t.prototype.skip=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().skip(n)]}})})},this.size!=null&&n>=0&&this.size>=n?this.size-n:this.size!=null&&(this.size<n||n===void 0||n<0)?0:null)},t.prototype.shuffle=function(n,e,r){var i=this;if(r===void 0&&(r=!0),n==null||n<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var o=this,a=sA(e||me.now().toString());return kn(function(){return ne(i,void 0,void 0,function(){var s;return re(this,function(u){switch(u.label){case 0:return s=a.int32(),r&&(s+=a.int32()),[4,o.iterator()];case 1:return[2,u.sent().shuffle(n,s.toString())]}})})},this.size)},t.prototype.take=function(n){var e=this,r=this;return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().take(n)]}})})},this.size!=null&&this.size>n?n:this.size!=null&&this.size<=n?this.size:null)},t.prototype.toArray=function(){return ne(this,void 0,void 0,function(){return re(this,function(n){switch(n.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,n.sent().toArray()]}})})},t.prototype.toArrayForTest=function(){return ne(this,void 0,void 0,function(){return re(this,function(n){switch(n.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,n.sent().toArrayForTest()]}})})},t.MAX_BUFFER_SIZE=1e4,t}();function kn(t,n){return n===void 0&&(n=null),new(function(e){function r(){var i=e!==null&&e.apply(this,arguments)||this;return i.size=n,i}return Ue(r,e),r.prototype.iterator=function(){return ne(this,void 0,void 0,function(){return re(this,function(i){return[2,t()]})})},r}(Yl))}function vV(t){var n=this;return kn(function(){return ne(n,void 0,void 0,function(){return re(this,function(e){return[2,fA(t)]})})},t.length)}function yV(t){var n,e=this;if(!Os(t))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(t))for(var r=0;r<t.length;r++)n=n==null?t[r].size:Math.min(n,t[r].size);else if(t instanceof Object)for(var i in t)n=n==null?t[i].size:Math.min(n,t[i].size);return kn(function(){return ne(e,void 0,void 0,function(){return re(this,function(o){switch(o.label){case 0:return[4,cA(t,function(a){if(a instanceof Yl)return{value:a.iterator(),recurse:!1};if(Os(a))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})];case 1:return[2,iV(o.sent(),Yi.SHORTEST)]}})})},n)}function xV(t){return t===null?null:ZB(t[0])?{value:bV(t),recurse:!1}:{value:null,recurse:!0}}function bV(t){if(t.length===0)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof Ge?Tr(t):xt(t)}var mA=function(t){function n(e){var r=t.call(this)||this;return r.input=e,r}return Ue(n,t),n.prototype.iterator=function(){return ne(this,void 0,void 0,function(){var e,r;return re(this,function(i){switch(i.label){case 0:return[4,this.input.iterator()];case 1:return e=i.sent(),r=e.decodeUTF8(),[2,r.split(`
`).map(function(o){return o.endsWith("\r")&&(o=o.slice(0,-1)),o})]}})})},n}(Yl),Dc='"',fu=Symbol("out"),Hb=Symbol("field"),Oc=Symbol("quote"),_d=Symbol("quoteafterquote"),Gb=Symbol("quoteinquote"),gA=function(t){function n(e,r){var i=t.call(this)||this;return i.input=e,i.hasHeader=!0,i.fullColumnNames=null,i.columnNamesValidated=!1,i.columnConfigs=null,i.configuredColumnsOnly=!1,i.delimiter=",",i.delimWhitespace=!1,i.base=new mA(e),r||(r={}),i.hasHeader=r.hasHeader!==!1,i.fullColumnNames=r.columnNames,i.columnConfigs=r.columnConfigs,i.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(me.assert(r.delimiter==null,function(){return"Delimiter should not be provided when delimWhitespace is true."}),i.delimWhitespace=!0,i.delimiter=" "):i.delimiter=r.delimiter?r.delimiter:",",i}return Ue(n,t),n.prototype.columnNames=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){switch(e.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:e.sent(),e.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},n.prototype.setColumnNames=function(){return ne(this,void 0,void 0,function(){var e,r,i,o,a,s,u=this;return re(this,function(l){switch(l.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(e=l.sent(),!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&e&&me.assert(e.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+u.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=e),r=this.fullColumnNames.reduce(function(c,p){return c[p]=c[p]+1||1,c},{}),i=Object.keys(r).filter(function(c){return r[c]>1}),me.assert(i.length===0,function(){return"Duplicate column names found: "+i.toString()}),this.columnConfigs){for(o=0,a=Object.keys(this.columnConfigs);o<a.length;o++)if(s=a[o],this.fullColumnNames.indexOf(s)===-1)throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}return this.columnNamesValidated=!0,[2]}})})},n.prototype.maybeReadHeaderLine=function(){return ne(this,void 0,void 0,function(){var e,r;return re(this,function(i){switch(i.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,i.sent().next()];case 2:if((e=i.sent()).done)throw new Error("No data was found for CSV parsing.");return r=e.value,[2,this.parseRow(r,!1)];case 3:return[2,null]}})})},n.prototype.iterator=function(){return ne(this,void 0,void 0,function(){var e,r=this;return re(this,function(i){switch(i.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:i.sent(),i.label=2;case 2:return[4,this.base.iterator()];case 3:return e=i.sent(),this.hasHeader&&(e=e.skip(1)),[2,e.map(function(o){return r.makeDataElement(o)})]}})})},n.prototype.makeDataElement=function(e){for(var r=this.parseRow(e),i={},o={},a=0;a<this.fullColumnNames.length;a++){var s=this.fullColumnNames[a],u=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||u){var l=r[a],c=null;if(l==="")if(u&&u.default!==void 0)c=u.default;else{if(u&&(u.required||u.isLabel))throw new Error("Required column "+s+" is empty in this line: "+e);c=void 0}else{var p=Number(l);if(isNaN(p))c=u&&u.dtype==="bool"?this.getBoolean(l):l;else if(u&&u.dtype)switch(u.dtype){case"float32":c=p;break;case"int32":c=Math.floor(p);break;case"bool":c=this.getBoolean(l);break;default:c=p}else c=p}u&&u.isLabel?o[s]=c:i[s]=c}}return Object.keys(o).length===0?i:{xs:i,ys:o}},n.prototype.getBoolean=function(e){return e==="1"||e.toLowerCase()==="true"?1:0},n.prototype.parseRow=function(e,r){r===void 0&&(r=!0);for(var i=[],o=0,a=e.length,s=fu,u=0;u<a;u++)switch(s){case fu:switch(e.charAt(u)){case Dc:o=u+1,s=Oc;break;case this.delimiter:if(o=u+1,this.delimiter===" "&&this.delimWhitespace)break;i.push(""),s=fu;break;default:s=Hb,o=u}break;case Hb:switch(e.charAt(u)){case this.delimiter:i.push(e.substring(o,u)),s=fu,o=u+1}break;case Oc:switch(e.charAt(u)){case Dc:s=_d}break;case _d:switch(e.charAt(u)){case this.delimiter:i.push(e.substring(o,u-1)),s=fu,o=u+1;break;case Dc:s=Oc;break;default:s=Gb}break;case Gb:switch(e.charAt(u)){case Dc:s=Oc}}if(s===_d?i.push(e.substring(o,a-1)):i.push(e.substring(o)),r&&i.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+i);return i},n}(Yl),wV=function(t){function n(e){var r=t.call(this)||this;r.microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var i=Math.log2(r.fftSize);if(r.fftSize<0||i<4||i>14||!Number.isInteger(i))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+r.fftSize);if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=e.includeSpectrogram!==!1,r.includeWaveform=e.includeWaveform===!0,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return Ue(n,t),n.prototype.summary=function(){return"microphone"},n.create=function(e){return e===void 0&&(e={}),ne(this,void 0,void 0,function(){var r;return re(this,function(i){switch(i.label){case 0:if(G().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(r=new n(e)).start()];case 1:return i.sent(),[2,r]}})})},n.prototype.start=function(){return ne(this,void 0,void 0,function(){var e,r,i,o;return re(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=this,[4,navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null||this.audioTrackConstraints,video:!1})];case 1:return e.stream=a.sent(),[3,3];case 2:throw r=a.sent(),new Error("Error thrown while initializing video stream: "+r.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(i=window.AudioContext||window.webkitAudioContext,this.audioContext=new i,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return o=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,o.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e,r,i,o,a;return re(this,function(s){switch(s.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return i=s.sent(),this.includeSpectrogram&&(o=this.flattenQueue(i.freqDataQueue),e=this.getTensorFromAudioDataArray(o,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(a=this.flattenQueue(i.timeDataQueue),r=this.getTensorFromAudioDataArray(a,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:e,waveform:r},done:!1}]}})})},n.prototype.capture=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:return[2,e.sent().value]}})})},n.prototype.getAudioData=function(){return ne(this,void 0,void 0,function(){var e,r,i,o=this;return re(this,function(a){return e=[],r=[],i=0,[2,new Promise(function(s){var u=setInterval(function(){o.includeSpectrogram&&(o.analyser.getFloatFrequencyData(o.freqData),o.freqData[0]===-1/0&&s({freqDataQueue:e,timeDataQueue:r}),e.push(o.freqData.slice(0,o.columnTruncateLength))),o.includeWaveform&&(o.analyser.getFloatTimeDomainData(o.timeData),r.push(o.timeData.slice())),++i===o.numFrames&&(clearInterval(u),s({freqDataQueue:e,timeDataQueue:r}))},o.fftSize/o.sampleRateHz*1e3)})]})})},n.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},n.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},n.prototype.getSampleRate=function(){return this.sampleRateHz},n.prototype.flattenQueue=function(e){var r=e[0].length,i=new Float32Array(e.length*r);return e.forEach(function(o,a){return i.set(o,a*r)}),i},n.prototype.getTensorFromAudioDataArray=function(e,r){var i=new Float32Array(me.sizeFromShape(r));return i.set(e,i.length-e.length),xt(i,r)},n}(Lt),CV=function(t){function n(e,r){var i=t.call(this)||this;if(i.webcamVideoElement=e,i.webcamConfig=r,i.isClosed=!0,i.resize=!1,i.needToResize())if(i.resize=!0,i.cropSize=[i.webcamConfig.resizeHeight,i.webcamConfig.resizeWidth],i.cropBoxInd=zn([0],"int32"),i.webcamConfig.centerCrop){var o=1*i.webcamConfig.resizeWidth/i.webcamVideoElement.width,a=1*i.webcamConfig.resizeHeight/i.webcamVideoElement.height,s=(1-o)/2,u=(1-a)/2,l=s+o,c=a+u;i.cropBox=gi([u,s,c,l],[1,4])}else i.cropBox=gi([0,0,1,1],[1,4]);return i}return Ue(n,t),n.prototype.summary=function(){return"webcam"},n.create=function(e,r){return r===void 0&&(r={}),ne(this,void 0,void 0,function(){var i;return re(this,function(o){switch(o.label){case 0:if(G().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=r.resizeWidth,e.height=r.resizeHeight}return[4,(i=new n(e,r)).start()];case 1:return o.sent(),[2,i]}})})},n.prototype.start=function(){return ne(this,void 0,void 0,function(){var e,r,i=this;return re(this,function(o){switch(o.label){case 0:this.webcamConfig.facingMode&&me.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",function(){return"Invalid webcam facing mode: "+i.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return e.stream=o.sent(),[3,4];case 3:throw(r=o.sent()).message="Error thrown while initializing video stream: "+r.message,r;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(a){console.log(a),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(a){i.webcamVideoElement.onloadedmetadata=function(){a()}})]}})})},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e;return re(this,function(r){if(this.isClosed)return[2,{value:null,done:!0}];try{e=UE.fromPixels(this.webcamVideoElement)}catch(i){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(i))}if(!this.resize)return[2,{value:e,done:!1}];try{return[2,{value:this.cropAndResizeFrame(e),done:!1}]}catch(i){throw new Error("Error thrown cropping the video: "+i.message)}finally{e.dispose()}return[2]})})},n.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},n.prototype.cropAndResizeFrame=function(e){var r=this;return j(function(){var i,o=e.toFloat().expandDims(0),a=(i=Qo.cropAndResize(o,r.cropBox,r.cropBoxInd,r.cropSize,"bilinear")).shape;return i.reshape(a.slice(1))})},n.prototype.capture=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:return[2,e.sent().value]}})})},n.prototype.stop=function(){this.stream.getTracks().forEach(function(e){return e.stop()});try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0},n.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},n}(Lt),vA=function(){return function(){}}(),yA=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return Ue(n,t),n.prototype.split=function(e){return new SV(this,e)},n}(Lt),SV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.impl=new kV(e,r),i}return Ue(n,t),n.prototype.summary=function(){return this.impl.summary()},n.prototype.next=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return[2,this.impl.next()]})})},n}(yA),kV=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.separator=r,i.carryover="",i}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},n.prototype.pump=function(){return ne(this,void 0,void 0,function(){var e,r,i,o,a;return re(this,function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((e=s.sent()).done)return this.carryover===""?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((r=e.value.split(this.separator))[0]=this.carryover+r[0],i=0,o=r.slice(0,-1);i<o.length;i++)a=o[i],this.outputQueue.push(a);return this.carryover=r[r.length-1],[2,!0]}})})},n}(q0),EV=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return Ue(n,t),n.prototype.decodeUTF8=function(){return new NV(this)},n}(Lt),NV=function(t){function n(e){var r=t.call(this)||this;return r.upstream=e,r.impl=new IV(e),r}return Ue(n,t),n.prototype.summary=function(){return this.impl.summary()},n.prototype.next=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return[2,this.impl.next()]})})},n}(yA),IV=function(t){function n(e){var r=t.call(this)||this;if(r.upstream=e,G().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var i=require("string_decoder").StringDecoder;r.decoder=new i("utf8")}return r}return Ue(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},n.prototype.pump=function(){return ne(this,void 0,void 0,function(){var e,r,i;return re(this,function(o){switch(o.label){case 0:return[4,this.upstream.next()];case 1:return(e=o.sent()).done?[2,!1]:(r=e.value,i=G().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(Buffer.from(r.buffer)),this.outputQueue.push(i),[2,!0])}})})},n}(q0),xA=function(t){function n(e,r){r===void 0&&(r={});var i=t.call(this)||this;return i.file=e,i.options=r,me.assert(e instanceof Uint8Array||!!G().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),i.offset=r.offset||0,i.chunkSize=r.chunkSize||1048576,i}return Ue(n,t),n.prototype.summary=function(){return"FileChunks "+this.file},n.prototype.next=function(){return ne(this,void 0,void 0,function(){var e,r,i=this;return re(this,function(o){switch(o.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(e=new Promise(function(a,s){var u=i.offset+i.chunkSize;if(i.file instanceof Uint8Array)a(new Uint8Array(i.file.slice(i.offset,u)));else{var l=new FileReader;l.onload=function(p){var f=l.result;if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),!(f instanceof Uint8Array))return s(new TypeError("FileReader returned unknown type."));a(f)},l.onabort=function(p){return s(new Error("Aborted"))},l.onerror=function(p){return s(new Error(p.type))};var c=i.file.slice(i.offset,u);l.readAsArrayBuffer(c)}i.offset=u}),r={},[4,e]);case 1:return[2,(r.value=o.sent(),r.done=!1,r)]}})})},n}(EV);function AV(t,n){return n===void 0&&(n={}),ne(this,void 0,void 0,function(){var e,r,i,o,a;return re(this,function(s){switch(s.label){case 0:return typeof t=="string"?e=t:(e=t.url,r=RV(t)),[4,me.fetch(e,r)];case 1:return(i=s.sent()).ok?(a=Uint8Array.bind,[4,i.arrayBuffer()]):[3,3];case 2:return o=new(a.apply(Uint8Array,[void 0,s.sent()])),[2,new xA(o,n)];case 3:throw new Error(i.statusText)}})})}var RV=function(t){return{method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity}};function bA(t){return typeof t=="string"&&t.substr(0,7)==="file://"}var wA=function(t){function n(e,r){r===void 0&&(r={});var i=t.call(this)||this;return i.input=e,i.options=r,i}return Ue(n,t),n.prototype.iterator=function(){return ne(this,void 0,void 0,function(){var e;return re(this,function(r){return bA(this.input)&&G().get("IS_NODE")&&(e=require("fs"),this.input=e.readFileSync(this.input.substr(7))),[2,new xA(this.input,this.options)]})})},n}(vA),CA=function(t){function n(e,r){r===void 0&&(r={});var i=t.call(this)||this;return i.url=e,i.fileOptions=r,i}return Ue(n,t),n.prototype.iterator=function(){return ne(this,void 0,void 0,function(){return re(this,function(e){return bA(this.url)?[2,new wA(this.url,this.fileOptions).iterator()]:[2,AV(this.url,this.fileOptions)]})})},n}(vA);function TV(t,n){return n===void 0&&(n={}),new gA(new CA(t),n)}function DV(t){var n=this,e=G0(t);return kn(function(){return ne(n,void 0,void 0,function(){return re(this,function(r){return[2,e]})})})}function OV(t){var n=this;return kn(function(){return ne(n,void 0,void 0,function(){var e;return re(this,function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,G0(function(){return e.next()})]}})})})}function _V(t,n){return ne(this,void 0,void 0,function(){return re(this,function(e){return[2,CV.create(t,n)]})})}function zV(t){return ne(this,void 0,void 0,function(){return re(this,function(n){return[2,wV.create(t)]})})}var SA="1.3.1";const FV=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset:gA,Dataset:Yl,FileDataSource:wA,TextLineDataset:mA,URLDataSource:CA,array:vV,csv:TV,func:DV,generator:OV,microphone:zV,version_data:SA,webcam:_V,zip:yV},Symbol.toStringTag,{value:"Module"}));var MV="1.3.1",LV={"tfjs-core":qE,"tfjs-data":SA,"tfjs-layers":bh,"tfjs-converter":oA,tfjs:MV};const PV=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:f0,AdagradOptimizer:h0,AdamOptimizer:d0,AdamaxOptimizer:m0,Callback:QI,CallbackList:wN,CustomCallback:SN,DataStorage:oy,get ENV(){return Fv},EarlyStopping:ZI,Environment:KC,GraphModel:iA,History:CN,InputSpec:Ut,KernelBackend:ay,LayerVariable:vN,LayersModel:ea,MomentumOptimizer:g0,Optimizer:Oi,RMSPropOptimizer:v0,RNN:ka,get Rank(){return Gm},get Reduction(){return Zt},SGDOptimizer:dh,Sequential:z0,SymbolicTensor:Sr,Tensor:Ge,TensorBuffer:bs,Variable:ll,abs:fo,acos:gy,acosh:vy,add:Oe,addN:Vy,addStrict:Xk,all:ih,any:gl,argMax:vl,argMin:Xy,asin:yy,asinh:xy,atan:by,atan2:Wy,atanh:wy,avgPool:eh,avgPool3d:nh,backend:MS,backend_util:f3,basicLSTMCell:IE,batchNorm:Fy,batchNorm2d:My,batchNorm3d:Ly,batchNorm4d:Py,batchNormalization:qk,batchNormalization2d:jk,batchNormalization3d:Hk,batchNormalization4d:Gk,batchToSpaceND:Of,booleanMaskAsync:lE,browser:UE,buffer:Se,callbacks:_P,cast:_f,ceil:Cy,clipByValue:yn,clone:$S,complex:_t,concat:un,concat1d:Kv,concat2d:Xv,concat3d:Yv,concat4d:Qv,constraints:GF,conv1d:Xf,conv2d:wa,conv2dTranspose:Qf,conv3d:Yf,conv3dTranspose:mE,cos:Sy,cosh:ky,cumsum:US,customGrad:Us,data:FV,deprecationWarn:Af,depthToSpace:Jv,depthwiseConv2d:qs,deregisterOp:FP,diag:DE,disableDeprecationWarnings:B_,dispose:Te,disposeVariables:V_,div:ln,divStrict:Yk,dot:gE,dropout:r0,elu:Ks,enableDebugMode:P_,enableProdMode:L_,engine:W_,env:G,equal:ba,equalStrict:rE,erf:Ey,exp:Ny,expandDims:Un,expm1:Iy,eye:zf,fft:Vl,fill:$s,findBackend:K_,findBackendFactory:X_,floor:Vf,floorDiv:qf,frame:hh,fused:Is,gather:Gs,gatherND:n0,getBackend:G_,getKernel:XC,getKernelsForBackend:$m,grad:u3,grads:l3,greater:Hs,greaterEqual:Ml,greaterEqualStrict:iE,greaterStrict:oE,hammingWindow:i0,hannWindow:fh,ifft:Ns,imag:lr,image:Qo,inTopKAsync:zE,initializers:NM,input:LN,io:qn,irfft:ch,isFinite:Bk,isInf:Pk,isNaN:Lk,keep:Kr,layers:cP,leakyRelu:sh,less:jy,lessEqual:Hy,lessEqualStrict:aE,lessStrict:sE,linalg:a0,linspace:qv,loadGraphModel:$B,loadLayersModel:O4,localResponseNormalization:Qy,log:Ni,log1p:Ay,logSigmoid:Mk,logSoftmax:Pf,logSumExp:NE,logicalAnd:Ti,logicalNot:By,logicalOr:Hf,logicalXor:Kk,losses:FE,matMul:Zf,math:OF,max:ho,maxPool:Jf,maxPool3d:th,maximum:ei,maximumStrict:Qk,mean:wt,memory:Lp,metrics:NP,min:oh,minimum:js,minimumStrict:Zk,mod:$y,modStrict:Jk,model:T4,models:IP,moments:Bl,movingAverage:RE,mul:we,mulStrict:Kf,multiRNNCell:AE,multinomial:ey,neg:xa,nextFrame:rp,norm:Zy,notEqual:ks,notEqualStrict:uE,oneHot:ws,ones:Jr,onesLike:Zn,op:F,outerProduct:vE,pad:Co,pad1d:jS,pad2d:HS,pad3d:GS,pad4d:qS,pool:kE,pow:Ss,powStrict:eE,prelu:uh,print:WS,prod:ah,profile:$_,rand:KS,randomGamma:XS,randomNormal:ty,randomUniform:va,range:Tf,ready:H_,real:In,reciprocal:Ry,registerBackend:Y_,registerCallbackConstructor:_4,registerKernel:Um,registerOp:zP,regularizers:DP,relu:ko,relu6:Yy,removeBackend:q_,reshape:Rl,reverse:Yr,reverse1d:yE,reverse2d:xE,reverse3d:bE,reverse4d:wE,rfft:Wl,round:Ty,rsqrt:Wf,scalar:se,scatterND:t0,selu:lh,separableConv2d:Ky,sequential:D4,serialization:Z,setBackend:j_,setPlatform:Q_,setdiff1dAsync:ny,sigmoid:$f,sign:Dy,signal:_E,sin:Oy,sinh:_y,slice:Jn,slice1d:Ll,slice2d:rh,slice3d:Pl,slice4d:Es,slice_util:s3,softmax:ya,softplus:_l,spaceToBatchND:Ff,sparseToDense:ph,spectral:TE,split:vi,sqrt:zl,square:my,squaredDifference:Uy,squaredDifferenceStrict:tE,squeeze:Tl,stack:Tr,step:Vk,stft:o0,stridedSlice:Jy,sub:Gt,subStrict:nE,sum:Fn,tan:zy,tanh:Uf,tensor:xt,tensor1d:zn,tensor2d:gi,tensor3d:Hv,tensor4d:Wi,tensor5d:BS,tensor6d:VS,tensor_util:qr,test_util:FF,tidy:j,tile:oo,time:U_,topk:e0,train:Oo,transpose:lt,truncatedNormal:Dl,unregisterKernel:I_,unsortedSegmentSum:Gy,unstack:sa,util:me,valueAndGrad:c3,valueAndGrads:p3,variable:Gv,variableGrads:rk,version:LV,version_converter:oA,version_core:qE,version_layers:bh,webgl:MF,where:Ii,whereAsync:Gf,zeros:He,zerosLike:Fe},Symbol.toStringTag,{value:"Module"})),wl=Dg(PV);var fa={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(fa,"__esModule",{value:!0});fa.cropTensor=fa.capture=void 0;var jo=wl;function BV(t,n){return jo.tidy(function(){var e=jo.browser.fromPixels(t),r=kA(e,n),i=r.expandDims(0);return i.toFloat().div(jo.scalar(127)).sub(jo.scalar(1))})}fa.capture=BV;function kA(t,n,e){var r=Math.min(t.shape[0],t.shape[1]),i=t.shape[0]/2,o=i-r/2,a=t.shape[1]/2,s=a-r/2;if(n&&!e){var u=t.slice([o,s,0],[r,r,3]);u=u.reshape([r*r,1,3]);var l=[.2989,.587,.114];return u=jo.mul(u,l),u=u.reshape([r,r,3]),u=jo.sum(u,-1),u=jo.expandDims(u,-1),u}return t.slice([o,s,0],[r,r,3])}fa.cropTensor=kA;var kr={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(kr,"__esModule",{value:!0});kr.cropTo=kr.resizeMinTo=kr.resizeMaxTo=kr.resize=void 0;var kh=function(){return document.createElement("canvas")};function K0(t,n,e){e===void 0&&(e=kh()),e.width=t.width*n,e.height=t.height*n;var r=e.getContext("2d");return r.drawImage(t,0,0,e.width,e.height),e}kr.resize=K0;function VV(t,n,e){e===void 0&&(e=kh());var r=Math.max(t.width,t.height);return K0(t,n/r,e)}kr.resizeMaxTo=VV;function WV(t,n,e){e===void 0&&(e=kh());var r=Math.min(t.width,t.height);return K0(t,n/r,e)}kr.resizeMinTo=WV;function $V(t,n,e,r){e===void 0&&(e=!1),r===void 0&&(r=kh());var i=t.width,o=t.height;t instanceof HTMLVideoElement&&(i=t.videoWidth,o=t.videoHeight);var a=Math.min(i,o),s=n/a,u=Math.ceil(i*s),l=Math.ceil(o*s),c=u-n,p=l-n;r.width=r.height=n;var f=r.getContext("2d");return f.drawImage(t,~~(c/2)*-1,~~(p/2)*-1,u,l),e&&(f.scale(-1,1),f.drawImage(r,n*-1,0)),r}kr.cropTo=$V;var Ql={};/** @license See the LICENSE file. */Object.defineProperty(Ql,"__esModule",{value:!0});Ql.version=void 0;var UV="0.8.4-alpha2";Ql.version=UV;(function(t){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var n=gt&&gt.__awaiter||function(C,k,E,N){function T(A){return A instanceof E?A:new E(function(_){_(A)})}return new(E||(E=Promise))(function(A,_){function M(U){try{L(N.next(U))}catch(O){_(O)}}function W(U){try{L(N.throw(U))}catch(O){_(O)}}function L(U){U.done?A(U.value):T(U.value).then(M,W)}L((N=N.apply(C,k||[])).next())})},e=gt&&gt.__generator||function(C,k){var E={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},N,T,A,_;return _={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function M(L){return function(U){return W([L,U])}}function W(L){if(N)throw new TypeError("Generator is already executing.");for(;E;)try{if(N=1,T&&(A=L[0]&2?T.return:L[0]?T.throw||((A=T.return)&&A.call(T),0):T.next)&&!(A=A.call(T,L[1])).done)return A;switch(T=0,A&&(L=[L[0]&2,A.value]),L[0]){case 0:case 1:A=L;break;case 4:return E.label++,{value:L[1],done:!1};case 5:E.label++,T=L[1],L=[0];continue;case 7:L=E.ops.pop(),E.trys.pop();continue;default:if(A=E.trys,!(A=A.length>0&&A[A.length-1])&&(L[0]===6||L[0]===2)){E=0;continue}if(L[0]===3&&(!A||L[1]>A[0]&&L[1]<A[3])){E.label=L[1];break}if(L[0]===6&&E.label<A[1]){E.label=A[1],A=L;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(L);break}A[2]&&E.ops.pop(),E.trys.pop();continue}L=k.call(C,E)}catch(U){L=[6,U],T=0}finally{N=A=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromFiles=t.load=t.loadTruncatedMobileNet=t.CustomMobileNet=t.getTopKClasses=t.IMAGE_SIZE=void 0;var r=wl,i=wl,o=fa,a=kr,s=Ql,u=1,l="conv_pw_13_relu",c="out_relu",p=.25,f=.35;t.IMAGE_SIZE=224;var h=function(C){return C.packageVersion=C.packageVersion||s.version,C.packageName=C.packageName||"@teachablemachine/image",C.timeStamp=C.timeStamp||new Date().toISOString(),C.userMetadata=C.userMetadata||{},C.modelName=C.modelName||"untitled",C.labels=C.labels||[],C.imageSize=C.imageSize||t.IMAGE_SIZE,C},d=function(C){return!!C&&Array.isArray(C.labels)},m=function(C,k){if(C===1){if(k!==.25&&k!==.5&&k!==.75&&k!==1)return console.warn("Invalid alpha. Options are: 0.25, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",p.toFixed(2)),p}else if(k!==.35&&k!==.5&&k!==.75&&k!==1)return console.warn("Invalid alpha. Options are: 0.35, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",f.toFixed(2)),f;return k},v=function(C){if(C=C||{},C.checkpointUrl&&C.trainingLayer)return(C.alpha||C.version)&&console.warn("Checkpoint URL passed to modelOptions, alpha options are ignored"),[C.checkpointUrl,C.trainingLayer];if(C.version=C.version||u,C.version===1){C.alpha=C.alpha||p,C.alpha=m(C.version,C.alpha),console.log("Loading mobilenet "+C.version+" and alpha "+C.alpha);var k=C.alpha.toFixed(2);return k==="1.00"&&(k="1.0"),["https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_"+k+"_"+t.IMAGE_SIZE+"/model.json",l]}else{if(C.version===2)return C.alpha=C.alpha||f,C.alpha=m(C.version,C.alpha),console.log("Loading mobilenet "+C.version+" and alpha "+C.alpha),["https://storage.googleapis.com/teachable-machine-models/mobilenet_v2_weights_tf_dim_ordering_tf_kernels_"+C.alpha.toFixed(2)+"_"+t.IMAGE_SIZE+"_no_top/model.json",c];throw new Error("MobileNet V"+C.version+" doesn't exist")}},g=function(C){return n(void 0,void 0,void 0,function(){var k,E;return e(this,function(N){switch(N.label){case 0:return typeof C!="string"?[3,3]:[4,fetch(C)];case 1:return E=N.sent(),[4,E.json()];case 2:return k=N.sent(),[3,4];case 3:if(d(C))k=C;else throw new Error("Invalid Metadata provided");N.label=4;case 4:return[2,h(k)]}})})};function y(C,k,E){return E===void 0&&(E=3),n(this,void 0,void 0,function(){var N;return e(this,function(T){switch(T.label){case 0:return[4,k.data()];case 1:return N=T.sent(),[2,r.tidy(function(){E=Math.min(E,N.length);for(var A=[],_=0;_<N.length;_++)A.push({value:N[_],index:_});A.sort(function(U,O){return O.value-U.value});for(var M=new Float32Array(E),W=new Int32Array(E),_=0;_<E;_++)M[_]=A[_].value,W[_]=A[_].index;for(var L=[],_=0;_<W.length;_++)L.push({className:C[W[_]],probability:M[_]});return L})]}})})}t.getTopKClasses=y;var x=function(){function C(k,E){this.model=k,this._metadata=h(E)}return Object.defineProperty(C,"EXPECTED_IMAGE_SIZE",{get:function(){return t.IMAGE_SIZE},enumerable:!1,configurable:!0}),C.prototype.getMetadata=function(){return this._metadata},C.prototype.getTotalClasses=function(){var k=this.model.output,E=k.shape[1];return E},C.prototype.getClassLabels=function(){return this._metadata.labels},C.prototype.predictTopK=function(k,E,N){return E===void 0&&(E=10),N===void 0&&(N=!1),n(this,void 0,void 0,function(){var T,A,_,M=this;return e(this,function(W){switch(W.label){case 0:return T=a.cropTo(k,this._metadata.imageSize,N),A=r.tidy(function(){var L=o.capture(T,M._metadata.grayscale);return M.model.predict(L)}),[4,y(this._metadata.labels,A,E)];case 1:return _=W.sent(),i.dispose(A),[2,_]}})})},C.prototype.predict=function(k,E){return E===void 0&&(E=!1),n(this,void 0,void 0,function(){var N,T,A,_,M,W=this;return e(this,function(L){switch(L.label){case 0:return N=a.cropTo(k,this._metadata.imageSize,E),T=r.tidy(function(){var U=o.capture(N,W._metadata.grayscale);return W.model.predict(U)}),[4,T.data()];case 1:for(A=L.sent(),_=[],M=0;M<A.length;M++)_.push({className:this._metadata.labels[M],probability:A[M]});return i.dispose(T),[2,_]}})})},C.prototype.dispose=function(){this.truncatedModel.dispose()},C}();t.CustomMobileNet=x;function b(C){return n(this,void 0,void 0,function(){var k,E,N,T,A,_,M,A,_,M;return e(this,function(W){switch(W.label){case 0:return k=v(C),E=k[0],N=k[1],[4,r.loadLayersModel(E)];case 1:return T=W.sent(),C&&C.version===1?(A=T.getLayer(N),_=r.model({inputs:T.inputs,outputs:A.output}),M=r.sequential(),M.add(_),M.add(r.layers.flatten()),[2,M]):(A=T.getLayer(N),_=r.model({inputs:T.inputs,outputs:A.output}),M=r.sequential(),M.add(_),M.add(r.layers.globalAveragePooling2d({})),[2,M])}})})}t.loadTruncatedMobileNet=b;function w(C,k){return n(this,void 0,void 0,function(){var E,N,T;return e(this,function(A){switch(A.label){case 0:return[4,r.loadLayersModel(C)];case 1:return E=A.sent(),k?[4,g(k)]:[3,3];case 2:return T=A.sent(),[3,4];case 3:T=null,A.label=4;case 4:return N=T,[2,new x(E,N)]}})})}t.load=w;function S(C,k,E){return n(this,void 0,void 0,function(){var N,T,A,_;return e(this,function(M){switch(M.label){case 0:return[4,r.loadLayersModel(r.io.browserFiles([C,k]))];case 1:return N=M.sent(),[4,new Response(E).json()];case 2:return T=M.sent(),E?[4,g(T)]:[3,4];case 3:return _=M.sent(),[3,5];case 4:_=null,M.label=5;case 5:return A=_,[2,new x(N,A)]}})})}t.loadFromFiles=S})(zv);var _s={},X0={exports:{}};X0.exports;(function(t){(function(n,e,r){function i(u){var l=this,c=s();l.next=function(){var p=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=p|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function o(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function a(u,l){var c=new i(u),p=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,p&&(typeof p=="object"&&o(p,c),f.state=function(){return o(c,{})}),f}function s(){var u=4022871197,l=function(c){c=c.toString();for(var p=0;p<c.length;p++){u+=c.charCodeAt(p);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(gt,t,!1)})(X0);var jV=X0.exports,Y0={exports:{}};Y0.exports;(function(t){(function(n,e,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(gt,t,!1)})(Y0);var HV=Y0.exports,Q0={exports:{}};Q0.exports;(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(gt,t,!1)})(Q0);var GV=Q0.exports,Z0={exports:{}};Z0.exports;(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var c=u.x,p=u.i,f,h;return f=c[p],f^=f>>>7,h=f^f<<24,f=c[p+1&7],h^=f^f>>>10,f=c[p+3&7],h^=f^f>>>3,f=c[p+4&7],h^=f^f<<7,f=c[p+7&7],f=f^f<<13,h^=f^f<<9,c[p]=h,u.i=p+1&7,h};function l(c,p){var f,h=[];if(p===(p|0))h[0]=p;else for(p=""+p,f=0;f<p.length;++f)h[f&7]=h[f&7]<<15^p.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}l(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},p.int32=l.next,p.quick=p,c&&(c.x&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(gt,t,!1)})(Z0);var qV=Z0.exports,J0={exports:{}};J0.exports;(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var c=u.w,p=u.X,f=u.i,h,d;return u.w=c=c+1640531527|0,d=p[f+34&127],h=p[f=f+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,d=p[f]=d^h,u.i=f,d+(c^c>>>16)|0};function l(c,p){var f,h,d,m,v,g=[],y=128;for(p===(p|0)?(h=p,p=null):(p=p+"\0",h=0,y=Math.max(y,p.length)),d=0,m=-32;m<y;++m)p&&(h^=p.charCodeAt((m+32)%p.length)),m===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(v=v+1640531527|0,f=g[m&127]^=h+v,d=f==0?d+1:0);for(d>=128&&(g[(p&&p.length||0)&127]=-1),d=127,m=4*128;m>0;--m)h=g[d+34&127],f=g[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,g[d]=h^f;c.w=v,c.X=g,c.i=d}l(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},p.int32=l.next,p.quick=p,c&&(c.X&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(gt,t,!1)})(J0);var KV=J0.exports,e1={exports:{}};e1.exports;(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var p=u.b,f=u.c,h=u.d,d=u.a;return p=p<<25^p>>>7^f,f=f-h|0,h=h<<24^h>>>8^d,d=d-p|0,u.b=p=p<<20^p>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^d,u.a=d-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,d=(f+h)/(1<<21);while(d===0);return d},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&o(c,l),p.state=function(){return o(l,{})}),p}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(gt,t,!1)})(e1);var XV=e1.exports,EA={exports:{}};const YV={},QV=Object.freeze(Object.defineProperty({__proto__:null,default:YV},Symbol.toStringTag,{value:"Module"})),ZV=Dg(QV);(function(t){(function(n,e){var r=(0,eval)("this"),i=256,o=6,a=52,s="random",u=e.pow(i,o),l=e.pow(2,a),c=l*2,p=i-1,f;function h(b,w,S){var C=[];w=w==!0?{entropy:!0}:w||{};var k=g(v(w.entropy?[b,x(n)]:b??y(),3),C),E=new d(C),N=function(){for(var T=E.g(o),A=u,_=0;T<l;)T=(T+_)*i,A*=i,_=E.g(1);for(;T>=c;)T/=2,A/=2,_>>>=1;return(T+_)/A};return N.int32=function(){return E.g(4)|0},N.quick=function(){return E.g(4)/4294967296},N.double=N,g(x(E.S),n),(w.pass||S||function(T,A,_,M){return M&&(M.S&&m(M,E),T.state=function(){return m(E,{})}),_?(e[s]=T,A):T})(N,k,"global"in w?w.global:this==e,w.state)}e["seed"+s]=h;function d(b){var w,S=b.length,C=this,k=0,E=C.i=C.j=0,N=C.S=[];for(S||(b=[S++]);k<i;)N[k]=k++;for(k=0;k<i;k++)N[k]=N[E=p&E+b[k%S]+(w=N[k])],N[E]=w;(C.g=function(T){for(var A,_=0,M=C.i,W=C.j,L=C.S;T--;)A=L[M=p&M+1],_=_*i+L[p&(L[M]=L[W=p&W+A])+(L[W]=A)];return C.i=M,C.j=W,_})(i)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function v(b,w){var S=[],C=typeof b,k;if(w&&C=="object")for(k in b)try{S.push(v(b[k],w-1))}catch{}return S.length?S:C=="string"?b:b+"\0"}function g(b,w){for(var S=b+"",C,k=0;k<S.length;)w[p&k]=p&(C^=w[p&k]*19)+S.charCodeAt(k++);return x(w)}function y(){try{var b;return f&&(b=f.randomBytes)?b=b(i):(b=new Uint8Array(i),(r.crypto||r.msCrypto).getRandomValues(b)),x(b)}catch{var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(g(e.random(),n),t.exports){t.exports=h;try{f=ZV}catch{}}})([],Math)})(EA);var JV=EA.exports,eW=jV,tW=HV,nW=GV,rW=qV,iW=KV,oW=XV,Na=JV;Na.alea=eW;Na.xor128=tW;Na.xorwow=nW;Na.xorshift7=rW;Na.xor4096=iW;Na.tychei=oW;var aW=Na;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var sW=gt&&gt.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ii=gt&&gt.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(p){a(p)}}function u(c){try{l(r.throw(c))}catch(p){a(p)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},oi=gt&&gt.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(_s,"__esModule",{value:!0});_s.createTeachable=_s.TeachableMobileNet=void 0;var Kt=wl,uW=wl,lW=fa,NA=zv,cW=aW,pW=.15,fW=function(t){return typeof t.dataId=="object"&&typeof t.shape=="object"};function hW(t,n){var e=new Array(n).fill(0);return e[t]=1,e}function zd(t,n){for(var e,r=t.length,i=t.slice(),o=r-1;o>0;o-=1){var a=void 0;n?a=Math.floor(n()*(o+1)):a=Math.floor(Math.random()*(o+1)),e=[i[a],i[o]],i[o]=e[0],i[a]=e[1]}return i}var IA=function(t){sW(n,t);function n(e,r){var i=t.call(this,Kt.sequential(),r)||this;return i.totalSamples=0,i.examples=[],i.truncatedModel=e,i}return Object.defineProperty(n.prototype,"asSequentialModel",{get:function(){return this.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTrained",{get:function(){return!!this.model&&this.model.layers&&this.model.layers.length>2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isPrepared",{get:function(){return!!this.trainDataset},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"numClasses",{get:function(){return this._metadata.labels.length},enumerable:!1,configurable:!0}),n.prototype.addExample=function(e,r){return ii(this,void 0,void 0,function(){var i,o,a;return oi(this,function(s){return i=fW(r)?r:lW.capture(r,this._metadata.grayscale),o=this.truncatedModel.predict(i),a=o.dataSync(),i.dispose(),o.dispose(),this.examples[e].push(a),this.totalSamples++,[2]})})},n.prototype.predict=function(e,r){return r===void 0&&(r=!1),ii(this,void 0,void 0,function(){return oi(this,function(i){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,t.prototype.predict.call(this,e,r)]})})},n.prototype.predictTopK=function(e,r,i){return r===void 0&&(r=10),i===void 0&&(i=!1),ii(this,void 0,void 0,function(){return oi(this,function(o){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,t.prototype.predictTopK.call(this,e,r,i)]})})},n.prototype.prepare=function(){for(var e in this.examples)if(e.length===0)throw new Error("Add some examples before training");var r=this.convertToTfDataset();this.trainDataset=r.trainDataset,this.validationDataset=r.validationDataset},n.prototype.convertToTfDataset=function(){for(var e=0;e<this.examples.length;e++)this.examples[e]=zd(this.examples[e],this.seed);for(var r=[],i=[],o=function(p){var f=hW(p,a.numClasses),h=a.examples[p].length,d=Math.ceil(pW*h),m=h-d,v=a.examples[p].slice(0,m).map(function(y){return{data:y,label:f}}),g=a.examples[p].slice(m).map(function(y){return{data:y,label:f}});r=r.concat(v),i=i.concat(g)},a=this,e=0;e<this.examples.length;e++)o(e);r=zd(r,this.seed),i=zd(i,this.seed);var s=Kt.data.array(r.map(function(p){return p.data})),u=Kt.data.array(i.map(function(p){return p.data})),l=Kt.data.array(r.map(function(p){return p.label})),c=Kt.data.array(i.map(function(p){return p.label}));return{trainDataset:Kt.data.zip({xs:s,ys:l}),validationDataset:Kt.data.zip({xs:u,ys:c})}},n.prototype.save=function(e,r){return ii(this,void 0,void 0,function(){return oi(this,function(i){return[2,this.model.save(e,r)]})})},n.prototype.train=function(e,r){return r===void 0&&(r={}),ii(this,void 0,void 0,function(){var i,o,a,s,u,l,c,p,f,h=this;return oi(this,function(d){switch(d.label){case 0:if(i=r.onTrainEnd||function(){},r.onTrainEnd=function(m){h.__stopTrainingResolve&&(h.__stopTrainingResolve(),h.__stopTrainingResolve=null),i(m)},this.isPrepared||this.prepare(),o=this.getLabels().length,uW.util.assert(o===this.numClasses,function(){return"Can not train, has "+o+" labels and "+h.numClasses+" classes"}),a=this.truncatedModel.outputs[0].shape.slice(1),s=Kt.util.sizeFromShape(a),this.seed?u=Kt.initializers.varianceScaling({seed:3.14}):u=Kt.initializers.varianceScaling({}),this.trainingModel=Kt.sequential({layers:[Kt.layers.dense({inputShape:[s],units:e.denseUnits,activation:"relu",kernelInitializer:u,useBias:!0}),Kt.layers.dense({kernelInitializer:u,useBias:!1,activation:"softmax",units:this.numClasses})]}),l=Kt.train.adam(e.learningRate),this.trainingModel.compile({optimizer:l,loss:"categoricalCrossentropy",metrics:["accuracy"]}),!(e.batchSize>0))throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction");return c=this.trainDataset.batch(e.batchSize),p=this.validationDataset.batch(e.batchSize),[4,this.trainingModel.fitDataset(c,{epochs:e.epochs,validationData:p,callbacks:r})];case 1:return d.sent(),f=Kt.sequential(),f.add(this.truncatedModel),f.add(this.trainingModel),this.model=f,l.dispose(),[2,this.model]}})})},n.prototype.prepareDataset=function(){for(var e=0;e<this.numClasses;e++)this.examples[e]=[]},n.prototype.setLabel=function(e,r){this._metadata.labels[e]=r},n.prototype.setLabels=function(e){this._metadata.labels=e,this.prepareDataset()},n.prototype.getLabel=function(e){return this._metadata.labels[e]},n.prototype.getLabels=function(){return this._metadata.labels},n.prototype.setName=function(e){this._metadata.modelName=e},n.prototype.getName=function(){return this._metadata.modelName},n.prototype.stopTraining=function(){var e=this,r=new Promise(function(i,o){e.trainingModel.stopTraining=!0,e.__stopTrainingResolve=i});return r},n.prototype.dispose=function(){this.trainingModel.dispose(),t.prototype.dispose.call(this)},n.prototype.calculateAccuracyPerClass=function(){return ii(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,p,x,f,h,d,m,v,g,y,x,b=this;return oi(this,function(w){switch(w.label){case 0:return e=this.validationDataset.mapAsync(function(S){return ii(b,void 0,void 0,function(){return oi(this,function(C){return[2,S.xs]})})}),r=this.validationDataset.mapAsync(function(S){return ii(b,void 0,void 0,function(){return oi(this,function(C){return[2,S.ys]})})}),i=Math.min(r.size,32),o=Math.ceil(r.size/i),a=e.batch(i),s=r.batch(i),[4,a.iterator()];case 1:return u=w.sent(),[4,s.iterator()];case 2:l=w.sent(),c=[],p=[],x=0,w.label=3;case 3:return x<o?[4,u.next()]:[3,7];case 4:return f=w.sent(),h=this.trainingModel.predict(f.value),d=h.argMax(1),c.push(d),[4,l.next()];case 5:m=w.sent(),v=m.value.argMax(1),p.push(v),f.value.dispose(),h.dispose(),m.value.dispose(),w.label=6;case 6:return x++,[3,3];case 7:if(g=Kt.concat(p),y=Kt.concat(c),o!==1)for(x=0;x<c.length;x++)c[x].dispose(),p[x].dispose();return[2,{reference:g,predictions:y}]}})})},n.prototype.setSeed=function(e){this.seed=cW(e)},n}(NA.CustomMobileNet);_s.TeachableMobileNet=IA;function dW(t,n){return ii(this,void 0,void 0,function(){var e;return oi(this,function(r){switch(r.label){case 0:return[4,NA.loadTruncatedMobileNet(n)];case 1:return e=r.sent(),[2,new IA(e,t)]}})})}_s.createTeachable=dW;var Eh={};function op(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?op=function(e){return typeof e}:op=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function t1(t,n,e){var r=e.value;if(typeof r!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(op(r)));var i=!1;return{configurable:!0,get:function(){if(i||this===t.prototype||this.hasOwnProperty(n)||typeof r!="function")return r;var a=r.bind(this);return i=!0,Object.defineProperty(this,n,{configurable:!0,get:function(){return a},set:function(u){r=u,delete this[n]}}),i=!1,a},set:function(a){r=a}}}function AA(t){var n;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?n=Reflect.ownKeys(t.prototype):(n=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t.prototype)))),n.forEach(function(e){if(e!=="constructor"){var r=Object.getOwnPropertyDescriptor(t.prototype,e);typeof r.value=="function"&&Object.defineProperty(t.prototype,e,t1(t,e,r))}}),t}function mW(){return arguments.length===1?AA.apply(void 0,arguments):t1.apply(void 0,arguments)}const gW=Object.freeze(Object.defineProperty({__proto__:null,boundClass:AA,boundMethod:t1,default:mW},Symbol.toStringTag,{value:"Module"})),vW=Dg(gW);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Fi=gt&&gt.__decorate||function(t,n,e,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(n,e,o):a(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},yW=gt&&gt.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(p){a(p)}}function u(c){try{l(r.throw(c))}catch(p){a(p)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},xW=gt&&gt.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.Webcam=void 0;var Mi=vW,bW=kr,Fd={facingMode:"user",frameRate:24},wW=function(t){return t.facingMode=t.facingMode||Fd.facingMode,t.frameRate=t.frameRate||Fd.frameRate,t.aspectRatio=t.aspectRatio||Fd.aspectRatio,t},CW=function(){function t(n,e,r){n===void 0&&(n=400),e===void 0&&(e=400),r===void 0&&(r=!1),this.width=n,this.height=e,this.flip=r}return t.prototype.getWebcam=function(n){if(n===void 0&&(n={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");n.width=640;var e=wW(n),r=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:e}).then(function(i){return r.srcObject=i,r.addEventListener("loadedmetadata",function(o){var a=r.videoWidth,s=r.videoHeight;r.width=a,r.height=s}),r},function(){return Promise.reject("Could not open your camera. You may have denied access.")})},t.prototype.setup=function(n){return n===void 0&&(n={}),yW(this,void 0,void 0,function(){var e;return xW(this,function(r){switch(r.label){case 0:return this.webcam?[3,2]:(e=this,[4,this.getWebcam(n)]);case 1:e.webcam=r.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),r.label=2;case 2:return[2]}})})},t.prototype.play=function(){var n=this.webcam.play();return n},t.prototype.pause=function(){this.webcam.pause()},t.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},t.prototype.update=function(){this.renderCameraToCanvas()},t.prototype.stopStreamedVideo=function(n){var e=n.srcObject,r=e.getTracks();r.forEach(function(i){i.stop()}),n.srcObject=null},t.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var n=this.canvas.getContext("2d");if(this.webcam.videoWidth!==0){var e=bW.cropTo(this.webcam,this.width,this.flip);n.drawImage(e,0,0)}}},Fi([Mi.default],t.prototype,"getWebcam",null),Fi([Mi.default],t.prototype,"setup",null),Fi([Mi.default],t.prototype,"play",null),Fi([Mi.default],t.prototype,"pause",null),Fi([Mi.default],t.prototype,"stop",null),Fi([Mi.default],t.prototype,"update",null),Fi([Mi.default],t.prototype,"stopStreamedVideo",null),Fi([Mi.default],t.prototype,"renderCameraToCanvas",null),t}();Eh.Webcam=CW;(function(t){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(t,"__esModule",{value:!0});var n=zv;Object.defineProperty(t,"IMAGE_SIZE",{enumerable:!0,get:function(){return n.IMAGE_SIZE}}),Object.defineProperty(t,"CustomMobileNet",{enumerable:!0,get:function(){return n.CustomMobileNet}}),Object.defineProperty(t,"load",{enumerable:!0,get:function(){return n.load}}),Object.defineProperty(t,"loadFromFiles",{enumerable:!0,get:function(){return n.loadFromFiles}}),Object.defineProperty(t,"loadTruncatedMobileNet",{enumerable:!0,get:function(){return n.loadTruncatedMobileNet}});var e=_s;Object.defineProperty(t,"TeachableMobileNet",{enumerable:!0,get:function(){return e.TeachableMobileNet}}),Object.defineProperty(t,"createTeachable",{enumerable:!0,get:function(){return e.createTeachable}});var r=Eh;Object.defineProperty(t,"Webcam",{enumerable:!0,get:function(){return r.Webcam}});var i=Ql;Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}})})(N_);P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.h2`
  font-size: 20px;
  font-style: normal;
  font-weight: 600;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 20px 0 0;
`;P.p`
  font-size: 15px;
  font-style: normal;
  font-weight: 500;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 10px 0;
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 20px 100px;
  color: var(--black);
  text-decoration: none;
  justify-content: center;
  display: flex;
  flex-direction: column;
`;P.button`
  width: 100%;
  height: 40px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active{
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.input`
  margin: 10px 0;
`;P.div`
  width: 100vw;
  margin-top: 50px;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999;
`;const SW="/assets/mockup-nVL9uKxu.svg",kW="/assets/book-aeo9LstN.svg",EW=P.div`
  width: 100%;
  display: flex;
  background-color: var(--primary);
  flex-direction: column;
  position: relative;
  min-height: 100vh;
`,NW=P.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: radial-gradient(circle, #eb8b1637 10%, rgba(255,255,255,0) 70%);
  pointer-events: none; 
`,IW=P.div`
  width: 100%;
  position: relative;
  top: 0;
  left: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 10vw;
  box-sizing: border-box;

  @media screen and (max-width: 768px) {
    height: 7rem;
  }

  @media screen and (max-width: 428px) {
  justify-content: center;
  //tirar height na versao final
  height: 2rem;
  }
`,AW=P.img`
  width: 14vw;
  height: auto;
  object-fit: cover;
  object-position: center;
  max-height: 14vh;
  margin: 4vh 0 0;

  @media screen and (max-width: 768px) {
    width: 12rem;
    height: 8rem;
  }

  @media screen and (max-width: 428px) {
    display: none;
    height: 0;
  }
`,RW=P.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: auto 0;
  width: 100%;
  background-color: var(--primary);

  @media screen and (max-width: 768px) {
    flex-direction: column;
  }
`,TW=P.img`
  width: 50vw;
  height: auto;
  z-index: 2;

  @media screen and (max-width: 768px) {
    width: 70vw;
  }
  @media screen and (max-width: 428px) {
    width: 100vw;
    margin-top: 2rem; 
    margin-bottom: 2rem;  
  }
`,DW=P.div`
  margin: auto 0;

  @media screen and (max-width: 768px) {
    margin: auto 10vw;
    text-align: center;
  }
`,OW=P.h1`
  font-size: 2.8vw;
  font-weight: 800;
  color: var(--secondary);
  margin: auto auto auto 10vw;
  font-family: 'Montserrat', sans-serif;
  text-align: end;

  @media screen and (max-width: 768px) {
    text-align: start;
    margin: 0;
    font-size: 1.5rem;
  }
`,_W=P.h2`
  font-size: 1.05vw;
  font-weight: 600;
  color: var(--secondary);
  margin: .5vw auto auto 10vw;
  line-height: 1.9;
  font-family: 'Montserrat', sans-serif;
  text-align: end;

  @media screen and (max-width: 768px) {
    text-align: start;
    margin: 10px 0;
    font-size: .8rem;
  }
`;P.div`
  width: 100%;
  max-width: 180px;
  display: flex;
  justify-content: flex-end;
  flex-direction: column;
  color: var(--secondary);
  padding: .5rem .5rem 0 0;

  &:focus-within{
    background-color: var(--secondary);
    border-radius: 4px 4px 0 0;
    color: var(--primary);
  } 

  @media screen and (max-width: 428px) {
    max-width: 100%;
  }  
`;P.div`
  display: flex;
  justify-content: flex-end;
`;P.input`
  height: 1.5rem; 
  color: var(--secondary);
  border: none;
  background-color: transparent;
  outline: none;  
  z-index:4;

  &::placeholder {
    color: var(--secondary);
  }

  &:focus {
    color: var(--primary);
    &::placeholder {
      color: var(--primary);
    }
  }

  @media screen and (max-width: 768px) {
    width: 9.4rem;
    height: 1rem; 
    font-size: 0.8rem;
  }
  @media screen and (max-width: 428px) {
    width: 100%;
  }
`;P.div`
    position: absolute;
    top: 8.5vh;
    max-height: 75px;
    width: 100%;
    max-width: 188px;
    overflow-y: auto;
    background-color: var(--secondary);
    border-radius: 0 0 5px 5px;
    z-index: 2;
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);

    &::-webkit-scrollbar {
        width: 3.5px;
    }

    &::-webkit-scrollbar-thumb {
        background-color: var(--primary);
        border-radius: 4px;
    }

    &::-webkit-scrollbar-thumb:hover {
        background-color: var(--primary-light); 
    }

    @media screen and (max-width: 428px) {
      max-width: 80%;
      top: 10vh;
    }
`;P.div`
  z-index: 1;
  padding: 10px;
  color: var(--primary);
  background-color: transparent;
  font-weight: 600;
  box-sizing: border-box;
  cursor: pointer;
  font-size: 0.9rem;
  &:active {
    background-color: var(--light-secondary);
  }
`;const zW=P.button`
  width: 25rem;
  height: 3vw;
  font-family: Raleway;
  font-size: 1vw;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  border-radius: 4px;
  color: var(--white);
  background-color: var(--secondary);
  margin: 2vh 0;
  float: right;

  &:active {
    color: var(--white);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }

  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));

  @media screen and (max-width: 768px) {
    //voltar para 12rem
    width: 16rem;
    height: 2.5rem;
    font-size: .8rem;
  }

  @media screen and (max-width: 428px) {
    width: 100%;
  }
`;P.div`
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999;
`;function FW(){return yt.jsxs(EW,{children:[yt.jsx(NW,{}),yt.jsx(IW,{children:yt.jsx(AW,{rel:"preload",src:kW,alt:""})}),yt.jsxs(RW,{children:[yt.jsxs(DW,{children:[yt.jsx(OW,{children:"Agendamento de horrios e assistente de visagismo com IA."}),yt.jsx(_W,{children:"Modernize sua barbearia com nosso sistema de agendamento e assistente de visagismo alimentado por inteligncia artificial. Permita-nos simplificar sua gesto de horrios enquanto oferecemos aos seus clientes uma experincia inovadora e personalizada."}),yt.jsx(zW,{children:"Disponvel para cadastro em breve!"})]}),yt.jsx(TW,{src:SW,alt:"Mockup"})]})]})}P.div`
      width: 100%;
      display: flex;
      background-color: var(--primary);
      flex-direction: column;
      position: relative;
      min-height: 100vh;
      margin: auto 0;
`;P.div`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: radial-gradient(circle, #eb8b1637 10%, rgba(255,255,255,0) 70%);
      pointer-events: none; 
      z-index: 0;
`;P.h1`
      font-size: 2.3rem;
      font-weight: 800;
      color: var(--secondary);
      font-family: 'Montserrat', sans-serif;
      text-align: center;
      z-index: 1;
      margin: 0;
      padding: 20px;
`;P.form`
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
`;P.input`
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid var(--secondary);
      border-radius: 5px;
      color: var(--secondary);
      &::placeholder {
            color: var(--secondary);
            opacity: 0.3;
      }
`;P.button`
      margin-top: 20px;
      width: 100%;
      height: 3rem;
      font-family: Raleway;
      font-size: 1rem;
      font-style: normal;
      font-weight: 700;
      line-height: normal;
      border: none;
      border-radius: 4px;
      color: var(--white);
      background-color: var(--secondary);
      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
      
      &:hover {
            background-color: var(--light-secondary);
      }
      &:active {
            transform: scale(0.95);
      }
`;P.label`
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--secondary);
      align-self: start;
      margin-bottom: 5px;
`;P.h1`
  font-size: 25px;
  font-weight: 700;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.p`
  margin: 0;
  padding: 0;
  color: var(--black);
  line-height: 1.5;
  font-size: 1rem;
  font-weight: 700;
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  margin-top: 100px;
  padding: 20px;
  color: var(--black);
`;P.button`
  width: 100%;
  font-size: 18px;
  font-weight: 700;
  border: none;
  color: var(--black);
  background-color: var(--white);
  border-bottom: 1px solid var(--light-gray);
  box-sizing: border-box;
  text-align: left;
  padding: 10px;
  display: grid;
  grid-template-columns: 5fr 1fr;
  &:active {
    border-left: 5px solid var(--primary);
    border-right: 5px solid transparent;
    background-color: var(--secondary-light-gray);
    transform: scale(0.95);
  }
`;P.button`
  background-color: var(--primary);
  color: var(--black);
  border: none;
  padding: .5rem;
  border-radius: .5rem;
  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
`;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
  padding:20px;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif; line-height: 1.125em; 
  width: 100%;
  max-width:350px;
`;P.button`
  background-color: var(--primary);
  color: var(--black);
  border: none;
  padding: .5rem;
  border-radius: .5rem;
  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
  font-weight: 700;
  width: 100%;
  &:active {
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
`;P.div`
  width: 100svw;
  height: 100svh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;var Qe=function(){return Qe=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Qe.apply(this,arguments)};function MW(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}function Bn(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,o;r<i;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return t.concat(o||Array.prototype.slice.call(n))}var Qr=function(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},LW={k:1e3,m:1e6,b:1e9},PW=function(t,n){n===void 0&&(n=".");var e=new RegExp("(\\d+(".concat(Qr(n),"\\d*)?)([kmb])$"),"i"),r=t.match(e);if(r){var i=r[1],o=r[3],a=LW[o.toLowerCase()];return Number(i.replace(n,"."))*a}},BW=function(t,n){n===void 0&&(n=",");var e=new RegExp(Qr(n),"g");return t.replace(e,"")},VW=function(t,n){var e=Qr(n.join("")),r=new RegExp("[^\\d".concat(e,"]"),"gi");return t.replace(r,"")},Md=function(t){var n=t.value,e=t.groupSeparator,r=e===void 0?",":e,i=t.decimalSeparator,o=i===void 0?".":i,a=t.allowDecimals,s=a===void 0?!0:a,u=t.decimalsLimit,l=u===void 0?2:u,c=t.allowNegativeValue,p=c===void 0?!0:c,f=t.disableAbbreviations,h=f===void 0?!1:f,d=t.prefix,m=d===void 0?"":d,v=t.transformRawValue,g=v===void 0?function($){return $}:v,y=g(n);if(y==="-")return y;var x=h?[]:["k","m","b"],b=new RegExp("((^|\\D)-\\d)|(-".concat(Qr(m),")")),w=b.test(y),S=RegExp("(\\d+)-?".concat(Qr(m))).exec(n)||[],C=S[0],k=S[1],E=m?C?y.replace(C,"").concat(k):y.replace(m,""):y,N=BW(E,r),T=VW(N,Bn([r,o],x,!0)),A=T;if(!h){if(x.some(function($){return $===T.toLowerCase().replace(o,"")}))return"";var _=PW(T,o);_&&(A=String(_))}var M=w&&p?"-":"";if(o&&A.includes(o)){var W=T.split(o),L=W[0],U=W[1],O=l&&U?U.slice(0,l):U,V=s?"".concat(o).concat(O):"";return"".concat(M).concat(L).concat(V)}return"".concat(M).concat(A)},WW=function(t,n,e){if(e!==void 0&&t.length>1){if(e===0)return t.replace(n,"");if(t.includes(n)){var r=t.split(n),i=r[0],o=r[1];if(o.length===e)return t;if(o.length>e)return"".concat(i).concat(n).concat(o.slice(0,e))}var a=t.length>e?new RegExp("(\\d+)(\\d{".concat(e,"})")):new RegExp("(\\d)(\\d+)"),s=t.match(a);if(s){var i=s[1],o=s[2];return"".concat(i).concat(n).concat(o)}}return t},RA=function(t,n){var e=n.groupSeparator,r=e===void 0?",":e,i=n.decimalSeparator,o=i===void 0?".":i,a=new RegExp("\\d([^".concat(Qr(r)).concat(Qr(o),"0-9]+)")),s=t.match(a);return s?s[1]:void 0},hu=function(t){var n=t.value,e=t.decimalSeparator,r=t.intlConfig,i=t.decimalScale,o=t.prefix,a=o===void 0?"":o,s=t.suffix,u=s===void 0?"":s;if(n===""||n===void 0)return"";if(n==="-")return"-";var l=new RegExp("^\\d?-".concat(a?"".concat(Qr(a),"?"):"","\\d")).test(n),c=e!=="."?$W(n,e,l):n;e&&e!=="-"&&c.startsWith(e)&&(c="0"+c);var p={minimumFractionDigits:i||0,maximumFractionDigits:20},f=r?new Intl.NumberFormat(r.locale,r.currency?Qe(Qe({},p),{style:"currency",currency:r.currency}):p):new Intl.NumberFormat(void 0,p),h=f.formatToParts(Number(c)),d=UW(h,t),m=RA(d,Qe({},t)),v=n.slice(-1)===e?e:"",g=c.match(RegExp("\\d+\\.(\\d+)"))||[],y=g[1];return i===void 0&&y&&e&&(d.includes(e)?d=d.replace(RegExp("(\\d+)(".concat(Qr(e),")(\\d+)"),"g"),"$1$2".concat(y)):m&&!u?d=d.replace(m,"".concat(e).concat(y).concat(m)):d="".concat(d).concat(e).concat(y)),u&&v?"".concat(d).concat(v).concat(u):m&&v?d.replace(m,"".concat(v).concat(m)):m&&u?d.replace(m,"".concat(v).concat(u)):[d,v,u].join("")},$W=function(t,n,e){var r=t;return n&&n!=="."&&(r=r.replace(RegExp(Qr(n),"g"),"."),e&&n==="-"&&(r="-".concat(r.slice(1)))),r},UW=function(t,n){var e=n.prefix,r=n.groupSeparator,i=n.decimalSeparator,o=n.decimalScale,a=n.disableGroupSeparators,s=a===void 0?!1:a;return t.reduce(function(u,l,c){var p=l.type,f=l.value;return c===0&&e?p==="minusSign"?[f,e]:p==="currency"?Bn(Bn([],u,!0),[e],!1):[e,f]:p==="currency"?e?u:Bn(Bn([],u,!0),[f],!1):p==="group"?s?u:Bn(Bn([],u,!0),[r!==void 0?r:f],!1):p==="decimal"?o!==void 0&&o===0?u:Bn(Bn([],u,!0),[i!==void 0?i:f],!1):p==="fraction"?Bn(Bn([],u,!0),[o!==void 0?f.slice(0,o):f],!1):Bn(Bn([],u,!0),[f],!1)},[""]).join("")},jW={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},HW=function(t){var n=t||{},e=n.locale,r=n.currency,i=e?new Intl.NumberFormat(e,r?{currency:r,style:"currency"}:void 0):new Intl.NumberFormat;return i.formatToParts(1000.1).reduce(function(o,a,s){return a.type==="currency"?s===0?Qe(Qe({},o),{currencySymbol:a.value,prefix:a.value}):Qe(Qe({},o),{currencySymbol:a.value,suffix:a.value}):a.type==="group"?Qe(Qe({},o),{groupSeparator:a.value}):a.type==="decimal"?Qe(Qe({},o),{decimalSeparator:a.value}):o},jW)},qb=function(t){return RegExp(/\d/,"gi").test(t)},GW=function(t,n,e){if(n===void 0&&(n="."),e===void 0||t===""||t===void 0)return t;if(!t.match(/\d/g))return"";var r=t.split(n),i=r[0],o=r[1];if(e===0)return i;var a=o||"";if(a.length<e)for(;a.length<e;)a+="0";else a=a.slice(0,e);return"".concat(i).concat(n).concat(a)},qW=function(t){var n=t.selectionStart,e=t.value,r=t.lastKeyStroke,i=t.stateValue,o=t.groupSeparator,a=n,s=e;if(i&&a){var u=e.split("");return r==="Backspace"&&i[a]===o&&(u.splice(a-1,1),a-=1),r==="Delete"&&i[a]===o&&(u.splice(a,1),a+=1),s=u.join(""),{modifiedValue:s,cursorPosition:a}}return{modifiedValue:s,cursorPosition:n}},KW=ie.forwardRef(function(t,n){var e=t.allowDecimals,r=e===void 0?!0:e,i=t.allowNegativeValue,o=i===void 0?!0:i,a=t.id,s=t.name,u=t.className,l=t.customInput,c=t.decimalsLimit,p=t.defaultValue,f=t.disabled,h=f===void 0?!1:f,d=t.maxLength,m=t.value,v=t.onValueChange,g=t.fixedDecimalLength,y=t.placeholder,x=t.decimalScale,b=t.prefix,w=t.suffix,S=t.intlConfig,C=t.step,k=t.min,E=t.max,N=t.disableGroupSeparators,T=N===void 0?!1:N,A=t.disableAbbreviations,_=A===void 0?!1:A,M=t.decimalSeparator,W=t.groupSeparator,L=t.onChange,U=t.onFocus,O=t.onBlur,V=t.onKeyDown,$=t.onKeyUp,K=t.transformRawValue,Q=t.formatValueOnBlur,ee=Q===void 0?!0:Q,ue=MW(t,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(M&&qb(M))throw new Error("decimalSeparator cannot be a number");if(W&&qb(W))throw new Error("groupSeparator cannot be a number");var le=ie.useMemo(function(){return HW(S)},[S]),te=M||le.decimalSeparator||"",de=W||le.groupSeparator||"";if(te&&de&&te===de&&T===!1)throw new Error("decimalSeparator cannot be the same as groupSeparator");var ge={decimalSeparator:te,groupSeparator:de,disableGroupSeparators:T,intlConfig:S,prefix:b||le.prefix,suffix:w},ve={decimalSeparator:te,groupSeparator:de,allowDecimals:r,decimalsLimit:c||g||2,allowNegativeValue:o,disableAbbreviations:_,prefix:b||le.prefix,transformRawValue:K},$e=ie.useState(function(){return p!=null?hu(Qe(Qe({},ge),{decimalScale:x,value:String(p)})):m!=null?hu(Qe(Qe({},ge),{decimalScale:x,value:String(m)})):""}),he=$e[0],Ce=$e[1],_e=ie.useState(!1),ke=_e[0],Xe=_e[1],Be=ie.useState(0),Dt=Be[0],cn=Be[1],Pt=ie.useState(0),tn=Pt[0],Bt=Pt[1],pn=ie.useState(null),Ae=pn[0],fn=pn[1],Ye=ie.useRef(null);ie.useImperativeHandle(n,function(){return Ye.current});var Ct=function(nt,Vt){Xe(!0);var Ot=qW({selectionStart:Vt,value:nt,lastKeyStroke:Ae,stateValue:he,groupSeparator:de}),Cn=Ot.modifiedValue,Pn=Ot.cursorPosition,or=Md(Qe({value:Cn},ve));if(!(d&&or.replace(/-/g,"").length>d)){if(or===""||or==="-"||or===te){v&&v(void 0,s,{float:null,formatted:"",value:""}),Ce(or),cn(1);return}var Zl=te?or.replace(te,"."):or,TA=parseFloat(Zl),Nh=hu(Qe({value:or},ge));if(Pn!=null){var Jl=Pn+(Nh.length-nt.length);Jl=Jl<=0?b?b.length:0:Jl,cn(Jl),Bt(tn+1)}if(Ce(Nh),v){var DA={float:TA,formatted:Nh,value:or};v(or,s,DA)}}},Ln=function(nt){var Vt=nt.target,Ot=Vt.value,Cn=Vt.selectionStart;Ct(Ot,Cn),L&&L(nt)},gr=function(nt){return U&&U(nt),he?he.length:0},St=function(nt){var Vt=nt.target.value,Ot=Md(Qe({value:Vt},ve));if(Ot==="-"||Ot===te||!Ot){Ce(""),O&&O(nt);return}var Cn=WW(Ot,te,g),Pn=GW(Cn,te,x!==void 0?x:g),or=parseFloat(Pn.replace(te,".")),Zl=hu(Qe(Qe({},ge),{value:Pn}));v&&ee&&v(Pn,s,{float:or,formatted:Zl,value:Pn}),Ce(Zl),O&&O(nt)},ti=function(nt){var Vt=nt.key;if(fn(Vt),C&&(Vt==="ArrowUp"||Vt==="ArrowDown")){nt.preventDefault(),cn(he.length);var Ot=parseFloat(m!=null?String(m).replace(te,"."):Md(Qe({value:he},ve)))||0,Cn=Vt==="ArrowUp"?Ot+C:Ot-C;if(k!==void 0&&Cn<Number(k)||E!==void 0&&Cn>Number(E))return;var Pn=String(C).includes(".")?Number(String(C).split(".")[1].length):void 0;Ct(String(Pn?Cn.toFixed(Pn):Cn).replace(".",te))}V&&V(nt)},ir=function(nt){var Vt=nt.key,Ot=nt.currentTarget.selectionStart;if(Vt!=="ArrowUp"&&Vt!=="ArrowDown"&&he!=="-"){var Cn=RA(he,{groupSeparator:de,decimalSeparator:te});if(Cn&&Ot&&Ot>he.length-Cn.length&&Ye.current){var Pn=he.length-Cn.length;Ye.current.setSelectionRange(Pn,Pn)}}$&&$(nt)};ie.useEffect(function(){m==null&&p==null&&Ce("")},[p,m]),ie.useEffect(function(){ke&&he!=="-"&&Ye.current&&document.activeElement===Ye.current&&Ye.current.setSelectionRange(Dt,Dt)},[he,Dt,Ye,ke,tn]);var Qs=function(){return m!=null&&he!=="-"&&(!te||he!==te)?hu(Qe(Qe({},ge),{decimalScale:ke?void 0:x,value:String(m)})):he},Ia=Qe({type:"text",inputMode:"decimal",id:a,name:s,className:u,onChange:Ln,onBlur:St,onFocus:gr,onKeyDown:ti,onKeyUp:ir,placeholder:y,disabled:h,value:Qs(),ref:Ye},ue);if(l){var Zs=l;return bi.createElement(Zs,Qe({},Ia))}return bi.createElement("input",Qe({},Ia))});KW.displayName="CurrencyInput";P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.h2`
  font-size: 20px;
  font-style: normal;
  color: var(--black);
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 0;
  background-color: var(--white);
`;P.div`
  align-items: center;
  max-width: 100%;
  padding: 0 1.5rem;
`;P.input`
  width: 100%;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 16px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: 0.5px solid var(--light-gray);
  border-radius: 4px;
  color: var(--secondary-light-black);
  background-color: var(--secondary-light-gray);
  padding: 10px;
  margin-bottom: 10px;
  box-sizing: border-box;
`;P.button`
  width: 100%;
  height: 40px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  margin-top: 10px;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  box-sizing: border-box;
  justify-content: center;
  &:active{
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
  padding:20px;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif; line-height: 1.125em; 
  width: 100%;
  max-width:350px;
`;P.p`
  font-size: 18px;
  font-style: normal;
  font-weight: 500;
  line-height: 1.5;
  color: var(--secondary-light-black);
  padding: 10px;
  margin: 0;  
`;P.div`
  width: 100vw;
  height: 100vh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.h2`
  font-size: 20px;
  font-style: normal;
  color: var(--black);
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 0;
  background-color: var(--white);
`;P.div`
  align-items: center;
  max-width: 100%;
  padding: 0 1.5rem;
`;P.input`
  width: 100%;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 16px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: 0.5px solid var(--light-gray);
  border-radius: 4px;
  color: var(--secondary-light-black);
  background-color: var(--secondary-light-gray);
  padding: 10px;
  margin-bottom: 10px;
  box-sizing: border-box;
`;P.button`
  width: 100%;
  height: 40px;
  font-family: Raleway;
  font-size: 15px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  border: none;
  margin-top: 10px;
  border-radius: 4px;
  color: var(--black);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  box-sizing: border-box;
  justify-content: center;
  &:active{
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
`;P.div`
  color: var(--black);
  text-align: center;
  background-color: var(--white);
  border-radius: 5px;
  padding:20px;
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif; line-height: 1.125em; 
  width: 100%;
  max-width:350px;
`;P.p`
  font-size: 18px;
  font-style: normal;
  font-weight: 500;
  line-height: 1.5;
  color: var(--secondary-light-black);
  padding: 10px;
  margin: 0;  
`;P.div`
  width: 100%;
  max-width: 425px;
  background-color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  position: fixed;
  top: 0;
  filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.20));
`;P.h1`
  font-size: 25px;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
  text-align: center;
  color: var(--black);
  margin: 0;
`;P.p`
  font-size: 18px;
  font-style: normal;
  font-weight: 500;
  line-height: 1.5;
  color: var(--secondary-light-black);
  padding: 0;
  margin: 0;
`;P.button`
  width: 35px;
  height: 35px;
  font-size: 18px;
  border: none;
  font-weight: 700;
  border-radius: 50%;
  color: var(--secondary);
  background-color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  &:active {
    color: var(--primary);
    background-color: var(--light-secondary);
    transform: scale(0.95);
  }
  filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25));
`;P.div`
  padding: 100px 20px 100px;
  color: var(--black);
  text-decoration: none;
  text-align: center;
  justify-content: center;
  display: flex;
  flex-direction: column;
`;P.div`
  text-align: left;
  max-width: 100%;
  border-radius: 5px;
  background: var(--white);
  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.20);
  padding: 20px;
  margin: 0 0 20px 0;
  box-sizing: border-box;
`;P.div`
  width: 100vw;
  height: 100vh;
  max-width: 425px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 999; 
`;function XW(){return yt.jsx(QD,{children:yt.jsxs(XD,{children:[yt.jsx(Dm,{path:"/",element:yt.jsx(YW,{})}),yt.jsx(Dm,{path:"/LandingPage",element:yt.jsx(FW,{})})]})})}const YW=()=>{const t=_D();return ie.useEffect(()=>{const n=setTimeout(()=>{t("/LandingPage")},1800);return()=>clearTimeout(n)},[t]),yt.jsxs(t_,{children:[yt.jsx("img",{src:ZD,alt:"",style:{width:"100%",display:"flex",alignItems:"center",margin:"auto",opacity:.8,paddingTop:"20vh",animation:"fadeInUp 1.5s ease-in-out forwards"}}),yt.jsx("style",{children:`
          @keyframes fadeInUp {
            from {
              opacity: 0;
              transform: translateY(20px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
        `})]})};Ld.createRoot(document.getElementById("root")).render(yt.jsx(bi.StrictMode,{children:yt.jsx(XW,{})}));
